<?php
declare(strict_types=1);
namespace Nebule\Library;



// ========================================================================================
//   000_init.php
//   020250302131311
//   61fb0d11b686a7e9b1bfe0be13b86e25561b5e5a9b4649883e96400280710448.sha2.256

// ----------------------------------------------------------------------------------------
$nebuleName = 'library';
$nebuleSurname = 'nebule/library';
$nebuleDescription = 'Library of functions for nebule in php object-oriented.';
$nebuleAuthor = 'Projet nebule';
$nebuleLibVersion = '020250302';
$nebuleLicence = 'GNU GPL 2010-2025';
$nebuleWebsite = 'www.nebule.org';
// ----------------------------------------------------------------------------------------



/*
|------------------------------------------------------------------------------------------------------------------------------------------------------
| /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING ///
|------------------------------------------------------------------------------------------------------------------------------------------------------
|
|  [FR] Toute modification de ce code entraînera une modification de son empreinte et entraînera donc automatiquement son invalidation !
|  [EN] Any modification of this code will result in a modification of its hash digest and will therefore automatically result in its invalidation!
|  [ES] Cualquier cambio en el código causarán un cambio en su presencia y por lo tanto lugar automáticamente a su anulación!
|  [UA] Будь-яка модифікація цього коду призведе до зміни його відбитку пальця і, відповідно, автоматично призведе до його анулювання!
|  [IT] Ogni modifica di questo codice comporterà una modifica della sua impronta e quindi ne causerà automaticamente l'invalidazione!
|  [DE] Jede Änderung dieses Codes führt zu einer Änderung seines Fingerabdrucks und führt daher automatisch zu seiner Ungültigkeit!
|  [PL] Każda modyfikacja tego kodu spowoduje zmianę jego odcisku i automatycznie doprowadzi do jego unieważnienia!
|
|------------------------------------------------------------------------------------------------------------------------------------------------------
*/



/*
 * This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public
 *   License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any
 *   later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied
 *   warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 *   details.
 *
 * You should have received a copy of the GNU General Public License along with this program. See on the end of file.
 *   If not, see https://www.gnu.org/licenses/.
 */



// Initialisation des logs de la librairie.
closelog();
if (!isset($loggerSessionID))
    $loggerSessionID = '000000';
if (!isset($metrologyStartTime))
    $metrologyStartTime = 0;
openlog($nebuleName . '/' . $loggerSessionID, LOG_NDELAY, LOG_USER);
syslog(LOG_INFO, 'LogT=' . sprintf('%01.6f',microtime(true) - $metrologyStartTime) . ' LogL="info" LogI="a77c98f7" LogF="include nebule library" LogM="Reading nebule library"');



// Default application params.
$applicationName = 'defolt';
$applicationSurname = 'nebule/defolt';
$applicationDescription = 'Default web page for servers without interactive application.';
$applicationVersion = $nebuleLibVersion;
$applicationLicence = $nebuleLicence;
$applicationAuthor = $nebuleAuthor;
$applicationWebsite = $nebuleWebsite;



// ========================================================================================
//   001_nebule.php
//   020250222113941
//   94841e4bde7c3dd901f084e409b209782e423107a3e496ad35695525277100b2.sha2.256

/**
 * The nebule core library.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class nebule
{
    // Définition des constantes.
    const NEBULE_LICENCE_NAME = 'nebule';
    const NEBULE_LICENCE_LINK = 'http://www.nebule.org/';
    const NEBULE_LICENCE_DATE = '2010-2025';
    const NEBULE_FUNCTION_VERSION = '020241123';
    const NEBULE_ENVIRONMENT_FILE = 'c'; // Into folder /
    const NEBULE_BOOTSTRAP_FILE = 'index.php'; // Into folder /
    const NEBULE_LOCAL_ENTITY_FILE = 'e'; // Into folder /
    const NEBULE_LOCAL_OBJECTS_FOLDER = 'o'; // Into folder /
    const NEBULE_LOCAL_LINKS_FOLDER = 'l'; // Into folder /
    const NEBULE_LOCAL_HISTORY_FILE = 'f'; // Into folder /l/
    const PUPPETMASTER_URL = 'http://puppetmaster.nebule.org';
    const SECURITY_MASTER_URL = 'http://security.master.nebule.org';
    const CODE_MASTER_URL = 'http://code.master.nebule.org';

    const SESSION_SAVED_VARS = array(
        '_authoritiesInstance',
        '_entitiesInstance',
        '_recoveryInstance',
        '_cacheInstance',
        '_sessionInstance',
        '_ticketingInstance',
        '_cryptoInstance',
    );

    private bool $_loadingStatus = false;
    private ?nebule $_nebuleInstance = null;
    private ?Metrology $_metrologyInstance = null;
    private ?Configuration $_configurationInstance = null;
    private ?Rescue $_rescueInstance = null;
    private ?Authorities $_authoritiesInstance = null;
    private ?Entities $_entitiesInstance = null;
    private ?Recovery $_recoveryInstance = null;
    private ?Cache $_cacheInstance = null;
    private ?Session $_sessionInstance = null;
    private ?Ticketing $_ticketingInstance = null;
    private ?ioInterface $_ioInstance = null;
    private ?CryptoInterface $_cryptoInstance = null;
    private ?SocialInterface $_socialInstance = null;



    public function __construct()
    {
        global $nebuleInstance ,$metrologyStartTime;
        $this->_nebuleInstance = $this;
        $nebuleInstance = $this;
        syslog(LOG_INFO, 'LogT=' . sprintf('%01.6f', microtime(true) - $metrologyStartTime) . ' LogL="info" LogI="1452ed72" LogF="include nebule library" LogM="Loading nebule library"');

        $this->_initialisation();
    }

    /*public function __destruct()
    {
        $this->_cacheInstance->saveCacheOnSessionBuffer();
        return true;
    }*/

    public function __toString()
    {
        return self::NEBULE_LICENCE_NAME;
    }

    public function __sleep()
    {
        return self::SESSION_SAVED_VARS;
    }

    public function __wakeup()
    {
        global $nebuleInstance ,$metrologyStartTime;
        $this->_nebuleInstance = $this;
        $nebuleInstance = $this;
        syslog(LOG_INFO, 'LogT=' . sprintf('%01.6f', microtime(true) - $metrologyStartTime) . ' LogL="info" LogI="2d9358d5" LogF="include nebule library" LogM="Reloading nebule library"');

        $this->_initialisation();
    }

    private function _initialisation(): void
    {
        $this->_initMetrology();
        $this->_metrologyInstance->addLog('first step init nebule instance', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '64154189');
        $this->_initConfiguration();
        $this->_initRescue();
        $this->_initSession();
        $this->_initCrypto();
        $this->_initIO();
        $this->_initCache();
        $this->_initSocial();
        $this->_initAuthorities();
        $this->_initRecovery();
        $this->_initEntities();
        $this->_initTicketing();
        $this->_setEnvironmentInstances();
        $this->_initAllInstances();

        $this->_configurationInstance->setPermitOptionsByLinks(true);
        $this->_configurationInstance->flushCache();

        $this->_getSubordinationEntity();
        $this->_checkWriteableIO();
        $this->_findCurrentObjet();
        $this->_findCurrentGroup();
        $this->_findCurrentConversation();
        $this->_findCurrentCurrency();
        $this->_findCurrentTokenPool();
        $this->_findCurrentToken();

        $this->_loadingStatus = true;
        $this->_metrologyInstance->addLog('end init nebule instance', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '474676ed');
    }

    private function _initMetrology(): void {
        $this->_metrologyInstance = new Metrology($this);
    }

    private function _initConfiguration(): void {
        $this->_configurationInstance = new Configuration($this);
    }

    private function _initRescue(): void {
        $this->_rescueInstance = new Rescue($this);
    }

    private function _initSession(): void {
        if ($this->_sessionInstance === null)
            $this->_sessionInstance = new Session($this);
    }

    private function _initCache(): void {
        if ($this->_cacheInstance === null)
            $this->_cacheInstance = new Cache($this);
    }

    private function _initIO(): void {
        $this->_ioInstance = new io($this);
    }

    private function _initCrypto(): void {
        if ($this->_cryptoInstance === null)
            $this->_cryptoInstance = new Crypto($this);
    }

    private function _initSocial(): void {
        $this->_socialInstance = new Social($this);
    }

    private function _initAuthorities(): void {
        if ($this->_authoritiesInstance === null)
            $this->_authoritiesInstance = new Authorities($this);
    }

    private function _initRecovery(): void {
        if ($this->_recoveryInstance === null)
            $this->_recoveryInstance = new Recovery($this);
    }

    private function _initEntities(): void {
        if ($this->_entitiesInstance === null)
            $this->_entitiesInstance = new Entities($this);
    }

    private function _initTicketing(): void {
        if ($this->_ticketingInstance === null)
            $this->_ticketingInstance = new Ticketing($this);
    }

    /**
     * Reload all instances in all library components.
     * TODO use vars by address instead for (null) instances.
     */
    private function _setEnvironmentInstances(): void
    {
        $this->_metrologyInstance->setEnvironmentLibrary($this);
        $this->_configurationInstance->setEnvironmentLibrary($this);
        $this->_rescueInstance->setEnvironmentLibrary($this);
        $this->_sessionInstance->setEnvironmentLibrary($this);
        $this->_cryptoInstance->setEnvironmentLibrary($this);
        $this->_ioInstance->setEnvironmentLibrary($this);
        $this->_cacheInstance->setEnvironmentLibrary($this);
        $this->_socialInstance->setEnvironmentLibrary($this);
        $this->_authoritiesInstance->setEnvironmentLibrary($this);
        $this->_entitiesInstance->setEnvironmentLibrary($this);
        $this->_recoveryInstance->setEnvironmentLibrary($this);
        $this->_ticketingInstance->setEnvironmentLibrary($this);
    }

    private function _initAllInstances(): void
    {
        $this->_metrologyInstance->initialisation();
        $this->_configurationInstance->initialisation();
        $this->_rescueInstance->initialisation();
        $this->_sessionInstance->initialisation();
        $this->_cryptoInstance->initialisation();
        $this->_ioInstance->initialisation();
        $this->_cacheInstance->initialisation();
        $this->_socialInstance->initialisation();
        $this->_authoritiesInstance->initialisation();
        $this->_entitiesInstance->initialisation();
        $this->_recoveryInstance->initialisation();
        $this->_ticketingInstance->initialisation();
    }

    public function getLoadingStatus(): bool
    {
        return $this->_loadingStatus;
    }


    public function getMetrologyInstance(): ?Metrology
    {
        return $this->_metrologyInstance;
    }

    public function getConfigurationInstance(): ?Configuration
    {
        return $this->_configurationInstance;
    }

    public function getRescueInstance(): ?Rescue
    {
        return $this->_rescueInstance;
    }

    public function getAuthoritiesInstance(): ?Authorities
    {
        return $this->_authoritiesInstance;
    }

    public function getEntitiesInstance(): ?Entities
    {
        return $this->_entitiesInstance;
    }

    public function getRecoveryInstance(): ?Recovery
    {
        return $this->_recoveryInstance;
    }

    public function getCacheInstance(): ?Cache
    {
        return $this->_cacheInstance;
    }

    public function getSessionInstance(): ?Session
    {
        return $this->_sessionInstance;
    }

    public function getTicketingInstance(): ?Ticketing
    {
        return $this->_ticketingInstance;
    }

    public function getIoInstance(): ?ioInterface
    {
        return $this->_ioInstance;
    }

    public function getCryptoInstance(): ?CryptoInterface
    {
        return $this->_cryptoInstance;
    }

    public function getSocialInstance(): ?SocialInterface
    {
        return $this->_socialInstance;
    }



    /**
     * Entité de subordination des options de l'entité en cours.
     * Par défaut vide.
     *
     * @var node|null
     */
    private ?node $_subordinationEntity = null;

    /**
     * Extrait l'entité de subordination des options si présente.
     *
     * Utilise la fonction getOptionFromEnvironment() pour extraire l'option du fichier d'environnement.
     *
     * @return void
     */
    private function _getSubordinationEntity(): void
    {
        //$this->_subordinationEntity = new Entity($this->_nebuleInstance, (string)Configuration::getOptionFromEnvironmentUntypedStatic('subordinationEntity'));
        $this->_subordinationEntity = new Entity($this->_nebuleInstance, $this->_configurationInstance->getOptionFromEnvironmentAsString('subordinationEntity'));
        $this->_metrologyInstance->addLog('get subordination entity = ' . $this->_subordinationEntity, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '2300b439');
    }

    /**
     * Retourne l'entité de subordination si défini.
     * Retourne une chaine vide sinon.
     *
     * @return node|null
     */
    public function getSubordinationEntity(): ?node
    {
        return $this->_subordinationEntity;
    }

    /**
     * Vérifie que le système d'entrée/sortie par défaut est lecture/écriture.
     * Force les options permitWrite permitWriteObject et permitWriteLink au besoin.
     *
     * @return void
     * @todo ne fonctionne pas correctement mais non bloquant.
     *
     */
    private function _checkWriteableIO(): void
    {
        if ($this->_ioInstance->getMode() == 'RW') {
            if (!$this->_ioInstance->checkObjectsWrite())
                $this->_configurationInstance->lockPermitWriteObject();;
            if (!$this->_ioInstance->checkLinksWrite())
                $this->_configurationInstance->lockPermitWriteLink();;
        } else {
            $this->_configurationInstance->lockPermitWrite();
            $this->_configurationInstance->lockPermitWriteObject();
            $this->_configurationInstance->lockPermitWriteLink();
        }

        if (!$this->_configurationInstance->getOptionAsBoolean('permitWriteObject'))
            $this->_metrologyInstance->addLog('objects ro not rw', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '865076e1');
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWriteLink'))
            $this->_metrologyInstance->addLog('links ro not rw', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'f2e738b1');
    }



    /**
     * Object - Calculate NID for data with hash algo.
     *
     * @param string $data
     * @param string $algo
     * @return string
     */
    public function getNIDfromData(string $data, string $algo = ''): string
    {
        if ($algo == '')
            $algo = $this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm');
        return $this->_cryptoInstance->hash($data, $algo) . '.' . $algo;
    }




    // Gestion des modules.

    /**
     * Liste les modules.
     *
     * @param string $name
     * @return boolean
     * @todo
     */
    public function listModule(string $name): bool
    {
        if ($name == '') {
            return false;
        }

        // ...

        return true;
    }

    /**
     * Charge un module.
     *
     * @param string $name
     * @return boolean|Modules
     * @todo
     */
    public function loadModule(string $name)
    {
        if ($name == '') {
            return false;
        }

        // ...

        $module = new $name;

        return $module;
    }



    private string $_currentObject = '';
    private ?Node $_currentObjectInstance = null;

    private function _findCurrentObjet()
    {
        // Lit et nettoye le contenu de la variable GET.
        $arg_obj = trim(' ' . filter_input(INPUT_GET, References::COMMAND_SELECT_OBJECT, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        $this->_metrologyInstance->addLog('user input ' . References::COMMAND_SELECT_OBJECT . '=' . $arg_obj, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '8eb05394');

        // Si la variable est un objet avec ou sans liens.
        if (Node::checkNID($arg_obj, false, true)
            && ($this->getIoInstance()->checkObjectPresent($arg_obj)
                || $this->getIoInstance()->checkLinkPresent($arg_obj)
            )
        ) {
            // Ecrit l'objet dans la variable.
            $this->_currentObject = $arg_obj;
            $this->_currentObjectInstance =$this->_cacheInstance->newNode($arg_obj);
            // Ecrit l'objet dans la session.
            $this->_sessionInstance->setSessionStore('nebuleSelectedObject', $arg_obj);
        } else {
            // Sinon vérifie si une valeur n'est pas mémorisée dans la session.
            $cache = $this->_sessionInstance->getSessionStore('nebuleSelectedObject');
            // Si il existe une variable de session pour l'objet en cours, la lit.
            if ($cache !== false && $cache != '') {
                $this->_currentObject = $cache;
                $this->_currentObjectInstance =$this->_cacheInstance->newNode($cache);
            } else // Sinon selectionne l'entite courante par défaut.
            {
                $this->_currentObject = $this->_entitiesInstance->getCurrentEntityID();
                $this->_currentObjectInstance =$this->_cacheInstance->newNode($this->_entitiesInstance->getCurrentEntityID());
                $this->_sessionInstance->setSessionStore('nebuleSelectedObject', $this->_entitiesInstance->getCurrentEntityID());
            }
            unset($cache);
        }
        unset($arg_obj);

        $this->_metrologyInstance->addLog('Find current object ' . $this->_currentObject, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '7b4f89ef');
        $this->_currentObjectInstance->getMarkProtected();
    }

    public function getCurrentObject(): string
    {
        return $this->_currentObject;
    }

    public function getCurrentObjectInstance(): ?Node
    {
        return $this->_currentObjectInstance;
    }



    private array $_listEntitiesUnlocked = array();
    private array $_listEntitiesUnlockedInstances = array();

    public function getListEntitiesUnlocked(): array
    {
        return $this->_listEntitiesUnlocked;
    }

    public function getListEntitiesUnlockedInstances(): array
    {
        return $this->_listEntitiesUnlockedInstances;
    }

    public function addListEntitiesUnlocked(Entity $entity): void
    {
        if ($entity->getID() == '0')
            return;
        $eid = $entity->getID();

        $this->_listEntitiesUnlocked[$eid] = $eid;
        $this->_listEntitiesUnlockedInstances[$eid] = $entity;
    }

    public function removeListEntitiesUnlocked(Entity $entity): void
    {
        unset($this->_listEntitiesUnlocked[$entity->getID()]);
        unset($this->_listEntitiesUnlockedInstances[$entity->getID()]);
    }

    public function flushListEntitiesUnlocked(): void
    {
        $this->_listEntitiesUnlocked = array();
        $this->_listEntitiesUnlockedInstances = array();
    }


    private string $_currentGroupID = '';
    private ?Group $_currentGroupInstance = null;

    private function _findCurrentGroup(): void
    {
        if (filter_has_var(INPUT_GET, References::COMMAND_SELECT_GROUP))
            $arg_grp = trim(' ' . filter_input(INPUT_GET, References::COMMAND_SELECT_GROUP, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        else
            $arg_grp = trim(' ' . filter_input(INPUT_POST, References::COMMAND_SELECT_GROUP, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));

        if (Node::checkNID($arg_grp, false, true)
            && ($this->getIoInstance()->checkObjectPresent($arg_grp)
                || $this->getIoInstance()->checkLinkPresent($arg_grp)
                || $arg_grp == '0'
            )
        ) {
            $this->_currentGroupID = $arg_grp;
            $this->_currentGroupInstance = $this->_cacheInstance->newGroup($arg_grp);
            $this->_sessionInstance->setSessionStore('nebuleSelectedGroup', $arg_grp);
        } else {
            $cache = $this->_sessionInstance->getSessionStore('nebuleSelectedGroup');
            if ($cache !== false && $cache != '') {
                $this->_currentGroupID = $cache;
                $this->_currentGroupInstance = $this->_cacheInstance->newGroup($cache);
            } else
            {
                $this->_currentGroupID = '0';
                $this->_currentGroupInstance = $this->_cacheInstance->newGroup('0');
                $this->_sessionInstance->setSessionStore('nebuleSelectedGroup', $this->_currentGroupID);
            }
            unset($cache);
        }
        unset($arg_grp);

        $this->_metrologyInstance->addLog('find current group ' . $this->_currentGroupID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'adca3827');
    }

    public function getCurrentGroupID(): string
    {
        return $this->_currentGroupID;
    }

    public function getCurrentGroupInstance(): ?Group
    {
        return $this->_currentGroupInstance;
    }



    private string $_currentConversationID = '';
    private ?Conversation $_currentConversationInstance = null;

    private function _findCurrentConversation(): void
    {
        if (filter_has_var(INPUT_GET, References::COMMAND_SELECT_CONVERSATION))
            $arg_cvt = trim(' ' . filter_input(INPUT_GET, References::COMMAND_SELECT_CONVERSATION, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        else
            $arg_cvt = trim(' ' . filter_input(INPUT_POST, References::COMMAND_SELECT_CONVERSATION, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));

        if (Node::checkNID($arg_cvt, false, true)
            && ($this->getIoInstance()->checkObjectPresent($arg_cvt)
                || $this->getIoInstance()->checkLinkPresent($arg_cvt)
                || $arg_cvt == '0'
            )
        ) {
            $this->_currentConversationID = $arg_cvt;
            $this->_currentConversationInstance = $this->_cacheInstance->newConversation($arg_cvt);
            $this->_sessionInstance->setSessionStore('nebuleSelectedConversation', $arg_cvt);
        } else {
            $cache = $this->_sessionInstance->getSessionStore('nebuleSelectedConversation');
            if ($cache !== false && $cache != '') {
                $this->_currentConversationID = $cache;
                $this->_currentConversationInstance = $this->_cacheInstance->newConversation($cache);
            } else {
                $this->_currentConversationID = '0';
                $this->_currentConversationInstance = $this->_cacheInstance->newConversation('0');
                $this->_sessionInstance->setSessionStore('nebuleSelectedConversation', $this->_currentConversationID);
            }
            unset($cache);
        }
        unset($arg_cvt);

        $this->_metrologyInstance->addLog('find current conversation ' . $this->_currentConversationID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'adf0b5df');
    }

    public function getCurrentConversationID(): string
    {
        return $this->_currentConversationID;
    }

    public function getCurrentConversationInstance(): ?Conversation
    {
        return $this->_currentConversationInstance;
    }



    private string $_currentCurrencyID = '';
    private ?Currency $_currentCurrencyInstance = null;

    private function _findCurrentCurrency(): void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitCurrency')) {
            $this->_currentCurrencyID = '0';
            $this->_currentCurrencyInstance = $this->_cacheInstance->newCurrency('0');
            $this->_sessionInstance->setSessionStore('nebuleSelectedCurrency', $this->_currentCurrencyID);
            return;
        }

        if (filter_has_var(INPUT_GET, References::COMMAND_SELECT_CURRENCY))
            $arg = trim(' ' . filter_input(INPUT_GET, References::COMMAND_SELECT_CURRENCY, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        else
            $arg = trim(' ' . filter_input(INPUT_POST, References::COMMAND_SELECT_CURRENCY, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));

        if (Node::checkNID($arg, false, true)
            && ($this->getIoInstance()->checkObjectPresent($arg)
                || $this->getIoInstance()->checkLinkPresent($arg)
                || $arg == '0'
            )
        ) {
            $this->_currentCurrencyID = $arg;
            $this->_currentCurrencyInstance = $this->_cacheInstance->newCurrency($arg);
            $this->_sessionInstance->setSessionStore('nebuleSelectedCurrency', $arg);
        } else {
            $cache = $this->_sessionInstance->getSessionStore('nebuleSelectedCurrency');
            if ($cache !== false && $cache != '') {
                $this->_currentCurrencyID = $cache;
                $this->_currentCurrencyInstance = $this->_cacheInstance->newCurrency($cache);
            } else {
                $this->_currentCurrencyID = '0';
                $this->_currentCurrencyInstance = $this->_cacheInstance->newCurrency('0');
                $this->_sessionInstance->setSessionStore('nebuleSelectedCurrency', $this->_currentCurrencyID);
            }
            unset($cache);
        }
        unset($arg);

        $this->_metrologyInstance->addLog('find current currency ' . $this->_currentCurrencyID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '952d5651');
    }

    public function getCurrentCurrencyID(): string
    {
        return $this->_currentCurrencyID;
    }

    public function getCurrentCurrencyInstance(): ?Currency
    {
        return $this->_currentCurrencyInstance;
    }



    private string $_currentTokenPool = '';
    private ?TokenPool $_currentTokenPoolInstance = null;

    private function _findCurrentTokenPool(): void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitCurrency')) {
            $this->_currentTokenPool = '0';
            $this->_currentTokenPoolInstance = $this->_cacheInstance->newTokenPool('0');
            $this->_sessionInstance->setSessionStore('nebuleSelectedTokenPool', $this->_currentTokenPool);
            return;
        }

        if (filter_has_var(INPUT_GET, References::COMMAND_SELECT_TOKENPOOL))
            $arg = trim(' ' . filter_input(INPUT_GET, References::COMMAND_SELECT_TOKENPOOL, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        else
            $arg = trim(' ' . filter_input(INPUT_POST, References::COMMAND_SELECT_TOKENPOOL, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));

        if (Node::checkNID($arg, false, true)
            && ($this->getIoInstance()->checkObjectPresent($arg)
                || $this->getIoInstance()->checkLinkPresent($arg)
                || $arg == '0'
            )
        ) {
            $this->_currentTokenPool = $arg;
            $this->_currentTokenPoolInstance = $this->_cacheInstance->newTokenPool($arg);
            $this->_sessionInstance->setSessionStore('nebuleSelectedTokenPool', $arg);
        } else {
            $cache = $this->_sessionInstance->getSessionStore('nebuleSelectedTokenPool');
            if ($cache !== false && $cache != '') {
                $this->_currentTokenPool = $cache;
                $this->_currentTokenPoolInstance = $this->_cacheInstance->newTokenPool($cache);
            } else {
                $this->_currentTokenPool = '0';
                $this->_currentTokenPoolInstance = $this->_cacheInstance->newTokenPool('0');
                $this->_sessionInstance->setSessionStore('nebuleSelectedTokenPool', $this->_currentTokenPool);
            }
            unset($cache);
        }
        unset($arg);

        $this->_metrologyInstance->addLog('find current token pool ' . $this->_currentTokenPool, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c8485d55');
    }

    public function getCurrentTokenPool(): string
    {
        return $this->_currentTokenPool;
    }

    public function getCurrentTokenPoolInstance(): ?TokenPool
    {
        return $this->_currentTokenPoolInstance;
    }



    private string $_currentTokenID = '';
    private ?Token $_currentTokenInstance = null;

    private function _findCurrentToken(): void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitCurrency')) {
            $this->_currentTokenID = '0';
            $this->_currentTokenInstance = $this->_cacheInstance->newToken('0');
            $this->_sessionInstance->setSessionStore('nebuleSelectedToken', $this->_currentTokenID);
            return;
        }

        if (filter_has_var(INPUT_GET, References::COMMAND_SELECT_TOKEN))
            $arg = trim(' ' . filter_input(INPUT_GET, References::COMMAND_SELECT_TOKEN, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        else
            $arg = trim(' ' . filter_input(INPUT_POST, References::COMMAND_SELECT_TOKEN, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));

        if (Node::checkNID($arg, false, true)
            && ($this->_ioInstance->checkObjectPresent($arg)
                || $this->_ioInstance->checkLinkPresent($arg)
                || $arg == '0'
            )
        ) {
            $this->_currentTokenID = $arg;
            $this->_currentTokenInstance = $this->_cacheInstance->newToken($arg);
            $this->_sessionInstance->setSessionStore('nebuleSelectedToken', $arg);
        } else {
            $cache = $this->_sessionInstance->getSessionStore('nebuleSelectedToken');
            if ($cache !== false  && $cache != '') {
                $this->_currentTokenID = $cache;
                $this->_currentTokenInstance = $this->_cacheInstance->newToken($cache);
            } else {
                $this->_currentTokenID = '0';
                $this->_currentTokenInstance = $this->_cacheInstance->newToken('0');
                $this->_sessionInstance->setSessionStore('nebuleSelectedToken', $this->_currentTokenID);
            }
            unset($cache);
        }
        unset($arg);

        $this->_metrologyInstance->addLog('find current token ' . $this->_currentTokenID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '0ccb0886');
    }

    public function getCurrentTokenID(): string
    {
        return $this->_currentTokenID;
    }

    public function getCurrentTokenInstance(): ?Token
    {
        return $this->_currentTokenInstance;
    }



    /**
     * Calculate the level of usability of entities.
     *
     * @return integer
     */
    public function checkInstances(): int
    {
        if (!$this->_authoritiesInstance->getPuppetmasterInstance() instanceof Entity) return 1;
        if ($this->_authoritiesInstance->getPuppetmasterEID() == '0') return 2;
        if ($this->_authoritiesInstance->getPuppetmasterEID() != $this->_configurationInstance->getOptionUntyped('puppetmaster')) return 3;

        if (sizeof($this->_authoritiesInstance->getSecurityAuthoritiesInstance()) == 0) return 11;
        foreach ($this->_authoritiesInstance->getSecurityAuthoritiesInstance() as $instance)
        {
            if (!$instance instanceof Entity) return 12;
            if ($instance->getID() == '0') return 13;
        }

        if (sizeof($this->_authoritiesInstance->getCodeAuthoritiesInstance()) == 0) return 21;
        foreach ($this->_authoritiesInstance->getCodeAuthoritiesInstance() as $instance)
        {
            if (!$instance instanceof Entity) return 22;
            if ($instance->getID() == '0') return 23;
        }

        if (sizeof($this->_authoritiesInstance->getDirectoryAuthoritiesInstance()) == 0) return 31;
        foreach ($this->_authoritiesInstance->getDirectoryAuthoritiesInstance() as $instance)
        {
            if (!$instance instanceof Entity) return 32;
            if ($instance->getID() == '0') return 33;
        }

        if (sizeof($this->_authoritiesInstance->getTimeAuthoritiesInstance()) == 0) return 41;
        foreach ($this->_authoritiesInstance->getTimeAuthoritiesInstance() as $instance)
        {
            if (!$instance instanceof Entity) return 42;
            if ($instance->getID() == '0') return 43;
        }

        if (!$this->_entitiesInstance->getServerEntityInstance() instanceof Entity) return 51;
        if ($this->_entitiesInstance->getServerEntityID() == '0') return 52;

        if (!$this->_entitiesInstance->getDefaultEntityInstance() instanceof Entity) return 61;
        if ($this->_entitiesInstance->getDefaultEntityInstance()->getID() == '0') return 62;

        if (!$this->_entitiesInstance->getCurrentEntityInstance() instanceof Entity) return 71;
        if ($this->_entitiesInstance->getCurrentEntityInstance()->getID() == '0') return 72;

        return 128;
    }



    /**
     * Recherche des liens par rapport à une référence qui est le type d'objet.
     * La recherche se fait dans les liens de l'objet type.
     * Cette recherche est utilisée pour retrouver les groupes et les conversations.
     * Toutes les références et propriétés sont hachées avec un algorithme fixe.
     * $entity Permet de ne sélectionner que les liens générés par une entité.
     *
     * @param string|Node   $type
     * @param string        $socialClass
     * @param string|Entity $entity
     * @return array:Link
     * @todo ajouter un filtre sur le type mime des objets.
     */
    public function getListLinksByType($type, $entity = '', string $socialClass = ''): array
    {
        $result = array();
        $hashType = '';
        $hashEntity = '';

        // Si le type est une instance, récupère l'ID de l'instance de l'objet du type.
        if (is_a($type, 'Node')) {
            $hashType = $type->getID();
        } else {
            // Si le type est un ID, l'utilise directement. Sinon calcul l'empreinte du type.
            if (Node::checkNID($type))
                $hashType = $type;
            else
                $hashType = $this->getNIDfromData($type, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
            // $type doit être une instance d'objet au final.
            $type =$this->_cacheInstance->newNode($hashType);
        }
        // Si l'ID de l'instance du type est null ou vide, quitte en renvoyant un résultat vide.
        if ($hashType == '0'
            || $hashType == ''
        )
            return $result;

        // Si l'entité est une instance, récupère l'ID de l'instance de l'entité.
        if (is_a($entity, 'Node')) {
            $hashEntity = $entity->getID();
        } else {
            // Si l'entité est un ID, l'utilise directement. Sinon calcul l'empreinte de l'entité.
            if (Node::checkNID($entity)
                && $this->getIoInstance()->checkLinkPresent($entity)
                && $this->getIoInstance()->checkObjectPresent($entity)
            )
                $hashEntity = $entity;
            else
                $hashEntity = '';
        }

        // Lit les liens de l'objet de référence.
        $result = $type->getLinksOnFields(
            $hashEntity,
            '',
            'l',
            '',
            $hashType,
            $this->getNIDfromData(References::REFERENCE_NEBULE_OBJET_TYPE, References::REFERENCE_CRYPTO_HASH_ALGORITHM)
        );

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($result, $socialClass);

        // retourne le résultat.
        return $result;
    }

    /**
     * Recherche des ID d'objets par rapport à une référence qui est le type d'objet.
     * $entity Permet de ne sélectionner que les liens générés par une entité.
     *
     * @param string|Node   $type
     * @param string        $socialClass
     * @param string|Entity $entity
     * @return array:Link
     */
    public function getListIdByType($type = '', $entity = '', string $socialClass = ''): array
    {
        /**
         * Résultat de la recherche de liens à retourner.
         * @var array:Link $result
         */
        $result = $this->getListLinksByType($type, $entity, $socialClass);

        // Extrait les ID.
        foreach ($result as $i => $l)
            $result[$i] = $l->getParsed()['bl/rl/nid1'];

        // retourne le résultat.
        return $result;
    }

    /**
     * Extrait la liste des liens définissant les groupes d'objets.
     * $entity Permet de ne sélectionner que les groupes générés par une entité.
     *
     * @param string $socialClass
     * @param Entity $entity
     * @return array:Link
     */
    public function getListGroupsLinks(Entity $entity, string $socialClass = ''): array
    {
        return $this->getListLinksByType(References::REFERENCE_NEBULE_OBJET_GROUPE, $entity, $socialClass);
    }

    /**
     * Extrait la liste des ID des groupes d'objets.
     * $entity Permet de ne sélectionner que les groupes générés par une entité.
     *
     * @param Entity $entity
     * @param string $socialClass
     * @return array
     */
    public function getListGroupsID(Entity $entity, string $socialClass = ''): array
    {
        return $this->getListIdByType(References::REFERENCE_NEBULE_OBJET_GROUPE, $entity, $socialClass);
    }

    /**
     * Extrait la liste des liens définissant les conversations.
     * Précalcul le hash de l'objet définissant une conversation.
     * Extrait l'ID de l'entité, si demandé.
     * Liste les liens définissants les différentes conversations.
     * Retourne la liste.
     * $entity : Permet de ne sélectionner que les conversations générés par une entité.
     *
     * @param Entity $entity
     * @param string $socialClass
     * @return array
     */
    public function getListConversationsLinks(Entity $entity, string $socialClass = ''): array
    {
        return $this->getListLinksByType(References::REFERENCE_NEBULE_OBJET_CONVERSATION, $entity, $socialClass);
    }

    /**
     * Extrait la liste des ID des conversations.
     * Géré comme des groupes d'objets.
     * $entity Permet de ne sélectionner que les conversations générées par une entité.
     *
     * @param Entity $entity
     * @param string $socialClass
     * @return array
     */
    public function getListConversationsID(Entity $entity, string $socialClass = ''): array
    {
        return $this->getListIdByType(References::REFERENCE_NEBULE_OBJET_CONVERSATION, $entity, $socialClass);
    }



    /**
     * Extrait l'argument pour continuer un affichage en ligne à partir d'un objet particulier.
     * Retourne tout type de chaine de texte nécessaire à l'affichage
     * ou une chaine vide si pas d'argument valable trouvé.
     *
     * @return string
     */
    public function getDisplayNextObject(): string
    {
        $this->_metrologyInstance->addLog('extract display next object', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'bccbff7a');

        $arg = trim(' ' . filter_input(INPUT_GET, Displays::DEFAULT_NEXT_COMMAND, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));

        if (Node::checkNID($arg))
            return $arg;
        return '';
    }

    public function getIsRID(Node $nid): bool {
        return str_contains($nid->getID(), '.none');
    }
}



// ========================================================================================
//   002_references.php
//   020250222051801
//   73a5dfe033130baa312f1ea1f03b5b84dd5d1af558301d9a557275df0e64fa41.sha2.256

/**
 * Configuration class for the nebule library.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class References //extends Functions
{
    const VIRTUAL_NODE_SIZE = 36;
    // Les commandes.
    const COMMAND_SWITCH_APPLICATION = 'a';
    const COMMAND_APPLICATION_BACK = 'c';
    const COMMAND_LOCAL_ENTITY_FILE = 'e'; // Into folder /
    const COMMAND_FLUSH = 'f';
    const COMMAND_RESCUE = 'r';
    const COMMAND_AUTH_ENTITY_LOGIN = 'login';
    const COMMAND_AUTH_ENTITY_LOGOUT = 'logout';
    const COMMAND_SWITCH_TO_ENTITY = 'switch';
    const COMMAND_AUTH_ENTITY_MOD = 'auth';
    const COMMAND_AUTH_ENTITY_INFO = 'info';
    const COMMAND_SELECT_LANG = 'lang';
    const COMMAND_SELECT_OBJECT = 'obj';
    const COMMAND_SELECT_LINK = 'lnk';
    const COMMAND_SELECT_ENTITY = 'ent';
    const COMMAND_SELECT_GROUP = 'grp';
    const COMMAND_SELECT_CONVERSATION = 'cvt';
    const COMMAND_SELECT_CURRENCY = 'cur';
    const COMMAND_SELECT_TOKENPOOL = 'tkp';
    const COMMAND_SELECT_TOKEN = 'tkn';
    const COMMAND_SELECT_WALLET = 'wal';
    const COMMAND_SELECT_TRANSACTION = 'trs';
    const COMMAND_SELECT_PASSWORD = 'pwd';
    const COMMAND_SELECT_TICKET = 'tkt';

    // Les références.
    const REFERENCE_OBJECT_TEXT = 'text/plain';
    const REFERENCE_OBJECT_HTML = 'text/html';
    const REFERENCE_OBJECT_CSS = 'text/css';
    const REFERENCE_OBJECT_PHP = 'text/x-php';
    const REFERENCE_OBJECT_APP_PHP = 'application/x-httpd-php';
    const REFERENCE_OBJECT_PNG = 'image/png';
    const REFERENCE_OBJECT_JPEG = 'image/jpeg';
    const REFERENCE_OBJECT_MP3 = 'audio/mpeg';
    const REFERENCE_OBJECT_OGG = 'audio/x-vorbis+ogg';
    const REFERENCE_OBJECT_CRYPT_RSA = 'application/x-encrypted/rsa';
    const REFERENCE_OBJECT_ENTITY = 'application/x-pem-file';
    const REFERENCE_ENTITY_HEADER = '-----BEGIN PUBLIC KEY-----';
    const REFERENCE_PRIVATE_KEY = 'nebule/objet/entite/prive';
    const REFERENCE_CRYPTO_HASH_ALGORITHM = 'sha2.256';
    const LIB_RID_SECURITY_AUTHORITY = 'a4b210d4fb820a5b715509e501e36873eb9e27dca1dd591a98a5fc264fd2238adf4b489d.none.288';
    const LIB_RID_CODE_AUTHORITY = '2b9dd679451eaca14a50e7a65352f959fc3ad55efc572dcd009c526bc01ab3fe304d8e69.none.288';
    const LIB_RID_TIME_AUTHORITY = 'bab7966fd5b483f9556ac34e4fac9f778d0014149f196236064931378785d81cae5e7a6e.none.288';
    const LIB_RID_DIRECTORY_AUTHORITY = '0a4c1e7930a65672379616a2637b84542049b416053ac0d9345300189791f7f8e05f3ed4.none.288';

    // Les objets références de nebule.
    const REFERENCE_NEBULE_OBJET = 'nebule/objet';
    const REFERENCE_NEBULE_OBJET_HASH = 'nebule/objet/hash';
    const REFERENCE_NEBULE_OBJET_HOMOMORPHE = 'nebule/objet/homomorphe';
    const REFERENCE_NEBULE_OBJET_TYPE = 'nebule/objet/type';
    const REFERENCE_NEBULE_OBJET_LOCALISATION = 'nebule/objet/localisation';
    const REFERENCE_NEBULE_OBJET_TAILLE = 'nebule/objet/taille';
    const REFERENCE_NEBULE_OBJET_PRENOM = 'nebule/objet/prenom';
    const REFERENCE_NEBULE_OBJET_NOM = 'nebule/objet/nom';
    const REFERENCE_NEBULE_OBJET_SURNOM = 'nebule/objet/surnom';
    const REFERENCE_NEBULE_OBJET_PREFIX = 'nebule/objet/prefix';
    const REFERENCE_NEBULE_OBJET_SUFFIX = 'nebule/objet/suffix';
    const REFERENCE_NEBULE_OBJET_LIEN = 'nebule/objet/lien';
    const REFERENCE_NEBULE_OBJET_DATE = 'nebule/objet/date';
    const REFERENCE_NEBULE_OBJET_DATE_ANNEE = 'nebule/objet/date/annee';
    const REFERENCE_NEBULE_OBJET_DATE_MOIS = 'nebule/objet/date/mois';
    const REFERENCE_NEBULE_OBJET_DATE_JOUR = 'nebule/objet/date/jour';
    const REFERENCE_NEBULE_OBJET_DATE_HEURE = 'nebule/objet/date/heure';
    const REFERENCE_NEBULE_OBJET_DATE_MINUTE = 'nebule/objet/date/minute';
    const REFERENCE_NEBULE_OBJET_DATE_SECONDE = 'nebule/objet/date/seconde';
    const REFERENCE_NEBULE_OBJET_DATE_ZONE = 'nebule/objet/date/zone';
    const REFERENCE_NEBULE_OBJET_ENTITE = 'nebule/objet/entite';
    const REFERENCE_NEBULE_OBJET_ENTITE_TYPE = 'nebule/objet/entite/type';
    const REFERENCE_NEBULE_OBJET_ENTITE_LOCALISATION = 'nebule/objet/entite/localisation';
    const REFERENCE_NEBULE_OBJET_ENTITE_SUIVI = 'nebule/objet/entite/suivi';
    const REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_SECONDE = 'nebule/objet/entite/suivi/seconde';
    const REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_MINUTE = 'nebule/objet/entite/suivi/minute';
    const REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_HEURE = 'nebule/objet/entite/suivi/heure';
    const REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_JOUR = 'nebule/objet/entite/suivi/jour';
    const REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_SEMAINE = 'nebule/objet/entite/suivi/semaine';
    const REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_MOIS = 'nebule/objet/entite/suivi/mois';
    const REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_ANNEE = 'nebule/objet/entite/suivi/annee';
    const REFERENCE_NEBULE_OBJET_ENTITE_MAITRE = 'nebule/objet/entite/maitre';
    const REFERENCE_NEBULE_OBJET_ENTITE_MAITRE_SECURITE = 'nebule/objet/entite/maitre/securite';
    const REFERENCE_NEBULE_OBJET_ENTITE_MAITRE_CODE = 'nebule/objet/entite/maitre/code';
    const REFERENCE_NEBULE_OBJET_ENTITE_MAITRE_ANNUAIRE = 'nebule/objet/entite/maitre/annuaire';
    const REFERENCE_NEBULE_OBJET_ENTITE_MAITRE_TEMPS = 'nebule/objet/entite/maitre/temps';
    const REFERENCE_NEBULE_OBJET_ENTITE_AUTORITE_LOCALE = 'nebule/objet/entite/autorite/locale';
    const REFERENCE_NEBULE_OBJET_ENTITE_RECOUVREMENT = 'nebule/objet/entite/recouvrement';
    const REFERENCE_NEBULE_OBJET_INTERFACE_BOOTSTRAP = 'nebule/objet/interface/web/php/bootstrap';
    const REFERENCE_NEBULE_OBJET_INTERFACE_BIBLIOTHEQUE = 'nebule/objet/interface/web/php/bibliotheque';
    const REFERENCE_NEBULE_OBJET_INTERFACE_APPLICATIONS = 'nebule/objet/interface/web/php/applications';
    const REFERENCE_NEBULE_OBJET_INTERFACE_APP_DIRECT = 'nebule/objet/interface/web/php/applications/direct';
    const REFERENCE_NEBULE_OBJET_INTERFACE_APP_ACTIVE = 'nebule/objet/interface/web/php/applications/active';
    const REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES = 'nebule/objet/interface/web/php/applications/modules';
    const REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES_TRANSLATE = 'nebule/objet/interface/web/php/applications/modules/traduction';
    const REFERENCE_NEBULE_OBJET_INTERFACE_APP_MOD_ACTIVE = 'nebule/objet/interface/web/php/applications/modules/active';
    const REFERENCE_NEBULE_OBJET_NOEUD = 'nebule/objet/noeud';
    const REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE = 'nebule/objet/image/reference';
    const REFERENCE_NEBULE_OBJET_EMOTION = 'nebule/objet/emotion';
    const REFERENCE_NEBULE_OBJET_EMOTION_JOIE = 'nebule/objet/emotion/joie';
    const REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE = 'nebule/objet/emotion/confiance';
    const REFERENCE_NEBULE_OBJET_EMOTION_PEUR = 'nebule/objet/emotion/peur';
    const REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE = 'nebule/objet/emotion/surprise';
    const REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE = 'nebule/objet/emotion/tristesse';
    const REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT = 'nebule/objet/emotion/degout';
    const REFERENCE_NEBULE_OBJET_EMOTION_COLERE = 'nebule/objet/emotion/colere';
    const REFERENCE_NEBULE_OBJET_EMOTION_INTERET = 'nebule/objet/emotion/interet';
    const REFERENCE_NEBULE_OBJET_GROUPE = 'nebule/objet/groupe';
    const REFERENCE_NEBULE_OBJET_GROUPE_SUIVI = 'nebule/objet/groupe/suivi';
    const REFERENCE_NEBULE_OBJET_GROUPE_FERME = 'nebule/objet/groupe/ferme';
    const REFERENCE_NEBULE_OBJET_GROUPE_PROTEGE = 'nebule/objet/groupe/protege';
    const REFERENCE_NEBULE_OBJET_GROUPE_DISSIMULE = 'nebule/objet/groupe/dissimule';
    const REFERENCE_NEBULE_OBJET_CONVERSATION = 'nebule/objet/conversation';
    const REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE = 'nebule/objet/conversation/suivie';
    const REFERENCE_NEBULE_OBJET_CONVERSATION_FERMEE = 'nebule/objet/conversation/fermee';
    const REFERENCE_NEBULE_OBJET_CONVERSATION_PROTEGEE = 'nebule/objet/conversation/protegee';
    const REFERENCE_NEBULE_OBJET_CONVERSATION_DISSIMULEE = 'nebule/objet/conversation/dissimulee';
    const REFERENCE_NEBULE_OBJET_ARBORESCENCE = 'nebule/objet/arborescence';
    const REFERENCE_NEBULE_OBJET_MONNAIE = 'nebule/objet/monnaie';
    const REFERENCE_NEBULE_OBJET_MONNAIE_JETON = 'nebule/objet/monnaie/jeton';
    const REFERENCE_NEBULE_OBJET_MONNAIE_SAC = 'nebule/objet/monnaie/sac';
    const REFERENCE_NEBULE_OBJET_MONNAIE_PORTEFEUILLE = 'nebule/objet/monnaie/portefeuille';
    const REFERENCE_NEBULE_OBJET_MONNAIE_TRANSACTION = 'nebule/objet/monnaie/transaction';
    const REFERENCE_NEBULE_OPTION = 'nebule/option';
    const REFERENCE_NEBULE_REFERENCE = 'nebule/reference';
    const REFERENCE_NEBULE_DANGER = 'nebule/danger';
    const REFERENCE_NEBULE_WARNING = 'nebule/warning';

    const RESERVED_OBJECTS_LIST = array(
        self::REFERENCE_NEBULE_OBJET,
        self::REFERENCE_NEBULE_OBJET_HASH,
        self::REFERENCE_NEBULE_OBJET_HOMOMORPHE,
        self::REFERENCE_NEBULE_OBJET_TYPE,
        self::REFERENCE_NEBULE_OBJET_LOCALISATION,
        self::REFERENCE_NEBULE_OBJET_TAILLE,
        self::REFERENCE_NEBULE_OBJET_PRENOM,
        self::REFERENCE_NEBULE_OBJET_NOM,
        self::REFERENCE_NEBULE_OBJET_SURNOM,
        self::REFERENCE_NEBULE_OBJET_PREFIX,
        self::REFERENCE_NEBULE_OBJET_SUFFIX,
        self::REFERENCE_NEBULE_OBJET_LIEN,
        self::REFERENCE_NEBULE_OBJET_DATE,
        self::REFERENCE_NEBULE_OBJET_DATE_ANNEE,
        self::REFERENCE_NEBULE_OBJET_DATE_MOIS,
        self::REFERENCE_NEBULE_OBJET_DATE_JOUR,
        self::REFERENCE_NEBULE_OBJET_DATE_HEURE,
        self::REFERENCE_NEBULE_OBJET_DATE_MINUTE,
        self::REFERENCE_NEBULE_OBJET_DATE_SECONDE,
        self::REFERENCE_NEBULE_OBJET_DATE_ZONE,
        self::REFERENCE_NEBULE_OBJET_ENTITE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_TYPE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_LOCALISATION,
        self::REFERENCE_NEBULE_OBJET_ENTITE_SUIVI,
        self::REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_SECONDE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_MINUTE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_HEURE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_JOUR,
        self::REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_MOIS,
        self::REFERENCE_NEBULE_OBJET_ENTITE_SUIVI_ANNEE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_MAITRE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_MAITRE_SECURITE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_MAITRE_CODE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_MAITRE_ANNUAIRE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_MAITRE_TEMPS,
        self::REFERENCE_NEBULE_OBJET_ENTITE_AUTORITE_LOCALE,
        self::REFERENCE_NEBULE_OBJET_ENTITE_RECOUVREMENT,
        self::REFERENCE_NEBULE_OBJET_INTERFACE_BOOTSTRAP,
        self::REFERENCE_NEBULE_OBJET_INTERFACE_BIBLIOTHEQUE,
        self::REFERENCE_NEBULE_OBJET_INTERFACE_APPLICATIONS,
        self::REFERENCE_NEBULE_OBJET_INTERFACE_APP_DIRECT,
        self::REFERENCE_NEBULE_OBJET_INTERFACE_APP_ACTIVE,
        self::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES,
        self::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES_TRANSLATE,
        self::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MOD_ACTIVE,
        self::REFERENCE_NEBULE_OBJET_NOEUD,
        self::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE,
        self::REFERENCE_NEBULE_OBJET_EMOTION,
        self::REFERENCE_NEBULE_OBJET_EMOTION_JOIE,
        self::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE,
        self::REFERENCE_NEBULE_OBJET_EMOTION_PEUR,
        self::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE,
        self::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE,
        self::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT,
        self::REFERENCE_NEBULE_OBJET_EMOTION_COLERE,
        self::REFERENCE_NEBULE_OBJET_EMOTION_INTERET,
        self::REFERENCE_NEBULE_OBJET_GROUPE,
        self::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI,
        self::REFERENCE_NEBULE_OBJET_GROUPE_FERME,
        self::REFERENCE_NEBULE_OBJET_GROUPE_PROTEGE,
        self::REFERENCE_NEBULE_OBJET_GROUPE_DISSIMULE,
        self::REFERENCE_NEBULE_OBJET_CONVERSATION,
        self::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE,
        self::REFERENCE_NEBULE_OBJET_CONVERSATION_FERMEE,
        self::REFERENCE_NEBULE_OBJET_CONVERSATION_PROTEGEE,
        self::REFERENCE_NEBULE_OBJET_CONVERSATION_DISSIMULEE,
        self::REFERENCE_NEBULE_OBJET_ARBORESCENCE,
        self::REFERENCE_NEBULE_OBJET_MONNAIE,
        self::REFERENCE_NEBULE_OBJET_MONNAIE_JETON,
        self::REFERENCE_NEBULE_OBJET_MONNAIE_SAC,
        self::REFERENCE_NEBULE_OBJET_MONNAIE_PORTEFEUILLE,
        self::REFERENCE_NEBULE_OBJET_MONNAIE_TRANSACTION,
        self::REFERENCE_NEBULE_OPTION,
        self::REFERENCE_NEBULE_REFERENCE,
        self::REFERENCE_NEBULE_DANGER,
        self::REFERENCE_NEBULE_WARNING,
    );

    const ACTIVE_APPLICATIONS_WHITELIST = array(
        '2121510000000000006e6562756c65206170706c69636174696f6e73000000000000212151.none.296',
    );

    const OBJ_IMG = array(
        'nebule' => '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',
        'addent' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEWElEQVR42u2bT2gaWRzHn1EDHpSGMUXaCM5lD6UI6SGgZaQMQQh
lwfE6wrJUcEAo5CRZCrsLpeIlcxqIYBIC5tLLSEMIzMGDsx1PIkjpKYttXYo0DoZ4GEhG3MsuZMaZmPG/T383hRn9fub3b977PRMA4A8wx7YE5tzmHoBlHD+
CoqjN7/cjPp/P5fV6H7nd7odOp/OBzWazAQCAJElSo9G4rNVqPyqVyvdisVgXBEGsVqvSqP+baRQ5wGQygWAwuBqNRp+GQqHnFovF3M99ZFlu53K5j5lM5hP
HcRedTme6ASAIYk0kEk+2t7d/7lf0XTBomj5JpVKfRVG8mSoAdrvdnEwm1+Px+MtxhBTDMKc7OzvlVqvVnjiAWCzm2dvb+2USCYyiqKN0Ov1lIgAQBLGyLLu
FYdj6JLM4z/NlgiDO+g2LvgBgGLaSz+fjw47zQfIDjuMMz/PNkfcBJEmuFQqF19MiHgAALBaLuVAovCZJcs3otWYAwAsj8X5wcPDrtDY14XD4Wb1e/1oqlS6
HHgIkSa5ls9lXQ+oT/tT6vtPp/D6M+0cikf3j4+N/hhYCGIatDEv8OCybzb7CMGxlKAAQBLHm8/n4rPX4+Xw+jiCIdWAALMtuTVPCM5IYWZbdGghALBbzTLr
OD2IYhq3HYjFPX0nQbrebr66u3ozkDWzESVBtDofjrV7brOsByWRyZp+8ES2aHoAgiLXRaPw2snfwMXsAAAA4nc53Wu2ypgckEoknsK386Gnq8gCTyQSur6/
fjDLzT8IDZFluLy8vv1UvqnR5QDAYXJ3FsnefshgMBld7hkA0Gn0KIDUtbV0AQqHQc1gBaGlTAEBR1Aaj+98OAxRFbboA/H4/AiA3tUYFAJ/P54IdgFqjAoD
X630EOwC1RsXOkNvtfthvDR9lf2DEevUSao1LqnbxAeweoNaoAPD/Xh3Mpta42B6//UGSJAl2wWqNCgCNRuMSdgBqjYoqUKvVfng8nseDZNlpfRu8rVHXAyq
VynfYPUCtUQGgWCzWYQeg1qgAIAiCCDsAtUYFgGq1Ksmy3IZVvCzLbfXcUVcfkMvlPsIKQEtbF4BMJvMJVgBa2roAcBx3AWMYyLLc5jjuoieATqcDaJo+gQ0
ATdMnWmN2mu8CqVTqM2wA9DRpAhBF8YZhmFNYxDMMc6o3RLXYHNW7qNVqtSmKOpr1p09R1NFdA5V3rgek0+kvPM+XZ1U8z/PlXoOUPRdECII4m8WyKMtymyC
IM0MLInoJEcdxZtYA4DjO3Gd6dOmertSMRCL7syI+Eons33dq1NCo7CQHo40kPSMD1IYmRUul0uX5+fnf4XD42bQ++cPDw2+GSjJYDEv3VV6aLpcrNQ0lkuf
58n//pdnP9X3vC4iieBMIBD5MslmiKOooEAh8GOQIjaEcoJcXdnd3/3I4HK2NjY2fxtXbb25uvhcEoTnovRaHpsDi2Nzozw7P3cHJWbLF7vC8A/gX6P4s7uY
kotgAAAAASUVORK5CYII=',
        'addlnk' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE7UlEQVR42u2aT0gjdxTHX5wYyGrG7CYRd9dAUgiUkg0Ie0jGHSk
5BEUoSY81pQcXVJKACioulrZUKiKokLEqxENp0pM0aYss5JCD2Z2ICKXZ0EvADMTdFZ2pJuIGTNL00oDYmcQ/WTqZ8Qe5vDfkFz95v+/3vZ+RAMDXwJNVKBS
+RBCk4WK8ubl5+vT0tPg+9mwAHq1cLpdjixsMhjvva09eAaBp+pgtjmGYWhQA0un0AQeAh6IAEI/H37DFjUZjuygAxGKxfba4Tqe7LwoAJEkybHEURVFRAEi
lUrlCofAfu5NIJOD3+58IHgAAQCgUeskWt9lsHaIA4PP5EmxxjUZzz263t9V6PwmfOsFyuZ+dnU1JpVLkYo6iqD29Xr9Wy/0QAPiYb1WgUCgynZ2dH16MK5V
KlGGY9Pb29lFdV0CpVPqK49v/BgBApVI10jT9jO2ZTCaTVSqVC4LVAAAAhmHyS0tLG2y5lpYWNBaLfSpoAAAAk5OTv3PlzGbzI6/X+1jQAE5OToqDg4M/cOW
HhoZ63G73B4IFAACwurpKRaNR1kpAEKRhfn7+s5tC4DUAAACHw/GcrTsEAGhsbEQWFxf7bnIceA+AYZi81Wpd4vRxBGlwu9291xVG3gMAAIhGo0dOp7NiA2Q
2mx8dHx+PXPVI1AUAAIBAILBXSRTLFun1ej9PpVL9l22b6wZAWRSrVcK/9wftwWBw4ODgwFNtiuRlJ1ht4Th+NxKJuNjmBY79IJvNZimKeptIJPZIknxNkiS
dTCbf1SWAcrscDAZ7cBy/0ZhcV0fgojt0dXX9Wk0XBAvgvC6gKDrNNTsIHkC5bXa73Ttqtfq7ubm5EFfjJFgA54/F+Pj4HzKZbLq7u/v79fX1zWow6lYEr7L
0er0cwzCVxWJpM5lMD7RabatarVbK5XL5lQFwfXi+rKtCFNQREK0I3gK4BXAL4PqiWSgUirlcLkfT9HE6nT6Ix+NvYrHYPkmSTCqVygnBBisCKJVKJa5koVA
ohkKhlz6fLxEOhw8rPCpMABdhLCws/DY7O/snwzB5oQC4tAZIpVJkbGzMTtP0M4IgHisUCkQIGnAtEXS5XL3ZbHZqYGBAJ2oXWFlZ+WJzc/MTlUrVWLcu0NT
U9K3BYLiDYZgaw7CHRqOxXafT3UdRFJVIJHBZfbBarUvRaPSo3jSg4jDk9/uf2Gy2Do1Gc+8yb+Z0OtcCgcCeYETQ6XS+aG1t9TocjlWKoqr+YX6/v7/edOF
SGhAKhfb1ev2ax+P5MZPJZKvpQl9fX7ugAJQXQRC7SqVyYWtr61W1SsBx/K5gXcBisfxMEMRGsVj8m+uZSCTiqgd3uLYNejyeneHh4UA+ny9yNU7BYLBH0H0
AQRC7o6OjP3FVAo7jHXwXxRuPwwRB7C4vLz+vJIp8bptrch/g8Xh2KgnjzMxMh6ABlIWRyyJdLlcvXwWxpjdCU1NTv3DlJiYmPjrf8bG9/pdZAGr8j5FUKtW
v0+na2eYFmUw2XatLFV5WAADAyMjIBpct2mw2jaCPQLltPjw8/Ist9/TpU6PgAQAAhMNh1t/22e32TlEAcDqdL9jOulQqRfR6vVzwAAAAstksqyViGKYSBQC
Kot5y9AttogCQSCRYL1BMJtMDUQAgSfI1W1yr1baKBQDNFler1UpRAEgmk+/Y4nK5nFcu8A9zSxQEwKfvpgAAAABJRU5ErkJggg==',
        'addobjmark' => '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',
        'addobj' => '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',
        'add' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAkElEQVR42u3ZMQ6AMAgFUDDeWz05XkCHDkqTvj92IX2BNKEZEWcsnC
0WDwAAAAAAAAAAAIBVs3cUrarj6TwzLx0AAAAAAAAAAAAAAAAAAAAAAPg6GYOfo2/LjGkuNLhUMQIAAADwCvxd1FrcCAAAAAAAAAAAAAAAAAAAAACdaVmI6A
AAAAAAAAAAAAAAANpzA7EpDn+g1WKvAAAAAElFTkSuQmCC',
        'addtxt' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA10lEQVR42u3bOxLCIBAA0MXx3urJSWMaZ2IIAyHK2yqNWzz3A05
MEfGMd+ScHzFBpJRe6/MtJg8AAADMHfejU/OXomSrqYAWomuF7ImXVtJnntL8NRVrCAIwA64znUdsGxVQe4vq+Q1u5elRISqg9cnq2+6uPQds5WxREdYgAAA
AbIFW54CzPtPyPKAFAAAAAMAa7HQhGpH76IrUAgAAALAFel9uSqe9n8W1AAAAAAAAAAAAAAAAAAAAAHBGDHlP8Epvn2sBAAAA2AJ78c//KNUCAAAAmDoWM6t
BNO5T/B4AAAAASUVORK5CYII=',
        'admin' => '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
AABJRU5ErkJggg==',
        'cvtaddent' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAHH0lEQVR42u2bXUxTaRrH/z2H6QcUtXSKBZQQ/KCy2rKxLpgh
GYrWcFFjGWh2E/eUZLOJTRw04wVmNkbgYleuTLRe6M0m25ooRlJIQapFaKyEgJiQho3YQGyirnWYtoqgUPsxF7MlLQKW009j/3fntO85z/M773Pe53nelgGg
DV+xCHzlykrWjSorK79taGgQ83g8rlAozOfz+QImk8kEAK/X63W5XLNOp/MXj8cz39XVZRsdHf01GXYxEhkCLBaLkMvlRW1tbX+jM76tre3fZrP55dLSUuCL
A6BWq3dTFHWEx+PxY7mOx+Nx6fX6ezqdzv5FAOBwOKRWq1VUVFRUxPO6ExMTE83Nzb0fPnzwpy0ALpebdf/+/Z9JkkzIy9Xv9wcOHTp0YX5+3pd2qwCXy80y
Go3NBEEkbGUhCIIwGo3NXC43K61mAIfDIS0Wyz8IgiAYDEZUY6RSaXv48fj4eGs044LBIAKBQKCmpuZf8QiHuDwtrVarIEkyaudjemIMBkiSJLRarSItQkCt
Vu+O9wsvGlVUVFSo1erdKQXAYrEIiqKOpCqLoyjqCIvFIlIGQC6XF8W6zsciHo/Hl8vlRSkDQDfDi6ditYE2gMrKym/TpaCJxRbaABoaGsTpAiAWW4gY4o+b
LgBisYU2AKFQmJ8uAGKxhXZKyefzBdFkeCt19uzZslOnTsmCwWDrygxvfHz8vy0tLYMWi8W91vjVMsa1bEnoDAg1M6LVyZMnS589e/b3jo6OvxQWFm5dLcM7
cODAH8xm88nBwUGFRCLJTZQtCSmG1lJTU9N2u93edOXKFaqkpOSza3ZWVhYhk8n2j42NNXd3dx8qLi5mJ9I+2iHg9Xq965FXKBT5ra2t30ul0vLw8x8/foTF
YsGtW7fw5s2b5fM7duzA8ePHsW/fvtBT/ebYsWPVcrlc2tXV9fD06dOjHo/Ht5YtSQfgcrlmCwoKij4Xo48fP/5kbF5eXoTzAKBSqeD1elf7Pru8vPyw2Ww+
vJ4tSQ8Bp9P5S7qsArHYQhuAx+OZTxcAsdhCG8Dw8LA9XQC43e7khYBQKGTqdLrvbt68+dd0AXDhwoUfnjx5QikUivyEARAIBN/odLrvZmZmfqIo6jCbzWaV
lZWl3PmQDSKRqLSnp0fz6NEjVVVV1Za4AcjJySEvXbq0f2Zm5hRFUYezs7PZYVMP79+/T5nzb9++xcjICAKB3/dNCIJgSKXScqvV+uPQ0JBCJBLl0F4GORwO
0dHR8cempqbvN2/eHJGVvXz5EgaDAVarFaWlpWhsbEwJALPZjOnpafT390OlUuHgwYOhZIqsqanZPzExsc9kMj3SaDQPnE7nqrkCCaAm4gRJMs6fP19+48aN
P8tkMgmbzWaFPpudncX169dx9epVOBwOBINBuN1ubNq0CVu3bt2Q8Q8fPow4rq6u3tB4m82G0dFRAMDc3BxGRkZgs9lQUFAAgUCwDEIkEhVrNJr9e/bsYQwM
DPzP6/UGVwXAYDDQ0tKyu7OzU3X06NE/ZWdnc8Kn2u3bt3H58mVMT08jGIy4BmZmZlBVVQUGg4FoO8N0Afy/LQ69Xv+JHS6XC0NDQ5iamkJJSQm2bNmynFVK
JJJSjUYjKSws/Gg2m52hscv7Ana7vWnXrl0lK2Osp6cHd+/exeeyTZIkceLECeTm5iJR7fFgMIh3797h2rVr8PvX3xIgCAIymQwqlQp8fmTb0m63O8rKyv4T
AWBxcfFnFovFBICFhQUYjUb09fVhcXExagNJksSZM2dAkmRCAPj9fly8ePGzzq+oFFFXVwelUonc3NxQPeJjMpn/jAAQXp+3t7djcnKSXmJBEKirq4NYHN+O
mc1mg8lkWn7jb1QSiQTnzp0LL7/b1wTg8/nw4MEDGAwGOJ1OWjfcuXMnamtrkZeXF2uWh8HBQUxPT9MaX1xcjMbGRlRWViJ823JdAOFTbnh4GAaDAS9evKA1
GwoKCkBRFC3j9Xo9Xr16Reupb9++HSqV6hPHNwQgpEAggLGxMXR1dcHhcNByJi8vD3v37kVOTg4EAgH4fD5YrN9X2KWlJbhcLszOzmJhYQGTk5Nwu9207rNt
2zaoVCpUVVVhvY3qDQFYGYudnZ2w29OmFlp2XKlUorq6OqqXcAjAhhsiYrEYYrEYU1NT6O7uXrXhkUwVFRWhvr4+asc/AbHRGbBST58+hcFgSDqImB2nGwJr
yeFwoLe3F1arlfZSFY3y8/OhVCpRW1sbU74RdwAhPX/+HD09PXEHES/HEw4gpNevX+POnTu4d+8efD5f2jieNADhFWRvby8GBgawke51ohxPOoDwwspoNKK/
v39dEIl2PGUAQpqbm4PJZEJfX19EN0kgEKC+vj7hjqccQLooBOCr/7l8BkAGQAZABkAGQAZABkAGQAZABkAGQAbAV6mE/nU2MwO+AP0GdeHoMOXb5sYAAAAA
SUVORK5CYII=',
        'cvtaddmsg' => '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',
        'cvtadd' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFAklEQVR42u2a7UtbVxzHv8k1asyiMB9W1MZVa4MMZZNuqRCrxje
KCMk0UBAMgi8UFUEQCga2IkiQFv8DZbS0lGJv08QaM3Vo4mqdDSLFxQgSUUEn0yY+1aDJXmw3u6lZG/Pgw3q+ry7nd+85+X7uOff8fveGA+BHfMLi4hNX1Fk
MOj09/YO/9uvXr98hM4AAIAAIAAKAACAACAACgAAgAAgAAoAAiLw4CPKFyH+VtGelYEtpsgQIAAKAACC7QDg6kkgkCRqNprCwsDCfoigO0+52u/Hq1Ss8fPg
Qa2trAIDbt2/77UOj0XiPCwoKcOvWLaSmpvqcs7m5+fbBgwfmtrY2y9HRkSfU300BKA6lg/z8/Pi+vr6Szs5ORVZWVhqXy+UAgMfjgcViQU9PDwwGA3Z2drz
XSKVSv32ZzWbv8crKCoxGIzY3N5GZmQk+nw8A4PP5sRKJ5Fp9fX2OUCjcGxsb2zgTAFevXo3r7e0t0mg034vFYhFFUd7lNDs7i56eHuh0OjgcjmPXBgKAgbi
4uAij0Yj9/X1kZmYiOjoaACAUCgXFxcVf1dbWZjmdzj9nZmYcp7IELl26FN3d3f2tUqksjI2NjWHHrFYrHj16hLm5uQ/2EcgS8CeBQAC5XI7y8nLExPgMDav
Vutje3j6k1+v/iAiA5ORk3r17976rqqqSxsXFxbJjCwsL6O/vx+vXrwMaNFgAjOLj41FZWYmKigrweDywnjcei8Xye0tLy8+Tk5NvwwJAIBBQXV1dX9fV1RU
LhcLP2LHl5WU8efIEL1++PNG0CxUA66ZAoVCgtLQUXO6/G9rh4eGR2WyeaWxs/MVqte4GBYDP53M1Gs03KpWqKCEhQciOra6ugqZpmEwmuN3uE6+7cAFgdPn
yZSiVShQUFPi0HxwcuAwGw28NDQ3ja2trroAAUBTFUavVOc3NzaVJSUmfs2MbGxt4+vQpRkdHgzIeKQCMxGIxampqkJOT49O+s7OzR9P0r01NTZPb29tHfgF
wOBy0t7dfa21tlaWmpn7BPsnhcECn02FgYACHh4ch5wyRAsAoNzcXKpUKGRkZPu1bW1uO+/fvm9g5hBeAzWZTZWdnf/m+ca1Wi6GhIbhcrrBlX5EGAABcLhc
lJSVQKpVITEz0idlsNrtYLP4JYH0eF4lE3pRrd3fXe8ffvXt3IVNct9uNkZERmEwmlJWVQS6XQyj8+1F25cqVdOY8L4CYmJho5vju3bt48+bN/yLXd7lceP7
8OZaWlqBWqwEAPB4v6hgAtjo6OjA+Pg6apr35+0WVSCRCdXU1JBKJ37hfAFFRUZDJZCgqKsLExARomsbKysqFMs5sjRKJxCdHCAgAa0vEzZs3IZVKMTU1hf7
+ftjt9nNtPD09HUqlEjdu3Pig8WPboMfjCegl5+zsLB4/fgybzXbujMvlckilUlAU9XHjHM6dj84Af8rLy0NeXh6sViuePXsWcP4fKaWlpUGhUARsPOQZ8L7
m5+dB0/SpgwjZ+D8zIGQAjOx2O/R6fdD1QaBKSUmBXC6HTCYLynjEALArRK1WG3YQ4TIecQCM1tfX8eLFCxiNxpDqh3AbPzUA7ApSr9djeHj4RPVEpIyfOoD
3K8rBwcEPgoi08TMDwMjpdMJgMGBgYAB7e3vH3u5E2viZAzgvYgCQT2MEAAFAABAABAABQAAQAAQAAUAAEACfosL2NzkyAy6o/gIjbgg3Knb8KwAAAABJRU5
ErkJggg==',
        'cvtent' => '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',
        'cvtobj' => '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',
        'cvt' => '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
D/SP4DHcyLiZ8UlIsAAAAASUVORK5CYII=',
        'en-en' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAHlBMVEUAIn3NABzSCSvSHzXniJGuudXtrLbyt770w8j9//x5z959
AAABxklEQVRIx+2WPW/CQAyGveQHQBm6xqCWtaiirASpKlsWhsxUlVjbibG0Q9gTwP+29+HL2QkVHapOtQQkp8dv/N5dzsCSqAYXCR36aCLdUO5Hih2OYETE
9x0gOSIuARuJDlCs8Z7AfFiiDSSHicmGSSPRBoo3HBDBzn67kRaQnDA1uXCapCzRAqwFk2orYSMacBZspi/FSmggJhavfKWAmGeLYS0JeAtsh41IgC3wDB69
EQmwhbAmvp5VBFbBAi+jL4giQGsp0BiJQLTAEt5IBD6ihWZnDCTwniqBxkgERlogGIlAS8AauestI/ApBFY+qCz3wqadFh9AIhTA8QvAi4hnDzzKMejJQBdq
CPBC/AM/BS5O9cXF+oMNEzatAk5l2WzacAwTPUWg6l1t1HsDBVF1LR6R4VS9OFYgk0DVH27zlkBfAjTHca0F5jiTQIW4z5UADjfKZoa3taoAp3oebEYuBXAr
DzGSRrzAWB+D0oi7MSWpg1QY8dcP7aM4GilCQfowd8+9qRsL3XYQ8thCt6GERLZwpiV5I+B+9ueamjcCbOFcW3QPhzinncZqJBYGWIQp7bZmKwFxXbvN3RqA
DGff/z0wEl/EpBpW2fgAGQAAAABJRU5ErkJggg==',
        'entlock' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFFUlEQVR42u1bTWgiSRQujSZ6UGZoM8gQIX1ZcBhkZg4RXboJEk
RZs0SvCpsFwZZAwJNkyGEPYSWXCAuNBpz8XPeiJAQhhxC6d/w5SECHPTm4s8IgszYJ8WASW7KXDayd7viTbtufvKu+rvq+eu/Vq3qvJACAX8AYixSMuYw9Ab
J+DALDsNJsNkMmk0lrMBhe6nS6FxqN5plSqVQCAEC9Xq9Xq9WLcrn8LZ/Pf02n05VUKkWVSqW60HOTCBEDJBIJsFqt016v9/XS0tL3Mplsopfv0DTdTCQSH2
Ox2Kfj4+N/bm9vB5sACILkwWDwVSAQWOwV9ENkhMPhw83NzT8pimoMFAEqlWoiFAq9XVlZ+aEfLoXj+NHa2tpZrVZrik6Az+ebjUajP4kRwDAM29/e3v5LFA
IgCJLH43E7giBvxYziJEmeOZ3OZK9u0RMBCII8Pzk5WeHbzx8THywWC06S5LngeYDb7Z4hCGJ1UMADAIBMJpsgCGLV7XbPdKs7AQCY78bfd3Z2fh7UpMblcr
2rVCpfcrncBe8EuN3umUEGfycOh+NNsVj8XCgULnmLAQiCPCcIYnWYUlwURX/rJCa0JQCCIHmlUgkOks93Ghi1Wu1mu92hbRCMx+P2YQN/Fxjj8bj9UbuAz+
eb5Xufz2azwO/3A71eDxQKBVAoFECv1wO/3w+y2SyvJCAI8tbn88325AIqlWri8vJync8J+f1+EI1G22V3IBKJ8EqEWq3e4EqbOS0gFArxuvJ2u70teAAAiE
ajwG6380rAQ1hYLQCCIHm1Wn3fz5UX2hI0Gs2vbAGR1QKCweArPn2+W/B3lsBnTODCJGW7zAgEAot8Dby3tyeKLlMCgcCiRCJpT4DVap3mc9s7PT0VRZdtW7
RardNtCfB6va/5DEClUkkUXTZhw3YvCDYajXU+LUChUIDr6+uedKempsDV1RWv2aFcLt/gtAAYhpV8Z30wDIuiy+UGMAwrOQkwm80Q3ynp/Py8KLpcwsTYQo
DJZNLyPeDy8rIoulzCxNhCgMFgeMn3gEajEWAY1rUehmHAaDTyTgATYwsBOp3uhRAns0gkAmw2W8f/t9lsvJ8HuDBKGeniM6GOp8lksiNLwDAMJJNJwY7JTI
wtBNzV6oSSSCQCMpkM5++ZTEawlefC2Pfq8EN+LYTPd3UhUq/X62DEhYmxhYBqtXox6gQwMbYQUC6Xv406AUyMLQTk8/mvo04AE2MLAel0ujLqBDAxthCQSq
WoUSeAiVHKOH/XaZpujip4mqabzL6je3lAIpH4OKoEsGG7R0AsFvs0qgSwYbt3IySRSMDNzc26kOUwtstJAAAQogvs/+Y/OTm5wRxDyjaJcDh8OGqrHw6HD9
kI7kthZBAsoKvCCEVRDRzHj0Zl9XEcP+Iqk/e1OCqWBfRUHK3Vak0Mw/aHffUxDNt/qKGybYcIQRA/it0L2KuQJHmGouhBx/cBbOJ0OpPDmB3SNN10Op1t79
baEkBRVMNiseDDRoDFYsE76R6VdmhK5x6P58OwgPd4PB867RrtuE+wUChcViqVLw6H482gB73d3d2/O/1/V52iuVzuolgsfna5XO8GdeW7Ad/RLsAmY90sfR
cTtFrtJkmSZ4Ow1f03l/Ne9HuuC1AU1UBR9EDMZAnDsH0URQ8e84SmqxjAFRe2trb+UKvVtbm5ue/6ldsvLCz8nkqlzh/7radHU+Dp2Zzwb4fH7uHkMMnT4+
lxJ+BfJPZ1Bgj19lAAAAAASUVORK5CYII=',
        'err' => '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',
        'es-co' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAHlBMVEUAAQDRBSUGNpcCOZJnJVtDXnKGiVDlwCL60gn+//xUJyUS
AAAAJUlEQVRIx2PoIAAYRhWMKhhVMGIVGBMAowpGlgJBAmBUwYhSAACCC6gfWlri8gAAAABJRU5ErkJggg==',
        'flush' => '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',
        'fr-fr' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAHlBMVEUAAAAAFI4AI5ULLJnsGivtKTnuMkGbqNX4q7H////ZF6PQ
AAAAJ0lEQVRIx2NQggPNmXAwNRQOGEYVjCoYVTCqYFTBqIJRBaMKUBUAAJi915+gWbqvAAAAAElFTkSuQmCC',
        'grpentadd' => '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',
        'grpent' => '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',
        'grpobjadd' => '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
JMunw0sdgP8BL5pOsPoA47AAAAAASUVORK5CYII=',
        'grpobj' => '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
AAABJRU5ErkJggg==',
        'idownload' => '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',
        'ihlp' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMUUlEQVR42uVbfUyT1xp/+pZ+AIUiFy1gsYogAVoUqRbbIFzBGXE4r
0S2uDvcEoiZsS7SDDOaeb2bJRkJMIt/uLjcZMZsVxauH0QdsZVbtJVqFWv5UIsfXCooVmS0iG1pe/8YGMT37XsKlen2JPzBOc97zvn9+pznPM/znpcCAPvgT
ywY/MklaDYn27Nnz9pvvvnm3OS2+vr6f0zVKyoq+ucf0gIyMjLEMplszR9+C3C5XIZSqczQaDQbKysrBRQK5UWfSCTKkslkfyUbg0KhQGVlpUCj0WxUKpUZX
C6X8cZvgcLCwphdu3atkEgky6hUKgUAICUlhQcAFLlcfmMSCavLysqgpqammQi8QqFIKy0tzY6KiopcvXp1+o4dOzZotdrrSqXySkNDQ3+g1kwJ1Clw6dKlz
ZmZmQK8PqvVOnj48GFNQkLC3ya3t7S0qFavXp03Vb+7u/v4BHi88bRabWdBQcGpoaEhh9frndG6qQCQEwgCvv/++yKivpCQkOD09PQF3d3d9MntPB4vPjU11
fv48WPK5PYPP/xwQUREBBtvLLfbDaOjo3M7Ozvv9/X12Vwul+etcIIsFisUrz0lJYWSnJyMpOv1esFoNEJXVxckJibOHxkZGXurjkEi4fP5AADQ1dVFqDM8P
AwPHjyAO3fuAACASqVqf+vigOmQ4PV6wePxgF6vB5vNBgAA0dHR0NPTY3tjjsGampr0QJGQlJT0Utvjx4/h2rVrMDQ0BG63GwAAPB4P7N+/PyBzzvgUUKlUG
3Jzc4WvwyqePn0KOp0Onj179lJ7YmIiLFu2DNRqtSEvL+/077IFwsLCqDqd7n0+n5+Iom+xWPrb2truGQyGBwaDwdrR0THc19fnAACIjY1lpKamhguFwiihU
Dg/PT19UVBQUIzRaHwFPIZhwOPxAAAgNzdXaDKZ2GKx+JjNZnPPmgWEhYVRr169+vfExMSFvvScTqerqanpyqFDh4xnzpwZQB1/x44d4szMzFVMJpM1tY/JZ
MLKlSuBw+G8aDObzfczMjKOToeEaVmATqd7nwx8Y2OjTiqVXujp6XmOOm5sbGyoWCzm5eTkrCXSGRsbg6ioqKlbYqFOp3tfIBD8+NqdoEql2uDL7C0WS/+2b
dv+tXHjxnP+gAcAkEql69999931vnQWL14MVCoVz4EmqlSqDa81EqypqUnfunUrYSKj1+tNy5cv//HatWu/+rOIpKSkOcXFxZlpaWkraDQanUjP4/G4nU7nk
4SEhNDJCdaExMfHx7LZ7OGmpqaHM/YBvmJ7PDl//rwhNzfXb4+ckJDA3rlz5yYOhxNHxftpp8jx48ePl5SUxK1Zswb55GltbTWtWrXqP8hboLCwMMYf8Hq93
jQd8KmpqZGfffZZYWxs7EIU8Ha7/ddz587dzs3NPa3X602o82RmZgoKCwtjkAnYtWvXCtTBLRZLf3Z29gl/wRcVFaVu3779PQ6HE4f6jN1uH2Kz2QwAgOzs7
BMWiwU5LSbChOEVMyQSyTLUgeVy+VmHw4GckbFYLFpmZmbM5s2bC6Ojoxf45bExDLtz586vAAAOh8Mjl8vPoj4rkUiW4RVVXiGgvLycP1HMIJPGxkbdkSNHe
v0BsX379qyPP/74PQzDKP5aTUtLy+XJ/x85cqS3sbFRh+TtqVRKeXk5n5SApUuXzkcZ0Ol0uqRS6QXUxc+ZM4exbdu25SKRKCsyMpLjL3iHw/HM6XSO4RydF
5xOpwtlDDxsGE615Z7Vah0kG6ypqekK6jkfGRnJ2LlzZ25eXt7a6YbeDAYjpK+vb2hqe09Pz/OmpqYrZM9brdZBrVZ7j5QAuVxuOnz4sIaMhEOHDhlRFh4RE
UEvLy9/TyAQrGAwGMzpEtDf33//8uXLD6ezlomSnFwuN5ES4PV6oaKi4oZSqVT58vwosX1OTs6CioqK9fHx8ckzzQwfPnzYz2KxaHh9Z86cGSA6Eex2+8g4+
Bt49UPCUHj//v1dN2/evIfX19bWdg9l0VevXl3Z39/PDw4OBgZjZlVtCoWC2e12wr1OtCaLxTJABN4nAV6vF4hOA4PB8ABhzTSbzeaqra0N+vzzz6G7uxtYL
BYgxDu4cvbs2au++onWRKVSKb4qxxiJ82ITTGZFWLMHAFIAAG7evAkymQyqq6vBbrcDi8UCvFjexx7uf/78uZuEAKs/GJAICA0Nxa3OdnR0DKNEugDwUmKjV
quhpKQEjh07BlQqFYKDg5EIYDKZwU+ePBn1pUO0JiIMSATQaDRcpzNRySFJssbG/14Sl8sFP/zwA3z66afQ2toKISEhQKfTfQ529+5d88DAgE8CiNZEhCGgR
VE8FwIAPF8Fl0ePHoFCoQC5XA69vb0QFhYGGPbqctxu99itW7fuTydynHFBxOVyuQgqN2QuPRgAkGqFRqMRpFIpHDx4EBwOB7BYrKlOLIhGowV5PB4vSTWJ4
Q8GJAJGRkZGCNLYcAQC/KoGnT59GkpKSuDkyZNAp9Nf+AeXy+U8ceJEJ0JqHe4PBiQCBgcHcSs7QqEwCqHSFOOvOY6OjsJ3330HUqkU2traIDQ0FHp6erqCg
oJIzZ9oTUQYSIuiFAoF3G63l2Cy+QDg61dZPpN92dvbC3v37gWhUDj2zjvv0Gw2mwuBANwkzu12eykUCvgVCE28n+dyufPw+tPT0xf5OjzGY4AZi8FgMFVWV
upRXoETrYnL5c5TKBRpRHEHRgS+tLQ0m+gtLZfLjcnPz59H5DsBIDYA+LsA4BcA+B+ZYn5+/jwulxtDUIAJLS0tzSYi4ZWqcGVlpaC0tDSH6HLChISHh7t++
umnuzhd0QCQNwPgzwHg2jh4J8oD1dXV4qSkJMLSWkhISHBycjInIiJiVK1WD/i0gIKCgjQy8AAA69atW8Hj8fDSWzYAPJsBAecAQA0ADhRlHo/HXLduHWkNM
yoqKlIikSwi3QLNzc03USam0+m0urq6LAIfEDIN4I8AoGX813eiPlRXV5dFp9NpiDHHA1ICqqqq2om8P461iIuLi6ea3sppRo4nAeCiPw8VFxfHFRQUiFF03
W63t6qqqp2UAIvF4tBqtddRF6FQKNYzGAxskvn7+4KyBwAaAKB/3IGilsgwhUKxHlVfq9Vet1gsDqRjUKlUXkEdmMvlxmg0mk2THNgcf458ADgFAB3+moxGo
9lE5Pn9wYRLQENDQ39rayvymxeRSCRQq9UbAGDJuBWQWiQA3Bv/5Qf9Ba9WqzeIRCLkN1etra0moruFft0PqKmpSd+9e/dG3OqHxwMffPDBwM8///yX8ePV5
w8IAEYAeOoPcAaDgWk0mk2+wNfW1p4qKytrC0g2OFXKysra1Gq1AXcgDINFixbNIwFvHzf3//oLvri4OK67u7vEF3i1Wm3wB7zfFjAhJpNp69Q7Ak6nE+bOn
QvDwz6LRfXjkd0I6lw8Ho9ZV1eXRebt29vbzbNyQQIAQCwWHzObzfcnt128eBHCw8OJKku28QCnCxV8fn7+vFOnTq29fft2GRl4s9l8XywWH5sOlmldkbHZb
O6MjIyjky9JsdlssFpfrUumpKRAbW1tWEpKCr+trS0U9ZIUqodvb283z/olqckycU1u9+7d8O23376UVC1cuBDq6+tBKHwtt+h+32tyE5KXl3f666+/Hujs7
MzHMAw8nt8y4U8++QQ++uijl8DfuHEDbt26RTrmli1bSHX89fa+Kjc5Mx2kubn58ZIlS7LMZjOwWCzg8/nQ0NAAixcvfqn+z+FwwOv14m6VKeUtFD/070BYU
aDuCrPOnv3trsIXX3wBmzZtAiYT/z0oysXo2ZRAEcBns9mwdetWqKioIFd+g0gICtAYfXK5HKRSqU/Fzs7OOzQajRoZGclOSEgIxTCM1tHRQXnbCRgDAEtaW
lonk8lMIVLau3dvvUAgeOWrkpaWFtXBgwe1k9u+/PLL5K+++qrIV2wfKAIC9cmM++jRo53t7e23o6OjMS6XGz3xJsdqtQ4eOHDgl3379nVs2bIlByfSi4+Li
8MuXbr0IrC6cOGClU6nP01OTuaEhIQET+TzFy9evC6TyRplMtmVQBEQsI+mpqTIjPLycv7SpUvna7Xae3K53OT1enE/kpwQvV7fUl1d3Tw5jlAoFAKJRLLIa
DQ+qKqqasfL599IAggTAR8EjJNwobq6+vxs+oA36tthkUiUtWfPnrWzOeesWsCbKH/6r8f/Dzbl4TPLEXTkAAAAAElFTkSuQmCC',
        'imenu545454' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABAElEQVR42u3XvQmEQBCG4e8OYxuwEvvYMu1DBDESw2VRtw
LB0L30ghMM5Eb0nVTx52Fm9Hs555IeXG89vAAAAAAAAAAAAAAAAAAAAAB4YmVnXMQ5Z/LwVVXZd4DVy591b3YAAAAAAID1p8jy3tlVHoQRAAAAsgBZgCzADg
AAAADIAmQBRgAAAMgCZAGyADsAAAAAIAuQBRgBAAC4fhY4UkVRqCzLQ+eGENS27b06IMaopmm0LMvuOdu2yXuvYRjuOQLTNKnv+93j4ziq6zqt63rfHRBjVF
3Xpm1vvgS/x8Gi7U2W4K9xSCkpz3OFEP7a9pcAkKR5nvkPAAAAAACwrA/2026oVwXU/wAAAABJRU5ErkJggg==',
        'imenu' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABMElEQVR42u3ZQWqDQBTG8Tdp6VjEda5gyBnEeIkcxZ20mRuVrt0M
IrhKyB3chFoIhULBalfZhCy6kBmI/7dVnPHHm3E+VCLyKjOuhcy8AAAAAAAAAAAAAAAAAAAAAJhjPU7xkHEcX3xMXim1894Bvl5+qrHZAwAAAAAAfH+KfI6t
hP8CLAEAyAJkAbIAewAAAAAAAFmADgAAALIAWYAswB4AAAAAAEAWoAMAAIAsMGEVRbEyxmz/c29VVYckSd5czOtBRDYuBrLWfmitP+M4XoZh+Hzrnr7vf621
+zzPbdu2P3cFICJSluUpCIKvLMvWt67XdX1M0/Td1cs7B7h0wjAMp2sEl23vFeB6OWitn1y3vXeAy3KIoui767rOGNM0TXP2cprkJMhBCAAAAJhx/QGiUnc0
nJCIeAAAAABJRU5ErkJggg==',
        'imetrolog' => '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
BwkRZiWYHqv4AAAAAElFTkSuQmCC',
        'imodify' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAALRUlEQVR42u1bb1ATZxp/s8mSbCER2RAT+Zdo0DkPMqXXawVM8D
peimN7Yh2+XOlcp2VaGMJhrDNUy4hQR4rTmrbI1Dq2HafUD85UQh3U4WacO4LB8eBsgXGGipcYA0RIAkmAzb/N3gcnzrLuJjEE6JU+nxay7+7z+73P+7zP87
zPsgAAx8AaFgiscVnzBHBW4iUymQwpKipCCwsLxQqFYmNWVpZIKBSmIgiCAAAAhmGY3W6fffDgwdTQ0NBEf3+/zWg0OkwmE7bcurGWwwewWCygVqvTKysr88
rKyoo5HA47nucEg0Fcr9ffOHfu3EhPT880QRC/bAJQFIXr6+u3abXaV+MFHYkMnU53ubW19Y7D4Qj8ogjg8/nslpaWgpqamj0rsaTa29u7Dx8+fNvj8eCrTs
C7774rPXPmzN9Ww4FVVVWd//LLL82rQgCKonBnZ+dupVJZsJpe3GAw3N63b9/VeJdFXAQolcr1169fr4l1nRMEAdxut9tsNk+OjIxYjUbjuNFotN+9e3cBAA
Byc3OfKSoqEhYVFWXk5eVlSqVSiUAgELBYrJj9w0svvdRuMBhmlp2A119/PbOjo+PtWO6dnp529vT03K6oqOiLZ3Y6Ojp2qNXqgvT09LRY7q+oqPjqu+++sy
4bAbGud7PZbNVqtd16vd7GdA+bzWbhOE5Qr+mkrKxMrNPp9kil0sxE+4WYCYhl5l0ul7uhoaHr9OnT/6X+hiAIxOFwWNnZ2YhYLOby+XyYx+OxAQDA6/XiHo
8nMDU15RseHp5jer5Go9l0/PjxvevWrRMkyhJiIkCpVK7v7e39e6R7bt68OVxYWHiJDjiGYaH6+vqtEokkuaSkZItQKBTAMMxJSUlJBgCAubm5BRzHcbfbPb
9///5Ld+7cmY/0rv7+/te2b9+eH+kelUr1eSw+ISoBKIrCNputnsnh4Tge+uKLL67W1tYOUIFnZGTwTp48uT03N1ecl5eXG02Z1tZW/fvvv/9TLDPX1tb2fH
V19W42mw0xOUaxWNwabXeImgt0dnbuZgIfCATwgwcPXqCa/CuvvCJSq9VZFRUVSoFAwGdSkiwff/xxV6zgAQCgtrZ2YHR01Hnq1Km/wjD8hH4cDofd2dm5W6
VS/RDpOWwAwM5ITq+mpqaUaea1Wu0i8AiCQIcOHdryzjvv/LGkpOT3aWlpqaxHwqiA0+mcPXv27D8aGhp+CgaDTxXs37p1a2ZmZsb68ssv50MQ9MRLcnJyJD
ab7f7g4ODsUy8BPp/PdrvdDUwDT58+3U02++TkZPaxY8fyy8vLnxeJRCiCILxoAJxO5+y3335rOHz48I8YhoXiDYba2tqe12g0jGG4QCA4zhQ2M5pmS0tLQS
SHR13zzc3NikOHDu3NycnJiAU8AAB8/fXX/zpw4MB/lgI+vBxu3rw5HA8WWgtAURS22+1HmLa61NRUHdnsm5ubFW+++aYSRdG0WKK3RM08VWZnZ7VMW6RQKD
xB5xBpLaC+vn4b00saGhq6yH9XV1dvrq6u/rNQKEyLNXRN1MxH0y0WTE9YAIvFAn6/v4HO85vNZqtMJvsqfF95efnGgwcPFioUCvlKrvlIYjKZ3qaLGIPBIJ
6UlHScWlR5wgLUanU607an1Wq7w9fZ2dm80tLSHLlcnvFLAU/VkbotqtXq9KhLoLKyMo8psSHH9jAMQ2VlZS+iKLp+Nc2eKnq93jY9Pe2k+40OG0STeBTTDe
7p6bkdvt68eTPS1NT0BxiGOdHqdE6nc/azzz67fPTo0aGVqhGQdY2GDaJWb+nMnyAIQE5p7927hykUiqyUlJTkaI7v6tWrgysx85RkqI9uYjgcDlsmkyGMBB
QVFaF0D3S73W7ytvfBBx/8bsOGDWgoFIoauRUXF2+tq6vbvNKVIrLOkTAuIqCwsFDMkN9PklhkyWSydQiCcOnCT6pIpdLMurq6nctJAgzDrG3btiUz6RwJ4y
ICFArFRrpBIyMjVpL3R6RSKZqUlMSNVUGZTLZsJCAIAn344Yf5R44ceS4/Pz+FTudIGBcRkJWVJaIbZDQax8PXYrGYK5FI1sMw/FSnSstBAoIgUEtLy7OVlZ
V/KigoyBGJRFw6nSNhhCjhYioDAXZSKBxAUTTmgiWVhI8++qh8165dwkQQ0NzcrKirq3sVRdFUFEXXuVyuAJ3OkTBCFEYRukHh6i0AAMjlcj6GYb54lebxeN
yzZ8/uXYolIAgCffrpp8+99dZbJeH/YRjmk8vlfDqdI2GM93SYtZSZW8pyCJv9G2+8oUxLSyPPZlwHh4sIwDCM9jQ2Nzf3mXD11uv14gRBEJGquMtFAhN4HM
cJgiAIr9eLs9lsFllnqlAxLiLAbrfPMuydwvCLPB5PAMMwXyxbYCJJiDDzAIIgFoZhfo/HEwhPTFhnqlAxLiLgwYMHUwwEZISvBwYGXIFAIBiPE1yKYww7PC
p4UgYbtNlsPjqdI2FcRMDQ0NAE3aC8vLzH6WUoFCIGBgbMc3Nz84naziI5RjqHR5W5ubn5wcFBs8Viweh0joRxEQH9/f02hmhOQsqrCZPJ5PJ6vb5YQuGlLI
dIZk+eEAzDfCaTyUUuqpJ1joQRouz3DoaiooDkREIGg+Hh/fv3H4ZCoYQmOGQSYgEfrk5bLBabwWB4SE64yDpHwghRqilYMBjE6dZYR0fHjvDfExMT3tHR0U
mv1+tLdNuKTCbLPHDgwM5Lly6po4EnCAL4fD7v6OiobXx8/LH5d3R07KDzUcFgEKf2HUE0BYUbdC9Tq9WPK6tjY2MLjY2Ng36/358oZ0hNoEpLS1+MBD48MR
MTE9NXrlwx3bt3D6PTNRq2Jwg4d+7cCN3g9PT0tLKysseZVCAQCHV1dd1yuVwesEricDhmbty48XNfX5+dVPQQMx2n02GDaKop03TLAAAAdDrd48MHq9Xq8/
v9eCLigXgEwzDv2NjY+LVr1+5bLBYvnY5U8+/p6ZmOSgBBEECn011mMk2NRrMJAADee++93D179jzL5/NTVhp8MBjEp6amHHq9fqSrq8sW9kMajWYTUw+BTq
e7TOev4joYOXHiRHdtbe3OzMxMyUqDJwgCOBwO5zfffNPb2Ng4TPb88RyM0B6OYhgWSk9Pn3/hhRe20AUtxcXF8lirwYme+ZmZmdkLFy4Yjx49OrSwsBAi7e
+vyeXybLpx7e3t3d9//72VKas7RvdDtMPR1VjzU1NTjosXL/67qalpZH5+/rGfWpbDUY/Hg1dVVZ2PR1mPxzMX3h2WEieExzocjpmhoaGxM2fOGBobG4fJ4D
Uazabq6urdTM+oqqo6H6mhMmqHSG9v71+ephfQarVOdnd3/5iUlMTesWPHFolEIuLxeFzokcS0Y4RCIQLH8ZDP5/NOTk5O9/X1/Xzt2rX7XV1dNp/PFyKDZ2
qQAOBRD2G0Boklt8hQwbe1tf3zk08+uZuZmclVqVTC0tJS2datWyXZ2dkbeDwel8vlcmEY5oRCISKcu+M4TkAQxAoEAkG/3+/DMMxnsVhso6OjtitXrpj6+v
rsFovFS7amRLXIJKxJamFhAWtqatKfPHnyZ/L/5XL5Mxs3buQplcoNMplsnVQqRSUSyXoEQZJYLBb0yNIJAsMw/+Tk5IzZbHaYTCaXwWB4OD4+jpEjPLLDW7
EmqbAkqk1OKpUiIpGItk3OZrP5LBYLFgwGCbqTpFVrkwvLmm6UfBpLCMuvrlWW7BPWbLM0eXf4NbTLx/3VmMPhCKhUqh/iDZYSIVVVVedVKtUPS/mEJmKjZC
wyODg4e+rUqT6BQOChyx2WQ9rb27t37dp10Wg0ziz1Wb99NAV++2xu+b8dXnMfTv4/yW8fT691Av4HvUmd/0TFh9YAAAAASUVORK5CYII=',
        'info' => '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',
        'key' => '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',
        'klicty' => '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
AAAAASUVORK5CYII=',
        'lc' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFh0lEQVR42u2aYUhbVxTHb/JeoDJtnuhktQizX+aHaZRqwTplogh2jCo
oWExZrYpuidBKZSCORBAKWmxwz0bb0DprcCDMqLRNjH7Q1kRQ1GZOGFoNxLlM4zAxnUXz5j7Z5VySp9ZG0+QdyIfffe8Fzj/3/t85N5eHEJIjtygpKZG588O
HD90R8Xg8wLW1tYBbWloADwwMAM7MzASsUCgAb29vAxYKhYCrq6sBO51OwFevXmV9vrW1FTAfBXlwAgS7ADzcA/AgCAJ4Qnx8PLg+PT0N+MyZM4BXVlag4nw
+qwfcv38f8NzcHODh4WHAeXl5gJOTkwEvLi4C7u3t5WYAJwAnwP9B7ncDwzD12BoDnmC1Wlnf83I5tJihoSHA2dnZgE0mE+Cenh7Aer0e8ObmJmLzKKVSCbi
5uZmbAZwAnACH8AA8VCoV8ITl5WXgCWFhYeD+6Oho1l5id3cX8NOnTwGPjIyw8urqKqsHXblyBfDU1BQ3AzgBOAEO0QscNsLDw2UYs9bmubm5rB6Ae8b4+Dj
gx48fAw4JCQHc1NQETY8kuRnACcAJ4EMPwOPWrVvAE/A9urq6OsBarRbwzs4OYHyPEd8/yMrKAhwXFwe4sbGRmwGcAJwAx+gBeGRkZMjY3ts6nY61V7hw4QJ
rXbG+vs76/Js3b7gZwAnACXCE/YCjxujoaD1CCKWnp4f39/df4/F4p9nqBLwXKC0tBTwxMQG4pqaG9flXr16d/AzYS56iqNNBtwT8KfljF8Dfkj/WOuAgyT9
69Giwr68vx31Mo9GAe/DzCPh5Arzft9vtgNva2o5/Bhw0+evXrxsDbgn4c/IIIUS6XK4ftra2tmw224bFYlk1mUwrRqPRajAY1peWlrYCOXmEEOLt4sWyW7h
cLkaj0YypVKrZwcHBNZZbfZZ8YWEh6B1iY2PBdfy/Pvx8QHl5OasnsC4BkiSJgoKCDK1W+9329nZdY2OjKCIiQhAIv/yhPYAkSaKmpibPZrPV0jSdHBYWRnz
oyb+zCUokkq8cDkddRUXFp+7jaWlpH1Ty+3rAQeL58+fT+fn5zxBCSKvVXhaJRHECgYDwVfJFRUXAE7q7u8H1lJQUwJOTk6y9AT80NLQhKSmpWSKRdKrV6uG
XL1/+brfbHQfVJT09PclqtX5//vx54YMHDybNZrNlZ2eH8fdf/q0Ar1+/ZmZmZjbv3bu3JBaLXyQmJv5MUdRdPp9fr1arh9fW1v4+iD/odDoJwzC7d+7cGcF
F8Nfk9/UAsVj8Iioq6sf8/Px2s9m8vN+XqVSqa6dOnSLcRejo6ND7a/KH7gWkUum5hoaGy0KhkLWZKSsr6yAIgnf27NmPZDLZb75MQCKRAE/AzwJ3dnYCnpm
Zefe3AE3TixRF3R0fH/91v5mwsLCw6evkT+w1mJqa+gtN008YhvnX2z06ne7bgxRNH+x+QFVV1eSNGzfUnhx/zxh7e3tz/V2AI+8HSKXScwqFopggCI9iVlZ
W/tTe3m4+roQuXrwIPGFsbAxcx88XHLkdpml6UalUPvN2va2t7RtvZXPAbIlVVVVNshnj7du3kwJagD1jtNvtDm+9g78aIoEQ+vJ9fZnT6Vy9dOmSyKPZ8Hj
rer3+L18nZLFYRtw/crkc5Gc0GpHD4Xj7ea9bYjRNL3qrGG/evPk13ogE1BJwS/SJt9diTk7OxwEvgEajsXproMrKyj4PuDrAU3R1dX1RXFychY+7XC5GIBA
0nGTCFEXJfDoD9rpIT/sJJEkSsbGxIQG9BPbC4XA4vFRqEUEhgNls/tNLvfCJPwngs/MBs7OzyyKR6DN8PCEhIfokE97Y2Kg/lhlgMBj+8DQeExMTFRRLwGA
w2DyNR0ZGUkEhwPz8/D+exkPwc3EnHP8BryZzTosJhFAAAAAASUVORK5CYII=',
        'ld' => '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
T2KAAAAAASUVORK5CYII=',
        'le' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFaklEQVR42u1aQUxiRxieXeBSoSAky0aJ2oOKvMoBtKK49sVGN5CQJm7
iYcV4gHJoPWhMTDgYaziQmBiNoU10OWqi1tqDKQRNVqKoJCvEYOXAodH4qtamray+WjcP08s+M7WsQlmGecH/NLzM+3z/N//MP///+QAA8DXIY3sI8tzuCch
3Avhc+liSJKVWq5XQaDSlRUVFjwoKCgoAAICmafrw8PAkHA7vu93uXb/f/0eqmA+4cAiSJCl1Op2kTqerTmV+MBjcsdvt/lSI4AEASJydHx0d1bhcruclJSW
PU31HoVDIzWZzjVQqPff5fEecjYCpqaknHR0dzfCzSCQS83q9ux6PhwqFQnEAANBqtWKj0agwGAyEWq2ugOdPT0+/NJvNa5wjYHR0VNPT02Nif1MUdexwOHy
Tk5N7t71ns9nKBgYGnioUiuuIGRsbW+zt7Q1zhgCSJKXLy8tf8vl8HrvqjY2Nc2dnZ4lU3heJRLxAINDORgPDMImWlpZvk50JWKZBp9NJss5TFHWcjvMAAHB
2dpZobGycoyjqGAAA+Hw+z+l0kpy4B5AkKYVPe4fD4UvHeZgEh8PhY3/rdLpqkiSl2BNgtVoJ+MC7a8/fZpOTk3uRSCSWDBtbAjQaTSk79nq9u5niwRgwNrY
EFBUVPWLHHo+HyhQPxoCxsSWAvd4CAACb5zMxGAPGvi+GcCWApmmaHWu1WnGmeDAGjI0tAYeHhyfs2Gg0KjLFgzFgbGwJCIfD++zYYDAQmeLBGDA2tgS43e7
rtKVWqytsNlvZ/8Wy2WxlcHEEY2NdC2xubraxt0GKoo5VKpU73dugSCTiRaNRK1sUBYPBnfr6+gVOZAG73e5nGCbxtrZ/HAgE2kUiES8d5wOBQDvrPMMwCbv
d7seuIWIymeSVlZXCWCz2r9N5b2/vQiqVnut0ukoAAJDL5bLOzs4KmqZ/D4VCp3eF/dzcXHt5efn1rW98fPzHiYmJn7EqhwmCEL569eorAACoqalxRaNROm8
aIgRBCNfX178Qi8UfAgDA6enp66amphc7OzvnyRoj3d3dRrY8TtUYhkm4XC7PuxohOdsCFouldHx83FBcXHzdsREIBAKhUPjXysrK0eXl5RU83+fzHa2trf2
kVCo/UCgU8lT+RjAY3Onq6vruXWGfswiwWCyl/f39n1ZUVHzEPkskElcbGxsRu92+ur6+/uddvQLOtsXTcV4sFvPj8TiD4ruQbAGCIISzs7NmOOwTicTV1tZ
WVK/X/3BwcPA3PH9xcfHp9vb28cnJyRvOF0MWi6V0YWGhjT3w4JXv6+t7Cc/V6/WFq6urnzc3N9fMz88/s1gspZyOAJPJJB8aGvoslbDX6/WFTqezqaGhQc3
j8R7KZDKJUqmU7O/vH9+8J3C2HE7VeZTflNUIiMVi9MXFxalSqRRLJBJxOs7HYrG94eFh/8zMzC/ZJABJFqiurhaOjIw8aW1t9SbJ2c/q6uo+hp/F4/HXer3
+xe7u7nm2vw1ZGryZ2m5b+ba2tu9ROA9Amv8fkMlF5GZeHxkZaU628sPDw35UzqccAe9bn19aWjK0tLR8kquwT+sQzIY+LxAI3lRVVUlkMlkhG/aDg4Nen8/
3G+rC7NYIyGY5qlKpCra2troBAKC2tvYb1Ct/JwEo9HmTySR/e/X9NVdNmaQEoNTnc21Jb10o9XnsCECtz2NHAGp9HjsCUOvz2BGAWp/HjgDU+jyWWSCf7D8
EoNbnsSMAtT6PHQGo9XnsCECtz+faktYCKPV5LLMASn0+15a0IYJSn8dyC6BoiHCCALYxkk19HsstAFu29XnsI+Bmr+B96/OcIiAvaoF7Au4JyC/7B+Nh3zS
aPDzaAAAAAElFTkSuQmCC',
        'lf' => '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',
        'lk' => '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
CYII=',
        'll' => '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',
        'lo' => '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',
        'ls' => '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',
        'lstent' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACJklEQVR42u2Yv2vyQBjHr6YK4tDQe4UOHd7FG9qp7oVs7xi4RZf
S1b8g3ODQUVyVTC7v+haEjC7dstshBM7lfaFQFyWFQgih9p2E1ERtm+WC32fN8Tn43pP78TkihNyRA64SOfA6+ACO9w2wLIuZpnnJGDvXdf2EEEKCIHiRUj4
5juP1+335lQlV4x1t2wM452e9Xu9Xo9H4uQswm83+CiEm4/F4vmucqjyNEGJkpWrb9k29Xj/dtwKUUp1zfhVF0dx13cW2VVKVlwqAc35m2/ZNuVzWPtuGmqa
VDMO48DxP+r7/WiRe6heQUt7ua6td7cYY+10k3ocOsCyLtVqt6+/uqJRSPQzD53Wrqc5LHYOmaV7mPVaSDNV5qQAYY+d5J0gyVOelAlifo3kqyVCdh5vgZgB
BELzkBSYZqvNSAUgpn/JOkGSozksF4DiOl3eCJEN1Hi5CWZugEGISx/HbV+FxHL8JISZF46XeAr7vv0ZRNDcM40LTtNJn4d1u989oNPq3+U11XuZr0HXdhed
5stls/qCU6vvaqtPp3GfBi8DLDGCd9GAweAzD8LlWq71Xq9VypVKprFar9+VyGUyn09lwOHxot9sPmy+sIvG2ChE4QThBOEE4QThBOEE4QThBOEE4QThBOEE
4QThBOEE4QThBOEE4QThBOEE4QThBOEE4QThBOEE4QThBOEE4QThBOEE4QThBOEE4QThBOEE4QThBBFDs+g9boz1FYqyOwgAAAABJRU5ErkJggg==',
        'lstobj' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACyElEQVR42u2Yv2saYRjHH3+cGKToUQKBZhDJnWCW1iWbd1NKh5y
cxeLWpYN/wXGDQweHkFXBxaWb9EDxOkiWoNlcQjoE4S5DCoHGoXqHAbGnptML4mmim1efZzze9/MeX96fHxcAfIUtLjdseW19AN6XGkiSxCaTyUOWZfdDoVA
QAMAwDFPTtPt6vX5zdnamrTPgpvFcy/aAVCq1d3p6+p5hmPBzAF3X72RZPq9Wqw/PtdtU3sIAJEli8/n8J4qiPKZpDlRVbSuKcnt5efkHACCRSLxOp9MHgiA
cBYPBV5ZlTXK53PdlaW8yzxZAKpXaq1QqXyiK8rRarStRFBv9fn+86EdomvbWarUPHMfFLcuaZDKZ8nzSm86zBaBp2meGYcKtVuuK5/kfq6zDZrN5wnFcXNf
1O5ZlvzmJ556fWgzDhE3THIii2Fh1IxJFsWGa5oBhmLAkSaxTeLYAksnkIQCAqqrtZdNqUfX7/bGqqu1ZhhN4tgBYlt0HAFAU5Xbd85T0IQwn8GwBkHOU7Kb
rFOlDGE7g4U1wPgDDMExyjq4LIn0Iwwk8WwCapt0DAKTT6YN1ByB9CMMJPFsA9Xr9BgBAEIQjmqa9q8JpmvYKgnA0y3ACDy9CizZBWZbPLcuacBwXbzabJ88
lTdO0l8Aty5rIsnzuNJ4HAPjZD51O53E0Gj3wPB+LRCJvstnsu1gs5h6Px3+73e7I7/e7j4+Pd3O53NtSqfQxGo2GyWOjXC7/mh9g03lb/xy2zYDZpAuFws/
hcPg7EAg87ezsUD6fzzedTp96vZ5xfX2tF4vFi0wmc9HpdB5fWoebynOhFEUniE4QnSA6QXSCeBVGJ4hOEJ0gOkG8CqMTRCeIThCdIDpBdILoBNEJohNEJ4h
OEJ0gOkF0gugE0QmiE0QniE4QnSA6QXSC6ATRCaITRCeIThCdIDpBDOD/rH8DMMhr30jfnQAAAABJRU5ErkJggg==',
        'lu' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMLUlEQVR42uVba1DaVxb/KyBWiqwovh/4ihqfIKQaJAnVDY1W23Q6mqY
pdjrNjrqSD3XG6dR2Zidtp87Y4YNo4iStjWRnU9OZthMQ1wZ11gdbFKOoiVqCigFBq1C0EBA0+8kO0f8FVDDt9n5S7rn3nvPj3nN/95yDFwRB/4D+xM0b+pM
35LNaODMzE0un0wnJycn4iIgIXEBAgB8Gg0EjkUgkBEGQzWazGY1Gi16vN6nVasP09LSuv7//Z5lMtu5OPbwO8whkZmZiy8rKiBQKJSo0NBS3nzm0Wq1BKpU
+am9vn3cHGIcCQEFBQRCLxUrKysqKdue8Y2NjCzweb0YkEq38LgGIj49/7v3338984YUXYj0JsEQimauvr5cpFIrHex2LgCDolCeUqq6ujvvkk09OxsTEBHp
6h0VGRgacPXs2Ho1Gm4eGhvTPfAc0NTVRTpw4kfgsnGtfX5+8urpa+kwAQKPR3jwej56SkhLuirxardZNTk4uTUxMrE5NTa3Nz8+bdDqdDYIgCI/HI4lEol9
KSop/enp6YFpaWkhERATelXmnpqYWWSxWv8Vi2To0ANBotPfXX3/NiI+PD3Ykt7GxYevt7ZXfvn17bnh42LCXNahUKq60tDSWwWAk+vj4OLzCFQrF8rlz53q
dgeA2ANrb20/u/OZtNtuWwWAwbW5ubkIQBHV3d8+2tLQ81Ov1toOsRSAQULW1talMJjPF2U4oKyv7j8cBaGpqohw/fjze3lgIgiC9Xm+6devW9MzMzK8LCwu
P19fXN919vdbU1GQ7OhrOfMKBASgvL49666230reNxePxvnl5eeGJiYkhYWFhATgc7nk/Pz8MCoVCQRAEWa1Wq9FoNOp0OsPCwsLK+Pj4Ip/PX+jt7V3dz/o
IBMLr+vXrORQKhQiSuXbtmqSpqWnW7QCEh4ejqVTqXwgEwnOvvfZaEolEigsNDQ3ez1wajWZ5cHBw+sqVK+P7AaO5uZlKp9MT4PosFov13LlzHXA84UAAXLp
0Kb68vJxMJpOPunNrS6XSB1wu90cej/doL+NaW1tzQTtBIpHMXbx48Ue3AEAmk/0bGxtfpNFomZ680wcHB2WXLl3quXfv3pqrx0EgEJwG+YT33nvv7k7avGc
myOFwSFevXj0fFxcX4WlSEx0dHVpeXp4dGBho7Orq0jqTf/LkCbS0tGRgMpnxcP0hISGo77777tG+ARCJREXnz59nIJFIxKG915FIRG5ubhKdTn+ex+PJncn
Pzs6a4uLikAkJCYSdfaGhoTixWKxcWlra2NMRwGKxCLFYXJaWluYSvVWpVJrR0dE5qVSqlkqlK/fv319bXFy0bDvO1NRUfwqFEkShUCJIJFJsZGRkmCvzTk5
Oyo8fP97u7DolEAiozs7OV+HIkkAgmPzggw8mXAYAi8UiRkZGLiQmJhKdMDzrDz/8MHz16lWZUChc3su3XFhYGFxRUZHJZDKpPj4+KEeycrl8Pjs7+5/OQGh
oaMiCI0pardZw+vRpocshMbFYXObMeIFA8N/CwsJrFy5c6N2r8RAEQUKhcLmkpOTukSNHOHw+X+xINjExkSgWi8uczXn79u05uM9DQ0NxmZmZWJcAEIlERY6
2vVqt1tTW1t766quvxl955ZUYg8FwIIqrVCrNJSUld8vLy1tVKpUGJJeWlpYoEomKHM01PDxsUKvVOrg+Op1OcAoAh8Mh5efnUxwEISarqqruUKnUcDabTTG
ZTDZ3OT4ej/coISHhC4lEMgGSyc/Pp3A4HJITn7EE93lycjLeIQBkMtm/srLyJdDEvb29I5cvX+5/++23jyYkJATj8XjsgwcPdO70/haLZSsnJ+fbnp4eII+
vrKx8iUwm+4P6JyYmYBllREQEziEAjY2NL/r6+vqAvvnPP/986N13300jEolBSCQS4eXlBU1NTa1BHmj5+fkdoJ3g6+vr09jY+KKD1yCsTgEBAX5AAFgsVhS
I4alUKs3HH388YG/8dt/8/LzJU1zg5MmT34N8Ao1Gy2SxWFFwfSCdMBgMGggAm83OASlSV1fXyWKxkncaD0EQtB3J8USzWCxbdXV1naB+kM4gnbZzD7sAYDA
YgRQKBfZhw+fzxTwe71FQUNDzCATi0JigvWMEXZEUCuUog8HYV/D1KQCqqqoyQCSHzWb3QxAE+fn5ob28vHbJ4PF4j2eZ2Gx2/8bGhhWuD053kE42m80GCwC
NRkuGG9DV1TWsVCrNEARBZrMZVgEikejnaQCUSqW5q6trGOALkl3VyWg0WnYBwGAwAsPCwmCDGS0tLbLtv3/55RdYx5KSkuJ/GEfBXhf7FhYWFrzzGIB00uv
1pl0AFBcXR4M8vz29VavVsJHc9PT0wMMAQCgULoNuhJ02gHSyt+E3ADIyMmBj+aOjo09x6unpaR2AnoYclkPcqRPIBpBO9jZ42wUfggDhKbX9//39/T8D2BW
eSqXiDgOAnTrB2UClUnGgyJC9Dd52HhMHWOypEJJMJlvXarWwx6C0tDT2kACAzQbb2wDSRavVGuzT6t527AgDN+D+/ftrMArABisZDEYigUBAeRoAOJ3sbQg
ICEAyGIxEAHiPYHnAdtx+Z9uO5Ni39vb2eThZHx8fZG1tbaqnAYDTyd6GioqKBBQKBcsBduq+rxohmUy2PjY2tgDXx2QyUwoKCoKgZ9SwWCyCwWDEwfWNjY0
t7Kwq+Q0Aq9UKS3DCw8PRAGo6A1KipqYmG4FAeHnKSJBOVqvVGhUV5euATs8AqbDRaDTCDUpNTfUHRItWJBLJHOhGuH79eo6nAADpZDKZjMnJyVgUCuUN84y
fgyul8bZ7ORkADw3gdq6vr5dZLBYrYByxubmZ6gkAQDoZDIZf33jjjWQcDudn/16xWCzW+vp6mcPH0MLCwgpgMWACRKFQPG5ra7sH6qfT6Qmtra257j4OIJ2
0Wq0Oh8P57XyttrW13QPVD/0GwPj4+CKcAIlEcni3NzU1zfb19ckdKEsUCASn3ekYQTr99NNPuyLSfX19clBm+CkA+Hw+rFePjIwMKywsdJjxra6ulk5NTS2
C+iMiIvAcDuevDQ0NWQflCYWFhcGgRMrAwIB6R0hs0Vm9kLddoHNVo9HAxvQrKiqcJkFZLFa/QqFwmBNgMpkpnZ2drzY0NGTthzbjcDhkZWVlJmD7L+t0Osu
2A1QoFMssFqvf2ZxPZYa++eYbxuuvv34CLiBy5MgRznZMANQ8VSR19OhRPAaDQd25c2deIBD8DS57JBQKfzSZTJb4+PhguVy+tK8iKQaDEdjT01MNComVlJT
cdcUwd5fJra6u/srlcoffeeedjKKiolw4mYsXL94oLS1NnZmZWWaz2S6XyT2VHZ6fn3/88ssvB4eHh+/KrCYlJUXNzc3NymQyp+FvoVC4iEAgTGlpaSEHzST
bbLYttVqtM5vNG1VVVWfgZEZGRh50dHQoHj58uPrZZ59N72X+Xelxi8WyfvbsWdiMC5VKDb1y5cro5ubmE2cTDw0N6Xt6euZiY2PRkZGRAfs1XqlUrrS1tU1
dvnyZ6e/vjwXwkX93d3f/PDAwsOfkDGx2eGBg4FVQbkAikUzk5OR8u5dF9lMsvW38l19+OfHRRx/Rjx07lgYnNzg4KMvLy/t+vzsMFgAymew/ODj4d1B2qKe
nR5qfn9+x18VcLZe3N76mpubYqVOnsuHkzGbzBo1Ga3a1hMalIwBBEKTRaCyBgYHG3NzcJLhBsbGx4WfOnAm8efPmjCvHYbstLS1tdHd3L9+8eVMuFouVKys
reqPR+Nhms21CEPRka2vrydra2mOVSqVva2t78OGHH9Lz8vKyQPNxudyOGzduKA/iYxwWSIhEoiJHGWKVSqWpq6vr3Gs1lwucIurTTz8946hypLu7W1pQUNB
x0LWcVohMTEycd1Yaw+fzxWw2u98ZT3DWYmJifLlcLr24uPi4I7nJyUl5enr6v9wBtltLZLq6uoZbWlp+FyUybgNgG4Q/UpGU2wFw1Sd4srnrzLt0CzgIKcl
xONwaiUSKPaxaQbPZvMHlcjvefPPNPk/M/39VKntoANhfV2w2OwdUU7Dftt9i6UMHwP4VWVVVlUGj0ZJBGWZn7aDl8s8UgJ1gFBcXR2dkZIRHR0cH4fF4HAa
D8dgPJn53APzR2p/+1+P/Ay2S60OFcFkTAAAAAElFTkSuQmCC',
        'lx' => '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',
        'mark' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACIklEQVR42u3ZMWvCQBQH8HfRQRAMsatjJ3XUTEIiXfwATvULKAiVf
gCt9wmkm6s4unXoJplV1MW9UyhWjSe4tVyHVgmCNYkWcua9MRjk/8uL984jAPAEAS4JAl4IgAABrmazmZKCHL5erxelIIcP5CtgDw8AEA5S+G63myuVSnf2a
0IBRKPR0Ha7/fJy72AwKGaz2dTh9RAA6KIALJfLx0gksjEM4+MS4YUCsCyrFovFYrquJyVJWjhF+Cu8MACWZdVkWZYJIQAAoGmaI4RT4YUAOAy/K03TkqZpv
k0mE+Y1PAAA8fNu8Fh4e6mq2hqNRoxz/vNEQyEynU7v0+n0rdCjsJPwv0+6lslk9p9bLBYPTsP7EkCW5fBqtXIU3o6g6/rNDs3N913NINTv96ucc3CK5tsOY
Ix9xuPxFmNs/147Lbfhff0boCiKJwQ31W63X329GfpPBEppr1wuD3y/G7w0AuccKpVKp9FozHw/B3hZFk/V4dwgzP8B53QC5xzW6zXL5XLP9vBCdYDXTuCcA
2OMKYrSEmoVuFQnmKb5fiy8kABuEIbD4SyRSLSFnAPORTAMY6yqak/YQegcBEppL5/Pvwg9CXpFoJT2dmu8o/EZruR0eD6fVwuFQmc8Hm9c7R/gio7HCSHgd
k64qoMRL0MSng4jAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgQADqGyiVG06I2KOxAAAAAElFTkSuQmCC',
        'mchr' => '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
K5CYII=',
        'ment' => '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
4+nzzoB/wWYULMit9JrKAAAAABJRU5ErkJggg==',
        'mmsg' => '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',
        'mobj' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACyElEQVR42u2Yv2saYRjHH3+cGKToUQKBZhDJnWCW1iWbd1NKh5ycx
eLWpYN/wXGDQweHkFXBxaWb9EDxOkiWoNlcQjoE4S5DCoHGoXqHAbGnptML4mmim1efZzze9/MeX96fHxcAfIUtLjdseW19AN6XGkiSxCaTyUOWZfdDoVAQA
MAwDFPTtPt6vX5zdnamrTPgpvFcy/aAVCq1d3p6+p5hmPBzAF3X72RZPq9Wqw/PtdtU3sIAJEli8/n8J4qiPKZpDlRVbSuKcnt5efkHACCRSLxOp9MHgiAcB
YPBV5ZlTXK53PdlaW8yzxZAKpXaq1QqXyiK8rRarStRFBv9fn+86EdomvbWarUPHMfFLcuaZDKZ8nzSm86zBaBp2meGYcKtVuuK5/kfq6zDZrN5wnFcXNf1O
5ZlvzmJ556fWgzDhE3THIii2Fh1IxJFsWGa5oBhmLAkSaxTeLYAksnkIQCAqqrtZdNqUfX7/bGqqu1ZhhN4tgBYlt0HAFAU5Xbd85T0IQwn8GwBkHOU7KbrF
OlDGE7g4U1wPgDDMExyjq4LIn0Iwwk8WwCapt0DAKTT6YN1ByB9CMMJPFsA9Xr9BgBAEIQjmqa9q8JpmvYKgnA0y3ACDy9CizZBWZbPLcuacBwXbzabJ88lT
dO0l8Aty5rIsnzuNJ4HAPjZD51O53E0Gj3wPB+LRCJvstnsu1gs5h6Px3+73e7I7/e7j4+Pd3O53NtSqfQxGo2GyWOjXC7/mh9g03lb/xy2zYDZpAuFws/hc
Pg7EAg87ezsUD6fzzedTp96vZ5xfX2tF4vFi0wmc9HpdB5fWoebynOhFEUniE4QnSA6QXSCeBVGJ4hOEJ0gOkG8CqMTRCeIThCdIDpBdILoBNEJohNEJ4hOE
J0gOkF0gugE0QmiE0QniE4QnSA6QXSC6ATRCaITRCeIThCdIDpBDOD/rH8DMMhr30jfnQAAAABJRU5ErkJggg==',
        'module2' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdE
lNRQfgDA0VKApKb6LRAAAEwklEQVRo3u2Zb2hbVRTAz0uWpFvSZmYlbdpXaiZz1jVtYxO2NYRMq5S1tJQNHGwy/FLwSwduUMSgzj/ph4IdpiDC8EuRDZVJXe
1mYJ3Emq4l0TRLaofBxrF0GSFGEhtsmmXxQ7HvvvdukpeXp1bs/XYP557ze+/de+455xFwHv7VIQLYBvjPAJAye7uzb1hH5NUgYFjn7LO3kzLuVglum/C45o
zR1CYmAGLxi07r7RzWlK1lwFKtAsjmXAt295WIYAC3jh3SUTM8AuX+rzHnP/yFQAC5t+jz1VQ4KiZUSrlcIgHIZFKpeCKbI9UKOcP428Vt7+CzcRTyp7TUTC
ytkO55bPsY/o0Ao3q+xrmsLLoJb/R0Gvg/37Tn+akyNmGlePZE8z62PBzxhjwrnthi8n4aoE52oMpQbajXa0kNU7PT4Fd2fPp7ltcbqBR//9K+x+my9YzD/Z
HvWhS/olv9SmuXUSqhS4O/tH+SH6EAgP8k8+knZwdn7q4VfqWNFWPm3g66LBDUXcqnL4Yj+b49Gv0AwpHBz1/zJh4W++qJh5eXQ8vG2qpKSqbeY1aMB0sCGN
WffBadz/ufufRDguvW8yU/9L6gImsoyd46ZdLxoOgnoMd8atz0dE7xOAE9z2HPD/2OEKE3Ht79vJ+Pe4DOqXk/Tn5Id1yDBThjxKmHI5YJvlHAMhHGXsmoJx
GVbpjacMrW6+lHfAHSj6zXcXJTG5WybAIMNYsxqc7k7Pi9ciL9+L3JWczOJ4aaWQCt9WzF9czgTLmXzeDMeoYtpbxtArhCsThTzeEuFnaKj7trDjdTFou7Qq
w4cDO6e62pZtdOVPHsV8FU+RduYvWUke7+otPqZ72BHLx+236Dvv/zxfzSxrUoehZWU/SMkpYPvLd0J0TNvCGhkg7UUjhKT2hpADlAT4JnRSgA1JKYyBXKiF
RKZFlMMIAY3gMGQI4k1otJoQBQS3J5QQAJkkzcTwsFgFqSSLZ2VpxBoladTCgnqKVMpiBACgk8B6qEAkAtpVIFAeJI1mOoFgoAtRRPFAAgIIscUkO9YACIpW
yOyAdAgK2FVFNzvVYoANQSqba1EDiAjfoeLbBJTbdaCPfdarRgUcgHLCjC5m04rBs4grYXAACqMpeXywd4v2N/AzrftbOpZvcf01HGG+htYboH6DI2VpTrvr
Gii5VrVqtMWtYn+OYOe7FUMmYuF2DMzCzVAAB8KyyAkUAW03nq7TjdUI770w3MMm3jJIwEWADhtGsBZ8J2VMY7XMtEtqM4uWshnMYcQ7sbp0xqnP18AZz97I
Kd6QkBuBKZw1YyB3XTPbyaEz0HdfjSDO0g5inPR/Wv9tHLM8tEKQWKTOTsp7u/cPWst4Tq2PHArNhbh3yImpef/DXqS3Ldel+eePoJeqvm1LdbtEGxlVs0Qj
SpAAJB3k2qf6ZNl7dHtFnfBpXJw/v5ub9wNd/WKykpxR8fLoPLyu1m9Q5+y378WSKm/7DIZOmhR1CAOT+9f/bmZ+8usbXeaHrnRfoqLraLngIAgI+XAj/Vis
haEQEQi3/w9flFnNZMTPrbRosjm/tu4dzkOTcXAIL7r1tSNtTcWu8KWf25vMZsOpPWtzISCHOuK4ntf8f/e4A/AcO8sjeKv7mpAAAAAElFTkSuQmCC',
        'modulegray' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAADkElEQVRo3u2ZT0hUQRzHP9sGgoEh0T8kL8/Ag+tBsUNdCpm
KjA7VQdzKwg6pdIoOnkQKPHgUtUOGSrt0qIUORTGIXepgZAc9eJCFMgmUEj0IQotdlJ03b1779u2IK/k7vTfvN/P7zm9+8/v3YI/+d4oEZxUHaaaBCZJyw4c
jQgvn+MwLuWIZgKijg9tEgTl6SJggiAhxuqkCMowwKKesARDPiSuvRgiK+C1KyBu2AOj7XWSaKJUcphRYY4nvZIhxxM0mI9sFICAFAbBvp2/BbgAg2sIuHmR
mNOcigzwKvb0rztH0mwKMUJSQ4pLhwxTjTDLLAqtAGRVUc4pG6gy8b7kq10MBECW846w2uMYAY3LGZ0YNt+ikVBv+wEV/CP8C8Maz+z565XKOIyuni4e6FmR
T3gDEIO2a2u/LTwGN7zT92nEMyY68jFC0aaaXpEl+C2p76XnnGVXElKEG50f6a04NaD4/S09ke4hLOMQ94wdXjIi4It4X44SkjIf0AwlajB/qs5FSdUTmU5q
iNbQfaMUckjsMGhAH+WW0iDNBTc/HHD8ahjMc2kpZshpoNorvK0Q8yE/0GU2/2XsEDQbGNXoLjja9rBlGG7wAJpjzsA3kcjsBdLDMgGdwjgkvgCQ9HghjViL
umEd8D0mzH7jGS9X+Zb2dmC++KH5xkQdqRunOB1KMK2/j1rIOdaVpd0LrAiA3XDdh0hoAdaWoO5/WM6JK5XnWGoBZHwkGAIeV5wVrABZ8JBgAqMnEqjUAqz4
SijErVr1WmTUpZT4SDACWlOcKawAqfCQYAHxXnqutAaj2kaADEBEyyuspawDUlTIi4gNARIi78rhGawDUlWLEVQhRrb4/obAed16lFy1EghpXgnuAWn4702m
PBlq09gLALSv711epojubK2YBxD3ioVOUF7z/cjo9g1Wc8wJ4bZhdSlfB++/ylGoAn4svKZUrjBjX6Bf7Q4vfT7/xw0i2jaf6gUEjcx2joRUwaizYXZIUpad
/OiepNbDHnGO52gw+pdkdn9JsIGd1LNp4qhWnrfJPXsof1cqyu3I4j+o4/dU56qoUYlx2ZtLzgU0vxXmtPH+82xoURdCi2fEmlU+rJj/ybc0EBmC4EcHJx/L
zBLDXrN5eChto3lOi/bBY58L2AUho7bvr8pXBUtzFPSSsHYG8QT3DmxnzHDdJGdlS3NxscWQYpj7IH6Mi+G23R3v0FwbfFx3mQ2ZaAAAAAElFTkSuQmCC',
        'module' => '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
CYII=',
        'msglist' => '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',
        'msgsent' => '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',
        'msgtrans' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE7UlEQVR42u2aT0gjdxTHX5wYyGrG7CYRd9dAUgiUkg0Ie0jGH
Sk5BEUoSY81pQcXVJKACioulrZUKiKokLEqxENp0pM0aYss5JCD2Z2ICKXZ0EvADMTdFZ2pJuIGTNL00oDYmcQ/WTqZ8Qe5vDfkFz95v+/3vZ+RAMDXwJNVK
BS+RBCk4WK8ubl5+vT0tPg+9mwAHq1cLpdjixsMhjvva09eAaBp+pgtjmGYWhQA0un0AQeAh6IAEI/H37DFjUZjuygAxGKxfba4Tqe7LwoAJEkybHEURVFRA
EilUrlCofAfu5NIJOD3+58IHgAAQCgUeskWt9lsHaIA4PP5EmxxjUZzz263t9V6PwmfOsFyuZ+dnU1JpVLkYo6iqD29Xr9Wy/0QAPiYb1WgUCgynZ2dH16MK
5VKlGGY9Pb29lFdV0CpVPqK49v/BgBApVI10jT9jO2ZTCaTVSqVC4LVAAAAhmHyS0tLG2y5lpYWNBaLfSpoAAAAk5OTv3PlzGbzI6/X+1jQAE5OToqDg4M/c
OWHhoZ63G73B4IFAACwurpKRaNR1kpAEKRhfn7+s5tC4DUAAACHw/GcrTsEAGhsbEQWFxf7bnIceA+AYZi81Wpd4vRxBGlwu9291xVG3gMAAIhGo0dOp7NiA
2Q2mx8dHx+PXPVI1AUAAIBAILBXSRTLFun1ej9PpVL9l22b6wZAWRSrVcK/9wftwWBw4ODgwFNtiuRlJ1ht4Th+NxKJuNjmBY79IJvNZimKeptIJPZIknxNk
iSdTCbf1SWAcrscDAZ7cBy/0ZhcV0fgojt0dXX9Wk0XBAvgvC6gKDrNNTsIHkC5bXa73Ttqtfq7ubm5EFfjJFgA54/F+Pj4HzKZbLq7u/v79fX1zWow6lYEr
7L0er0cwzCVxWJpM5lMD7RabatarVbK5XL5lQFwfXi+rKtCFNQREK0I3gK4BXAL4PqiWSgUirlcLkfT9HE6nT6Ix+NvYrHYPkmSTCqVygnBBisCKJVKJa5ko
VAohkKhlz6fLxEOhw8rPCpMABdhLCws/DY7O/snwzB5oQC4tAZIpVJkbGzMTtP0M4IgHisUCkQIGnAtEXS5XL3ZbHZqYGBAJ2oXWFlZ+WJzc/MTlUrVWLcu0
NTU9K3BYLiDYZgaw7CHRqOxXafT3UdRFJVIJHBZfbBarUvRaPSo3jSg4jDk9/uf2Gy2Do1Gc+8yb+Z0OtcCgcCeYETQ6XS+aG1t9TocjlWKoqr+YX6/v7/ed
OFSGhAKhfb1ev2ax+P5MZPJZKvpQl9fX7ugAJQXQRC7SqVyYWtr61W1SsBx/K5gXcBisfxMEMRGsVj8m+uZSCTiqgd3uLYNejyeneHh4UA+ny9yNU7BYLBH0
H0AQRC7o6OjP3FVAo7jHXwXxRuPwwRB7C4vLz+vJIp8bptrch/g8Xh2KgnjzMxMh6ABlIWRyyJdLlcvXwWxpjdCU1NTv3DlJiYmPjrf8bG9/pdZAGr8j5FUK
tWv0+na2eYFmUw2XatLFV5WAADAyMjIBpct2mw2jaCPQLltPjw8/Ist9/TpU6PgAQAAhMNh1t/22e32TlEAcDqdL9jOulQqRfR6vVzwAAAAstksqyViGKYSB
QCKot5y9AttogCQSCRYL1BMJtMDUQAgSfI1W1yr1baKBQDNFler1UpRAEgmk+/Y4nK5nFcu8A9zSxQEwKfvpgAAAABJRU5ErkJggg==',
        'nebfs' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE3ElEQVR42u2bX0gqWRzHj+MfMFBujF7kkqAQC8VFbjcIdJkhphBi
3SV9VVgWhBkIgp6kpYd9iBVfEhYGDLxJrwuhFBUY9DCzV5+k0Mt98uLedbnITSmUZSDH3JcN1nF0RrMcx37gQ+Sc5vvp9/ud3znndxQAgF/AGBsExtzGHoDq
Kf6I1WrVOhwO2G63m2w22yuz2fzSYDC80Gq1WgAAYBiGKZfLN8Vi8Ws2m/2STqdLqVSqUigUmMd+N8Vj5ACFQgGcTqfR7/e/Xl1d/ValUin7GYdl2UYikXgf
jUY/JJPJq2azKW0AMAyrA4HA7MbGxvf9iu4GIxwOH4VCoY+VSqUuKQA6nU4ZDAbn1tbWvnuKkCJJ8nhzc/OiVqs1hg4Ax3FLJBL5cRgJjCCI/d3d3T+HAgCG
YXU8Hl9BEGRumFmcpukLt9t92m9Y9AUAQZDJ8/PztUHH+UPyA4ZhJE3T149eB3i93imKotalIh4AAFQqlZKiqHWv1zvV67NKAMBiL/G+t7f3k1SLGo/H87ZU
Kn3OZDI3Awfg9XqnpCz+3lwu15t8Pv8pl8tVB5YDEASZpChqfZRKXBRFfxOTEwQBwDCsLpVKASnFvNjEaDKZQkKzg2ASjMfjK6Mm/j4xxuPxlQfNAjiOW4Y9
zz/EEASZw3Hc0lcI6HQ6ZbVa3ZLDklev1293Kps7ekAwGJwTWvF1+8zMzICTkxNJAOimhdcDYBhWl8vln4UAiLFIJAJwHB86BIPB8CtfQuT1gEAgMDvABQug
KGroADppavMAhUIBbm9vt4Qyv1gPAAAACILA2dkZWFxcBBA0nF04lmUbGo1mm7up0vY2TqfTOOhp7+7uDiwtLQGlUimYO/r9iJkWnU6nUTAE/H7/ayBT49PW
FgL1en1LjAf0EgJPYWL2C1mWbajV6u2OHmC1WrWjWPX1Uh1arVZtRwAOhwMGMjeuxhYAdrvdJHcAXI0tAGw22yu5A+BqbAFgNptfyh0AVyPEKRdfyB0AV2ML
gPuzOjkbV+Pz8fj/f2AYhpG7YK7GFgDlcvlG7gC4GlsAFIvFr3IHwNXYAiCbzX6ROwCuxhYA6XS6JHcAXI0tAFKpVEXuALgaWwAUCgWGZdmGXMWzLNvg9h21
1QGJROK9XAHwaWsDEI1GP8gVAJ+2NgDJZPJKTBhoNBrJCJuYmBDl/slk8koQQLPZBOFw+EhoQL1eLxkAk5OTgt8Jh8NHfNtmvGuBUCj0UWjA6elpyQCYnRU+
xuikibdBgmGYO6PR+M/CwsI3nQbEMAxcXl4CCIJAtVoFj9HE2HURA0HAYrGA+fl5EIvFunokSZLHBwcHf/P97vlwtNNDtVqtQRDE/qiLJwhiv1tDpWCHCEVR
P4xqjwBN0xcoih6K3g/gM7fbfTqK1SHLsg23233a04YIn1UqlTqGYeSoAcAwjBTTPQqJdKVrn8/3blTE+3y+d2K7RkX3CeZyuWqpVPrscrneSD3pxWKxv8R+
v6dO0Uwmc5PP5z95PJ63Uv3P9yJe1CzAZ2PdLH2fE0wmU4im6QspTHX/vct1P8/3fS5QqVTqKIoeDrNYIghiH0XRw4dcoekpB3TKCzs7O3/o9fpat7XDII0k
yePl5eXfU6nU9UPHer40BZ6vzT3+3eGxuzg5SvZ8OjzuAP4FObZAB8A3RKIAAAAASUVORK5CYII=',
        'nebulegray' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAADYElEQVRo3u2ZPU9TYRTHf/cWwoshkXQoMkAhHUz8AJg4Olp
iIGFwbUlghMQRe2+LHUhkN0hxJxES48rixFT5AGgLgUKHikkHSqC9Dlps7+tzn1t0sKfTbZ+c599z/uf1Ks/5t6LSBdAF8L8D6AkAvYcQCmBQ54bG3wMwQYw
xoowyzABwyQUlihxzSOFuAfSRYJYoEYZsfq1SpsgOW1yJq1SEM2EvKV7SL3CyxhsyXHeShEMkqLAidD30s0KFhK2VpABMsUtOTF0L5By7THkfDD30OpHkPY+
kCD7JDBW+BAGgkmSDe9KhOkicMw4wZAEkeYcSKM8oTHNCXg5Ako2A1/+SOKfOjlBdqLfWoUStsuZMR9WRxVnCt09p6i5Gdv40JUzWKYqcAMzxtOVJ53VAKzx
lzk8m7KXShlhhhEU0DBtOOLEkQrmN/VXCdtnR3gKajcF00r4oqVicqolaoI8fpqSrMMI5oJOyKHYCNcK5Kf5r3LeWKTsLJBxz/ioZcEsrHjUiIeaCWUcVdd+
O8NSs2rQbUVfP6qSlAUSZ8AYQI+KiwvhNRzmJEPMGMCZQeDOkpbgwxJgXANXVAU1pSHMhar5RtfSIo4JRrpOWsMGouQs1AwgxLKTIuA1KfzJMyL0rVhgQVlZ
H9w1gwOy4oAVXlwDhagGDS58aNGDVpVy3y6WZN6rFrBe+/0SKVy41oV0uzFDNFrihJNH3aSDoihI37gAaFCUcaaABGYEBtWg+YyXhMVUJG4BGyvNclWPvVHx
IWZLQGroHF8ocegMoSDnhDwS37HhkHd/t8sCONAADDd2c61rkg1hDskVNeg5qBqX92L4lBuCK9UDDmOYQkut2iwvRtty9LJm/UUjz1tSU+mrLr1kOZANIsWj
6dtl+Z+K0I9rmRdts5B/EStvzHtt+d0SP+dQyHQaTCnH2/Y7nJ3wn3pHxvMESH2X2A3nOmO4AgAU2ZTckB5zyLJAVGiyQk1/RGOQp8YRBad8vseneunpvyfJ
8ZoJJiev3mHf2vZ+ecJ8Z5n0W6SrzzDgx339TWiVHmKxgjaiRJUxODLLi661ZH0lmGXdZVh+xQ+5ultWt83OMcaI8aFnXn1HkiK98C9qWi0iBAhAi1PLCoi7
cmHcAQLOBr3cgSXVfWnUBdAHwE/3T0ZLJtWz3AAAAAElFTkSuQmCC',
        'null256' => 'iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABmvDolAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAB9JREFUaN7twQ
ENAAAAwqD3T20ON6AAAAAAAAAAAL4NIQAAAX8ZnKcAAAAASUVORK5CYII=',
        'null' => 'iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAAtJREFUCNdjYEAFA
AAQAAGhxSHBAAAAAElFTkSuQmCC',
        'oent' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAELElEQVR42u2bT2jiWBzHn1ULHpQZYgcZKjSXOQyDTOdQ0CVhCSVQ1
h2q1wjLgmCgUOhJuvSwhzLipYGFQAtOS697ibSUQg89JDPxJAUd5uTgzgpDmE1o0UOgRtzLCpsY67+2Jk9/NyGJfj95v+/7+d7vOQAAv4Mpjjkw5TH1AFyP8
SUoinoikQgSDocDoVDoeTAYfOb3+594PB4PAACoqqrKsnxTq9W+l0qlb4VCQRJFUalWq+pD/zbHQ3iAw+EAJEkuJJPJV+vr6z+4XC7nKM/RNK2Vz+c/5nK5T
xcXF/+0221rA0AQxJ1Op19ubW39PKrou2AwDHOazWY/K4rStBQAr9frzGQyyxsbGz89RkqxLHu2vb191Wg0WhMHkEqllvb393+ZhIHRNH18cHDw10QAIAji5
jhuDcOw5Um6uCAIV7FY7HzUtBgJAIZhTy8vLzfuO8/H8QeCIFhBEK4fvA6gKGqR5/lNq4gHAACXy+XkeX6ToqjFYe91AgB+HCbfDw8Pf7VqUROPx99IkvS1W
Cze3DsAiqIWrSy+E9Fo9HWlUvlSLpfr9+YBGIY95Xl+004lLo7jfwziCX0BIAjiliQpbaWcH9QYA4FAtt/s0NcEOY5bs5v4jjFyHLc21iyQSqWWJj3PjxMYh
i2nUqmlkVLA6/U66/X6Dgx/eX0+326vsrnnCMhkMssAkrhLi+kIQBDELcvybzAtfPj9/ndmhmg6AtLp9EvYVn56aeoaAQ6HA9ze3u7Y0fn7TYvz8/O7xkWVr
hFAkuQCbOI70yJJkgt9UyCZTL4CkIaZtq4UaDabOzCOgE4auN3u3Z4jAEVRD6ziO2mAoqinJ4BIJIIAyMOoUQcgHA4HYAdg1KgDEAqFnsMOwKhRByAYDD6DH
YBR45yhXHwCOwCjRh2Azl4dzGHUONse//8HVVVV2AUbNeoAyLJ8AzsAo0YdgFqt9h12AEaNOgClUukb7ACMGnUACoWCBDsAo0YdAFEUFdgBGDXqAFSrVVXTt
Bas4jVNaxn7jrrqgHw+/xFWAGbaugDkcrlPsAIw0zZbFDVe2G63AcMwp7C9fYZhTs3a7GYbI2YXK4rSZFn2DBbxLMue9domn22O9rqp0Wi0aJo+trt4mqaP7
2qo7NshwvP8W7v2CAiCcIXj+MnA6wFmEYvFzu1YHWqa1orFYudDLYj0MkSCIFi7ASAIgh2ke3RuwKF0nUgk3ttFfCKReD9o1+jAfYLlcrkuSdLXaDT62uqmd
3R09Peg1w/VKVosFm8qlcqXeDz+xqpvfhjxA80CZjHVzdIdTwgEAllBEK6sMNX991uuR7l/5H0BRVGaOI6fTLJYomn6GMfxk3GO0AzlAb18YW9v74PP52usr
Ky8eKzafnV19U9RFK/Hfdbs0BSYHZt7+LPDU3dw0k4x2x2edgD/Aga/IS+plkhMAAAAAElFTkSuQmCC',
        'ok' => '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',
        'reference' => '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
KxQKUZ0C/wHkzrtCT17I8gAAAABJRU5ErkJggg==',
        'synent' => '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',
        'synlnk' => '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',
        'synobjgray' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAMFBMVEVERkNISkhPUE5ZW1hiZGFqbGl1dnR6fHmAgn+Fh4S
OkI2UlpOYmpedn5ylp6Spq6ivc2zsAAACL0lEQVRIx7WVOzMEQRDH+/Zw3iRiG4hUKZdIUb4ASqoQK1XEEnIBnwAlIFyh7CSklC9wqpRAdN6Pu7OrH7OzPYe
aC5hkd2Z/O939754eSDwD/haIT+bCYGyr8htwDmas/AjEO2BHR+U7EG+CGu2Vb8A+OKOzEbiFhrHgAp+yOrRe/jyakveyAxzTUrAhk7eQZl0aqNJKvpTarRV
pHimANgiiLPhqaLcA68Gi1u/FesHANUXupoBU6bXADEAucoFqP0BrClS1MMHYrhUuMgBZ2LbKAczT893YALHXmigAVo3ddgFiXBp1gPwFvjziS4WBDytKCsC
w8WyPgXv8JXGBgLZAOfsYOBXRnjEwyA2dzBIxIfJ2M7AkLizxv7i0ho82caKNAZxjGuuS5EWTKrTxhg8CYn6K+hBQqd2YzHAYkNRw2agVQgdn22iEKS0hgJK
14AxrunAF0xwJekHkJAkMtHdBhBus9V8w8CDSrpElSJ4kU0WaHdpqyEu+JhDAaHrEoE3Yu7h1SfEDCdknLmc1KYHxlyYArwntJI/lBidVmPy9niu5YSqhGHi
GEVcoJTV7uQOBK7VK1jj1iTDNaposlW46nZJVnW5dMAWur8aCMSX3RB8Gtqa48qZ1yZmirYvxrHxt0aZlf+ACWdmnB6dedIDs4Nij9+oA2dHLDu+ZAvThzY7
/3Vyo+2bUbAPxtyBvE/O2QX8j9bZifzP3Xgf+C8V/JXkvNf+12MTF+k+X+xeTkicPqQ25YQAAAABJRU5ErkJggg==',
        'synobj' => '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
T7fBmd8B/AcEqi/eqU3+AAAAAAElFTkSuQmCC',
        'time' => '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',
        'unmarkall' => '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
rkJggg==',
        'unmark' => 'iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACjUlEQVR42u3ZPavaYBQH8JPEt3Tpi2CnThUK145iFkkEFz/ALXT
K0KHdavoF8rb4NSrcSS1SVwejW8xa7+RYKNTbIgiNWsROgkivSZ7Y9th7zvjkIPx/PMnzIgcAJvzjUlX1SbPZfLU/tlwu16qqvm+321/i/j7HcVAulx92u10
1m80+2H/GA4LabDbbw7FMJpNqtVqvLcsqxA1fLBbvj0ajt4fh0QAcK13XL1kRduHH47F2Ww8KgHQ6zZ8aIUx4AAAOwzcAAGC73RpBPbZtdwzDmJwqPACAAAA
VDACJROKbLMsXx3oURbngef7GcZzZKcL3+30PDcBgMPjK8/yNoijMCFHCe543kWX5IxoAAADHcWasCFHDl0qlDqpXIA4Ca3iUACwIi8Vi5Xneu6jhUa0Cvyv
Lsgq6rl8G9a3X65+pVCoZNTzaGRB1JgiCILCERw8QBYEl/FkAxEEICn82ADsEAJhVKpVQW2LXdT9JkvQhqI+H/7R6vd4kTN/ZzADLsgqGYbwI21+tVp8HbZv
PBiDscshydkAPwBo+LAJqgLjhwyCgBQgb3jTNtuM410Grw20IKAHChrdtu2Oa5vVwOGQ+RaIDiBJ+/3aI9SiNCoA1fBwENAD1ev1po9F4yRqeBWE+n3/GdCX
2JplMJuKEZ0B4hmIrnM/n74mimD5F+F0ZhjGxbfvoQUgUxTQKAEmSHp0yfBQE9Ich1vBhEVAACILAHY75vr/SNO0qTvh9BE3TrnzfXx0+Q3EnmMvlUrVa7fH
uT1LXdb9Pp9Mff+p7s3vlBEHgUF+K/o3i4Y4XARAAARAAARAAARAAARAAARAAARAAARAAARAAARAAARAAARAAARAAARAAARDAHahfqHSG4FweqU4AAAAASUV
ORK5CYII=',
        'warn' => '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',
        'world' => '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',
        '1joie0' => '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
AAElFTkSuQmCC',
        '1joie1' => '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',
        '2confiance0' => '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',
        '2confiance1' => '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
AAAElFTkSuQmCC',
        '3peur0' => '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
CAgICAm/A/wOi51KUBIvfcwAAAABJRU5ErkJggg==',
        '3peur1' => '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',
        '4surprise0' => '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
baYI5AAAAAElFTkSuQmCC',
        '4surprise1' => 'iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAgAElEQVR42u2deXzV1Zn/3/fe7HsgCUtIZM3CHkCwguBgKLi
WRUEdsLX6AtxBnZ+tM9jajgUGq5Sp1dHBKqigIoMIahEpCMgia9hDWBMIkI2Q7Wa59/7+SHCsI4p8z3e9z/v1uv8l5/s93/M8n/Oc52wgCIIgCIIgCIIgCII
gCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIK1ccknsCUxwEigPzAA6A2EAYkGPb8CaADygG0tv1VAtTSNCIDgHEcXYRABEEx09nggwub18gKVIgoiAMK
lnX4w8AsL9+x6RApvABtEDEQAgrmXHwTEBfk3uQBskehABEB6eUGiA8ExtAWeA8qBgPyu6Ffe8g3biDkJduntxwHzaE5+iROr+dUBfwLGtnxjQZDeXqICQTD
f8WdJb29aVDBLhEAQxxchECEQxPFFCEQIBHF8EQIRAkEcX4RAhEAQx5efCIFw2XiAp8XxHSsEvwbcYub/iywF/l/SgQXAMDu+fEjr1kRcddXXv7DUVEKTkr7
+hSUnE9Kq1WWV1VhWRmNp6T/8Gk6dwnvixNe/prIyu7bzOuAe4KSYvAjAxV7/KeAZINzqLxualER0797E9O5NdK9exPTpQ2RmJiExxi6Qa6qupvbgQWry8qj
Oy6Nmzx6qd++2izB4gd8BswG/CID0+tbs9d1uYnJyiB8yhPjBg4kfMoTwdu0s/UHri4up3LCByo0bqdywgeqdO8FvWR8L+mggWAXAsr1+aEoKiSNG0GrECBJ
HjCC8fXtbf+j6U6co/+wzKlatomL1ahpLSiQaEAEwlTRgoZV6/ajsbFLuuovWt95KTJ8+uFzObJaA30/17t2UffQRZ995h7pDh6wWDUwCCkUAnEsW8AWQbPa
LhKelkTJhAil3301sTk5QhmFVO3Zw9p13OLd4MQ2nTlnhlUqA64BDIgAS8qsf0kdH0+af/5n2kycT278/wjfEYPt2Tr/6Kmfffht/TY0MCUQAnBPyR2Zk0H7
KFNpMmkRYcrJ4+/fQUFLC2QULOP3qq9Tl58uQQARAE5nAelNCfpeL1rfcQvpTTxE/eLB49hVQuXEjJ2fPpmzFCggEZEggAmAD5/d4SLnzTtKeeCJox/Z65Ao
Kn3+ec+++a8aUoqNFwKkCYHyyz+Oh3X33cdXTTxNx1VXitTpQd/w4J2fOpHj+fPD5RARUmK0D6/NrYBEGHredOHIkPRYtov3kyYQkJIin6kRoQgJJt95Kqxt
vbF6SfOSIUY+OBu6nOSn4Jc17CyQCsBiGJ/vifvITur74InGDBol3mkDF2rUcefzx5tWGxuGo5KBTBMDQ8X54ejpdnn+e5Ntvd+yiHbsQ8Ps5+/bbHH3qKRq
Ki2VIEIQCYJzzu1y0u+8+Os+ZQ6iE+paisaKCI088wZk33jBqxsARIuAS5788orKyyJw/n/hrrxVvszCVGzdy6P77qT14UETgMvCI8/9wr5/6yCP0eO89Irt
0EQ+zOBHp6bT5xS9ounCBqm3b9H5cNDABWA7Y8oAElzj/pYns1o2sBQuIv+Ya8Sw7RgObN3Nw0iTqCgokErgEbnH+S/T6jz3GgF27xPltTPw119B/xw7aTZ6
s96OSW2wyUyIAmzu/JzaWzNdeI2XCBPEgB3H2nXfInzIFX7Wulw2XAEOAfBEA9bQHNgIddRvQ9epFj6VLieraVTzGgdQePsy+sWOp2btXz8ccp/kq+NMyBFB
HBPCpns7f5p576Ldlizi/g4nq1o2cTZtIvuMOPR/TEfikxWYtj11mAf4fcJde4/2rnnmGrnPn4g4NFS9xOO6wMJLHjSPg81G5fr1u/QlQC2yQIYCacf82dLg
X3h0ZSfbChSSPGyeeEYScW7KEg/fcg7+uTo/iq4CrsfjMgMsGzq9L0i80JYVey5fLOv4gp3LzZvb+7Gc0njunR/GWnx50BaPzh6el0XvVKqKzssQDBGr27yd
v5Ejqi4r0EgHLzgxYVQB0y/hH9ehBn9WrCW/bVixf+BpvYSG7c3P1OobsOBadGbCiAEQAW4FeqguO7t2bPp99RlhKili88H9oOHuW3T/9KTV5eXoUnwcMovn
QUctgxWnAx3Vx/l696LNqlTi/cEnC2rShz6pVRPfsqUfxvYHpEgH88LhfecY/umdP+vz974QlJYmVCz8cCZSWsuv666ndt0910VXAACvlA6wUAbSnebGPUue
Pysqiz+efi/MLlx8JJCXRd80aIjOVL+2PBf7WYusSAeg97o/o1Im+X3xBRIcOYtXCj8ZbWMiuoUPxHj/u2HyAVSIA5eP+kIQEeq1YIc4vXHkHkpZGz+XL8cT
HOzYfYIUIIA3YrzL0d0dF0ffvfydu4ECxYkEz59evZ/eIEQTq61XnA7oDRWbWzewIIAJYqXTc73aT9cYb4vyCMhKuu47sBQvArdRdYlts39RNQ2ZvBlK+yaf
jb39L6oMPitUKSonu0YOA30/lunUqizV905CZQ4B2NE+HKOv9k8ePp/vixXJUt6ALgUCA/ePHU7JkieqhQAZwJtiGADNUOn9U9+5kzp8vzi/o11u6XGT+9a9
EZWerHgrMCLYIQGnizxMXR/+tW4nKzBQrFXSn9tAhtl99Nb6qKpVRgCkJQTMiAOWJv27z5onzC4YRlZlJ1xdfVB0FmJIQNCMJqDTx12biRDo9+6xYpWAosf3
6UZufr/J8QVMSgkYPAZQm/iI6dmTArl2EqF+oIQg/SFNlJV/16UP9iRMqhwKGJgSNHgKoS/x5PGS/9ZY4v2AaIfHxZC9cCB5lgbThCUEjBaAdzdcqK6HDI48
QP3iwWKFgKgnXXad63ckkwLDTaowcAvwFeEBFQVHZ2QzYuRN3eLhYoGA6vtpatvXpo/IKsr8ADzkpAlDX+7tcZLzyiji/YBk8UVFkvPYaqFuDYlgUYNQswH/
QfCaaZto/8IAs9RUsR2THjngLC6neuVNFceFAFPCxE4YAyjL/oUlJDMzPJzQxUSxOsBwNpaVszcigqaJCRXGGzAgYEQEo6/27vvgiCUOGiKUJlh0KeGJiKP9
YScdtSBSgdwSgrPeP6d+f/lu34nK7xdIEyxLw+diWk0PNnj22iAL09iZl8/5d5swR5xcsj8vjUblMWPd1AXpGAMp6/8SRI+nz6adiXYJt2JWby/nPP7d8FKB
nl6qm93e76TJnjliUYCu6zJ6talpQ1yhALwEIAcarKCh53DhievUSixJsRWz//iT97Geqihvf4lO2EYBhQGvN45OQEDr9+7+LNQm2pOPvf6/qHMEkYKidBGC
CklqPHUtURoZYkmBLYnr2VBkFTNDjHfVIAipL/vX76iviBgxwrIHUHDhAyQcfcP7zz6krKMBXUwOAJzqayK5dSfinfyJp7Fhi9LmrzvT6JebmkjRunKOvaa/
cvJmdP/mJiqJ0SQbqIQBKNv3EDxtGztq1jjSK8tWrOfqrX1G9fftl/X10z550/N3vSB4zxpH1ix0wgM6zZpF4ww2ObO+d111H5YYNqnzrISsLQEiLQmke//f
86COSbrnFUYbQcO4cB3/5S8pXrryi/48bPJis11+37LBIa/1a33ormfPnE5ac7Kh2L/3wQ/aOHq2kqJYIu8mqAnADsFprIVFZWVy9f7+jTvitPXSIvJtuwnv
0qDaFbdWKHu+/T+Lw4Y6sX2TXrvRaudJRuZ+A38/W7Gzq8vNV+dgaVe+mOgmoJFHRfupUxzn/jsGDNTsHQFN5OXmjRlGybJkj61dXUMCOa6+lNj/fMe3vcrt
pP3WqpXxMjwhASfjvjori2tOnHXPUV+P58+wYOJC6w4eVluuOiKDv2rXEDRrkyPpFdutGv61bCU1IcIYdlJezKTUVv1fzhcBKhwEqIwAlc/9Jo0c76py/ww8
9pNw5APxeL/vGj6dJ3dn0lqpf3eHDFDz6qGPsILRVK1qrmRJUuiZApQAoyXIoDJVMp3LzZs69845u5defPMnJmTMdW7+zb73Fha1bHWMP7adMsZSvqRYAzZO
5EZ06Ee+g/f4nfv973Z9RNG8e9cXFzqxfIMAJB60ETRg2jPD0dEv4mmoBCAFytBaScvfdjkn+eU+cUHUwxPcPBWpqOPPXvzq2fmUrVuAtKnKETbjcblLuUnI
nTg6K9gaoEgAl4/+UCRNwCmUGOMdFSpYudW79AgFDhMYoFNm4sjyAKgHQXKvIjAxH7fqrWLXKsGdV79hh+DDAyPqVG/gsvYnNySGiSxdL+JwqAQgBxkrv/4/
UHTtm3MMCAWry8hxbP6+R39KIKGC8kp3yY1UMA1QIgJrpP3W7pixBw+nThj6v/tQpx9bP6LrpTZKFpgNVCIDmKYnQ5GRicnIc1ciNZWWGPs9XXe3Y+jWWljr
KNmIHDCCkVSus4HsqBEDzlESrG2903oGffr+hjwsY/DxD6+fzOco0XB4PrUaNwgq+p8LrUjULgJqPIQi2QZHNp5otACFAmjY5dDl2H7ggXIrE3FwVxaSjMRG
oVQCGofHkn6isLMJSUsQihKAivF07IrVveY5BYyJQqwBoTkLEDx4s1iAEJYpsf7SZAqA5CREnAiCIAJjmg1oFINUiH0EQbIeizi/VtgIQkpBAZNeuYglCUBK
VmYlH+9kXpglACBCn5eHRffo46ugvQfgxuFwuFftf4tEwE6BFAIZpfXO58ksIdqLV+MBQMwRgtEUqLwjBLgCjzRAAzTMA0b17iwUIIgDayTJDADTPAERlZoo
FCEGNovsPUm0nAJ74eEITEx3bsO7oaGOfFx7u2Pp5YmMdaydhKSkqvqUpAqBpBiCyUydHK3t4+/aGPi80Kcmx9Qsz+FsajQJfiDdDADQR0bGjoxvVaKM1ejh
lZP3CHS4AESZ2hu5grLQRGLnCMaxtW6INvkLcyPo56ah4EYAgCeuMPOIsaexYww9UMbR+DjsuzkoRjmkCENq6taMbNXbAAFWXQPwgZhyoalT9Ijp1IqZfP0f
bSoiJvmCeABictDIal9tNZwOu7UoaN46EoUMdW7/OM2c6frm4mb5gngCoORTR0qTceaeuh526wsPpPGuWY+sX078/yXfc4Xg7MdMXJALQuZfsvmgRIXpcce1
ykfX660SZuJtSz/qFJCbSfdEi5x0WKxFAM56YGIKBqMxMui9ejCskRGm5HZ99ljZ33+3I+rlCQuj+7rtEdesWFDZipi+YJgCusDCChVYjR9J37VpCk5O1N1h
kJFkLF9JxxgxH1i80JYW+a9fSasSIoLEPo1dxWkIA3EEkANA8b9537VpNG6AiOnWi9yef0HbiREfWL6ZvX/quWxd0p0SZ2RlKBGAg0d27M2DnTrIWLCCic+f
L/r/wtDS6vfwyAw8eJGHYMMfVL7JrV7Lfeov+27cTnZUVdHZhZgSgZX4loOXBw5qacHk8BCuBQIDqHTsoXb6cyg0bqC8sxHvyZHNPn5ZGeHo68YMH0/qWW4g
dMMB2ybDvrV96OuFpaSQMHUrrW28lJicnqE+G8jc18UVoqCm+bJ4A+HxBkeEVBCsLgGke6K+vl5YXBCDQ0BB8OQAzKy0IlooATOwMzYsARAAEQSIAQZAIIAg
jAF91tbS8IJjsC6YJQGNpqbS8IJjsCyIAgiACYEKly8qk5QXBZF+QCEAQRACMp+HMGWl5QQAaiouDTwDqjh6VlhcEoO7IkeATAO+xY9LygmCyL2gRAE2Tl97
jx6XlhaAnEAioEIAqMwSgSMsb+y5coLGiQixACGoaS0rw19VpLabIDAE4pfWta/fvFwsQgpraAwdUFHPKDAHQ/ObVeXliAUJQU71nj4piDpghAMu0vnWNmso
Lgm1R5APLzBCAdSIAgmAJH/jCDAFoQuNMQM3evQQCAbECISgJBALUaM+DVbX4ouECABpnAprOn6f24EGxBCE4e/99+/BVVmKmD2oVAM0zAZUbN4olCEHJBTW
2r8kHtd7ndAC4QdNH2LSJ9vffL9agMw0lJVTv3k3N3r3UHT6Mr6YGf20tAJ7oaNxRUURlZBDdsycxffs6/vp2K1C5aZOKYg6YKQDLgIclArDm+PL8unWULl1
KxZo11O7bd/n/7HIR3asXicOHk3zHHcRfe618UOtGAJpm47TexhACnAeir/wNXFx75gxhKSliEQrw1dZS/NprnHr5ZeoOHVJSZnSvXrR/8EHa3XuvqbfYOIn
64mI2tW+vOY0AJGBiErAJKNTYVVG+apVYhEb8DQ0Uzp3Lli5dKJg2TZnzQ/NU1eEHHmBLRganX32VgM8nH1wj5X/7m4piTmpxfhUCoDkJAVD+8cdiERqNaWt
2NkemT9f1nIX6kyfJnzKFbf36cWHbNvnw5tu8Zt9TIQCalwRXrF5NwO8Xq/ixvX5TEwVPPknejTfiNfB8hZq8PHYOGULRvHnSCFcS9Pp8VHz+OVbwPRUCoHl
JcGNJCVXbt4tl/JhvVlZG3qhRFP3xj2DCYqpAfT0Fjz3GvjvvpEmOeP9RXNi6labycqzgeyoEYB2g+VCzso8+Esu43FD8zBl2DhvGeTW9iCZK3n2XvJEjadK
+oCVoUGTrpWhYAqxSAJqApVoLOffuu2IZl+P8xcXsuv76Hzetp3eP9uWX7M7NpfH8eWmgy7H1995TUcxSNCYAVQkAgGbvrcvPl2HAD4X9FRXszs1VmuFXRdW
2beSNHImvZXGRcAmx3LIFr5ozAJX0mKoEQMkwoGTJErGQS425fT7233WXpQ9Rqdq6lUOTJ0tj6W/jSsJ/lQLQBOxSMQyQ3YHfzYmZM6lQM3esb3j79tucfu0
1abDvEnG/X1X4v0tF+K9SAEDBlIT32DHOr10rlvIdYeOJZ5+1zfsWTJ9ObX6+NNy3qFizhvqTJy3ha3oIwDIVhZx+5RWxlG/gb2zk4L33Emhqss8719Q0v7N
Ec3rZ9jIrCoCSPEDpsmU0lJSItbRw6qWXVB0caWzU8uWXnFu0SBqwhfozZyj78ENLjf9VC4CS6cBAQwPn3nlHLAbw1dRw8rnnbPv+x2bMkH0DLZxbtEhVFKd
k+k8PAQBFUxOnX3lFwkegeP58W1+i6j16lJIPPgj6dgz4/SrDf6ULZlQLgJJhQO3Bg5StXBncRuPzUfjCC8rLdUdEkProo/T44AOGVFUxpKqKHkuWkPrII7h
02Opb+PzzQS8AZR99RJ2apKjS8B+0nwfwXfwFeEBrIfFDhpCzfn3wGs0nn7DnppvUOv5jj5E2fTphbdpccpxaNHcuRXPnEqivV/bs/jt3Etu3b9C25faBA6n
66itVvvWQlSMAgN+j8bRggMoNG1QdmWTbMaMqQpOTGbBrF11mzbqk8wOEt21Ll1mzGLBrF6HJyerqEsQ5nfMbNqhy/qoW38LqAlAMKLHeorlzgzb8V7U5KjQ
5mZz164nKzLzs/4nOyiJn/XplIhDMeYAidcO4RcAZOwiAskRFyfvvU7VzZ9AZTdWOHTQp2FjjiY390c5/kajMTHLWr8cTE6P5PbxHj1JbUBB07XhhyxZK/+d
/LOVTRgmAkmQggQDHn3km+MLGdeuUlJP+619fkfN/UwTaTJqkpk5r1gRdOx77zW9UFaU8+ae3ADQBShY9l61cyQU1YyjbUK0g6glNSqLD9Omay7lqxgwlUUD
Vjh1B1YaVmzer3LvxHgrn/o0QAFCUDCQQ4NiMGUFlPHWHD2suI3n8eDwREZrLCW/XjpS77tJeJwtuYda19/+3f1M2IkSH5J8RAlAMLFRRUMXf/qbqFNWgEAB
3RARXKRTNlAkTNJdRG0QCULZypcrTmhaiQ/LvIi6dv0U7IB/QHENGdu3K1fv24Q4Lc7Tx+Bsa+ELjgpyo7GwGKjw3wN/UxIaEBPw1NVdeiMfDsMZGXC6Xs9u
vvp6t3burOqS1CsjQUwDcOn8PZVFAXUEBp/7yF8f3Hj4FB2yGp6aqNZKQECLS0jRWzKekblanaN48lSc069r7GyEA6nIBwMnnnqOxosLZAqCll20h9HsW+1w
pYQpExXfhgqPbrqG0lJMzZ9pi7G+kACiLAhpLSymYNs3RRqRiiNN47pz6saKC0N3l8OFbwSOP0KSug9K99zdKAJRGAWcXLKDUwUeIq5hyqz91Svl7qSjTExv
r2HYrWbaMc4sX26r3N1IAlEUBAAXTpikJlS0ZAURF4QrRdmlz/cmT+BWeIORvaqK+UNsVkK6wMCXTklakqbpadWRqSO9vpAAojQK8R4+qnGe1FC6Xi/CrrtI
21q6upvILdQvHKtet05zAi+jY0bG9/7Gnn6b+xAnb9f5GC4DSKKDoT3+izKGXimpZvnsRlRetqChLRZ2sSOmKFZz6859t2fsbLQBKowACAfKnTHHkrEBUdrZ
2p120CG9RkfZoq7BQydZkFXWyGo1lZeRPnarybkZDe38zBKAYUDZPUl9UxMF773WcYSUMHaq5DF9VFXtuvhmf13vlZXi9zWUomL9XUScrEQgEODBxIg1qE64
zjez9zRAAgBeAPaoKK/vwQ868+aajjCvu2mtBwbRbTV4eRS++eOXDrBdeoGaPgqbyeIgbPNhRbXTm9dcp//RTlUXmAS8aXQ8zBMAL3KxsKADkP/ggVbt2Oca
4wpKSiL36aiVlHf/tbzkxcyYBv//yezefjxN/+APHFV1GEjdoEKEJCY5pn6rt2zn8yCNKi2zxCW8wCABAIQoTgv7aWvbedhsNOiyAMYs2EyeqCVUbGjj29NP
sGj4c72VM5XkLC9l1ww0c+9d/JdDQYKm6WIH606fZc8st+OvqVBa7ECgyoz5m7sxQtlHoIok//Sm9P/4Yl8djf0MrLmZzerrSG4FCk5Pp9uc/0+qmmwj51oK
jpupqyj/+mMMPP0yjwotZXKGh/KSoiLCUFPuP+30+do8cqXKn38XeX9cNP1YVAICnAaU3X6Q9+SRd5sxxRG+z/+67dbldxxMXR9ygQcQOGNBsgdu2cWHLFl3
W6reZNInsBQsc0R4Fjz+uKafyPT4w06w6mS0AEcBWoJfKQrvOm0cHtWM0U6g5cICvevaEHzF+txRuNwP373fEGoDCuXM5ouCEpW+RBwwyY+xvdg7g6yEnihO
CAEcef5zyzz6zvdFFZ2fT+tZbbfv+SWPGOML5yz79lKP/8i+qizUt8WclAYDmhKDSECjQ1MS+O+6gZt8+2xtfl//4D1vuonOFh9Nl9mzbf//qPXvYP2GCHrc
zz8SkxJ/VBAAUrw0A8FVWsnvkSOrUHc5gClEZGaTacDjTYdo0Irt0sfW3rztyhLxRo/TIjZgy52/FHMA3aQ9sBDqqLDS8Qwf6fvEFkZ062dYQ/fX17LjmGqp
tstYhduBAcjZswB0aal/nP3qUnUOHql7pB3AcGAyctkI93Rb65qeBUarzAfVFReTdeCMNZ8/a1hjd4eFkvfkmbhtsp3VHRpI5f76tnb/h7Nlmm1Hv/FXASKs
4v9UEAOAQOkyJ1B06xO4RI2wtAjG9e5O1YAG43Rb2fjfZCxcS07OnrZ1/d26uqtt8v2vcn2+l+lpxxcxXwM8ApQfbNZ47R9mKFSSNGUNIXJwtjTO6Rw88sbF
UrFplyffr8sILtPvlL23r/N6iInYNH07tgQN6FJ8H3IdOF3w4IQegez4AIDw9nT6rVxPVrZttDfXUK69w+KGHrLM+wO2m20svkTp1qm2/ac2+fc1RYnGxHsV
batxvBwEAyATWA8nKRSAtjd6rVhGdlWVbgy1+/XXyp04l0NhorgGFhZH56qu0/fnP7ev8+/eTN3Ik9UW6zMqVAEOsFvrbQQB0FQFPTAzdFy+m9c0329Zwq3b
sYO/YsSqPo/pRRHTsSI+lS4nNybHtNyxdsYIDd92l150FJcB1NOe2LInb4u1zqOUDKm8dX3U1e8eO5czChbY13th+/ei3cSOtRo0y/NmtbrqJnC+/tLXzF7/
xBvvGjdPL+aus7vxgzSTgtylriVRuUF6yz0fpsmUE/H4Srr/eltdWhcTF0WbiRMI7duTCxo34a2t1fV5ocjIZr7xCl9mzCbHpMd8Bv59jM2Zw9IknwOfT6zH
PAsus/i3sYvG6bBr6hx7t5pvJXriQ0MRE2/ZoTVVVnPrP/6Twj3+kqbxcrdC0bk3ak0+S+vDD/2crsZ1oLCvjwMSJqk/z+Tamb/JxmgCAjjMDX6tMp070WLK
E2H79sDO+ujpKly7lzJtvUrFmzZX3ch4PiTfcQNuf/5ykMWPwREba+rtc2LaNfbffrnfO5DgWzfjbXQBAx6Tg10mRiAi6zp1L+ylTcAKNFRVUfPYZFatXU7N
3L7X5+TSVlV2yl4/KyCC6Vy8Sc3NJzM21dUT0TU69/DIF06cTqK/X8zGWzvg7QQAMEQGApNGjyXjtNcKSknAaTVVV+Gpqvs4XeKKjcUdF2XZM/300lJRw6P7
7KVu+XO9HWT7j7xQBMEwEQpOTyfzv/ybpttsQ7Efphx9y6P77aSwtFee/VMRr07a9OD1YoudDGktK2Dt6NIcffdSxdxE6kabqavIffpi9Y8aI8zs0AjA0EgA
Ia9eObi+9RPKYMeJhFqZk6VIOP/QQDWcMOWPT1s7vBAEwVARwuWh33310njPHUefcO4HGigqOPPEEZ954Q+VVXY52fqcIgLEiAIQkJJD+q1/RYdo03OHh4n0
m4vN6KZw9m8Lnn9drRZ9jnd9JAgCQRvMFC8OMemBk1650+sMfSLnjDvFEEzj3/vsce/pp6goKjHzsOmASzWdZ2h6Pg+zhQosA1NM8Fxui9wObysspef99Kjd
tIrJbNyI6dBCvNIDKTZs4dN99FM6erXzF4/fgBZ4BJgOVTvmWLofaSBbwhVFDgovEDxlCx2efJXH4cPFSHaj4/HOO/eY3XNi40ehHOybkDxYBMDwv8E1a3Xw
z6U89RcJ114nXKuD8unWcnD2b8k8+MePxjnV+pwuAqSIAEN27N2lPPknKnXfa+pBMM/A3NnJu8WIK58xRc/Y0pggAAALnSURBVEW5OH9QCgCYkBz8NpHdutF
+6lTaTJpEWHKyePf30FBSwtkFCzj9X/9F3eHDZr6Ko5J9wSwA0JzsfIrmJI5583ZuN4nDh9Nu8mSSRo+WqOAbvX3psmUUv/pq8+5Fc8869AK/A2YDfqd/e1e
Q2Vo6sMDMaOAi4R06kHz77SSPH0/cNdfY8jASLQQCAS58+SXn3nuPkiVLaDhtid2z64B7gJPB0g7BJgDWiQa+KQbp6STffjtJt91G3ODBuENCHPnh/Y2NVG7
cSNny5ZQsWUJ9oWWi66Dq9YNdAC5iylThD6pTfDyJubm0vvFGWo0aRXhqqq0/sreoiPJPP6X8k0+oWL1aj3v2tOL4RJ8IwKUxPUH4Q4S1bUvs1VcTP3gwibm
5xOTk4LLo7UABv5/qnTupWL2ayo0bqfrqK6M25WgJ+R2f6BMBsNmQ4PsIad2a6B49iO7enaju3Ynu3p3IzEzCU1MNyyMEAgHqT52i7tAhavbvp2bfPmr376d
m//5LnjZktcAkWEN+EYBL0xaY1vKz3Q4fd0QEEZ07E9m5MxFduhDeoQOhSUlf/8KSkwlp1ar5byMj8XzrolGf14u/rg5oPjizsbT0H371RUV4jxyh7sgRvMe
O4fd67djGXuBPNF/NfVZMXvgu0oG1QEB+jvqtbWlbQbisYcHTLT2GOI+9f3XAr7Hv6VeCycOCWSIEtnX8WSi+ZVoQIRDnEscXRAjE2cTxBRECcTxxfEGEQBx
RHF8IbiF4DigXx9T9V97yrcXxBcsRA4wD5klUoLy3/xMwtuUbC4JEBdLbC1qRpcDGRAUjab4y+hdAonyS76UCeAPYAKwCquWTiAA4TQz6AwOAQUBckH+TC8A
WYFvLT5xeBECiA+nlBRGA4I4OegNJ2P/yFh9QCuRJLy8CIDhbFMTZRQCEIBAGcXRBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEAR
D+P881HuWyquQmgAAAABJRU5ErkJggg==',
        '5triste0' => 'iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAQAAAD2e2DtAAAclUlEQVR42u1daWCTVbp+szRN26Rpui+0aUvpSlnaIkoJlSL7J
jrsFnABRcVxuS7jdUPGe8WZUXF09CoOCCKgIyAoVihLCSA73aC0dE1Xujdp06RNk/tDcdShPedb8yU9D//o+b6T7zzPec/7nuU9AAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBK4Jket+mlYB0yEV0mAUyEBN4wXt0AsFcAEuwCFdFxHA0CB9yIlB5GK0q0DOcWVm6HQlKYhcgPp0WMVqb8e3ClvhpLPLQOTkfX48eDv4p
xjgrDPbAxHp80PbHjiVALTBsA7WCo7638rgQ3hPd4MIgIt+nwFrwN0JfqwZPoZcZ7EFItLvh7YtEAme/CfhSafo97e2BZvgHWGLQETIH9oiEBHyh7YIRIT8o
S0CESF/aItARMgf2iIQiAC0EngeXnF58v8tgtdho85GBHCT/gjYBhncvd+9x7tD1enb4WdUmdQmP1NQd2DPf5a64dnk2erZ7tnp2aps8+lUGXwsHhx+dC6s0
OmJADjr++6mgBuhNyKbkhpHt/r20ntHmyzP/2pQVVB9YHMwB2IQhB0QuVjftwc0RumT9JP0w1meiC1XnIi4ElEZ0RzMaps53A6IXKXvy7ujK0aVT6uIMXL7q
0uVOcPzh1dGmz1dww44TADacNjOTt9Xt4wtzCyd2Cjm8ddbRaeCjsVdSu7wY8kOZOlqhpQAtPFwAgKYvkVhSC6aVZjR6DgrdjzkYHLhyG4l4xc1g1ZXMkQEw
Ibpl/aNLFhwcXKDMKK6YyF7U4tGWd2ccSjgXQDMTb+qNf3isvwIk7BCe73njtGnUzuZDQkOGAp4FoA2DnRMTH906eKTM2tAsPg+fPfEilhnGgpEzkK/yJ5Qt
PS0I8d7fL9g54TiJNoty7MEeBQAfcdPZB996WFdUic4DYp8Pp6Yn2IXCV8CPAmAieOnKX/giFDcPSo4ErolUz9c6A4hLwKg7/gF167OnloHTov9kVuntwQL2
SHkQQB0R35F58JDK6+KwblhFW1O3jfVpBDqUCASKv2jL710OMgMLoEG+Z+nF44RpgREQqTfp+XR/TNqwKXwffiH8zr8hScBkfDoH3fupRx1H7gc2mQb7ro4T
mgSEAmLflXbur3TasFlcWjYewsMvkKSgEhI9N929uUjqj5wabTK1k/LSxWOBERCod+td9n+B6/AkMAnyTvnWGUUJTBRV+o0AtCGwimIpPKEX9Oru8e0wZDBJ
d/XF7cFUnqkCtJ19U4hAK0czkEylSeS8jd+622FIYU22fPzSxIpPVIA43WsB8YS9j9N8xwspVI+I/cv2XIbDDF49M8qrhRXayg8EgQm/UnBWwBtHFwA7Hkvi
XXlnlXFMGSxNfGzBf1S7OJGGMe2MyhinX4Kzp+8+9mdzjzTz05g+NclZi/HxQMSx9GvMGzYpr0BQxzDDbHXT8f14a6TesFizTf6VkFaAGq+v2/z29uiu4AAA
K55P7uCwmYyVuMB1gRAzff3u/Hudk03of4mKr2ezmoNckQ8wNoQQMX392t6e3skof9XUPeNLz4R04PrC7AYD7BkAaj4/r5Nf/8s3ERI/z1qPNetasP1oIyQx
s7MICv7LbShkI1Lv0/Lpm2E/lsh3LTpMx9c904JP2hDBSIArRyycZ0/ZcdfyNg/8DDa/dY2RQdm4Uj4XstCYmwWfAD80V9mfn3b6HZC9MDwt0RW6kZhTg2x4
gkwFoA2HHYB1sqWpO/F7ZMaCcmDI6LbT39mlB3PMt+m2a43OFQAWjkch3CsovZVe+6tIASjEdtpa81LwHLP3eEuzVa91YECwDf/mblPXSDk4mFsc4WoGs+rY
jwMMAoDtSFQiuf9x135v3+JCbPYsMGahaV4i8VGiNUxGFiZsfIyHv3q5o37Cf3UaHnrG3ULZkD4soPCQG04ZOGUc7O8vJtumqahC9/el3e54bValnaYAwSgl
cN3eP3/3u/TWgmh1JHWenc2pg34jv6MAH0L8DTe0k9iwaP5hEx6WHc5oQir4Ch4imcnENf9U3Rs/SjQQqikiyb3VWu7VFy6gnQtAJb7J7Kv20PoZ4JAy2N7R
HYuXUExzf6P5f6NOzuzhpDIDLP1aecxXcFg/iwAVv9Xt6zPIQQyxys53m3c2QAxd/1/9bde/YQ+5lD1rTnAnQ0Qc9X/Uy7MqSbksYN5VaMvc2UDxNz0f3fT8
0cIcezhuRx3Mzc2QMxN/59zNMRMaGMP4aYZR7mxASLK/R8j/g9o2P2J1E5oYxN9okWPtKKPk1KeDxBz0f9XHCL0sw03+4psLmyAmGL/xxj/NeXzqwhh7GNBZ
Xgl+36AmPX+b3/kECGLGzx0mH0bQEEAWiksQpeKK05vIlRxg8kNMdcwii3SSrmxABmAPL8msj1ylBDFHVYfA7R35Q+TuBHAYnSR2OJUsvbPIe5oiilhhynKY
SBeAPjaJ5n1/DVHq+z7qAsxtSFmD4sHgHuP3BxWn1o+vYqrDKOVXjnRhZH1Qb/U1xPamFw1rZLPoy6Hhv35QTaDQXwB/APWIqcrKnds46shypTvZRSMsd1iV
7PYllC4+kQKyymnjoZuy6gYccv2skdfX3mcv3zmS1fWRSIL/UP3GN7bMLeFa6WwBZAXpS3PTuZpAPho1Mbl9eG3Pj5hFzUHH06rsaXXsLURtUv6ypTP57f7D
9BdRO1+uSmlbndUy3iZ/TCbL45EForSvKPHyruE20YYDqBPy+JSPhqgR/Lo/C8WDJ5To19yeErWynIFG/UVq+5bc3rC4Jc/2EWn0pevuebNx/cvKVWhuxm2I
4grAAy3YtJ5PrZ+d0tWLy3Cyrxdp1n3UJEP0/quqJ65H+/QdlvgM6vKlNy3gNQ+6Tw7jGELQCuFe5BjiXVZIR/6f3Em/i0cXar/XtYmY1Jbn+jVhVh78n7yv
dQvLurj4QaGJYUS9E6Le/BmA/A6LcYAEH81tIf7T9854jKlPLvtAa9NY1Lfm+lNYVTKNw57awL3rRBuir3K1iCAJ4C70UVmXOb+w62indOpPpOXkhNGt75m9
2OTqD5zdBIzm4OH6XnssIYrgHhUAWXH3CruP/ughsZdvaI94+jWtzuR+m2gfbJdCdy3xLxKRSdz1jAFoJXCWFSZUUV8OIA5yXSeupZIt0+eo0XluUTuW0JqT
0ZnVh+L4wXg8IbhAczhxQGsC6E1cLjl0hwE2n3pPNXmy0dbzEK3OJYXgCMAZEChauVnBdCooikcmsFgF624vkvFR1tkNHq3M2cOQwA4IeAYni56MHvSe85Ec
wjop3UfOMNbxLExCt3qGKEg2gJgDACZ10DQsIvABTEZ3eoYgwBaAMhgwqM7owEI+BdAvbybOXtoASCDiegykv3DEZDaoyqYs4fmDulBp5QRMhyDsWXM2RMjX
UBkErhplYQKx2Aq2gJEoNxAlAXIQO0CUreQ1K+OwvAu5MKwAuUGogSAdCIi9IQIxyECnX/hbmYCQDoRCSQFhAMRj+5+8cwEgHQibicWwIG4Hd39wjgVgMw8l
O77FB5SW2QWDgWglQJiNty/ic85AAnNi6XdrHzWJ+Xx+msx+KFWYVSDxwFiRAyAQAiv174paaZG9+vmsz5lJ59tEoxmYBJ9ASBjAA2vAvChOdykNvBZn5rXQ
TECvQ57N30BIGOARF4FcDutVcfQ6pEdfNZ3xxU+2yQBzUA8fQEgY4DkFj4/duE1OuPrpMt81ufWu5DXtdEk9BmBMM4EIDPzmwkowDKTcuqpsKo1BXzWNyuH3
8zomm5pL3cCQMQA3h3AM548F0jpsmlp77MHmKSroVpfcO0TvN+LgmRBxWQeYHAniXcBuNnf+cK3Gbu05YXtzA6JUqvPv/HvO9x4z46kZnQPGyMB+PEuAIBw0
//uwKNE3v3kzmm1/NXn2/Q/O4MckBzPt8NhAvAxggOQ0Pn5xxNOo3JoJxZs+WBuNV/1iezpp3Z8HD/IvME5/7UL9kRbOdicpmZ0B7uUkQAcdAWswvrm4byLn
92eP+ZWGzAl1sSiJWe0N/iqT9o35vLKM6gLMW9r2Wl5N2tzx7i8RXlJrE4VqRixMKgitYhe9vCu5SXgQPyUIaQmzKTo8QLw6PbsGlbHZYaQ39fnZRxWN658Z
iWe31+mXP1EvxQA7BEVs88uvs7WJPq2+M2I7d86EUcC+NM/yX0AVLBuXv4vZ6x8WjLP3F+gYmHd4FvNW6voC4CRDAPILeCUMPtXU1Id/nvm/OGplzIrvRjPj
jBigZEAvMllcJQwo+a3RzotHie09z/1xJxSpeNYYCQAObkQgiIi/2MDrU2Sl/rI4/+dWe9BmwUrEYDTIPqW65JWmU6b9cc30s1i/lkgAuB3DmPA7H197j/c9
YfHv4yh/k5PxwnAgwiAIsYOOqdoUL+//NH5ek8+WWAkABFhlCJCe1B7+IrGrH50TzR/v4iRAEwSQilVuCODth6vd7P+a0YPdtv2SBwmADMRAHW/CWuW8tz4B
7IqFHx0QyIAQQoAoE6z7sFLvtyzQATAMyTYUbvR508PXMTIimaWOkwABhkhlLIAbPhle7xezkInn2XGAiMBNHsSQqlCSilo61K9sBjl5DFjgZEA2ogAqDc4x
ai9KWzjRAQLHg4TQIcHIZTyEEB52iZXe2FQT6DTcRagw4sQyu0QAADQL/loilAFoCCEUoWMxhaQ0vjBrqJoVzhMAK0+hFCqUNJJqi/alzQIC2qHCaBdTQilC
m9a+3euRnPFwuAC6EJNVRBCqUJNSwBNQQxYMNIXAOJYRa97g5xQSg0JzXSe6lEMdKKg2guZm7iWvgCQ5+LyAwil1JDSIqGxhcsuGmjJp9Af+XAdfQEUo959L
ZBQSg1udj86R1bsA+37KUEzUExfAPtQ764OIpRSRTSNvGoKw0BnnPVoAeyjL4Bc1LsbiAAoY8J16s8EDbiXsBHNwAnaAtBZUXFAS6CNMEoRM6rdLFSfGTVAW
mgbtKIsgFFnZTIPgIoD5Bf9CaXUILfFUjxRKen/wwD3BJ4P6HVnxiBKAMg44Gw4oZQq5l6kVn5kQfgAswdn0K1fx0wA6DiACIAyZul9KVyyJe19/PhAfyuJY
BYDoAWAjAP0EYRQ6rjnGH7ZmUfiBkw8oUd3v33MBJALiCybHX7VZFGYMlZci6jAK5mU/8y5gf5WrjCgto12Dx4DIAWgswIyA0D2cEIodbz0jSdGgp2Ewk37B
6boB/RBMr3OyswCYLiBl2MIndQRb/jTF+6DLg2L7JnHP9grGyTOzothzh56S3ExTBm8QMVwq0hqF3qD94ma5M0ebfJ2uUEOANDt3v+L+MV2hRkAQGEJMAWYQ
nr4SfWY0Rjy4foFNVG3/mtwzSPZmfWDf1FlNAZ7jAWwDx4fvIDZMzdkSr2w6K7xvOJXrW5TtHp3Kg1Ko9Li0eeO/7Sk393kaVJ1+LUHdoR1aDqS2tScpICPN
e7Y9k3kN+NrIiy/2tYl704onpt3F7LvHg2zeGCwx1gAudCKujv0eJwQBKD3PBN6LaTBv8Wvw8/CaJm6X2JSmpQtQeU3/8Ou7AhsCm2KvjGyKbWFXWs3v2p+F
UC5Qq80uPeLlZaYjijM5Pa5ccgiLSgXEOuAr/ZjWD14CVXrgfcdZ9pPhPwYVRnWEMrPpc0yc2htdM2Ymkl1vg5OkDPnCQNqL9DHuoeZWwCA3SgBdPrlBmc08
t0AxaqDsVeiayItvG5K6ZVXxVTFHIV3baHVydenlqa1Oob+I6EGNQZzwIYAMAaB7CQ+BVCq3Jt0MalxmCP7n01cG1Ub9f007/aRVxfkj2/mu/5DSWwMAJg5H
rQ5qEhA2XFgEx+3B3VLdiYcTamNFFpuisD68fnLCsN6+KrPKpr3R+SQl6Obyo4FwAgFjT4HIudXcfvRV1Rbx+eNtgjyOFpT6IHQg1NHFiw+N5GXO1T2R2F4P
MU4b8ITADIUBDiYwqUA8nw3TywabRP0NeX90vyU/JSwqoW6eyq4ris7BYs11gSA4QWUJtR7hHJiAus93pySn2J3koREdZHvRn5duerI1Dru6qjxvI68zQnPA
wDASvGgt2liIHXwMnax2ZjO+kfb4P2UjUvqNM6Vj8qgPpFyOiCu1t/Czfs/TC0dgSz0uW4/zrtwjSpGQHEyje3tYQ3yB5Z+NdfilIfQS5LWPvbGBDMHg5ZVd
CqNHcaoCCAXkPFuh//uWDY/9HjIQw9XxILTwir7YerKVczyAN8Ku2I70YljMAcAbAHorPAlhm86gb3P3Be1YZXzHz1rCH/84X1R7L7zAE4rf6nDPH6CneZJc
wkeBhkqGNRcj2LlGpldIz5Ygjzy5CR24GyyuSONteDw0LCDk5GFjLBQ38WyAPRdmiiUIwjQIJ93lflH/hj41/vYpl9mkVqlVrlJbnI3//ufm1Vst4m5dTHto
sKEJsvEWnbe9sbMNvQ+7M90u3DfRyXFGHJNAKAk8VRgehOzT2yTvbGkj2bmK/ceVbvS6GNQdQUYvHq9zd4Wb4uqV20JtAwea9yQmyX1Xo2KFkW7Z4ey08uo6
FQbVTbW0uB9N92v66Ei5u/JDS6Lx2IKuBAAxmwAiD6dnL6b2Uf+VWugdOJd2R50I6xp+I3otvj2QFqBlxhCzABR3dD0W2+7TFmm1vs0qpt9mgNaA/sZ5ePbM
T+2ZRLj9ZJ/ZmIUwnYAKQpAZ9V+CWtRpcrij4Qy2R1Qpvzxdpxy8u6w2qi65NqJ9QEcRdtSe7wh3gA/Xz3XJ7rsVxBcHlwb1BxsopGUpV/63tw7NjO7VvLQs
MoRGMWwHUAAigm/tSFQCsiP15Rv/5z+R755+8Hpg/5ge3Bt0vVJZZMaHDcvXO11JqQwojyiMYyaVcj6ejWjYWD5ihp0RGGEWF0jJxYAQNeg3Y62AdXDvxq+s
JzuR+YPss8lsH58/pKicIdfVaXp1pQtLgMwi3NDL4WXaurCzViTVUfTmAhg54ganIByu47SQEPR/8WzAb7NX34kozktOPPp7ltMnbhZUi8tvDSuBQSKc/7HY
gpj6jSDWwRx/+E36A4CZvGiRzv82O7/lG8OxbMBbQF/T33mPL0P7f4PeXkaJ55dcyHQAgLGbS23tcCZTrfvonSJ1+N6B9ijZJNUKOMM9GrYdBsG/ZT7P52rY
zdAFtoGZN+5rDCE3v2dot9G71NOPHHWy0muplH1LStdVtot2T/8+MjSxP5bBJF9NB2XGs+cDIxiRthA9c2UI119lyYcxiF9XrfrXrNoXSu75c5/u3tjLr+5e
06FzA5OBZk9uXVu8dTzPV0tPr/3DWafDaTVLV6Y3YCzAe5T3ZdU30xHkRsAY5oxf+xeRnPgCsMLW947oOkGJ0VYzwtn9n6wdmcQCzOAXw2/Mpqb/k9LALoG2
I5TbvPcdtrTucNLNn/k/PcSi2Fp6VefPr0tiNE+iTbZlrlYBSmP/3QtAKYNMKrfyKT3yZnHPt0V2gMugrsrd29evteL9iLZG1OwTjzQ6v80BYBrA86Np7MUO
uvQayfE4EoQw8MFO95PKKTz7J7o87dx1/9pOIE/T4VgLA4DgKggakqeklJixHbTs2fBBeHRP7e4zZTY7EfpPFGdx2tZWKcaKSwAsyIAfZdGhNoqDgDQ53454
G5Ks1931IPLYkI9Nfpt8Pji5hCsout12XStE128DVgmrTzuH6OBgBY+GFuNl3uhAN6hPzzRhM4MswHL6Hw1NyeMkEkdByO+noNV0AizdWbeBQCgq8FzBfslb
y8ieYSooky5aSHmQZjtOgZzDczc7Q14NqDL+7nFZjEhFR89khcX9igw+/8GJjUx2vSE6woCdKnK3KZWEGJx8eK0kiTMorTdPxYEAKA5D/MBK2F0bXhLT3odo
RYHG28/didm0QJ4UG91oAD0Vs23sBqwtnCWxrg1jmol9CKH9Phd8zD3aRghXdfGrDbG+171BtxhAESFI2JLhpkIxYPhVOA7S224i/TrdQeZ1sfCxmf8YaBfq
kuMKw0jEhgQZwNeXdWLex8rY/PPPAq4OSMwA6rwypq9Xs0qJHeNDcSo+rUsM+5R2CqYST/6/5VZZuena+PgAmBullZ0/m1LQieh+/e4onr2fuxMZ0ZI05WyU
StLZ1/0rdieAPTKf4weX8xN6kXnRaXXc/d1+mEXX6/7hp16WTv8hO8JAPR45SQmlwaZCe03ka9++n4K9LMy+rMsAL1V8w3cCz64VuBEfEJpSA+hHgDgTMBLq
7q9sYtXQaauna26Jex9ht6oyYbF4IUrgZMJsWUkIgA4G7D+PhN+GolmyNRVsVc7ywejtXGgA+zbRKW9q/+19PrQpn9n7Cf3WmUU6NfqStisX8Lu5+hbNfvxr
YBNcnFku8mVt4Cg8LdxOxbYpI6jH7hIjUAlJAQAyMhdf3woLhVaRa9NPqGl8IARxrFNP+sWgGpICABQHXk4KqVM3Tu06K9QPLasaBSlR9br9rH/OyRcfByVk
BAAwOhzONm/NsYwdOj/PvzVFW3ULt5mMfTjeAgAANCGwimIpKRE6/zsJy8ODfrfTjswo59a16uCdB0nvhJn6ZGoxQM/Ibxi/b4Yo2uTX6oc+J6gQZy/iexM/
PIoAHoSkJtW7l9e4rr0fx732TzKmU858P15EQA9CQCMO/dSjiuuFLTJNtx1cRzlxzilH7hOwkxPAp5dy75bcc216P8s4YtZPQqh0Q/cZ+GmJwGA0ZdeOuwqy
0UN8j9PLxxD40HO6Qc+0rDTlYDMfOfJp844S3aQgdAl/Uu6boJVJkz6gZ88/Npw2A4ZdJ70brv3yP1XnZf+LYlfT0Fe8Hxr5EKWjocMCTxdxKCVwPPwCrjTe
TaifMXxabXOR/4Pw7ZP1kfTetQMr8NGnY2PX8njTRzaeDhBZygAAAjRLz1+d6XzkL83atfkhnCaD/Ni+h0gAPrewE+Iur7o5Gy98Mk/oPlqYhX9G9V5pR/4v
ouHmQQA/G5MP72qSG4TJvVm8daRP6S3BjJ4Bc/0A/+XMdF3CG9C1ZZ+YVl+hMD2Euk9d4w+ndbpy+glPDl+DhUAM4fwF9jDK++6uPSaEGyBWbwzPie1JophW
/Lo+DlYAAAA2gjYxswOAAB4GZKuTr0ytdZR20ls8EN4TtKVRBPzi6FyYYXOIf6Nw+7jY8UOAACAojPp6qSS6TUyG5+9/lCELu5KYpc3Gy9zTN93sACYBoa/h
8wSWTH6+vSyWI6Xk0u8D8XkxVRF97mz9ELe3T4BCYANl/D38OgKqY/Rp1doG6Us5hi2inTBp6LLIhpCaSzoCMztE5QA2BwKfgv3Hr+moOZhzTHNia0jDHS8B
Btc977qVxZQG3gjoDXA4sH6pzvU9AtGAAAA2mB4Ep5kXwQ3IbF6t/u0B7T7GVQmtcnPFNQd2AOgtCp+3mPXJTVKAW54Nnm2erZ7dnq2ejerO3wNPsyuiUKQv
wne0d1wfNsL5lJmduICJ4HDfP5bdA7BTKR0araDBSaC1MXJN8MrsEbXIZSfI7Br2bkeDBxOvkAMv2AF4MIiECD5AhWAC4pAoOQLWAAuJAIBky9wAbiACAROv
hMI4GcRrIO1oHYy8tvhQ3hP2OQ7iQAAALQKmA4ZsMYpbIEZPoZcOKTrcoaWFTlTp3ICW+Ak/d5JBfCLLUiHVYKTQTtshZPO0u+dWAC/kkEqpMF48HbwTzHAW
bgAF5yPeqcWgCDsgZP2eZcSwO/swSjw53x1ox9aoMCZ+7wLCoAHKbgY7S4rAFbF4LKkExAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQDAX8P1kS21HaOasUA
AAAAElFTkSuQmCC',
        '5triste1' => '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',
        '6degout0' => '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
mCC',
        '6degout1' => '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
EEQBEHQhf8H9S1IPlGk1PEAAAAASUVORK5CYII=',
        '7colere0' => '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
d5MAVHt1AAAAABJRU5ErkJggg==',
        '7colere1' => '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',
        '8interet0' => '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
',
        '8interet1' => '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
AzkAAAAASUVORK5CYII=',
        'play' => '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',
        'back' => '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
06OzkWnnwwRAAAAAElFTkSuQmCC',
        'query' => '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',
    );

    const REF_IMG = array(
        'nebule' => '5dd45288e66bcdd560a287697655c58a410fa76d564badc1f28fc328209f49881b92.none.272',
        'addent' => 'b598ec9eae41c186e554662d13cb5ad8b82b7a73d11742b6b475d0ba5078cda764ce.none.272',
        'addlnk' => 'ec42055c52ae0c4600795871b04851f3d2e8bc5338d886200e928b92344f0db535e5.none.272',
        'addobjmark' => '0ff35e73a0c3b4d016f4fe1413443d2b9e012cf05fb402eb4f7fe8d6090b57cae1c0.none.272',
        'addobj' => '7a68bad2fa5574bbd11efe3aeb9a53728f2972823fc6617fb7cc0bef5098423cfc50.none.272',
        'add' => '0aef8b0aaabc961b91b69d22baef98fea1eeadc644ee69d5684b4b15ba89cee24c8b.none.272',
        'addtxt' => '72132e670d69a0a30f9d472406fe36aa602072b834d514c222cb55d02a9c8738fe13.none.272',
        'admin' => '8f492951bb321c4cfc6f1b9408c8deb6a2e9718b42c3e894a05596a696549e29d509.none.272',
        'cvtaddent' => 'acc604c01d9d1625079e104b2ba13812dfbac0ab90e2ed2f7eec5dce08f35621ab47.none.272',
        'cvtaddmsg' => '6ef161a696f280325801dd0cfbbbc0c3257a88b3b7752bc39c8e3e563456cf38eb3b.none.272',
        'cvtadd' => '2d10b86ac5aee3bf2a0c05217adc7cf8022fce77d9f79cb1a1b262c36dc5d6cd4eb7.none.272',
        'cvtent' => '64d671b1f98080dfa670a856899e4ac137b0804c6f68ef188636c3983cd017435d5f.none.272',
        'cvtobj' => '6e6562756c652f6f626a65742f636f6e766572736174696f6e000000000000000000.none.272',
        'cvt' => '8c44dc720b87faad1de2a8b3277f088018e0fdb2e4949498de35e319fd681725b3f2.none.272',
        'en-en' => 'c2c08f6388cea006a353ab729f9a34b42d9d3f72567a8f6a38e61bc1110fed9904e4.none.272',
        'entlock' => 'b7ec3cd132dfeabad7e21bcf11584d3b2e35e85b725c8118360b7dc8d656bb87447b.none.272',
        'err' => '69636f6e206572726f72000000000000000000000000000000000000000000000000.none.272',
        'es-co' => 'ab8e732269d84630f63aab84579f10811db4cee79d3ce1aa5b33b70d8d6c1ba7c175.none.272',
        'flush' => '4e44ef17842462a37fb054c05a10bd3ee5fd084c2f299fd7b6e43337a44ae1167c0a.none.272',
        'fr-fr' => '38c9509d24daf0fced78434d355893538cb4b6b9a01b923934bb0d79cd20f1b60a22.none.272',
        'grpentadd' => 'f610c4f79eb49b69b4a6ea67ca148664db7d1b0496e879540963820fe70a118a97af.none.272',
        'grpent' => '425d033815bd76844fc5100ad0ccb2c3d6cd981315794b95210d6c6ec8da22e8faaf.none.272',
        'grpobjadd' => '44e1a60f923a373fada778d4b21ecb7dd0fc5c2833882169ff602d3c8928ec65a335.none.272',
        'grpobj' => '6e6562756c652f6f626a65742f67726f757065000000000000000000000000000000.none.272',
        'idownload' => 'b2c6815e74b1c99804dfa8a5a7af758b15edeba56ea09e7782871fdf97e219db7be8.none.272',
        'ihlp' => '5b3afdf2eb971ce185930ad4accda23942d4495a638c2bdf27ae3e8e4537c1434697.none.272',
        'imenu545454' => '18c9c7940b481be103d3e63db4e3124be61ebe3c0067908fde361872f16908de97c4.none.272',
        'imenu' => '8fffa9e30ca4e02f3b07f8447a4a23faaaf27bc5731b1e303e08c8ece79953a179b1.none.272',
        'imetrolog' => 'b9d58eaa11ff4e27b5b34fdc165ffdbf11675aa4a8845e3a6a00af53a832cffee9ac.none.272',
        'imodify' => '7a27e831c81d717949bf87ab496d723e236bddfca0b317fcfb5568a95d08808507e7.none.272',
        'info' => '69636f6e20696e666f726d6174696f6e000000000000000000000000000000000000.none.272',
        'key' => 'ebde500081ce0916fb54efc3a900472be9fadee2dfcf988e3b5b721ebf00d687f655.none.272',
        'klicty' => '3c2ce4b7bd11456851882ce76151f03c9fc57ff9de1175e19b03c80b52b1de70a43c.none.272',
        'lc' => '6e6562756c652f6c69656e2f6c630000000000000000000000000000000000000000.none.272',
        'ld' => '6e6562756c652f6c69656e2f6c640000000000000000000000000000000000000000.none.272',
        'le' => '6e6562756c652f6c69656e2f6c650000000000000000000000000000000000000000.none.272',
        'lf' => '6e6562756c652f6c69656e2f6c660000000000000000000000000000000000000000.none.272',
        'lk' => '6e6562756c652f6c69656e2f6c6b0000000000000000000000000000000000000000.none.272',
        'll' => '6e6562756c652f6c69656e2f6c6c0000000000000000000000000000000000000000.none.272',
        'lo' => '6e6562756c652f6f626a657400000000000000000000000000000000000000000000.none.272',
        'ls' => '6e6562756c652f6c69656e2f6c730000000000000000000000000000000000000000.none.272',
        'lstent' => '6dfeb9cc79e880d2ab770b202f50404a1862eb1079752cccd9a909ad881cd614d997.none.272',
        'lstobj' => '34479c85e509a3e68556d00ee42c244affd3046fce4a7b58a470d11487e0e1158795.none.272',
        'lu' => '6e6562756c652f6c69656e2f6c750000000000000000000000000000000000000000.none.272',
        'lx' => '6e6562756c652f6c69656e2f6c780000000000000000000000000000000000000000.none.272',
        'mark' => '8a3125504481cf438d1cd2583f99c9e8b9125386e3668119291daf82e94f67243194.none.272',
        'mchr' => 'bded64b18b85b47aa04caa2c0f8c63670556a0098b5f5d57fed028d36661365f4688.none.272',
        'ment' => 'e8eb1df99af2b3f25a489aff093b113192527b444b12934ce186715897a786614064.none.272',
        'mmsg' => '9e5b57b79c0ac5f879c7dcae141124d73fd658b521dadf7e59dd90a0065aea87332f.none.272',
        'mobj' => '838642115a436722f46a0e988e85e57ab144089c2fd375bae09de49e7946baa5f103.none.272',
        'module2' => '4a176dc406c84e84e5c882842a7c9e142a7d58c39584c02080433143d59274c4dc69.none.272',
        'modulegray' => '46a62e81e8126de65191596beece7ad3ee407fe19156452e0e500c7da6a9b88fc62d.none.272',
        'module' => '309c822aef3cd06665289afea6ca6cbbc0a76bc7405a35c83d085fa9f6f3beb0cccb.none.272',
        'msglist' => '2ba931511f78ff064feb5e8ab4d2076156f2f4e717001ac989622e3e82ce406db3ea.none.272',
        'msgsent' => 'a12ac3582d2ea078d83dff4195f4d092b28087d4b21ba4e956adf33f42baf634385d.none.272',
        'msgtrans' => 'f26d7bfe6daa2ae3d3c31468ea6dad9cc34390367035cb4101266e1dd17bef1a0caf.none.272',
        'nebfs' => '4a7746c75d40e47dc6e84dee95b2f41afca99d65476e532e4bac3da9faf3005a199e.none.272',
        'nebulegray' => '4194bc549b46f0a9807bdbd5d9e64cb0817d0c37866682fa815c8ec56bb98ff61926.none.272',
        'null256' => 'b9cb4ef943d36ea34afcc3d027b69f0ed291f3d800b7bf6f6a3393db0559825eb4dd.none.272',
        'null' => '0e65bb135f63ab98a4ca2c12b0c98f90b78fb8619b752be69e213b9cb15c2b17eccd.none.272',
        'oent' => '6e6562756c652f6f626a65742f656e74697465000000000000000000000000000000.none.272',
        'ok' => '69636f6e206f6b000000000000000000000000000000000000000000000000000000.none.272',
        'reference' => 'ad33396426cfbc1048b33251327473af65968bd3339a281284aa12246d75f3abf0fb.none.272',
        'synent' => 'f75724b43291c2b60fce6219be762d383075f21a9223317354b2b4c523aed72f3b6f.none.272',
        'synlnk' => '5c269a5cdb4cade1832b39bd642af96bced4b7b8b7963542844721d2d4f9d85747f3.none.272',
        'synobjgray' => 'aefde628b18bafd8a6044c8070d7ed5c809df76bfd32baf399d0b5e4ccd55e147623.none.272',
        'synobj' => 'c4c5278a7d00545eb3d0584e18344086561be96112d86b2d28cd71654846ac9be51e.none.272',
        'time' => 'baeb47425661eb00b7aab75f325184c8484d90534c7b7a5ceafda14cbe65e38da3f3.none.272',
        'unmarkall' => '09538bf27b38e1f1310af1d631fdc319a1d31b03658182e26fd2673c4748f56a801d.none.272',
        'unmark' => 'f8781e6d70df781771d4c96a63f4c2b295be699aa30beaf253d5cda50191ff692fda.none.272',
        'warn' => '69636f6e207761726e696e6700000000000000000000000000000000000000000000.none.272',
        'world' => 'a951c9e429715d0e30823dfe8c62fcaed79f3365d6a9945759b77260a334f921b44b.none.272',
        '1joie0' => '6f6a6569656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000000000.none.272',
        '1joie1' => '6f6a6569656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000000001.none.272',
        '2confiance0' => '6f63666e6169636e65656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000.none.272',
        '2confiance1' => '6f63666e6169636e65656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000001.none.272',
        '3peur0' => '65707275656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000000000.none.272',
        '3peur1' => '65707275656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000000001.none.272',
        '4surprise0' => '7573707269726573656e7562656c6f2f6a627465652f6f6d69746e6f0a2f00000000.none.272',
        '4surprise1' => '7573707269726573656e7562656c6f2f6a627465652f6f6d69746e6f0a2f00000001.none.272',
        '5triste0' => '727473696574737365656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000.none.272',
        '5triste1' => '727473696574737365656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000001.none.272',
        '6degout0' => '65646f677475656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000000000.none.272',
        '6degout1' => '65646f677475656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000000001.none.272',
        '7colere0' => '6f63656c6572656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000000000.none.272',
        '7colere1' => '6f63656c6572656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000000001.none.272',
        '8interet0' => '6e696574657274656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000.none.272',
        '8interet1' => '6e696574657274656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000001.none.272',
        'play' => '73745872cd2b46a40992470eaa6dd1e5ca1face3c38a1da7650d4040d82193b9021d.none.272',
        'back' => '8ade584d3aa420335a7af82da4438654b891985777cc05bf6cbe86ebe328e31f1cc4.none.272',
        'query' => '16e9a40a7f705f9c3871d13ce78b9f016f6166c2214b293e5a38964502a5ff9a05bb.none.272',
    );

    static public function createNodeReferences($nebuleInstance): bool
    {
        $ok = true;
        echo 'o: ';
        foreach ( References::OBJ_IMG as $name => $content) {
            $instanceNode = new \Nebule\Library\Node($nebuleInstance, '0');
            $instanceNode->setEnvironmentLibrary($nebuleInstance);
            $decoded = (string)base64_decode($content, false);
            $nebuleInstance->getMetrologyInstance()->addLog('create ref icon node ' . $name, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '07a97058');
            if ($instanceNode->setContent($decoded)) {
                if ($instanceNode->write()) {
                    $nebuleInstance->getMetrologyInstance()->addLog('ok ref icon node nid=' . $instanceNode->getID(), Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'ea79ccf9');
                    echo '+';
                    $instanceNode->setName($name);
                }
                else {
                    echo 'E';
                    $ok = false;
                }
            } else {
                echo 'E';
                $ok = false;
            }
        }
        echo '<br />';
        return $ok;
    }

    static public function createLinkReferences($nebuleInstance): bool
    {
        $ok = true;
        echo 'l: ';
        foreach ( References::OBJ_IMG as $name => $content) {
            $instance = new Node($nebuleInstance, '0');
            $decoded = (string)base64_decode($content, false);
            if (!$instance->setContent($decoded))
                $ok = false;

            $reference = $nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE);
            if (References::REF_IMG[$name] != '') {
                $nebuleInstance->getMetrologyInstance()->addLog('sign ref icon ' . 'l>' . References::REF_IMG[$name] . '>' . $instance->getID() . '>' . $reference, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '08d23b22');

                $newLink = \Nebule\Bootstrap\blk_generateSign('',
                    'l',
                    References::REF_IMG[$name],
                    $instance->getID(),
                    $reference
                );
                if (\Nebule\Bootstrap\blk_write($newLink)) {
                    $nebuleInstance->getMetrologyInstance()->addLog('ok ref icon link', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '2618d5b0');
                    echo '+';
                } else {
                    echo 'E';
                    $ok = false;
                }
            }
        }
        echo '<br />';
        return $ok;
    }

}



// ========================================================================================
//   003_functions.php
//   020250215163515
//   3a20b57ae3bead5411452dd350e3d0d37eba7c9007aaa0960a0dbc10c541fbe4.sha2.256

/**
 * Functions for nebule library and more.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Functions
{
    const SESSION_SAVED_VARS = array(); // Replaced on children classes.
    const DEFAULT_CLASS = ''; // Replaced on children classes.
    const TYPE = ''; // Replaced on children classes.

    protected ?nebule $_nebuleInstance = null;
    protected ?Metrology $_metrologyInstance = null;
    protected ?Configuration $_configurationInstance = null;
    protected ?Rescue $_rescueInstance = null;
    protected ?Authorities $_authoritiesInstance = null;
    protected ?Entities $_entitiesInstance = null;
    protected ?Recovery $_recoveryInstance = null;
    protected ?Cache $_cacheInstance = null;
    protected ?Session $_sessionInstance = null;
    protected ?Ticketing $_ticketingInstance = null;
    protected ?ioInterface $_ioInstance = null;
    protected ?CryptoInterface $_cryptoInstance = null;
    protected ?SocialInterface $_socialInstance = null;
    protected ?Applications $_applicationInstance = null;
    protected ?Displays $_displayInstance = null;
    protected ?Actions $_actionInstance = null;
    protected ?Translates $_translateInstance = null;
    protected bool $_environmentLibrarySet = false;
    protected bool $_environmentApplicationSet = false;
    protected bool $_initialisationSet = false;
    protected array $_listClasses = array();
    protected array $_listTypes = array();
    protected array $_listInstances = array();
    //private ?Functions $_defaultInstance = null;
    protected bool $_ready = false;

    public function __construct(nebule $nebuleInstance){}

    public function __sleep(){
        return $this::SESSION_SAVED_VARS;
    }

    public function __wakeup(){}

    public function setEnvironmentLibrary(nebule $nebuleInstance): void {
        $nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, $this::class . '::' . __FUNCTION__, '1111c0de');
        if ($this->_environmentLibrarySet)
            return;
        $this->_environmentLibrarySet = true;

        $this->_nebuleInstance = $nebuleInstance;
        $this->_metrologyInstance = $this->_nebuleInstance->getMetrologyInstance();
        $this->_configurationInstance = $this->_nebuleInstance->getConfigurationInstance();
        $this->_rescueInstance = $this->_nebuleInstance->getRescueInstance();
        $this->_authoritiesInstance = $this->_nebuleInstance->getAuthoritiesInstance();
        $this->_entitiesInstance = $this->_nebuleInstance->getEntitiesInstance();
        $this->_recoveryInstance = $this->_nebuleInstance->getRecoveryInstance();
        $this->_cacheInstance = $this->_nebuleInstance->getCacheInstance();
        $this->_sessionInstance = $this->_nebuleInstance->getSessionInstance();
        $this->_ticketingInstance = $this->_nebuleInstance->getTicketingInstance();
        $this->_ioInstance = $this->_nebuleInstance->getIoInstance();
        $this->_cryptoInstance = $this->_nebuleInstance->getCryptoInstance();
        $this->_socialInstance = $this->_nebuleInstance->getSocialInstance();
    }

    public function setEnvironmentApplication(Applications $applicationInstance): void {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, $this::class . '::' . __FUNCTION__, '1111c0de');
        if ($this->_environmentApplicationSet)
            return;
        $this->_environmentApplicationSet = true;

        $this->_applicationInstance = $applicationInstance;
        $this->_displayInstance = $this->_applicationInstance->getDisplayInstance();
        $this->_actionInstance = $this->_applicationInstance->getActionInstance();
        $this->_translateInstance = $this->_applicationInstance->getTranslateInstance();
    }

    public function initialisation(): void {
        $this->_metrologyInstance->addLog('track functions ' . get_class($this), Metrology::LOG_LEVEL_FUNCTION, $this::class . '::' . __FUNCTION__, '1111c0de');
        if ($this->_initialisationSet)
            return;
        $this->_initialisationSet = true;

        $this->_initialisation();
    }

    protected function _initialisation(): void{}

    protected function _initSubInstance(string $class): functions
    {
        $this->_metrologyInstance->addLog('track functions ' . get_class($this), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $instance = new $class($this->_nebuleInstance);
        $instance->setEnvironmentLibrary($this->_nebuleInstance);
        $instance->initialisation();
        $type = strtolower($instance::TYPE);

        $this->_metrologyInstance->addLog('add sub-instance ' . $class . ' as ' . $type, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '68634e7f');
        $this->_listClasses[$type] = $class;
        $this->_listTypes[$class] = $type;
        $this->_listInstances[$type] = $instance;

        return $instance;
    }

    protected function _getDefaultSubInstance(string $name): Functions
    {
        $this->_metrologyInstance->addLog('track functions ' . get_class($this), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $option = strtolower($this->_configurationInstance->getOptionAsString($name));
        if (isset($this->_listClasses[$option])) {
            $this->_metrologyInstance->addLog('get default instance with option', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '04260a5e');
            $defaultInstance = $this->_listInstances[$option];
            $this->_ready = true;
        } elseif (isset($this->_listClasses[$this::DEFAULT_CLASS])) {
            $this->_metrologyInstance->addLog('get default instance with default value', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'f2f81904');
            $defaultInstance = $this->_listInstances[$this::DEFAULT_CLASS];
            $this->_ready = true;
        } else {
            $defaultInstance = $this;
            $this->_metrologyInstance->addLog('no default ' . get_class($this) . ' class found', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '72cc9a1b');
        }
        $this->_metrologyInstance->addLog('set default class ' . get_class($defaultInstance), Metrology::LOG_LEVEL_DEBUG, __METHOD__, '4233cb6c');
        return $defaultInstance;
    }

    public function getReady(): bool
    {
        return $this->_ready;
    }



    public function getTypedInstanceFromNID(string $nid): Node
    {
        $social = 'all';

        if ($nid == '0'
            || $nid == ''
        )
            $instance = $this->_cacheInstance->newNode('0');
        else {
            $instance = $this->_cacheInstance->newNode($nid, Cache::TYPE_NODE);
            if ($instance->getIsEntity($social))
                $instance = $this->_cacheInstance->newEntity($nid);
            elseif ($instance->getIsWallet($social))
                $instance = $this->_cacheInstance->newNode($nid, Cache::TYPE_WALLET);
            elseif ($instance->getIsToken($social))
                $instance = $this->_cacheInstance->newNode($nid, Cache::TYPE_TOKEN);
            elseif ($instance->getIsTokenPool($social))
                $instance = $this->_cacheInstance->newNode($nid, Cache::TYPE_TOKENPOOL);
            elseif ($instance->getIsCurrency($social))
                $instance = $this->_cacheInstance->newCurrency($nid);
            elseif ($instance->getIsConversation($social))
                $instance = $this->_cacheInstance->newConversation($nid);
            elseif ($instance->getIsGroup($social))
                $instance = $this->_cacheInstance->newGroup($nid);
            else {
                $protected = $instance->getMarkProtected();
                if ($protected)
                    $instance = $this->_cacheInstance->newNode($instance->getID(), Cache::TYPE_NODE);
                if ($instance->getType('all') == References::REFERENCE_OBJECT_ENTITY)
                    $instance = $this->_cacheInstance->newNode($nid, Cache::TYPE_ENTITY);
            }
        }

        return $instance;
    }

    public function dateCompare($date1, $date2): bool|int
    {
        if ($date1 == '') return false;
        if ($date2 == '') return false;
        // Extrait les éléments d'une date.
        $d1 = date_parse($date1);
        if ($d1 === false) return 0;
        $d2 = date_parse($date2);
        if ($d2 === false) return 0;
        // Année
        if ($d1['year'] > $d2['year']) return 1;
        if ($d1['year'] < $d2['year']) return -1;
        // Mois
        if ($d1['month'] === false) return 0;
        if ($d2['month'] === false) return 0;
        if ($d1['month'] > $d2['month']) return 1;
        if ($d1['month'] < $d2['month']) return -1;
        // Jour
        if ($d1['day'] === false) return 0;
        if ($d2['day'] === false) return 0;
        if ($d1['day'] > $d2['day']) return 1;
        if ($d1['day'] < $d2['day']) return -1;
        // Heure
        if ($d1['hour'] === false) return 0;
        if ($d2['hour'] === false) return 0;
        if ($d1['hour'] > $d2['hour']) return 1;
        if ($d1['hour'] < $d2['hour']) return -1;
        // Minute
        if ($d1['minute'] === false) return 0;
        if ($d2['minute'] === false) return 0;
        if ($d1['minute'] > $d2['minute']) return 1;
        if ($d1['minute'] < $d2['minute']) return -1;
        // Seconde
        if ($d1['second'] === false) return 0;
        if ($d2['second'] === false) return 0;
        if ($d1['second'] > $d2['second']) return 1;
        if ($d1['second'] < $d2['second']) return -1;
        // Fraction de seconde
        if ($d1['fraction'] === false) return 0;
        if ($d2['fraction'] === false) return 0;
        if ($d1['fraction'] > $d2['fraction']) return 1;
        if ($d1['fraction'] < $d2['fraction']) return -1;
        return 0;
        // A faire... comparateur universel sur multiples formats de dates...
    }

    /**
     * Create and write object from text.
     * TODO protection
     *
     * @param string  $text
     * @param boolean $protect
     * @param bool    $obfuscate
     * @return string
     */
    public function createTextAsObject(string &$text, bool $protect = false, bool $obfuscate = false): string
    {
        if (!$this->_configurationInstance->checkBooleanOptions(array('unlocked','permitWrite','permitWriteObject','permitWriteLink'))
            || strlen($text) == 0
            || $protect // TODO
        )
            return '';

        $textOID = $this->getNidFromData($text);
        $this->_ioInstance->setObject($textOID, $text);
        $propertyOID = $this->_nebuleInstance->getNIDfromData('text/plain');
        $propertyRID = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_TYPE);
        $link = 'l>' . $textOID . '>' . $propertyOID . '>' . $propertyRID;
        $newBlockLink = new BlocLink($this->_nebuleInstance, 'new');
        $newLink = new LinkRegister($this->_nebuleInstance, $link, $newBlockLink);
        if ($obfuscate && !$newLink->setObfuscate())
            return '';
        $newBlockLink->signwrite($this->_entitiesInstance->getCurrentEntityID());

        return $textOID;
    }

    public function getNidFromData(string $data, string $algo = ''): string
    {
        if ($algo == '')
            $algo = $this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm');
        return $this->_cryptoInstance->hash($data, $algo) . '.' . $algo;
    }

    public function getFilterInput(string $name, int $flag=0): string {
        $arg = '';
        $type = 'POST';
        try {
            if (filter_has_var(INPUT_POST, $name)) {
                $arg = filter_input(INPUT_POST, $name, FILTER_SANITIZE_STRING, $flag);
                if ($arg === false || $arg === null)
                    $arg = '';
                $arg = trim($arg);
            } else
                $this->_metrologyInstance->addLog("get input '$name' type $type not present", Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'd15e6dba');
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog("error reading '$name' on POST "
                . ' ('  . $e->getCode() . ') : ' . $e->getFile()
                . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '9afa9eda');
        }
        if ($arg == '') {
            $type = 'GET';
            try {
                if (filter_has_var(INPUT_GET, $name)) {
                    $arg = filter_input(INPUT_GET, $name, FILTER_SANITIZE_STRING, $flag);
                    if ($arg === false || $arg === null)
                        $arg = '';
                    $arg = trim($arg);
                } else
                    $this->_metrologyInstance->addLog("get input '$name' type $type not present", Metrology::LOG_LEVEL_DEBUG, __METHOD__, '3f409bc1');
            } catch (\Exception $e) {
                $this->_metrologyInstance->addLog("error reading '$name' on GET "
                    . ' ('  . $e->getCode() . ') : ' . $e->getFile()
                    . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                    . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '40aeb7cd');
            }
        }
        if ($arg != '')
            $this->_metrologyInstance->addLog("get filtered input '$name' type $type result=$arg", Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'cf05e78e');
        return $arg;
    }
}



// ========================================================================================
//   004_metrology.php
//   020250215163515
//   476c2bd3e8d0a861bb8e8fb17de2f54a1c0a417365ca2ecd9da529474a65f576.sha2.256

/**
 * Metrology class for the nebule library.
 * Do not serialize on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 * TODO use LOG_LEVEL_AUDIT to facilitate audit of instance and what people do.
 */
class Metrology extends Functions
{
    const DEFAULT_ACTION_STATE_SIZE = 64;
    const LOG_LEVEL_NORMAL = 0;
    const LOG_LEVEL_ERROR = 1;
    const LOG_LEVEL_AUDIT = 2;
    const LOG_LEVEL_DEVELOP = 4;
    const LOG_LEVEL_FUNCTION = 8;
    const LOG_LEVEL_DEBUG = 16;
    const LOG_LEVEL_NAMES = array(
        '1' => 'error',
        '2' => 'audit',
        '4' => 'develop',
        '8' => 'function',
        '16' => 'debug',
    );
    const DEFAULT_DEBUG_FILE = 'debug';

    private int $_countLinkRead = 0;
    private int $_countLinkVerify = 0;
    private int $_countObjectRead = 0;
    private int $_countObjectVerify = 0;
    private float $_timeStart = 0;
    private float $_timeLastEvent = 0;
    private int $_timeCount = 0;
    private array $_timeArray = array();
    private int $_actionCount = 0;
    private array $_actionArray = array();

    public function __construct(nebule $nebuleInstance){
        parent::__construct($nebuleInstance);
        $this->_setTimeStart();
        $this->_getPermitLogsOnDebugFile();
        $this->_getPermitLogs();
        $this->_getDefaultLogsLevel();
    }

    public function __toString(): string
    {
        return 'Metrology';
    }

    public function addLinkRead(): void
    {
        $this->_countLinkRead++;
    }

    public function getLinkRead(): int
    {
        return $this->_countLinkRead;
    }

    public function addLinkVerify(): void
    {
        $this->_countLinkVerify++;
    }

    public function getLinkVerify(): int
    {
        return $this->_countLinkVerify;
    }

    public function addObjectRead(): void
    {
        $this->_countObjectRead++;
    }

    public function getObjectRead(): int
    {
        return $this->_countObjectRead;
    }

    public function addObjectVerify(): void
    {
        $this->_countObjectVerify++;
    }

    public function getObjectVerify(): int
    {
        return $this->_countObjectVerify;
    }


    private function _setTimeStart(): void
    {
        global $metrologyStartTime;

        $this->_timeStart = $metrologyStartTime;
        $this->_timeLastEvent = $this->_timeStart;
    }

    public function getTime(): float
    {
        return microtime(true) - $this->_timeStart;
    }

    public function addTime(): void
    {
        $time = (float)sprintf('%01.6f', microtime(true));
        $this->_timeArray[$this->_timeCount] = $time - $this->_timeLastEvent;
        $this->_timeLastEvent = $time;
        $this->_timeCount++;
    }

    /**
     * Retourne le tableau des temps intermédiaires.
     *
     * @return array:double
     */
    public function getTimeArray(): array
    {
        return $this->_timeArray;
    }


    private bool $_permitLogs = false;
    private int $_logsLevel = self::LOG_LEVEL_NORMAL;
    private bool $_permitLogsOnDebugFile = false;

    private function _getPermitLogsOnDebugFile(): void
    {
        // If permitted, write debug level logs to debug file.
        if (Configuration::getOptionFromEnvironmentAsBooleanStatic('permitLogsOnDebugFile'))
        {
            file_put_contents(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . Metrology::DEFAULT_DEBUG_FILE, 'START on library ' . $this->_timeStart . "\n", FILE_APPEND);
            $this->_permitLogsOnDebugFile = true;
        }
    }

    private function _getPermitLogs(): void
    {
        $getPermitLogs = Configuration::getOptionFromEnvironmentAsStringStatic('permitLogs');
        if ($getPermitLogs == 'true')
            $this->_permitLogs = true;
        elseif ($getPermitLogs == 'false')
            $this->_permitLogs = false;
        elseif (Configuration::OPTIONS_DEFAULT_VALUE['permitLogs'] == 'true')
            $this->_permitLogs = true;
        else
            $this->_permitLogs = false;

        $this->_addLog('permitLogs=' . (string)$this->_permitLogs, self::LOG_LEVEL_DEBUG, __METHOD__, '10c133be');
    }

    private function _getDefaultLogsLevel(): void
    {
        $level = Configuration::getOptionFromEnvironmentAsStringStatic('logsLevel');
        if ($level == '')
            $level = Configuration::OPTIONS_DEFAULT_VALUE['logsLevel'];

        $this->setLogsLevel($level);
    }

    public function setLogsLevel(string $level): void
    {
        switch ($level) {
            case 'NORMAL':
            case self::LOG_LEVEL_NORMAL:
                $this->_logsLevel = self::LOG_LEVEL_NORMAL;
                $levelName = 'NORMAL';
                break;
            case 'ERROR':
            case self::LOG_LEVEL_ERROR:
                $this->_logsLevel = self::LOG_LEVEL_ERROR;
                $levelName = 'ERROR';
                break;
            case 'DEVELOP':
            case self::LOG_LEVEL_DEVELOP:
                $this->_logsLevel = self::LOG_LEVEL_DEVELOP;
                $levelName = 'DEVELOP';
                break;
            case 'AUDIT':
            case self::LOG_LEVEL_AUDIT:
                $this->_logsLevel = self::LOG_LEVEL_AUDIT;
                $levelName = 'AUDIT';
                break;
            case 'FUNCTION':
            case self::LOG_LEVEL_FUNCTION:
                $this->_logsLevel = self::LOG_LEVEL_FUNCTION;
                $levelName = 'FUNCTION';
                break;
            case 'DEBUG':
            case self::LOG_LEVEL_DEBUG:
                $this->_logsLevel = self::LOG_LEVEL_DEBUG;
                $levelName = 'DEBUG';
                break;
            default:
                $this->_logsLevel = self::LOG_LEVEL_ERROR;
                $levelName = 'ERROR';
                $this->addLog('invalid logs level : '  . $level, self::LOG_LEVEL_ERROR, __METHOD__, '2e57f5d2');
        }

        $this->addLog('logsLevel=' . (string)$this->_logsLevel. ' (' . $levelName . ')', self::LOG_LEVEL_DEBUG, __METHOD__, '63efc8ea');
    }

    /**
     * Add message line to system logs
     *
     * @param string $message
     * @param int    $level Metrology::LOG_LEVEL_xxx
     * @param string $function
     * @param string $luid
     * @return void
     */
    public function addLog(string $message, int $level = self::LOG_LEVEL_ERROR, string $function = '', string $luid = '00000000'): void
    {
        if (!$this->_permitLogs)
            return;
        $this->_addLog($message, $level, $function, $luid);
    }

    private function _addLog(string $message, int $level = self::LOG_LEVEL_ERROR, string $function = '', string $luid = '00000000'): void
    {
        $levelName = 'normal';
        foreach (self::LOG_LEVEL_NAMES as $i => $l)
            if (($level / $i) >= 1 )
                $levelName = $l;

        if ($level <= $this->_logsLevel) {
            $logM = 'LogT=' . sprintf('%01.6f', (float)microtime(true) - $this->_timeStart) . ' LogL="' . $levelName . '(' . $level . ')" LogI="' . $luid . '" LogF="' . $function . '" LogM="' . $message . '"';

            if ($level == self::LOG_LEVEL_DEBUG)
                $logM = $logM . ' LogMem="' . memory_get_usage() . '"';

            syslog(LOG_INFO, $logM);
        }

        if ($this->_permitLogsOnDebugFile)
        {
            $logM = 'LogT=' . sprintf('%01.6f', (float)microtime(true) - $this->_timeStart) . ' LogL="' . $levelName . '(' . $level . ')" LogI="' . $luid . '" LogF="' . $function . '" LogM="' . $message . '"';
            if (file_exists(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . Metrology::DEFAULT_DEBUG_FILE))
                file_put_contents(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . Metrology::DEFAULT_DEBUG_FILE, $logM . "\n", FILE_APPEND);
        }
    }


    /**
     * Add line in memorized actions.
     *
     * @param string  $type : addlnk addobj addent delobj
     * @param string  $action
     * @param boolean $result
     */
    public function addAction(string $type, string $action, bool $result): void
    {
        if ($this->_actionCount >= self::DEFAULT_ACTION_STATE_SIZE)
            $this->getFirstAction();

        $this->_actionArray[$this->_actionCount]['type'] = $type;
        $this->_actionArray[$this->_actionCount]['action'] = $action;
        $this->_actionArray[$this->_actionCount]['result'] = $result;
        $this->_actionCount++;

        $this->addLog($type . ' ' . $action, self::LOG_LEVEL_DEBUG, __METHOD__, 'cbc2bc52');
    }

    public function flushActions(): void
    {
        $this->_actionCount = 0;
        $this->_actionArray = array();
    }

    public function getLastAction(): array
    {
        if ($this->_actionCount == 0)
            return array();

        $this->_actionCount--;
        $r = $this->_actionArray[$this->_actionCount];
        $this->_actionArray[$this->_actionCount] = null;
        return $r;
    }

    public function getFirstAction(): array
    {
        if ($this->_actionCount == 0)
            return array();

        $this->_actionCount--;
        $r = $this->_actionArray[0];
        for ($i = 0; $i < $this->_actionCount; $i++)
            $this->_actionArray[$i] = $this->_actionArray[$i + 1];
        return $r;
    }

    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#m">M / Métrologie</a>
            <ul>
                <li><a href="#mc">MC / Chronométrage</a></li>
                <li><a href="#ms">MS / Statistiques</a></li>
                <li><a href="#mj">MJ / Journalisation</a>
                    <ul>
                        <li><a href="#mjs">MJS / Journalisation Système</a></li>
                        <li><a href="#mjd">MJD / Debug</a></li>
                        <li><a href="#mjc">MJC / Liste de Codes</a></li>
                    </ul>
                </li>
            </ul>
        </li>

        <?php
    }

    static public function echoDocumentationCore(): void
    {
        ?>

        <?php Displays::docDispTitle(1, 'm', 'Métrologie'); ?>
        <p>Cette partie métrologie rassemble tout ce qui concerne les mesures de performances internes ainsi que la
            journalisation.</p>

        <?php Displays::docDispTitle(2, 'mc', 'Chronométrage'); ?>
        <p>Les mesures de temps sont indiquées avec chaque trace de journalisation :</p>
        <ul>
            <li>Marque temporelle absolue en début de trace (log).</li>
            <li>Marque temporelle relative dans le champ LogT avec en référence le début d'exécution du code.</li>
        </ul>
        <p>Des mesures de temps relatives internes sont écrites avec la toute dernière trace laissée par le bootstrap :</p>
        <ul>
            <li><code>tB</code> : Temps de chargement du boostrap après la bibliothèque PP.</li>
            <li><code>tL</code> : Temps de chargement du boostrap après la bibliothèque POO.</li>
            <li><code>tA</code> : Temps de chargement du boostrap après l'application.</li>
        </ul>
        <p>Ces mesures de temps internes permettent de faire des comparaisons de performances entre serveurs.</p>

        <?php Displays::docDispTitle(2, 'ms', 'Statistiques'); ?>
        <p>Les statistiques d'usage des objets et des liens sont alimentées par certaines fonctions. Les résultats sont
            affichés dans la journalisation avec la toute dernière trace laissée par le bootstrap.</p>
        <p>Les statistiques :</p>
        <ul>
            <li>Mémoire utilisée :
                <ul>
                    <li><code>Mp</code> : Maximum mémoire utilisée lors de l'exécution du code comparée au maximum
                        autorisé, en MBytes. Une valeur au-delà du maximum autorisé dans la configuration PHP (php.ini,
                        option <code>memory_limit</code>) entraîne un arrêt automatique du code.</li>
                </ul>
            </li>
            <li>Mesures de temps : voir <a href="#mc">MC</a></li>
            <li>Mesures d'utilisation :
                <ul>
                    <li><code>Lr</code> : Liens lus (PP+POO).</li>
                    <li><code>Lv</code> : Liens vérifiés (PP+POO).</li>
                    <li><code>Or</code> : Objets lus (PP+POO).</li>
                    <li><code>Ov</code> : Objets vérifiés (PP+POO).</li>
                    <li><code>LC</code> : Liens en cache.</li>
                    <li><code>OC</code> : Objets en cache.</li>
                    <li><code>EC</code> : Entités en cache.</li>
                    <li><code>GC</code> : Groupes en cache.</li>
                    <li><code>CC</code> : Conversations en cache.</li>
                </ul>
            </li>
        </ul>
        <p>Certaines valeurs sont indiquées PP+POO, c'est-à-dire la valeur retournée par la bibliothèque PP avant le +,
            et par la bibliothèque POO après le +.</p>
        <p>La bibliothèque PP ne gère pas de cache, les valeurs de cache concernent uniquement la bibliothèque POO.</p>

        <?php Displays::docDispTitle(2, 'mj', 'Journalisation'); ?>
        <?php Displays::docDispTitle(3, 'mjs', 'Journalisation Système'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'mjd', 'Debug'); ?>
        <p>Si l'option <b>permitLogsOnDebugFile</b> est activée, un fichier
            <i><?php echo nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . Metrology::DEFAULT_DEBUG_FILE; ?></i>
            est créé puis alimenté avec toutes les traces générées par le bootstrap et les applications indépendamment
            du niveau de journalisation demandé. Ce fichier est utilisé pour du dépannage uniquement. Et ce fichier est
            systématiquement supprimé à chaque exécution du code, au début, quelque soit l'état de l'option
            <b>permitLogsOnDebugFile</b>.</p>

        <?php Displays::docDispTitle(3, 'mjc', 'Liste de Codes'); ?>
        <?php Displays::docDispTitle(4, 'mjcg', 'Codes génériques'); ?>
        <ul>
            <li><code>100000XX</code> : Error. Code générique de traçage des interruptions du bootstrap avec XX le code associé.</li>
            <li><code>1111c0de</code> : Function. Code générique de traçage des appels des fonctions.</li>
        </ul>
        <?php Displays::docDispTitle(4, 'mjcc', 'Codes communs'); ?>
        <p>Liste non exhaustive de codes de journalisation :</p>
        <ul>
            <li><code>76941959</code> : Info. Démarrage du bootstrap.</li>
            <li><code>50615f80</code> : Info. Création du fichier de débug.</li>
            <li><code>41ba02a9</code> : Error. Erreur lors de l'initialisation de l'instance de l'application par le bootstrap.</li>
            <li><code>d121af4c</code> : Error. Erreur lors de l'initialisation de l'instance de traduction de l'application par le bootstrap.</li>
            <li><code>4bb6af65</code> : Error. Erreur lors de l'initialisation de l'instance d'affichage de l'application par le bootstrap.</li>
            <li><code>308b8a96</code> : Error. Erreur lors de l'initialisation de l'instance des actions de l'application par le bootstrap.</li>
            <li style="color: red; font-weight: bold">A compléter...</li>
        </ul>
        <?php Displays::docDispTitle(4, 'mjct', 'Codes ticketing'); ?>
        <ul>
            <li><code>d396f0a9</code> : Debug. Ticket vide.</li>
            <li><code>d516f0d4</code> : Error. Ticket déjà utilisé, tentative de rejeu de ticket.</li>
            <li><code>7083b07d</code> : Audit. Ticket valide.</li>
            <li><code>b221e760</code> : Error. Ticket inconnu.</li>
            <li><code>8957de86</code> : Debug. Valeur du nouveau ticket généré.</li>
            <li><code>d767b2ca</code> : Debug. Option permitActionWithoutTicket=true ticket always valid.</li>
            <li><code>80fa0154</code> : Error. Cannot get ticket from GET.</li>
            <li><code>65b5e0cc</code> : Error. Cannot get ticket from POST.</li>
        </ul>

        <?php
	}
}



// ========================================================================================
//   005_configuration.php
//   020250218163955
//   5a5ea2f46d66dd508484a939aa7460ed12803768e54675eb98c2a69563e4bad8.sha2.256

/**
 * Configuration class for the nebule library.
 * Do not serialize on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Configuration extends Functions
{
    const OPTIONS_LIST = array(
        'puppetmaster',
        'hostURL',
        'permitWrite',
        'permitWriteObject',
        'permitCreateObject',
        'permitSynchronizeObject',
        'permitProtectedObject',
        'permitWriteLink',
        'permitCreateLink',
        'permitSynchronizeLink',
        'permitUploadLink',
        'permitPublicUploadLink',
        'permitPublicUploadCodeAuthoritiesLink',
        'permitObfuscatedLink',
        'permitWriteEntity',
        'permitAuthenticateEntity',
        'permitPublicCreateEntity',
        'permitWriteGroup',
        'permitWriteConversation',
        'permitCurrency',
        'permitWriteCurrency',
        'permitCreateCurrency',
        'permitWriteTransaction',
        'permitObfuscatedTransaction',
        'permitSynchronizeApplication',
        'permitPublicSynchronizeApplication',
        'permitDeleteObjectOnUnknownHash',
        'permitCheckSignOnVerify',
        'permitCheckSignOnList',
        'permitCheckObjectHash',
        'permitListInvalidLinks',
        'permitHistoryLinksSign',
        'permitInstanceEntityAsAuthority',
        'permitDefaultEntityAsAuthority',
        'permitLocalSecondaryAuthorities',
        'permitRecoveryEntities',
        'permitRecoveryRemoveEntity',
        'permitInstanceEntityAsRecovery',
        'permitDefaultEntityAsRecovery',
        'permitAddLinkToSigner',
        'permitListOtherHash',
        'permitLocalisationStats',
        'permitFollowUpdates',
        'permitOnlineRescue',
        'permitLogs',
        'permitLogsOnDebugFile',
        'permitJavaScript',
        'permitApplicationModules',
        'permitApplicationModulesExternal',
        'permitApplicationModulesTranslate',
        'permitActionWithoutTicket',
        'codeBranch',
        'logsLevel',
        'modeRescue',
        'cryptoLibrary',
        'cryptoHashAlgorithm',
        'cryptoSymmetricAlgorithm',
        'cryptoAsymmetricAlgorithm',
        'socialLibrary',
        'ioLibrary',
        'ioReadMaxLinks',
        'ioReadMaxData',
        'ioReadMaxUpload',
        'ioTimeout',
        'displayUnsecureURL',
        'displayNameSize',
        'displayEmotions',
        'forceDisplayEntityOnTitle',
        'linkMaxFollowedUpdates',
        'linkMaxRL',
        'linkMaxRLUID',
        'linkMaxRS',
        'permitSessionOptions',
        'permitSessionBuffer',
        'permitBufferIO', //  TODO Need to be used on the library in side of permitSessionBuffer...
        'sessionBufferSize',
        'defaultCurrentEntity',
        'defaultApplication',
        'permitApplication1',
        'permitApplication2',
        'permitApplication3',
        'permitApplication4',
        'permitApplication5',
        'permitApplication6',
        'permitApplication7',
        'permitApplication8',
        'permitApplication9',
        'defaultObfuscateLinks',
        'defaultLinksVersion',
        'subordinationEntity',
    );

    const OPTIONS_CATEGORIES = array(
        'Global',
        'Objects',
        'Links',
        'Entities',
        'Groups',
        'Conversations',
        'Currencies',
        'Applications',
        'Logs',
        'Cryptography',
        'I/O',
        'Social',
        'Display',
    );

    const OPTIONS_CATEGORY = array(
        'puppetmaster' => 'Global',
        'hostURL' => 'Global',
        'permitWrite' => 'Global',
        'permitWriteObject' => 'Objects',
        'permitCreateObject' => 'Objects',
        'permitSynchronizeObject' => 'Objects',
        'permitProtectedObject' => 'Objects',
        'permitWriteLink' => 'Links',
        'permitCreateLink' => 'Links',
        'permitSynchronizeLink' => 'Links',
        'permitUploadLink' => 'Links',
        'permitPublicUploadLink' => 'Links',
        'permitPublicUploadCodeAuthoritiesLink' => 'Links',
        'permitObfuscatedLink' => 'Links',
        'permitWriteEntity' => 'Entities',
        'permitAuthenticateEntity' => 'Entities',
        'permitPublicCreateEntity' => 'Entities',
        'permitWriteGroup' => 'Groups',
        'permitWriteConversation' => 'Conversations',
        'permitCurrency' => 'Currencies',
        'permitWriteCurrency' => 'Currencies',
        'permitCreateCurrency' => 'Currencies',
        'permitWriteTransaction' => 'Currencies',
        'permitObfuscatedTransaction' => 'Currencies',
        'permitSynchronizeApplication' => 'Applications',
        'permitPublicSynchronizeApplication' => 'Applications',
        'permitDeleteObjectOnUnknownHash' => 'Objects',
        'permitCheckSignOnVerify' => 'Links',
        'permitCheckSignOnList' => 'Links',
        'permitCheckObjectHash' => 'Objects',
        'permitListInvalidLinks' => 'Links',
        'permitHistoryLinksSign' => 'Links',
        'permitInstanceEntityAsAuthority' => 'Entities',
        'permitDefaultEntityAsAuthority' => 'Entities',
        'permitLocalSecondaryAuthorities' => 'Entities',
        'permitRecoveryEntities' => 'Entities',
        'permitRecoveryRemoveEntity' => 'Entities',
        'permitInstanceEntityAsRecovery' => 'Entities',
        'permitDefaultEntityAsRecovery' => 'Entities',
        'permitAddLinkToSigner' => 'Links',
        'permitListOtherHash' => 'Links',
        'permitLocalisationStats' => 'Global',
        'permitFollowUpdates' => 'Links',
        'permitOnlineRescue' => 'Global',
        'permitLogs' => 'Logs',
        'permitLogsOnDebugFile' => 'Logs',
        'permitJavaScript' => 'Display',
        'permitApplicationModules' => 'Applications',
        'permitApplicationModulesExternal' => 'Applications',
        'permitApplicationModulesTranslate' => 'Applications',
        'permitActionWithoutTicket' => 'Global',
        'codeBranch' => 'Global',
        'logsLevel' => 'Logs',
        'modeRescue' => 'Global',
        'cryptoLibrary' => 'Cryptography',
        'cryptoHashAlgorithm' => 'Cryptography',
        'cryptoSymmetricAlgorithm' => 'Cryptography',
        'cryptoAsymmetricAlgorithm' => 'Cryptography',
        'socialLibrary' => 'Social',
        'ioLibrary' => 'I/O',
        'ioReadMaxLinks' => 'I/O',
        'ioReadMaxData' => 'I/O',
        'ioReadMaxUpload' => 'I/O',
        'ioTimeout' => 'I/O',
        'displayUnsecureURL' => 'Display',
        'displayNameSize' => 'Display',
        'displayEmotions' => 'Display',
        'forceDisplayEntityOnTitle' => 'Display',
        'linkMaxFollowedUpdates' => 'Links',
        'linkMaxRL' => 'Links',
        'linkMaxRLUID' => 'Links',
        'linkMaxRS' => 'Links',
        'permitSessionOptions' => 'I/O',
        'permitSessionBuffer' => 'I/O',
        'permitBufferIO' => 'I/O',
        'sessionBufferSize' => 'I/O',
        'defaultCurrentEntity' => 'Entities',
        'defaultApplication' => 'Applications',
        'permitApplication1' => 'Applications',
        'permitApplication2' => 'Applications',
        'permitApplication3' => 'Applications',
        'permitApplication4' => 'Applications',
        'permitApplication5' => 'Applications',
        'permitApplication6' => 'Applications',
        'permitApplication7' => 'Applications',
        'permitApplication8' => 'Applications',
        'permitApplication9' => 'Applications',
        'defaultObfuscateLinks' => 'Links',
        'defaultLinksVersion' => 'Links',
        'subordinationEntity' => 'Global',
    );

    const OPTIONS_TYPE = array(
        'puppetmaster' => 'string',
        'hostURL' => 'string',
        'permitWrite' => 'boolean',
        'permitWriteObject' => 'boolean',
        'permitCreateObject' => 'boolean',
        'permitSynchronizeObject' => 'boolean',
        'permitProtectedObject' => 'boolean',
        'permitWriteLink' => 'boolean',
        'permitCreateLink' => 'boolean',
        'permitSynchronizeLink' => 'boolean',
        'permitUploadLink' => 'boolean',
        'permitPublicUploadLink' => 'boolean',
        'permitPublicUploadCodeAuthoritiesLink' => 'boolean',
        'permitObfuscatedLink' => 'boolean',
        'permitWriteEntity' => 'boolean',
        'permitAuthenticateEntity' => 'boolean',
        'permitPublicCreateEntity' => 'boolean',
        'permitWriteGroup' => 'boolean',
        'permitWriteConversation' => 'boolean',
        'permitCurrency' => 'boolean',
        'permitWriteCurrency' => 'boolean',
        'permitCreateCurrency' => 'boolean',
        'permitWriteTransaction' => 'boolean',
        'permitObfuscatedTransaction' => 'boolean',
        'permitSynchronizeApplication' => 'boolean',
        'permitPublicSynchronizeApplication' => 'boolean',
        'permitDeleteObjectOnUnknownHash' => 'boolean',
        'permitCheckSignOnVerify' => 'boolean',
        'permitCheckSignOnList' => 'boolean',
        'permitCheckObjectHash' => 'boolean',
        'permitListInvalidLinks' => 'boolean',
        'permitHistoryLinksSign' => 'boolean',
        'permitInstanceEntityAsAuthority' => 'boolean',
        'permitDefaultEntityAsAuthority' => 'boolean',
        'permitLocalSecondaryAuthorities' => 'boolean',
        'permitRecoveryEntities' => 'boolean',
        'permitRecoveryRemoveEntity' => 'boolean',
        'permitInstanceEntityAsRecovery' => 'boolean',
        'permitDefaultEntityAsRecovery' => 'boolean',
        'permitAddLinkToSigner' => 'boolean',
        'permitListOtherHash' => 'boolean',
        'permitLocalisationStats' => 'boolean',
        'permitFollowUpdates' => 'boolean',
        'permitOnlineRescue' => 'boolean',
        'permitLogs' => 'boolean',
        'permitLogsOnDebugFile' => 'boolean',
        'permitJavaScript' => 'boolean',
        'permitApplicationModules' => 'boolean',
        'permitApplicationModulesExternal' => 'boolean',
        'permitApplicationModulesTranslate' => 'boolean',
        'permitActionWithoutTicket' => 'boolean',
        'codeBranch' => 'string',
        'logsLevel' => 'string',
        'modeRescue' => 'boolean',
        'cryptoLibrary' => 'string',
        'cryptoHashAlgorithm' => 'string',
        'cryptoSymmetricAlgorithm' => 'string',
        'cryptoAsymmetricAlgorithm' => 'string',
        'socialLibrary' => 'string',
        'ioLibrary' => 'string',
        'ioReadMaxLinks' => 'integer',
        'ioReadMaxData' => 'integer',
        'ioReadMaxUpload' => 'integer',
        'ioTimeout' => 'integer',
        'displayUnsecureURL' => 'boolean',
        'displayNameSize' => 'integer',
        'displayEmotions' => 'boolean',
        'forceDisplayEntityOnTitle' => 'boolean',
        'linkMaxFollowedUpdates' => 'integer',
        'linkMaxRL' => 'integer',
        'linkMaxRLUID' => 'integer',
        'linkMaxRS' => 'integer',
        'permitSessionOptions' => 'boolean',
        'permitSessionBuffer' => 'boolean',
        'permitBufferIO' => 'boolean',
        'sessionBufferSize' => 'integer',
        'defaultCurrentEntity' => 'string',
        'defaultApplication' => 'string',
        'permitApplication1' => 'boolean',
        'permitApplication2' => 'boolean',
        'permitApplication3' => 'boolean',
        'permitApplication4' => 'boolean',
        'permitApplication5' => 'boolean',
        'permitApplication6' => 'boolean',
        'permitApplication7' => 'boolean',
        'permitApplication8' => 'boolean',
        'permitApplication9' => 'boolean',
        'defaultObfuscateLinks' => 'boolean',
        'defaultLinksVersion' => 'string',
        'subordinationEntity' => 'string',
    );

    const OPTIONS_WRITABLE = array(
        'puppetmaster' => false,
        'hostURL' => true,
        'permitWrite' => false,
        'permitWriteObject' => true,
        'permitCreateObject' => true,
        'permitSynchronizeObject' => true,
        'permitProtectedObject' => true,
        'permitWriteLink' => true,
        'permitCreateLink' => true,
        'permitSynchronizeLink' => true,
        'permitUploadLink' => true,
        'permitPublicUploadLink' => true,
        'permitPublicUploadCodeAuthoritiesLink' => true,
        'permitObfuscatedLink' => true,
        'permitWriteEntity' => true,
        'permitAuthenticateEntity' => true,
        'permitPublicCreateEntity' => true,
        'permitWriteGroup' => true,
        'permitWriteConversation' => true,
        'permitCurrency' => true,
        'permitWriteCurrency' => true,
        'permitCreateCurrency' => true,
        'permitWriteTransaction' => true,
        'permitObfuscatedTransaction' => true,
        'permitSynchronizeApplication' => true,
        'permitPublicSynchronizeApplication' => true,
        'permitDeleteObjectOnUnknownHash' => false,
        'permitCheckSignOnVerify' => false,
        'permitCheckSignOnList' => true,
        'permitCheckObjectHash' => false,
        'permitListInvalidLinks' => false,
        'permitHistoryLinksSign' => true,
        'permitInstanceEntityAsAuthority' => false,
        'permitDefaultEntityAsAuthority' => false,
        'permitLocalSecondaryAuthorities' => false,
        'permitRecoveryEntities' => false,
        'permitRecoveryRemoveEntity' => false,
        'permitInstanceEntityAsRecovery' => false,
        'permitDefaultEntityAsRecovery' => false,
        'permitAddLinkToSigner' => true,
        'permitListOtherHash' => true,
        'permitLocalisationStats' => true,
        'permitFollowUpdates' => true,
        'permitOnlineRescue' => true,
        'permitLogs' => false,
        'permitLogsOnDebugFile' => false,
        'permitJavaScript' => false,
        'permitApplicationModules' => false,
        'permitApplicationModulesExternal' => false,
        'permitApplicationModulesTranslate' => false,
        'permitActionWithoutTicket' => false,
        'codeBranch' => false,
        'logsLevel' => false,
        'modeRescue' => false,
        'cryptoLibrary' => true,
        'cryptoHashAlgorithm' => true,
        'cryptoSymmetricAlgorithm' => true,
        'cryptoAsymmetricAlgorithm' => true,
        'socialLibrary' => true,
        'ioLibrary' => true,
        'ioReadMaxLinks' => true,
        'ioReadMaxData' => true,
        'ioReadMaxUpload' => true,
        'ioTimeout' => true,
        'displayUnsecureURL' => false,
        'displayNameSize' => true,
        'displayEmotions' => true,
        'forceDisplayEntityOnTitle' => true,
        'linkMaxFollowedUpdates' => true,
        'linkMaxRL' => false,
        'linkMaxRLUID' => false,
        'linkMaxRS' => false,
        'permitSessionOptions' => true,
        'permitSessionBuffer' => true,
        'permitBufferIO' => true,
        'sessionBufferSize' => true,
        'defaultCurrentEntity' => true,
        'defaultApplication' => true,
        'permitApplication1' => true,
        'permitApplication2' => true,
        'permitApplication3' => true,
        'permitApplication4' => true,
        'permitApplication5' => true,
        'permitApplication6' => true,
        'permitApplication7' => true,
        'permitApplication8' => true,
        'permitApplication9' => true,
        'defaultObfuscateLinks' => true,
        'defaultLinksVersion' => true,
        'subordinationEntity' => false,
    );

    const OPTIONS_DEFAULT_VALUE = array(
        'puppetmaster' => '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256',
        'hostURL' => 'localhost',
        'permitWrite' => 'true',
        'permitWriteObject' => 'true',
        'permitCreateObject' => 'true',
        'permitSynchronizeObject' => 'false',
        'permitProtectedObject' => 'true',
        'permitWriteLink' => 'true',
        'permitCreateLink' => 'true',
        'permitSynchronizeLink' => 'false',
        'permitUploadLink' => 'false',
        'permitPublicUploadLink' => 'false',
        'permitPublicUploadCodeAuthoritiesLink' => 'true',
        'permitObfuscatedLink' => 'true',
        'permitWriteEntity' => 'true',
        'permitAuthenticateEntity' => 'true',
        'permitPublicCreateEntity' => 'false',
        'permitWriteGroup' => 'true',
        'permitWriteConversation' => 'true',
        'permitCurrency' => 'true',
        'permitWriteCurrency' => 'true',
        'permitCreateCurrency' => 'false',
        'permitWriteTransaction' => 'true',
        'permitObfuscatedTransaction' => 'false',
        'permitSynchronizeApplication' => 'false',
        'permitPublicSynchronizeApplication' => 'false',
        'permitDeleteObjectOnUnknownHash' => 'true',
        'permitCheckSignOnVerify' => 'true',
        'permitCheckSignOnList' => 'true',
        'permitCheckObjectHash' => 'true',
        'permitListInvalidLinks' => 'false',
        'permitHistoryLinksSign' => 'false',
        'permitInstanceEntityAsAuthority' => 'false',
        'permitDefaultEntityAsAuthority' => 'false',
        'permitLocalSecondaryAuthorities' => 'true',
        'permitRecoveryEntities' => 'false',
        'permitRecoveryRemoveEntity' => 'false',
        'permitInstanceEntityAsRecovery' => 'false',
        'permitDefaultEntityAsRecovery' => 'false',
        'permitAddLinkToSigner' => 'true',
        'permitListOtherHash' => 'false',
        'permitLocalisationStats' => 'true',
        'permitFollowUpdates' => 'true',
        'permitOnlineRescue' => 'false',
        'permitLogs' => 'true',
        'permitLogsOnDebugFile' => 'false',
        'permitJavaScript' => 'true',
        'permitApplicationModules' => 'true',
        'permitApplicationModulesExternal' => 'false',
        'permitApplicationModulesTranslate' => 'true',
        'permitActionWithoutTicket' => 'false',
        'codeBranch' => 'develop',
        'logsLevel' => 'NORMAL',
        'modeRescue' => 'false',
        'cryptoLibrary' => 'Openssl',
        'cryptoHashAlgorithm' => 'sha2.256',
        'cryptoSymmetricAlgorithm' => 'aes.256.ctr',
        'cryptoAsymmetricAlgorithm' => 'rsa.2048',
        'socialLibrary' => 'authority',
        'ioLibrary' => 'Disk',
        'ioReadMaxLinks' => '2000',
        'ioReadMaxData' => '10000',
        'ioReadMaxUpload' => '2000000',
        'ioTimeout' => '1',
        'displayUnsecureURL' => 'true',
        'displayNameSize' => '128',
        'displayEmotions' => 'true',
        'forceDisplayEntityOnTitle' => 'false',
        'linkMaxFollowedUpdates' => '100',
        'linkMaxRL' => '1',
        'linkMaxRLUID' => '4',
        'linkMaxRS' => '1',
        'permitSessionOptions' => 'true',
        'permitSessionBuffer' => 'true',
        'permitBufferIO' => 'true',
        'sessionBufferSize' => '1000',
        'defaultCurrentEntity' => '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256',
        'defaultApplication' => '1',
        'permitApplication1' => 'true',
        'permitApplication2' => 'true',
        'permitApplication3' => 'true',
        'permitApplication4' => 'false',
        'permitApplication5' => 'false',
        'permitApplication6' => 'false',
        'permitApplication7' => 'false',
        'permitApplication8' => 'false',
        'permitApplication9' => 'false',
        'defaultObfuscateLinks' => 'false',
        'defaultLinksVersion' => '2:0',
        'subordinationEntity' => '',
    );

    const OPTIONS_CRITICALITY = array(
        'puppetmaster' => 'critical',
        'hostURL' => 'useful',
        'permitWrite' => 'useful',
        'permitWriteObject' => 'useful',
        'permitCreateObject' => 'useful',
        'permitSynchronizeObject' => 'useful',
        'permitProtectedObject' => 'useful',
        'permitWriteLink' => 'useful',
        'permitCreateLink' => 'useful',
        'permitSynchronizeLink' => 'useful',
        'permitUploadLink' => 'careful',
        'permitPublicUploadLink' => 'careful',
        'permitPublicUploadCodeAuthoritiesLink' => 'useful',
        'permitObfuscatedLink' => 'useful',
        'permitWriteEntity' => 'useful',
        'permitAuthenticateEntity' => 'useful',
        'permitPublicCreateEntity' => 'critical',
        'permitWriteGroup' => 'useful',
        'permitWriteConversation' => 'useful',
        'permitCurrency' => 'useful',
        'permitWriteCurrency' => 'useful',
        'permitCreateCurrency' => 'useful',
        'permitWriteTransaction' => 'useful',
        'permitObfuscatedTransaction' => 'careful',
        'permitSynchronizeApplication' => 'careful',
        'permitPublicSynchronizeApplication' => 'careful',
        'permitDeleteObjectOnUnknownHash' => 'critical',
        'permitCheckSignOnVerify' => 'critical',
        'permitCheckSignOnList' => 'critical',
        'permitCheckObjectHash' => 'critical',
        'permitListInvalidLinks' => 'critical',
        'permitHistoryLinksSign' => 'useful',
        'permitInstanceEntityAsAuthority' => 'careful',
        'permitDefaultEntityAsAuthority' => 'careful',
        'permitLocalSecondaryAuthorities' => 'careful',
        'permitRecoveryEntities' => 'critical',
        'permitRecoveryRemoveEntity' => 'careful',
        'permitInstanceEntityAsRecovery' => 'critical',
        'permitDefaultEntityAsRecovery' => 'critical',
        'permitAddLinkToSigner' => 'useful',
        'permitListOtherHash' => 'useful',
        'permitLocalisationStats' => 'useful',
        'permitFollowUpdates' => 'useful',
        'permitOnlineRescue' => 'careful',
        'permitLogs' => 'useful',
        'permitLogsOnDebugFile' => 'careful',
        'permitJavaScript' => 'careful',
        'permitApplicationModules' => 'careful',
        'permitApplicationModulesExternal' => 'critical',
        'permitApplicationModulesTranslate' => 'careful',
        'permitActionWithoutTicket' => 'critical',
        'codeBranch' => 'careful',
        'logsLevel' => 'useful',
        'modeRescue' => 'critical',
        'cryptoLibrary' => 'careful',
        'cryptoHashAlgorithm' => 'careful',
        'cryptoSymmetricAlgorithm' => 'careful',
        'cryptoAsymmetricAlgorithm' => 'careful',
        'socialLibrary' => 'careful',
        'ioLibrary' => 'careful',
        'ioReadMaxLinks' => 'useful',
        'ioReadMaxData' => 'useful',
        'ioReadMaxUpload' => 'useful',
        'ioTimeout' => 'useful',
        'displayUnsecureURL' => 'critical',
        'displayNameSize' => 'useful',
        'displayEmotions' => 'useful',
        'forceDisplayEntityOnTitle' => 'useful',
        'linkMaxFollowedUpdates' => 'useful',
        'linkMaxRL' => 'careful',
        'linkMaxRLUID' => 'careful',
        'linkMaxRS' => 'careful',
        'permitSessionOptions' => 'careful',
        'permitSessionBuffer' => 'careful',
        'permitBufferIO' => 'careful',
        'sessionBufferSize' => 'useful',
        'defaultCurrentEntity' => 'useful',
        'defaultApplication' => 'useful',
        'permitApplication1' => 'useful',
        'permitApplication2' => 'useful',
        'permitApplication3' => 'useful',
        'permitApplication4' => 'critical',
        'permitApplication5' => 'critical',
        'permitApplication6' => 'critical',
        'permitApplication7' => 'critical',
        'permitApplication8' => 'critical',
        'permitApplication9' => 'critical',
        'defaultObfuscateLinks' => 'useful',
        'defaultLinksVersion' => 'useful',
        'subordinationEntity' => 'critical',
    );

    const OPTIONS_DESCRIPTION = array(
        'puppetmaster' => 'The master of all. the authority of all globals authorities.',
        'hostURL' => "The URL, domain name, of this server. This is use by others servers and others entities to find this server and it's local entities.",
        'permitWrite' => 'The big switch to write protect all the instance on this server. This switch is not an object but is on the options file.',
        'permitWriteObject' => 'The switch to permit objects writing.',
        'permitCreateObject' => 'The switch to permit creation of new objects locally.',
        'permitSynchronizeObject' => 'The switch to permit to synchronize (update) objects from other localisations.',
        'permitProtectedObject' => 'The switch to permit read/write protected objects. On false, generation of liens k for protected objects is disabled and all existing/downloaded links for protected objects are assumed as invalid and dropped.',
        'permitWriteLink' => 'The switch to permit links writing.',
        'permitCreateLink' => 'The switch to permit creation of new links locally.',
        'permitSynchronizeLink' => 'The switch to permit to synchronize links of objects from other localisations.',
        'permitUploadLink' => 'The switch to permit ask creation and sign of new links uploaded within an URL.',
        'permitPublicUploadLink' => 'The switch to permit ask upload signed links (from known entities) within an URL.',
        'permitPublicUploadCodeAuthoritiesLink' => 'The switch to permit ask upload signed links by the code master within an URL.',
        'permitObfuscatedLink' => 'The switch to permit read/write obfuscated links. On false, generation of obfuscated liens c is disabled and all existing/downloaded obfuscated links are assumed as invalid and dropped.',
        'permitWriteEntity' => 'The switch to permit entities writing.',
        'permitAuthenticateEntity' => 'The switch to permit entities to authenticate on this server instance.',
        'permitPublicCreateEntity' => 'The switch to permit create new entity by anyone.',
        'permitWriteGroup' => 'The switch to permit groups writing.',
        'permitWriteConversation' => 'The switch to permit conversations writing.',
        'permitCurrency' => 'The switch to permit use of currencies.',
        'permitWriteCurrency' => 'The switch to permit currencies writing.',
        'permitCreateCurrency' => 'The switch to permit currencies creation.',
        'permitWriteTransaction' => 'The switch to permit transactions writing.',
        'permitObfuscatedTransaction' => 'The switch to permit transactions on obfuscated links.',
        'permitSynchronizeApplication' => 'The switch to permit to synchronize (update) applications from other localisations.',
        'permitPublicSynchronizeApplication' => 'The switch to permit to synchronize (update) applications by anyone from other localisations.',
        'permitDeleteObjectOnUnknownHash' => 'Permit erasing object if not valid hash type can be found.',
        'permitCheckSignOnVerify' => 'Todo description...',
        'permitCheckSignOnList' => 'Todo description...',
        'permitCheckObjectHash' => 'Todo description...',
        'permitListInvalidLinks' => 'Todo description...',
        'permitHistoryLinksSign' => 'Todo description...',
        'permitInstanceEntityAsAuthority' => 'Declare instance entity of this server as local authority.',
        'permitDefaultEntityAsAuthority' => 'Declare default entity on this server as local authority.',
        'permitLocalSecondaryAuthorities' => 'Todo description...',
        'permitRecoveryEntities' => 'Activate the recovery process. Local recovery entities are listed and new protection of objects are automatically shared with recovery entities.',
        'permitRecoveryRemoveEntity' => 'An entity can remove shared protection to recovery entity. By default, it is not permitted.',
        'permitInstanceEntityAsRecovery' => 'Declare instance entity of this server as recovery entity.',
        'permitDefaultEntityAsRecovery' => 'Declare default entity on this server as recovery entity.',
        'permitActionWithoutTicket' => 'An action do not need valid ticket.',
        'permitAddLinkToSigner' => 'Todo description...',
        'permitListOtherHash' => 'Todo description...',
        'permitLocalisationStats' => 'Todo description...',
        'permitFollowUpdates' => 'Todo description...',
        'permitOnlineRescue' => 'Todo description...',
        'permitLogs' => 'Activate more logs (syslog) on internal process.',
        'permitLogsOnDebugFile' => 'Activate debug logs to logfile o/log.',
        'permitJavaScript' => 'Activate by default JavaScript (JS) on web pages.',
        'permitApplicationModules' => 'Permit any application to use internal modules and/or external modules (with permitApplicationModulesTranslate).',
        'permitApplicationModulesExternal' => 'Permit any application to use external modules (need permitApplicationModules).',
        'permitApplicationModulesTranslate' => 'Permit any application to use external translate modules (limited) (need permitApplicationModules).',
        'codeBranch' => 'Level quality of used code.',
        'logsLevel' => 'Select verbosity of logs. Select on NORMAL, ERROR, FUNCTION and DEBUG.',
        'modeRescue' => 'Activate the rescue mode. Follow only links from globals authorities for applications detection.',
        'cryptoLibrary' => 'Define the default cryptographic library used.',
        'cryptoHashAlgorithm' => 'Define the default cryptographic hash algorithm used.',
        'cryptoSymmetricAlgorithm' => 'Define the default cryptographic symmetric algorithm used.',
        'cryptoAsymmetricAlgorithm' => 'Define the default cryptographic asymmetric algorithm used.',
        'socialLibrary' => "Default social understanding of link's signers.",
        'ioLibrary' => 'Default storage type for I/O operations.',
        'ioReadMaxLinks' => 'Maximum number of links readable in one time for one object.',
        'ioReadMaxData' => 'Maximum quantity of bytes readable in one time from one object file content.',
        'ioReadMaxUpload' => 'Maximum file size on upload. Overload default value upload_max_filesize on php.ini file.',
        'ioTimeout' => 'Timeout for I/O operations with distant storage.',
        'displayUnsecureURL' => 'Display a warning message if the connexion link is not protected (https : HTTP overs TLS).',
        'displayNameSize' => 'The maximum displayable size of a name of objects.',
        'displayEmotions' => 'Display all emotions when asked by applications, or not.',
        'forceDisplayEntityOnTitle' => 'Force display of current selected entity on application even if is the same of current entity used on library.',
        'linkMaxFollowedUpdates' => 'Todo description...',
        'linkMaxRL' => 'Maximum links that can be read on the registry RL. If more, link is marked to have invalid structure.',
        'linkMaxRLUID' => 'Maximum UIDs of links that can be read on the registry RL. If more, link is marked to have invalid structure.',
        'linkMaxRS' => 'Maximum signes that can be read on the registry RS. If more, ignored.',
        'permitSessionOptions' => 'Todo description...',
        'permitSessionBuffer' => 'Todo description...',
        'permitBufferIO' => 'Todo description...',
        'sessionBufferSize' => 'Todo description...',
        'defaultCurrentEntity' => 'Todo description...',
        'defaultApplication' => 'Todo description...',
        'permitApplication1' => 'The switch to permit the use of application 1 to select application.',
        'permitApplication2' => 'The switch to permit the use of application 2 to authenticate with local entity.',
        'permitApplication3' => 'The switch to permit the use of application 3 for documentation.',
        'permitApplication4' => 'The switch to permit the use of application 4 to shortly display blocklink.',
        'permitApplication5' => 'The switch to permit the use of application 5, not implemented.',
        'permitApplication6' => 'The switch to permit the use of application 6, not implemented.',
        'permitApplication7' => 'The switch to permit the use of application 7, not implemented.',
        'permitApplication8' => 'The switch to permit the use of application 8, not implemented.',
        'permitApplication9' => 'The switch to permit the use of application 9 for debug purposes.',
        'defaultObfuscateLinks' => 'Todo description...',
        'defaultLinksVersion' => 'Define the version of new generated links.',
        'subordinationEntity' => 'Define the external entity which can modify writeable options on this server instance.',
    );

    private bool $_overwriteOptionCacheLock = false;
    private bool $_optionsByLinksIsInUse = false;
    private array $_optionCache = array();
    private bool $_permitOptionsByLinks = false;



    /*protected function _initialisation(): void
    {
        $this->_metrologyInstance->addLog('instancing class Configuration', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'fbaec5ee');
    }*/

    public static function getListOptionsName(): array
    {
        return self::OPTIONS_LIST;
    }

    public static function getListCategoriesOptions(): array
    {
        return self::OPTIONS_CATEGORIES;
    }

    public static function getListOptionsCategory(): array
    {
        return self::OPTIONS_CATEGORY;
    }

    public static function getListOptionsType(): array
    {
        return self::OPTIONS_TYPE;
    }

    public static function getListOptionsWritable(): array
    {
        return self::OPTIONS_WRITABLE;
    }

    public static function getListOptionsDefaultValue(): array
    {
        return self::OPTIONS_DEFAULT_VALUE;
    }

    public static function getListOptionsCriticality(): array
    {
        return self::OPTIONS_CRITICALITY;
    }

    public static function getListOptionsDescription(): array
    {
        return self::OPTIONS_DESCRIPTION;
    }

    /**
     * Extrait les options nebule.
     * Retourne :
     *  - le contenu de l'option dans l'environnement ;
     *  - ou le contenu de l'option dans les liens ;
     *  - ou le contenu de l'option par défaut ;
     *  - ou null.
     *
     * La valeur trouvée dans l'environnement est prioritaire.
     * C'est la façon de forcer une option.
     *
     * @param string $name
     * @return string|bool|int
     */
    public function getOptionUntyped(string $name): bool|int|string // TODO suppress untyped vars on all the class Configuration.
    {
        return self::_changeTypeValueFromString($name, $this->_getOption($name));
    }

    /**
     * @param string $name
     * @return string
     */
    public function getOptionAsString(string $name): string
    {
        return $this->_getOption($name);
    }

    /**
     * @param string $name
     * @return bool
     */
    public function getOptionAsBoolean(string $name): bool
    {
        if (self::OPTIONS_TYPE[$name] != 'boolean') {
            $this->_metrologyInstance->addLog('get option ' . $name . ' as bool but not bool', Metrology::LOG_LEVEL_ERROR, __METHOD__, '1adaf6d4');
            return false;
        }
        if ($this->_getOption($name) == 'true')
            return true;
        else
            return false;
    }

    /**
     * @param string $name
     * @return int
     */
    public function getOptionAsInteger(string $name): int
    {
        if (self::OPTIONS_TYPE[$name] != 'integer') {
            $this->_metrologyInstance->addLog('get option ' . $name . ' as int but not int', Metrology::LOG_LEVEL_ERROR, __METHOD__, '1adaf6d4');
            return 0;
        }
        return (int)$this->_getOption($name);
    }

    /**
     * Get content of an option as a string.
     * An unknown option, if resolve, return a value too.
     *
     * @param string $name
     * @return string
     */
    private function _getOption(string $name): string
    {
        if ($name == '')
            return '';

        if (is_a($this->_metrologyInstance, '\Nebule\Library\Metrology'))
            $this->_metrologyInstance->addLog('get option ' . $name, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '56a98331');

        if (! isset(self::OPTIONS_TYPE[$name]))
            $this->_metrologyInstance->addLog('ask unknown option "' . $name . '"', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'cbf78f11');

        // Read on cache.
        if (isset($this->_optionCache[$name]))
            return $this->_optionCache[$name];

        // Read from config file.
        $result = $this->_getOptionFromEnvironmentStatic($name);

        // If empty, read from links.
        if ($result == ''
            && isset(self::OPTIONS_WRITABLE[$name])
            && self::OPTIONS_WRITABLE[$name]
        )
            $result = $this->_getOptionFromLinks($name);

        // If empty, read default value.
        if ($result == ''
            && isset(self::OPTIONS_DEFAULT_VALUE[$name])
        ) {
            $result = self::OPTIONS_DEFAULT_VALUE[$name];
            if (is_a($this->_metrologyInstance, '\Nebule\Library\Metrology')) {
                $this->_metrologyInstance->addLog('get default value for option ' . $name, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '3e39271b');
            }
        }

        if (is_a($this->_metrologyInstance, '\Nebule\Library\Metrology'))
            $this->_metrologyInstance->addLog('return option ' . $name . ' = ' . (string)$result, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'd2fd4284');

        // Write on cache.
        if ($result != ''
            && !$this->_overwriteOptionCacheLock
        )
            $this->_optionCache[$name] = $result;

        return $result;
    }

    /**
     * Donne la liste des valeurs par défaut des options disponibles.
     *
     * @param string $name
     * @return string|bool|int|null
     */
    public static function getOptionDefaultValue(string $name): bool|int|string|null
    {
        return self::_changeTypeValueFromString($name, self::OPTIONS_DEFAULT_VALUE[$name]);
    }

    /**
     * @param string $name
     * @return string|bool|int|null
     */
    static public function getOptionFromEnvironmentUntypedStatic(string $name): bool|int|string|null
    {
        return self::_changeTypeValueFromString($name, self::_getOptionFromEnvironmentStatic($name));
    }

    /**
     * @param string $name
     * @return string|bool|int|null
     */
    public function getOptionFromEnvironmentUntyped(string $name): bool|int|string|null
    {
        $result = self::_changeTypeValueFromString($name, self::_getOptionFromEnvironmentStatic($name));

        if (is_a($this->_metrologyInstance, '\Nebule\Library\Metrology'))
            $this->_metrologyInstance->addLog('return option env = ' . (string)$result, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '52ac2506');

        return $result;
    }

    /**
     * @param string $name
     * @return string
     */
    public function getOptionFromEnvironmentAsString(string $name): string
    {
        return self::_getOptionFromEnvironmentStatic($name);
    }

    /**
     * @param string $name
     * @return string
     */
    static public function getOptionFromEnvironmentAsStringStatic(string $name): string
    {
        return self::_getOptionFromEnvironmentStatic($name);
    }

    /**
     * @param string $name
     * @return boolean
     */
    public function getOptionFromEnvironmentAsBoolean(string $name): bool
    {
        return self::getOptionFromEnvironmentAsBooleanStatic($name);
    }

    /**
     * @param string $name
     * @return boolean
     */
    static public function getOptionFromEnvironmentAsBooleanStatic(string $name): bool
    {
        if (self::_getOptionFromEnvironmentStatic($name) == 'true')
            return true;
        else
            return false;
    }

    /**
     * @param string $name
     * @return integer
     */
    public function getOptionFromEnvironmentAsInteger(string $name): int
    {
        return (int)self::_getOptionFromEnvironmentStatic($name);
    }

    /**
     * @param string $name
     * @return integer
     */
    static public function getOptionFromEnvironmentAsIntegerStatic(string $name): int
    {
        return (int)self::_getOptionFromEnvironmentStatic($name);
    }

    /**
     * Read option from config file.
     * @param string $name
     * @return string
     */
    static private function _getOptionFromEnvironmentStatic(string $name): string
    {
        if ($name == '' )
            return '';

        if (file_exists(nebule::NEBULE_ENVIRONMENT_FILE)) {
            $file = file(nebule::NEBULE_ENVIRONMENT_FILE, FILE_SKIP_EMPTY_LINES | FILE_IGNORE_NEW_LINES);
            foreach ($file as $line) {
                $l = trim($line);

                if ($l == '' || str_starts_with($l, '#'))
                    continue;

                $nameOnFile = trim((string)filter_var(strtok($l, '='), FILTER_SANITIZE_STRING));
                $value = trim((string)filter_var(strtok('='), FILTER_SANITIZE_STRING));
                if ($nameOnFile == $name)
                    return $value;
            }
        }
        return '';
    }

    /**
     * Transcode option's value from a string.
     *
     * @param string $name
     * @param string $value
     * @return string|bool|int
     */
    static private function _changeTypeValueFromString(string $name, string $value = ''): bool|int|string
    {
        if (!isset(self::OPTIONS_TYPE[$name]))
            return $value;
        switch (self::OPTIONS_TYPE[$name]) {
            case 'string' :
                return trim($value);
            case 'boolean' :
                if ($value == 'true')
                    return true;
                elseif ($value == 'false')
                    return false;
                else
                    return self::OPTIONS_DEFAULT_VALUE[$name];
            case 'integer' :
                return (int)$value;
            default :
                return $value;
        }
    }

    /**
     * Transcode option's value to a string.
     *
     * @param string          $name
     * @param bool|int|string $value
     * @return string
     */
    private function _changeTypeValueToString(string $name, bool|int|string $value): string
    {
        if (!isset(self::OPTIONS_TYPE[$name]) )
            return '';

        switch (self::OPTIONS_TYPE[$name]) {
            case 'string' :
                return $value;
            case 'boolean' :
                if ($value === true)
                    return 'true';
                else
                    return 'false';
            case 'integer' :
                return (string)$value;
            default :
                return '';
        }
    }

    /**
     * Extrait les options depuis les liens.
     * Retourne :
     *  - une chaine de caractères avec le contenu de l'option _ou_ un nombre _ou_ un booléen ;
     *  - ou null si rien n'est trouvé.
     *
     * @param string $name
     * @return string|bool|int|null
     */
    public function getOptionFromLinksUntyped(string $name): bool|int|string|null
    {
        return $this->_changeTypeValueFromString($name, $this->_getOptionFromLinks($name));
    }

    /**
     * Extrait les options depuis les liens.
     * Retourne :
     *  - une chaine de caractères avec le contenu de l'option ;
     *  - ou null si rien n'est trouvé.
     *
     * @param string $name
     * @return string|null
     */
    public function getOptionFromLinksAsString(string $name): ?string
    {
        return $this->_getOptionFromLinks($name);
    }

    /**
     * Extrait les options depuis les liens.
     * Retourne :
     *  - un booléen avec le contenu de l'option ;
     *  - ou false si rien n'est trouvé.
     *
     * @param string $name
     * @return boolean
     */
    public function getOptionFromLinksAsBoolean(string $name): bool
    {
        if ($this->_getOptionFromLinks($name) == 'true')
            return true;
        else
            return false;
    }

    /**
     * Extrait les options depuis les liens.
     * Retourne :
     *  - un nombre avec le contenu de l'option ;
     *  - ou zéro si rien n'est trouvé.
     *
     * @param string $name
     * @return integer
     */
    public function getOptionFromLinksAsInt(string $name): int
    {
        return (int)$this->_getOptionFromLinks($name);
    }

    /**
     * Extrait les options depuis les liens.
     *
     * @param string $name
     * @return string
     */
    private function _getOptionFromLinks(string $name): string
    {
        if ($name == ''
            || !$this->_permitOptionsByLinks
            || $this->_optionsByLinksIsInUse
            || $this->_nebuleInstance === null
        )
            return '';

        // Anti loop.
        $this->_optionsByLinksIsInUse = true;

        // Si une entité de subordination est défini, lit l'option forcée par cette entité.
        $value = '';
        $rid = \Nebule\Library\References::REFERENCE_NEBULE_OPTION . '/' . $name;
        if ($this->_nebuleInstance->getSubordinationEntity() != '') {
            $instance = $this->_nebuleInstance->getSubordinationEntity();
            $value = trim($instance->getProperty($rid));
        }

        // Si aucune valeur trouvée de l'entité de subordination, lit l'option pour l'entité en cours.
        if ($value == ''
            && is_a($this->_nebuleInstance->getEntitiesInstance()->getCurrentEntityInstance(), 'Entity')
        )
            $value = trim($this->_nebuleInstance->getEntitiesInstance()->getCurrentEntityInstance()->getProperty($rid));

        $this->_optionsByLinksIsInUse = false;

        if (is_a($this->_metrologyInstance, '\Nebule\Library\Metrology'))
            $this->_metrologyInstance->addLog('return option links = ' . $value, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '1dc46c1a');

        return $value;
    }

    /**
     * Ecrit une option en cache.
     * L'écriture en cache n'est possible que si cette possibilité n'est pas verrouillée.
     * Le bootstrap verrouille automatiquement en fin de chargement la possibilité
     *   de modification des options directement en cache.
     * Le verrouillage n'est pas annulable.
     *
     * @param string          $name
     * @param bool|int|string $value
     * @return boolean
     */
    public function setOptionCache(string $name, bool|int|string $value): bool
    {
        if ($name == ''
            || !isset(self::OPTIONS_TYPE[$name])
            || !self::OPTIONS_WRITABLE[$name]
            || $this->_overwriteOptionCacheLock
        )
            return false;

        $this->_metrologyInstance->addLog('overwrite option cache value ' . $name .' = ' . $this->_changeTypeValueToString($name, $value), Metrology::LOG_LEVEL_NORMAL, __METHOD__, '73802724');

        $this->_optionCache[$name] = $value;
        return true;
    }

    /**
     * Write an option as link for an entity if this option is not protected.
     *
     * @param string          $name
     * @param bool|int|string $value
     * @param string          $entity
     * @return boolean
     */
    public function setOptionEnvironment(string $name, bool|int|string $value, string $entity = ''): bool
    {
        // Vérifie le nom.
        if ($name == ''
            || !isset(self::OPTIONS_TYPE[$name])
            || !self::OPTIONS_WRITABLE[$name]
            || $this->getOptionFromEnvironmentUntyped($name) !== null
        )
            return false;

        // Détermine l'entité ciblée par l'option.
        if ($entity = ''
            || $entity == '0'
        )
            $entity = $this->_entitiesInstance->getCurrentEntityID();

        $this->_metrologyInstance->addLog('set option ' . $name, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '3ae7eea2');

        // Prépare la valeur.
        $writeValue = $this->_changeTypeValueFromString($name, $value);
        if (is_null($writeValue))
            return false;

        $this->_metrologyInstance->addLog('set option value = ' . $writeValue, Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'aa699a23');

        // Crée l'instance de l'objet de la valeur.
        $instance = new Node($this->_nebuleInstance, 'new'); // $writeValue
        $id = $instance->getID();
        if ($id == '0') {
            $this->_metrologyInstance->addLog('object cannot be created', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'e064cd5c');
            return false;
        }
        $instance->setType(References::REFERENCE_OBJECT_TEXT);

        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $source = $entity;
        $meta = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OPTION . '/' . $name);
        $link = '_l>' . $source . '>' . $id . '>' . $meta;
        $newLink = new BlocLink($this->_nebuleInstance, 'new', Cache::TYPE_LINK);

        if ($newLink->addLink($link)
            && $newLink->sign($signer)
            && $newLink->write()
        ) {
            $this->_optionCache[$name] = $value;
            return true;
        } else {
            $this->_metrologyInstance->addLog('set option write error', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'ac640a99');
            return false;
        }
    }

    /**
     * Lock write capabilities on demande.
     * Can be reloaded by flushCache().
     */
    public function lockPermitWrite(): void
    {
        $this->_optionCache['permitWrite'] = false;
    }

    /**
     * Lock object's write capabilities on demande.
     * Can be reloaded by flushCache().
     */
    public function lockPermitWriteObject(): void
    {
        $this->_optionCache['permitWriteObject'] = false;
    }

    /**
     * Lock link's write capabilities on demande.
     * Can be reloaded by flushCache().
     */
    public function lockPermitWriteLink(): void
    {
        $this->_optionCache['permitWriteLink'] = false;
    }

    /**
     * Lock writes on cache capabilities.
     * Not cancelable.
     */
    public function lockCache(): void
    {
        $this->_metrologyInstance->addLog('cache lock', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'a65d3e7e');
        $this->_overwriteOptionCacheLock = true;
    }

    /**
     * Reinitialize the values of options on cache.
     * Each option will be reloaded on demand.
     * No effet if cache locked.
     */
    public function flushCache(): void
    {
        if (!$this->_overwriteOptionCacheLock)
            $this->_optionCache = array();
    }

    /**
     * Change capability to use links for options.
     * @param bool $value
     */
    public function setPermitOptionsByLinks(bool $value): void
    {
        $this->_permitOptionsByLinks = $value;
    }

    /**
     * Check values of critical options.
     * If not default value, add a log with the value.
     * @return void
     */
    public function checkReadOnlyOptions(): void
    {
        $this->_metrologyInstance->addLog('check options', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'aa19c70a');

        foreach (self::OPTIONS_LIST as $option) {
            if (self::OPTIONS_CRITICALITY[$option] == 'critical') {
                $value = $this->getOptionUntyped($option);
                if ($value != self::OPTIONS_DEFAULT_VALUE[$option]) {
                    if (is_bool($value)) {
                        if ($value)
                            $value = 'true';
                        else
                            $value = 'false';
                    }
                    if (is_int($value))
                        $value = (string)$value;
                    $this->_metrologyInstance->addLog('warning:critical_option ' . $option . '=' . $value, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '319eab8f');
                }
            }
        }
    }

    /**
     * Check a list of boolean options. If one is false, return false.
     * Except for unlocked that check the current entity state.
     * Except for ticket that check a valid ticket.
     * @param array $list
     * @return bool
     */
    public function checkBooleanOptions(array $list): bool
    {
        if (sizeof($list) == 0) {
            $this->_metrologyInstance->addLog('empty list of options', Metrology::LOG_LEVEL_ERROR, __METHOD__,'558f764f');
            return false;
        }
        foreach ($list as $name)
        {
            if ($name == 'unlocked') {
                if (!$this->_entitiesInstance->getCurrentEntityIsUnlocked()) {
                    $this->_metrologyInstance->addLog('not permitted with entity locked', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'a6c88b6b');
                    return false;
                }
            } elseif ($name == 'ticket') {
                if (!$this->_ticketingInstance->checkActionTicket()) {
                    $this->_metrologyInstance->addLog('not permitted with invalid ticket', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'ccd082e7');
                    return false;
                }
            } elseif (!isset(self::OPTIONS_TYPE[$name])
                || self::OPTIONS_TYPE[$name] != 'boolean'
                || !$this->getOptionAsBoolean($name)
            ) {
                $this->_metrologyInstance->addLog('not permitted with option=' . $name, Metrology::LOG_LEVEL_DEBUG, __METHOD__,'8318122c');
                return false;
            }
        }
        return true;
    }
}



// ========================================================================================
//   006_rescue.php
//   020241020070707
//   86299ffe84e1645f42ddc55724e1cc3c917bf58674635ff199715b787beee147.sha2.256

/**
 * Rescue class for the nebule library.
 * Do not serialize on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Rescue extends Functions
{
    protected function _initialisation(): void
    {
        $this->_findModeRescue();
    }

    private bool $_modeRescue = false;

    private function _findModeRescue(): void
    {
        if ($this->_configurationInstance->getOptionUntyped('modeRescue')
            || ($this->_configurationInstance->getOptionAsBoolean('permitOnlineRescue')
                && (filter_has_var(INPUT_GET, References::COMMAND_RESCUE)
                    || filter_has_var(INPUT_POST, References::COMMAND_RESCUE)
                )
            )
        ) {
            $this->_metrologyInstance->addLog('rescue asked by user input (' . References::COMMAND_RESCUE . ')', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'feb40da2');
            $this->_modeRescue = true;
        }
    }

    public function getModeRescue(): bool
    {
        return $this->_modeRescue;
    }
}



// ========================================================================================
//   007_authorities.php
//   020250215163515
//   1d305e9c9aa222d4ebe743ee18c611bb99fc254d5acef2f18926e03ff72e4d5a.sha2.256

/**
 * Authorities class for the nebule library.
 * Must be serialized on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Authorities extends Functions
{
    const SESSION_SAVED_VARS = array(
        '_puppetmasterID',
        '_puppetmasterInstance',
        '_securityAuthoritiesID',
        '_securityAuthoritiesInstance',
        '_securitySignersInstance',
        '_codeAuthoritiesID',
        '_codeAuthoritiesInstance',
        '_codeSignersInstance',
        '_directoryAuthoritiesID',
        '_directoryAuthoritiesInstance',
        '_directorySignersInstance',
        '_timeAuthoritiesID',
        '_timeAuthoritiesInstance',
        '_timeSignersInstance',
        '_authoritiesID',
        '_authoritiesInstances',
        '_localAuthoritiesID',
        '_localAuthoritiesInstances',
        '_localPrimaryAuthoritiesID',
        '_localPrimaryAuthoritiesInstances',
        '_localAuthoritiesSigners',
        '_specialEntitiesID',
        '_permitInstanceEntityAsAuthority',
        '_permitDefaultEntityAsAuthority',
    );

    private string $_puppetmasterID = '';
    private ?Entity $_puppetmasterInstance = null;
    private array $_securityAuthoritiesID = array();
    private array $_securityAuthoritiesInstance = array();
    private array $_securitySignersInstance = array();
    private array $_codeAuthoritiesID = array();
    private array $_codeAuthoritiesInstance = array();
    private array $_codeSignersInstance = array();
    private array $_directoryAuthoritiesID = array();
    private array $_directoryAuthoritiesInstance = array();
    private array $_directorySignersInstance = array();
    private array $_timeAuthoritiesID = array();
    private array $_timeAuthoritiesInstance = array();
    private array $_timeSignersInstance = array();
    private array $_authoritiesID = array();
    private array $_authoritiesInstances = array();
    private array $_localAuthoritiesID = array();
    private array $_localAuthoritiesInstances = array();
    private array $_localPrimaryAuthoritiesID = array();
    private array $_localPrimaryAuthoritiesInstances = array();
    private array $_localAuthoritiesSigners = array();
    private array $_specialEntitiesID = array();
    private bool $_permitInstanceEntityAsAuthority = false;
    private bool $_permitDefaultEntityAsAuthority = false;

    protected function _initialisation(): void
    {
        $this->_getPermitInstanceAsAuthority();
        $this->_getPermitDefaultAsAuthority();
        $this->_findPuppetmaster();
        $this->_findGlobalAuthorities();
        $this->_findLocalAuthorities();
        $this->_metrologyInstance->addLog('instancing class Authorities', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '16aa56f1');
    }

    /**
     * Récupération du maître.
     *
     * Définit par une option ou en dur dans une constante.
     *
     * @return void
     */
    private function _findPuppetmaster(): void
    {
        $this->_puppetmasterID = $this->_configurationInstance->getOptionUntyped('puppetmaster');
        $this->_puppetmasterInstance = $this->_cacheInstance->newEntity($this->_puppetmasterID);
        $this->_metrologyInstance->addLog('Find puppetmaster ' . $this->_puppetmasterID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '88848d09');
    }



    /**
     * Find all global authorities entities after the puppetmaster.
     *
     * @return void
     */
    private function _findGlobalAuthorities(): void
    {
        $this->_findEntityByType(References::LIB_RID_SECURITY_AUTHORITY,
            $this->_securityAuthoritiesID,
            $this->_securityAuthoritiesInstance,
            $this->_securitySignersInstance,
            'security');
        $this->_findEntityByType(References::LIB_RID_CODE_AUTHORITY,
            $this->_codeAuthoritiesID,
            $this->_codeAuthoritiesInstance,
            $this->_codeSignersInstance,
            'code');
        $this->_findEntityByType(References::LIB_RID_DIRECTORY_AUTHORITY,
            $this->_directoryAuthoritiesID,
            $this->_directoryAuthoritiesInstance,
            $this->_directorySignersInstance,
            'directory');
        $this->_findEntityByType(References::LIB_RID_TIME_AUTHORITY,
            $this->_timeAuthoritiesID,
            $this->_timeAuthoritiesInstance,
            $this->_timeSignersInstance,
            'time');
    }

    /**
     * Find authorities by their roles.
     *
     * @param string $rid
     * @param array  $listEID
     * @param array  $listInstances
     * @param array  $signersInstances
     * @param string $name
     * @return void
     */
    private function _findEntityByType(string $rid, array &$listEID, array &$listInstances, array &$signersInstances, string $name): void
    {
        $instance = $this->_cacheInstance->newNode($rid, Cache::TYPE_NODE);
        $links = array();
        $filter = array(
            'bl/rl/req' => 'l',
            'bl/rl/nid1' => $rid,
            'bl/rl/nid3' => $rid,
            //'bl/rl/nid4' => '',
            //'bs/rs1/eid' => $this->_puppetmaster,
        );
        $instance->getLinks($links, $filter, false);

        if (sizeof($links) == 0)
        {
            $listEID[$this->_puppetmasterID] = $this->_puppetmasterID;
            $listInstances[$this->_puppetmasterID] = $this->_puppetmasterInstance;
            $signersInstances[$this->_puppetmasterID] = $this->_puppetmasterInstance;
            return;
        }

        foreach ($links as $link)
        {
            $eid = $link->getParsed()['bl/rl/nid2'];
            $instance = $this->_cacheInstance->newEntity($eid);
            $listEID[$eid] = $eid;
            $listInstances[$eid] = $instance;
            $signersInstances[$eid] = $link->getSignersEID();
            $this->_metrologyInstance->addLog('Find ' . $name . ' authority ' . $eid, Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'e6f75b5e');
        }
    }

    public function getPuppetmasterEID(): string
    {
        return $this->_puppetmasterID;
    }
    public function getPuppetmasterInstance(): ?Entity
    {
        return $this->_puppetmasterInstance;
    }

    public function getSecurityAuthoritiesEID(): array
    {
        return $this->_securityAuthoritiesID;
    }

    public function getSecurityAuthoritiesInstance(): array
    {
        return $this->_securityAuthoritiesInstance;
    }

    public function getSecuritySignersInstance(): array
    {
        return $this->_securitySignersInstance;
    }

    public function getCodeAuthoritiesEID(): array
    {
        return $this->_codeAuthoritiesID;
    }

    public function getCodeAuthoritiesInstance(): array
    {
        return $this->_codeAuthoritiesInstance;
    }

    public function getCodeSignersInstance(): array
    {
        return $this->_codeSignersInstance;
    }

    public function getDirectoryAuthoritiesEID(): array
    {
        return $this->_directoryAuthoritiesID;
    }

    public function getDirectoryAuthoritiesInstance(): array
    {
        return $this->_directoryAuthoritiesInstance;
    }

    public function getDirectorySignersInstance(): array
    {
        return $this->_directorySignersInstance;
    }

    public function getTimeAuthoritiesEID(): array
    {
        return $this->_timeAuthoritiesID;
    }

    public function getTimeAuthoritiesInstance(): array
    {
        return $this->_timeAuthoritiesInstance;
    }

    public function getTimeSignersInstance(): array
    {
        return $this->_timeSignersInstance;
    }

    private function _getPermitInstanceAsAuthority(): void
    {
        if ($this->_rescueInstance->getModeRescue())
            $this->_permitInstanceEntityAsAuthority = false;
        else
        $this->_permitInstanceEntityAsAuthority = $this->_configurationInstance->getOptionAsBoolean('permitInstanceEntityAsAuthority');
    }

    public function getPermitInstanceAsAuthority(): bool
    {
        return $this->_permitInstanceEntityAsAuthority;
    }

    private function _getPermitDefaultAsAuthority(): void
    {
        if ($this->_rescueInstance->getModeRescue())
            $this->_permitDefaultEntityAsAuthority = false;
        else
        $this->_permitDefaultEntityAsAuthority = $this->_configurationInstance->getOptionAsBoolean('permitDefaultEntityAsAuthority');
    }

    public function getPermitDefaultAsAuthority(): bool
    {
        return $this->_permitDefaultEntityAsAuthority;
    }



    /**
     * Ajoute les autorités locales par défaut.
     *
     * @return void
     */
    private function _findLocalAuthorities(): void
    {
        $this->_authoritiesID[$this->_puppetmasterID] = $this->_puppetmasterID;
        $this->_authoritiesInstances[$this->_puppetmasterID] = $this->_puppetmasterInstance;
        $this->_specialEntitiesID[$this->_puppetmasterID] = $this->_puppetmasterID;
        foreach ($this->_securityAuthoritiesID as $item)
        {
            $this->_authoritiesID[$item] = $item;
            $this->_authoritiesInstances[$item] = $this->_securityAuthoritiesInstance[$item];
            $this->_specialEntitiesID[$item] = $item;
        }
        foreach ($this->_codeAuthoritiesID as $item)
        {
            $this->_authoritiesID[$item] = $item;
            $this->_authoritiesInstances[$item] = $this->_codeAuthoritiesInstance[$item];
            $this->_specialEntitiesID[$item] = $item;
            $this->_localAuthoritiesID[$item] = $item;
            $this->_localAuthoritiesInstances[$item] =$this->_codeAuthoritiesInstance[$item];
            $this->_localAuthoritiesSigners[$item] = $this->_puppetmasterID;
        }
        foreach ($this->_directoryAuthoritiesID as $item)
            $this->_specialEntitiesID[$item] = $item;
        foreach ($this->_timeAuthoritiesID as $item)
            $this->_specialEntitiesID[$item] = $item;
    }

    public function setInstanceEntityAsAuthorities(Entity $instance): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $eid = $instance->getID();
        if ($this->_permitInstanceEntityAsAuthority) {
            $this->_addAsLocalAuthority($instance, $eid);
            $this->_metrologyInstance->addLog('Add instance entity as authority', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '0ccb0886');
        }
    }

    public function setDefaultEntityAsAuthorities(Entity $instance): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $eid = $instance->getID();
        if ($this->_permitDefaultEntityAsAuthority) {
            $this->_addAsLocalAuthority($instance, $eid);
            $this->_metrologyInstance->addLog('Add default entity as authority', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '95cc6196');
        }
    }

    private function _addAsLocalAuthority(Entity $instance, String $eid, string $signer='0'): void
    {
            $this->_authoritiesID[$eid] = $eid;
            $this->_authoritiesInstances[$eid] = $instance;
            $this->_specialEntitiesID[$eid] = $eid;
            $this->_localAuthoritiesID[$eid] = $eid;
            $this->_localAuthoritiesInstances[$eid] = $instance;
            $this->_localAuthoritiesSigners[$eid] = $signer;
            $this->_localPrimaryAuthoritiesID[$eid] = $eid;
            $this->_localPrimaryAuthoritiesInstances[$eid] = $instance;
    }

    /**
     * Ajoute des autres entités marquées comme autorités locales.
     *
     * @param Entities $entitiesInstance
     * @return void
     */
    public function setLinkedLocalAuthorities(Entities $entitiesInstance): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_configurationInstance->getOptionAsBoolean('permitLocalSecondaryAuthorities'))
            return;

        $refAuthority = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_ENTITE_AUTORITE_LOCALE);

        $list = array();
        if ($this->_permitInstanceEntityAsAuthority) {
            $filter = array(
                'bl/rl/req' => 'f',
                'bl/rl/nid1' => $refAuthority,
                'bl/rl/nid2' => $entitiesInstance->getServerEntityID(),
                'bl/rl/nid3' => '',
                'bl/rl/nid4' => '',
                'bs/rs1/eid' => $entitiesInstance->getServerEntityID(),
            );
            $entitiesInstance->getServerEntityInstance()->getLinks($list, $filter, false);
        }

        if ($this->_permitDefaultEntityAsAuthority) {
            $filter = array(
                'bl/rl/req' => 'f',
                'bl/rl/nid1' => $refAuthority,
                'bl/rl/nid2' => $entitiesInstance->getServerEntityID(),
                'bl/rl/nid3' => '',
                'bl/rl/nid4' => '',
                'bs/rs1/eid' => $entitiesInstance->getDefaultEntityID(),
            );
            $entitiesInstance->getServerEntityInstance()->getLinks($list, $filter, false);
        }

        foreach ($list as $link) {
            $eid = $link->getParsed()['bl/rl/nid1'];
            $instance = $this->_cacheInstance->newEntity($eid);
            $this->_addAsLocalAuthority($instance, $eid, $link->getParsed()['bs/rs1/eid']);
            $this->_metrologyInstance->addLog('add as local authority EID=' . $eid, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '0074f2c6');
        }
    }

    /**
     * Lit la liste des ID des autorités.
     *
     * @return array:string
     */
    public function getAuthoritiesID(): array
    {
        return $this->_authoritiesID;
    }

    /**
     * Lit la liste des instances des autorités.
     *
     * @return array:Entity
     */
    public function getAuthoritiesInstance(): array
    {
        return $this->_authoritiesInstances;
    }

    /**
     * Lit la liste des ID des autorités locales.
     *
     * @return array:string
     */
    public function getLocalAuthoritiesID(): array
    {
        return $this->_localAuthoritiesID;
    }

    /**
     * Lit la liste des instances des autorités locales.
     *
     * @return array:Entity
     */
    public function getLocalAuthoritiesInstance(): array
    {
        return $this->_localAuthoritiesInstances;
    }

    /**
     * Lit la liste des autorités locales déclarants des autorités locales.
     *
     * @return array:string
     */
    public function getLocalAuthoritiesSigners(): array
    {
        return $this->_localAuthoritiesSigners;
    }

    /**
     * Lit la liste des ID des autorités locales.
     *
     * @return array:string
     */
    public function getLocalPrimaryAuthoritiesID(): array
    {
        return $this->_localPrimaryAuthoritiesID;
    }

    /**
     * Lit la liste des instances des autorités locales.
     *
     * @return array:Entity
     */
    public function getLocalPrimaryAuthoritiesInstance(): array
    {
        return $this->_localPrimaryAuthoritiesInstances;
    }

    /**
     * Lit la liste des ID des entités avec des rôles.
     *
     * @return array:string
     */
    public function getSpecialEntitiesID(): array
    {
        return $this->_specialEntitiesID;
    }

    public function getIsGlobalAuthority(Entity $entity): bool
    {
        return $this->getIsGlobalAuthorityEID($entity->getID());
    }

    public function getIsGlobalAuthorityEID(string $eid): bool
    {
        if ($eid != '0'
            && ($eid == $this->_puppetmasterID
                || in_array($eid, $this->_securityAuthoritiesID)
                || in_array($eid, $this->_codeAuthoritiesID)
            )
        )
            return true;
        return false;
    }

    public function getIsLocalAuthority(Entity $entity): bool
    {
        return $this->getIsLocalAuthorityEID($entity->getID());
    }

    public function getIsLocalAuthorityEID(string $eid): bool
    {
        if ($eid != '0' && in_array($eid, $this->_localAuthoritiesID))
            return true;
        return false;
    }
}



// ========================================================================================
//   008_entities.php
//   020250218162750
//   463a1d98617ace84d8c2c006beefed255f429172047fffa3e140fd569b093661.sha2.256

/**
 * Local entities class for the nebule library.
 * Must be serialized on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Entities extends Functions
{
    const SESSION_SAVED_VARS = array(
        //'_serverEntityID',
        '_serverEntityInstance',
        //'_defaultEntityID',
        '_defaultEntityInstance',
        '_currentEntityID',
        //'_currentEntityInstance',
        '_currentEntityPrivateKey',
        '_currentEntityPrivateKeyInstance',
        '_currentEntityIsUnlocked',
    );

    private string $_serverEntityID = '';
    private ?Entity $_serverEntityInstance = null;
    private string $_defaultEntityID = '';
    private ?Entity $_defaultEntityInstance = null;
    private string $_currentEntityID = '';
    private ?Entity $_currentEntityInstance = null;
    private string $_currentEntityPrivateKey = '';
    private ?Node $_currentEntityPrivateKeyInstance = null;
    private bool $_currentEntityIsUnlocked = false;

    protected function _initialisation(): void
    {
        $this->_metrologyInstance->addLog('MARK20', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_findServerEntity();
        $this->_metrologyInstance->addLog('MARK21', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_authoritiesInstance->setInstanceEntityAsAuthorities($this->_serverEntityInstance);
        $this->_metrologyInstance->addLog('MARK22', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_recoveryInstance->setInstanceEntityAsRecovery($this->_serverEntityInstance);
        $this->_metrologyInstance->addLog('MARK23', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_findDefaultEntity();
        $this->_metrologyInstance->addLog('MARK24', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_authoritiesInstance->setDefaultEntityAsAuthorities($this->_defaultEntityInstance);
        $this->_metrologyInstance->addLog('MARK25', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_recoveryInstance->setDefaultEntityAsRecovery($this->_defaultEntityInstance);
        $this->_metrologyInstance->addLog('MARK26', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_authoritiesInstance->setLinkedLocalAuthorities($this);
        $this->_metrologyInstance->addLog('MARK27', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_recoveryInstance->setLinkedRecoveryEntities($this);
        $this->_metrologyInstance->addLog('MARK28', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_findCurrentEntity();
        $this->_metrologyInstance->addLog('MARK29', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_findCurrentEntityPrivateKey();
        $this->_metrologyInstance->addLog('MARK2a', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        $this->_findCurrentEntityPassword();
        if ($this->_currentEntityIsUnlocked)
            $this->_metrologyInstance->addLog('MARK2b true', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
        else
            $this->_metrologyInstance->addLog('MARK2b false', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
    }


    /**
     * Try to find server entity from :
     * 1: from PHP session;
     * 2: from file;
     * 3: last keep puppetmaster instance.
     * @return void
     */
    private function _findServerEntity(): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $instance = $this->_sessionInstance->getSessionStoreAsEntity('nebuleHostEntityInstance');
        if ($instance->getID() == '0')
            $instance = $this->_findServerEntityFromFile();
        if ($instance->getID() == '0')
            $instance = $this->_authoritiesInstance->getPuppetmasterInstance();
        $this->_serverEntityInstance = $instance;
        $this->_serverEntityID = $instance->getID();
        $this->_metrologyInstance->addLog('server entity EID=' . $this->_serverEntityID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'cdfd0e02');
        $this->_sessionInstance->setSessionStoreAsEntity('nebuleHostEntityInstance', $this->_serverEntityInstance);
    }

    private function _findServerEntityFromFile(): Entity
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $filecontent = file_get_contents(References::COMMAND_LOCAL_ENTITY_FILE);
        if (is_bool($filecontent))
            $filecontent = '';
        $filecontent = strtok($filecontent, "\n");
        if (is_bool($filecontent))
            $filecontent = '';
        $arg = filter_var(trim($filecontent), FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW);
        if (is_bool($arg) || $arg === null || $arg == '')
            $arg = '0';

        if (!Node::checkNID($arg, false, false)
            || !$this->_ioInstance->checkObjectPresent($arg)
            || !$this->_ioInstance->checkLinkPresent($arg)
        )
            $arg = '0';

        $this->_metrologyInstance->addLog('find server entity from file EID=' . $arg, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '811a12be');
        return $this->_cacheInstance->newEntity($arg);
    }

    public function getServerEntityID(): string
    {
        return $this->_serverEntityID;
    }

    public function getServerEntityInstance(): ?Entity
    {
        return $this->_serverEntityInstance;
    }



    /**
     * Try to find default entity from :
     * 1: from PHP session;
     * 2: from option defaultCurrentEntity (on config file);
     * 3: last keep server instance.
     * @return void
     */
    private function _findDefaultEntity(): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $instance = $this->_sessionInstance->getSessionStoreAsEntity('nebuleDefaultEntityInstance');
        if ($instance->getID() == '0')
            $instance = $this->_findDefaultEntityFromOption();
        if ($instance->getID() == '0')
            $instance = $this->_serverEntityInstance;
        $this->_defaultEntityInstance = $instance;
        $this->_defaultEntityID = $instance->getID();
        $this->_metrologyInstance->addLog('default entity EID=' . $this->_defaultEntityID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '17bc6adc');
        //$this->_sessionInstance->setSessionStoreAsString('nebuleDefaultEntity', $this->_defaultEntityID);
        $this->_sessionInstance->setSessionStoreAsEntity('nebuleDefaultEntityInstance', $this->_defaultEntityInstance);
    }

    private function _findDefaultEntityFromOption(): Entity
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $instance = $this->_cacheInstance->newEntity($this->_configurationInstance->getOptionFromEnvironmentAsString('defaultCurrentEntity'));
        $this->_metrologyInstance->addLog('find default entity from config file EID=' . $instance->getID(), Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'cf459003');
        return $instance;
    }

    public function getDefaultEntityID(): string
    {
        return $this->_defaultEntityID;
    }

    public function getDefaultEntityInstance(): ?Entity
    {
        return $this->_defaultEntityInstance;
    }



    /**
     * Try to find current entity from :
     * 1: from command argument;
     * 2: from PHP session;
     * 3: from option defaultCurrentEntity (on config file);
     * 4: last keep server instance.
     * If not from PHP session, flush previous private key.
     * @return void
     */
    private function _findCurrentEntity(): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $instance = $this->_findCurrentEntityFromArg();
        if ($instance->getID() == '0') {
            $eid = $this->_sessionInstance->getSessionStoreAsString('nebulePublicKeyEID');
            if ($eid != '') {
                $this->_metrologyInstance->addLog('find current entity key from cache EID=' . $eid, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '28ac240d');
                $this->_cacheInstance->newEntity($eid);
            }
        } else {
            $this->_currentEntityPrivateKey = '';
            $this->_currentEntityPrivateKeyInstance = null;
            $this->_sessionInstance->setSessionStoreAsString('nebulePrivateKeyOID', '');
        }
        if ($instance->getID() == '0') {
            $instance = $this->_findDefaultEntityFromOption();
            $this->_currentEntityPrivateKey = '';
            $this->_currentEntityPrivateKeyInstance = null;
            $this->_sessionInstance->setSessionStoreAsString('nebulePrivateKeyOID', '');
        }
        if ($instance->getID() == '0')
            $instance = $this->_serverEntityInstance;
        $this->_currentEntityInstance = $instance;
        $this->_currentEntityID = $instance->getID();
        $this->_metrologyInstance->addLog('current entity EID=' . $this->_currentEntityID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'd026d625');
        $this->_sessionInstance->setSessionStoreAsString('nebulePublicKeyEID', $this->_currentEntityID);
    }

    private function _findCurrentEntityFromArg(): Entity
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Extract anf filter
        if (filter_has_var(INPUT_GET, References::COMMAND_SWITCH_TO_ENTITY)
            && filter_has_var(INPUT_GET, References::COMMAND_SELECT_ENTITY)
        )
            $arg = filter_input(INPUT_GET,
                References::COMMAND_SELECT_ENTITY,
                FILTER_SANITIZE_STRING,
                FILTER_FLAG_ENCODE_LOW);
        elseif (filter_has_var(INPUT_POST, References::COMMAND_SWITCH_TO_ENTITY)
            && filter_has_var(INPUT_POST, References::COMMAND_SELECT_ENTITY)
        )
            $arg = filter_input(INPUT_POST,
                References::COMMAND_SELECT_ENTITY,
                FILTER_SANITIZE_STRING,
                FILTER_FLAG_ENCODE_LOW);
        else
            $arg = '0';

        if ($arg === false || $arg === null)
            $arg = '0';

        if (!Node::checkNID($arg, false, false)
            || !$this->_ioInstance->checkObjectPresent($arg)
            || !$this->_ioInstance->checkLinkPresent($arg)
        )
            $arg = '0';

        $this->_metrologyInstance->addLog('find current entity key from arg EID=' . $arg, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '811a12be');
        return $this->_cacheInstance->newEntity($arg);
    }

    public function getCurrentEntityID(): string
    {
        return $this->_currentEntityID;
    }

    public function getCurrentEntityInstance(): ?Entity
    {
        return $this->_currentEntityInstance;
    }



    private function _findCurrentEntityPrivateKey(): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $privateKey = $this->_sessionInstance->getSessionStoreAsString('nebulePrivateKeyOID');

        if ($privateKey != ''
            && $privateKey != '0'
        ) {
            $this->_currentEntityPrivateKey = $privateKey;
            $this->_currentEntityPrivateKeyInstance = $this->_cacheInstance->newNode($this->_currentEntityPrivateKey);
            $this->_metrologyInstance->addLog('reuse current entity private key ' . $this->_currentEntityPrivateKey, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '75e1c757');
        }
        else {
            if ($this->_currentEntityInstance instanceof Entity) {
                $this->_currentEntityPrivateKey = $this->_currentEntityInstance->getPrivateKeyID();
                if ($this->_currentEntityPrivateKey != '') {
                    $this->_currentEntityPrivateKeyInstance = $this->_cacheInstance->newNode($this->_currentEntityPrivateKey);
                    $this->_metrologyInstance->addLog('find current entity private key ' . $this->_currentEntityPrivateKey, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '6be388ca');
                } else {
                    $this->_currentEntityPrivateKeyInstance = null;
                    $this->_metrologyInstance->addLog('cant find current entity private key ' . $this->_currentEntityPrivateKey, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '1e5bed72');
                }
                $this->_sessionInstance->setSessionStoreAsString('nebulePrivateKeyOID', $this->_currentEntityPrivateKey);
            } else {
                $this->_currentEntityPrivateKey = '';
                $this->_currentEntityPrivateKeyInstance = null;
            }
        }
    }

    public function getCurrentEntityPrivateKeyInstance(): ?Node
    {
        return $this->_currentEntityPrivateKeyInstance;
    }

    public function getCurrentEntityPrivateKey(): string
    {
        return $this->_currentEntityPrivateKey;
    }



    private function _findCurrentEntityPassword(): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (filter_has_var(INPUT_GET, References::COMMAND_AUTH_ENTITY_LOGOUT)
            || filter_has_var(INPUT_POST, References::COMMAND_AUTH_ENTITY_LOGOUT))
        {
            if ($this->_currentEntityInstance instanceof Entity) {
                $this->_metrologyInstance->addLog('logout ' . $this->_currentEntityID, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '4efbc71f');
                $this->_currentEntityInstance->unsetPrivateKeyPassword();
                $this->_sessionInstance->setSessionStoreAsEntity('nebulePublicKeyEIDInstance', $this->_currentEntityInstance);
            }
            return;
        }

        if ($this->_currentEntityInstance->isSetPrivateKeyPassword())
            return;

        $arg_get_pwd = filter_input(INPUT_GET, References::COMMAND_SELECT_PASSWORD, FILTER_SANITIZE_STRING);
        $arg_post_pwd = filter_input(INPUT_POST, References::COMMAND_SELECT_PASSWORD, FILTER_SANITIZE_STRING);

        if ($arg_post_pwd != '')
            $arg_pwd = $arg_post_pwd;
        elseif ($arg_get_pwd != '')
            $arg_pwd = $arg_get_pwd;
        else
            return;

        if ($this->_currentEntityInstance->setPrivateKeyPassword($arg_pwd))
        {
            $this->_metrologyInstance->addLog('login password ' . $this->_currentEntityID . ' OK', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '99ed783e');
            $this->_currentEntityIsUnlocked = true;
            $this->_sessionInstance->setSessionStoreAsEntity('nebulePublicKeyEIDInstance', $this->_currentEntityInstance);
        } else {
            $this->_metrologyInstance->addLog('login password ' . $this->_currentEntityID . ' NOK', Metrology::LOG_LEVEL_ERROR, __METHOD__, '72a3452d');
            $this->_currentEntityIsUnlocked = false;
        }
    }

    public function getCurrentEntityIsUnlocked(): bool
    {
        return $this->_currentEntityIsUnlocked;
    }



    public function setCurrentEntity(Entity $entity): bool
    {
        session_start();

        $this->_cacheInstance->flushBufferStore();

        $this->_currentEntityInstance = $entity;
        $this->_currentEntityID = $this->_currentEntityInstance->getID();
        //$this->_sessionInstance->setSessionStore('nebulePublicKeyEID', $this->_currentEntityID);
        $this->_sessionInstance->setSessionStoreAsEntity('nebulePublicKeyEIDInstance', $this->_currentEntityInstance);
        $this->_findCurrentEntityPrivateKey();
        $this->_currentEntityIsUnlocked = $this->_currentEntityInstance->isSetPrivateKeyPassword();

        session_write_close();
        return true;
    }

    /**
     * Change l'entité courante de façon temporaire. Les caches sont effacés.
     * Penser à lui pousser son mot de passe pour qu'elle soit déverrouillée.
     *
     * L'ancienne entité est mémorisée pour être restaurée en fin de période temporaire.
     *
     * La fonction est utilisée par la génération d'une nouvelle entité
     *   afin de faire signer les liens par la nouvelle entité.
     *
     * @param Entity $entity
     * @return boolean
     */
    public function setTempCurrentEntity(Entity $entity): bool
    {
        session_start();

        $this->_cacheInstance->flushBufferStore();

        $this->_sessionInstance->setSessionStore('nebuleTempPublicEntityInstance', serialize($this->_currentEntityInstance));

        $this->_currentEntityInstance = $entity;
        $this->_currentEntityID = $this->_currentEntityInstance->getID();
        //$this->_sessionInstance->setSessionStore('nebulePublicKeyEID', $this->_currentEntityID);
        $this->_sessionInstance->setSessionStoreAsEntity('nebulePublicKeyEIDInstance', $this->_currentEntityInstance);
        $this->_findCurrentEntityPrivateKey();
        $this->_currentEntityIsUnlocked = $this->_currentEntityInstance->isSetPrivateKeyPassword();

        session_write_close();
        return true;
    }

    /**
     * Annule le changement temporaire de l'entité. Les caches sont effacés.
     * Elle contient déjà son mot de passe si elle était déverrouillée.
     *
     * L'ancienne entité est restaurée. L'entité actuelle est retirée.
     *
     * @return boolean
     */
    public function unsetTempCurrentEntity(): bool
    {
        session_start();

        $entity = $this->_sessionInstance->getSessionStore('nebuleTempPublicEntityInstance');
        if ($entity === false) {
            session_write_close();
            return false;
        }

        $this->_cacheInstance->flushBufferStore();

        $this->_currentEntityInstance = unserialize($entity);
        $this->_currentEntityID = $this->_currentEntityInstance->getID();
        //$this->_sessionInstance->setSessionStore('nebulePublicKeyEID', $this->_currentEntityID);
        $this->_sessionInstance->setSessionStoreAsEntity('nebulePublicKeyEIDInstance', $this->_currentEntityInstance);
        $this->_findCurrentEntityPrivateKey();
        $this->_currentEntityIsUnlocked = $this->_currentEntityInstance->isSetPrivateKeyPassword();

        session_write_close();
        return true;
    }



    private array $_listEntitiesUnlocked = array();
    private array $_listEntitiesUnlockedInstances = array();

    public function getListEntitiesUnlocked(): array
    {
        return $this->_listEntitiesUnlocked;
    }

    public function getListEntitiesUnlockedInstances(): array
    {
        return $this->_listEntitiesUnlockedInstances;
    }

    public function addListEntitiesUnlocked(Entity $entity): void
    {
        if ($entity->getID() == '0')
            return;
        $eid = $entity->getID();

        $this->_listEntitiesUnlocked[$eid] = $eid;
        $this->_listEntitiesUnlockedInstances[$eid] = $entity;
    }

    public function removeListEntitiesUnlocked(Entity $entity): void
    {
        unset($this->_listEntitiesUnlocked[$entity->getID()]);
        unset($this->_listEntitiesUnlockedInstances[$entity->getID()]);
    }

    public function flushListEntitiesUnlocked(): void
    {
        $this->_listEntitiesUnlocked = array();
        $this->_listEntitiesUnlockedInstances = array();
    }

    public function getListEntitiesInstances(): array
    {
        $hashType = $this->getNidFromData(References::REFERENCE_NEBULE_OBJET_TYPE);
        $hashEntity = $this->getNidFromData('application/x-pem-file');
        $hashEntityObject = $this->_cacheInstance->newNode($hashEntity);

        $links = $hashEntityObject->getLinksOnFields('', '', 'l', '', $hashEntity, $hashType);

        $result = array();
        foreach ($links as $link) {
            $id = $link->getParsed()['bl/rl/nid1'];
            $instance = $this->_cacheInstance->newEntity($id);
            if ($instance->getIsPublicKey())
                $result[$id] = $instance;
        }
        return $result;
    }

    public function getListEntitiesID(): array
    {
        $list = $this->getListEntitiesInstances();
        $result = array();

        foreach ($list as $instance) {
            $id = $instance->getID();
            $result[$id] = $id;
        }

        unset($list, $instance);
        return $result;
    }
}



// ========================================================================================
//   009_recovery.php
//   020250215163515
//   a469edc390a6878a361e21912e61a2516b22c8117d011ffc980e1370fb8c4cdc.sha2.256

/**
 * Recovery entities class for the nebule library.
 * Must be serialized on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Recovery extends Functions
{
    const SESSION_SAVED_VARS = array(
        '_recoveryEntities',
        '_recoveryEntitiesInstances',
        '_recoveryEntitiesSigners',
    );

    private array $_recoveryEntities = array();
    private array $_recoveryEntitiesInstances = array();
    private array $_recoveryEntitiesSigners = array();


    public function setInstanceEntityAsRecovery(Entity $instance): void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitRecoveryEntities'))
            return;

        if ($this->_configurationInstance->getOptionAsBoolean('permitInstanceEntityAsRecovery')) {
            $this->_addAsLocalRecovery($instance);
            $this->_metrologyInstance->addLog('Add server entity as recovery', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'fa22c32d');
        }
    }

    public function setDefaultEntityAsRecovery(Entity $instance): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_configurationInstance->getOptionAsBoolean('permitRecoveryEntities'))
            return;

        if ($this->_configurationInstance->getOptionAsBoolean('permitDefaultEntityAsRecovery')) {
            $this->_addAsLocalRecovery($instance);
            $this->_metrologyInstance->addLog('Add default entity as recovery', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'd8bcdd46');
        }
    }

    private function _addAsLocalRecovery(Entity $instance, string $signer='0'): void
    {
        $eid = $instance->getID();
        if ($eid == '0')
            return;
        $this->_recoveryEntities[$eid] = $eid;
        $this->_recoveryEntitiesInstances[$eid] = $instance;
        $this->_recoveryEntitiesSigners[$eid] = $signer;
    }

    public function setLinkedRecoveryEntities(Entities $entitiesInstance): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_recoveryEntities = array();
        $this->_recoveryEntitiesInstances = array();

        if (!$this->_configurationInstance->getOptionAsBoolean('permitRecoveryEntities'))
            return;

        $refRecovery = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_ENTITE_RECOUVREMENT);

        $list = array();
        if ($this->_configurationInstance->getOptionAsBoolean('permitInstanceEntityAsAuthority')) {
            $filter = array(
                'bl/rl/req' => 'f',
                'bl/rl/nid1' => $refRecovery,
                'bl/rl/nid2' => $entitiesInstance->getServerEntityID(),
                'bl/rl/nid3' => '',
                'bl/rl/nid4' => '',
                'bs/rs1/eid' => $entitiesInstance->getServerEntityID(),
            );
            $entitiesInstance->getServerEntityInstance()->getLinks($list, $filter, false);
        }

        if ($this->_configurationInstance->getOptionAsBoolean('permitDefaultEntityAsAuthority')) {
            $filter = array(
                'bl/rl/req' => 'f',
                'bl/rl/nid1' => $refRecovery,
                'bl/rl/nid2' => $entitiesInstance->getServerEntityID(),
                'bl/rl/nid3' => '',
                'bl/rl/nid4' => '',
                'bs/rs1/eid' => $entitiesInstance->getDefaultEntityID(),
            );
            $entitiesInstance->getServerEntityInstance()->getLinks($list, $filter, false);
        }

        foreach ($list as $link) {
            $instance = $this->_cacheInstance->newEntity($link->getParsed()['bl/rl/nid2']);
            $this->_addAsLocalRecovery($instance, $link->getParsed()['bs/rs1/eid']);
        }
        unset($list);
    }

    public function getRecoveryEntities(): array
    {
        return $this->_recoveryEntities;
    }

    public function getRecoveryEntitiesInstance(): array
    {
        return $this->_recoveryEntitiesInstances;
    }

    public function getRecoveryEntitiesSigners(): array
    {
        return $this->_recoveryEntitiesSigners;
    }

    public function getIsRecoveryEntity($entity): bool
    {
        if (is_a($entity, 'Node'))
            $entity = $entity->getID();
        if ($entity == '0')
            return false;

        foreach ($this->_recoveryEntities as $recovery) {
            if ($entity == $recovery)
                return true;
        }
        return false;
    }
}



// ========================================================================================
//   010_cache.php
//   020250215163515
//   c3d9d624373c3f04913e0974c198642af79f9de474cd5f8e74fbc8e7e563b133.sha2.256

/**
 * Configuration class for the nebule library.
 * Must be serialized on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Cache extends Functions
{
    const SESSION_SAVED_VARS = array(
        '_cache',
        '_cacheDateInsertion',
        '_flushCache',
    );

    const TYPE_NODE = 'node';
    const TYPE_GROUP = 'group';
    const TYPE_ENTITY = 'entity';
    const TYPE_LOCATION = 'location';
    const TYPE_CONVERSATION = 'conversation';
    const TYPE_CURRENCY = 'currency';
    const TYPE_TOKENPOOL = 'tokenpool';
    const TYPE_TOKEN = 'token';
    const TYPE_WALLET = 'wallet';
    const TYPE_BLOCLINK = 'bloclink';
    const TYPE_LINK = 'link';
    const TYPE_TRANSACTION = 'transaction';

    const KNOWN_TYPE = array(
        self::TYPE_NODE,
        self::TYPE_GROUP,
        self::TYPE_ENTITY,
        self::TYPE_LOCATION,
        self::TYPE_CONVERSATION,
        self::TYPE_CURRENCY,
        self::TYPE_TOKENPOOL,
        self::TYPE_TOKEN,
        self::TYPE_WALLET,
        self::TYPE_BLOCLINK,
        self::TYPE_LINK,
        self::TYPE_TRANSACTION,
    );

    private array $_cache = array();
    private array $_cacheDateInsertion = array();
    private int $_sessionBufferLimit = 0;
    private bool $_flushCache = false;

    protected function _initialisation(): void
    {
        $this->_sessionBufferLimit = $this->_configurationInstance->getOptionAsInteger('sessionBufferSize');
        $this->_getFlushCache();
        foreach ($this->_cache as $type => $table) {
            foreach ($table as $item => $instance) {
                $instance->setEnvironmentLibrary($this->_nebuleInstance);
                $instance->initialisation();
            }
        }
    }

    public function __wakeup()
    {
        /*$this->_sessionBufferLimit = $this->_configurationInstance->getOptionAsInteger('sessionBufferSize');
        foreach ($this->_cache as $type => $table) {
            foreach ($table as $item => $instance) {
                $instance->setEnvironmentLibrary($this->_nebuleInstance);
                $instance->initialisation();
            }
        }*/
    }

    private function _getFlushCache(): void
    {
        if (filter_has_var(INPUT_GET, References::COMMAND_FLUSH)
            || filter_has_var(INPUT_POST, References::COMMAND_FLUSH)
        ) {
            $this->_metrologyInstance->addLog('ask flush cache', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '3aeed4ed');
            $this->_cache = array();
            $this->_cacheDateInsertion = array();
            $this->_flushCache = true;
        }
    }

    public function getFlushCache(): bool
    {
        return $this->_flushCache;
    }

    public function readCacheOnSessionBuffer_DEPRECATED(): void
    {
        if ($this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer')
        )
            return;

        session_start();

        // Extrait les objets/liens du cache.
        $list = array();
        if (isset($_SESSION['Buffer']))
            $list = $_SESSION['Buffer'];
        if (sizeof($list) > 0) {
            foreach ($list as $type => $table)
            {
                foreach ($table as $item => $value)
                {
                    $instance = unserialize($value);
                    $this->_cache[$type][$item] = $instance;
                }
            }
        }
        if (isset($_SESSION['BufferDateInsertion']))
            $this->_cacheDateInsertion = $_SESSION['BufferDateInsertion'];

        session_write_close();

        // Vérifie si le cache n'est pas trop gros. Le vide au besoin.
        $this->_getCacheNeedCleaning();
    }

    public function saveCacheOnSessionBuffer_DEPRECATED(): void
    {
        if ($this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer')
        )
            return;

        $this->_getCacheNeedCleaning();
        session_start();
        $_SESSION['Buffer'] = array();

        foreach ($this->_cache as $type => $table) {
            foreach ($table as $item => $instance) {
                if (isset($this->_cacheDateInsertion[$type][$item])) {
                    $_SESSION['Buffer'][$type][$item] = serialize($instance);
                    $_SESSION['BufferDateInsertion'][$type][$item] = $this->_cacheDateInsertion[$type][$item];
                }
            }
        }

        session_write_close();
    }

    public function flushBufferStore(): bool
    {
        $this->_metrologyInstance->addLog('flush buffer store', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
        session_start();
        unset($_SESSION['Buffer']);
        $_SESSION['Buffer'] = array();
        session_write_close();
        return true;
    }

    private function _cleanCacheOverflow(int $c = 0): void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer')
            || !is_numeric($c)
            || $c <= 0
        )
            return;

        if ($c > 100)
            $this->_metrologyInstance->addLog(__METHOD__ . ' cache need flush ' . $c . '/' . sizeof($this->_cacheDateInsertion), Metrology::LOG_LEVEL_NORMAL, __METHOD__, '5bdb6961');

        for ($i = 0; $i < $c; $i++)
        {
            $refTime = 0;
            $refType = '';
            $refItem = '';
            foreach ($this->_cacheDateInsertion as $type => $table)
            {
                foreach ($table as $item => $value)
                {
                    if ($value >= $refTime)
                    {
                        $refTime = $value;
                        $refItem = $item;
                        $refType = $type;
                    }
                }
            }
            if ($refItem != '')
            {
                unset($this->_cache[$refType][$refItem]);
                unset($this->_cacheDateInsertion[$refType][$refItem]);
            }
        }
    }

    private function _getAllCachesSize(): int
    {
        return sizeof($this->_cache);
    }

    private function _getCacheNeedOnePlace(): void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer'))
            return;

        $size = $this->_getAllCachesSize();
        $limit = $this->_sessionBufferLimit;
        if ($size >= $limit)
            $this->_cleanCacheOverflow($size - $limit + 1);
    }

    private function _getCacheNeedCleaning(): void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer'))
            return;

        $size = $this->_getAllCachesSize();
        $limit = $this->_sessionBufferLimit;
        if ($size >= $limit)
            $this->_cleanCacheOverflow($size - $limit);
    }

    private function _checkKnownNodeType(string &$type): bool
    {
        if (in_array($type, self::KNOWN_TYPE))
            return true;
        return false;
    }

    private function _filterNodeType(string &$type): void
    {
        if (!$this->_checkKnownNodeType($type))
            $type = self::TYPE_NODE;
    }

    public function getIsOnCache(string $nid, string $type = ''): bool
    {
        if ($this->_flushCache || $nid == '' || $nid == '0') return false;

        if ($type == '') {
            foreach (self::KNOWN_TYPE as $known) {
                if (isset($this->_cache[$known][$nid])) return true;
            }
        } else {
            $this->_filterNodeType($type);
            if (isset($this->_cache[$type][$nid])) return true;
        }

        return false;
    }

    public function newVirtualNode(): Node
    {
        $nid = bin2hex($this->_cryptoInstance->getRandom(References::VIRTUAL_NODE_SIZE)) . '.none.' . (References::VIRTUAL_NODE_SIZE * 8);
        $this->_metrologyInstance->addLog('new virtual nid ' . $nid, Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'c00832c2');
        $instance = new Node($this->_nebuleInstance, $nid);
        $this->_cache[self::TYPE_NODE][$nid] = $instance;
        $this->_writeCacheTimestamp($nid, self::TYPE_NODE);
        return $instance;
    }

    public function newNode(string $nid, string $type = Cache::TYPE_NODE): Node
    {
        $this->_filterNodeType($type);

        if ($this->getIsOnCache($nid, $type)) {
            $instance = $this->_cache[$type][$nid];
            $this->_writeCacheTimestamp($nid, $type);
        } else {
            switch ($type)
            {
                case self::TYPE_GROUP:
                    $instance = new Group($this->_nebuleInstance, $nid);
                    break;
                case self::TYPE_ENTITY:
                    $instance = new Entity($this->_nebuleInstance, $nid);
                    break;
                case self::TYPE_LOCATION:
                    $instance = new Localisation($this->_nebuleInstance, $nid);
                    break;
                case self::TYPE_CONVERSATION:
                    $instance = new Conversation($this->_nebuleInstance, $nid);
                    break;
                case self::TYPE_CURRENCY:
                    $instance = new Currency($this->_nebuleInstance, $nid);
                    break;
                case self::TYPE_TOKENPOOL:
                    $instance = new TokenPool($this->_nebuleInstance, $nid);
                    break;
                case self::TYPE_TOKEN:
                    $instance = new Token($this->_nebuleInstance, $nid);
                    break;
                case self::TYPE_WALLET:
                    $instance = new Wallet($this->_nebuleInstance, $nid);
                    break;
                default:
                    $type = self::TYPE_NODE;
                    $instance = new Node($this->_nebuleInstance, $nid);
            }
            $this->_writeCacheNodes($instance, $type);
        }
        return $instance;
    }

    public function newEntity(string $nid): Entity
    {
        if ($this->getIsOnCache($nid, Cache::TYPE_ENTITY)) {
            $instance = $this->_cache[Cache::TYPE_ENTITY][$nid];
            $this->_writeCacheTimestamp($nid, Cache::TYPE_ENTITY);
        } else {
            $instance = new Entity($this->_nebuleInstance, $nid);
            $this->_writeCacheNodes($instance, Cache::TYPE_ENTITY);
        }
        return $instance;
    }

    public function newGroup(string $nid): Group
    {
        if ($this->getIsOnCache($nid, Cache::TYPE_GROUP)) {
            $instance = $this->_cache[Cache::TYPE_GROUP][$nid];
            $this->_writeCacheTimestamp($nid, Cache::TYPE_GROUP);
        } else {
            $instance = new Group($this->_nebuleInstance, $nid);
            $this->_writeCacheNodes($instance, Cache::TYPE_GROUP);
        }
        return $instance;
    }

    public function newConversation(string $nid): Conversation
    {
        if ($this->getIsOnCache($nid, Cache::TYPE_CONVERSATION)) {
            $instance = $this->_cache[Cache::TYPE_CONVERSATION][$nid];
            $this->_writeCacheTimestamp($nid, Cache::TYPE_CONVERSATION);
        } else {
            $instance = new Conversation($this->_nebuleInstance, $nid);
            $this->_writeCacheNodes($instance, Cache::TYPE_CONVERSATION);
        }
        return $instance;
    }

    public function newCurrency(string $nid): Currency
    {
        if ($this->getIsOnCache($nid, Cache::TYPE_CURRENCY)) {
            $instance = $this->_cache[Cache::TYPE_CURRENCY][$nid];
            $this->_writeCacheTimestamp($nid, Cache::TYPE_CURRENCY);
        } else {
            $instance = new Currency($this->_nebuleInstance, $nid);
            $this->_writeCacheNodes($instance, Cache::TYPE_CURRENCY);
        }
        return $instance;
    }

    public function newTokenPool(string $nid): TokenPool
    {
        if ($this->getIsOnCache($nid, Cache::TYPE_TOKENPOOL)) {
            $instance = $this->_cache[Cache::TYPE_TOKENPOOL][$nid];
            $this->_writeCacheTimestamp($nid, Cache::TYPE_TOKENPOOL);
        } else {
            $instance = new TokenPool($this->_nebuleInstance, $nid);
            $this->_writeCacheNodes($instance, Cache::TYPE_TOKENPOOL);
        }
        return $instance;
    }

    public function newToken(string $nid): Token
    {
        if ($this->getIsOnCache($nid, Cache::TYPE_TOKEN)) {
            $instance = $this->_cache[Cache::TYPE_TOKEN][$nid];
            $this->_writeCacheTimestamp($nid, Cache::TYPE_TOKEN);
        } else {
            $instance = new Token($this->_nebuleInstance, $nid);
            $this->_writeCacheNodes($instance, Cache::TYPE_TOKEN);
        }
        return $instance;
    }

    public function newBlockLink(string $link, string $type = cache::TYPE_BLOCLINK): blocLinkInterface
    {
        // FIXME
        if (!$this->_flushCache
            && isset($this->_cache[$type][$link])
        ) {
            $this->_cacheDateInsertion[$type][$link] = microtime(true);
            $instance = $this->_cache[$type][$link];
        } else {
            $instance = new BlocLink($this->_nebuleInstance, $link, $type);
            $this->_writeCacheBlockLinks($instance, Cache::TYPE_BLOCLINK);
        }
        return $instance;
    }

    private function _writeCacheTimestamp(string $nid, string $type): void
    {
        $this->_cacheDateInsertion[$type][$nid] = microtime(true);
    }

    private function _writeCacheNodes(Node $instance, string $type): void
    {
        if ($this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer')
            && $instance->getID() != '0'
        ) {
            $this->_getCacheNeedOnePlace();
            $this->_cache[$type][$instance->getID()] = $instance;
            $this->_writeCacheTimestamp($instance->getID(), $type);
        }
    }

    private function _writeCacheBlockLinks(BlocLink $instance, string $type): void
    {
        if ($this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer')
            && !$instance->getNew()
        ) {
            $this->_getCacheNeedOnePlace();
            $this->_cache[$type][$instance->getLID()] = $instance;
            $this->_writeCacheTimestamp($instance->getLID(), $type);
        }
    }

    public function unsetOnCache(string $item, string $type = Cache::TYPE_NODE): bool
    {
        $this->_filterNodeType($type);

        if ($item == '' && isset($this->_cache[$type][$item])){
            unset($this->_cache[$type][$item], $this->_cacheDateInsertion[$type][$item]);
            return true;
        }
        return false;
    }

    public function unsetObjectOnCache(string $id): bool
    {
        return $this->unsetOnCache($id, self::TYPE_NODE);
    }

    public function getCacheObjectSize(): int
    {
        if (isset($this->_cache[self::TYPE_NODE]))
            return sizeof($this->_cache[self::TYPE_NODE]);
        else
            return 0;
    }

    public function unsetEntityOnCache(string $id): bool
    {
        return $this->unsetOnCache($id, self::TYPE_ENTITY);
    }

    public function getCacheEntitySize(): int
    {
        if (isset($this->_cache[self::TYPE_ENTITY]))
            return sizeof($this->_cache[self::TYPE_ENTITY]);
        else
            return 0;
    }

    public function unsetGroupOnCache(string $id): bool
    {
        return $this->unsetOnCache($id, self::TYPE_GROUP);
    }

    public function getCacheGroupSize(): int
    {
        if (isset($this->_cache[self::TYPE_GROUP]))
            return sizeof($this->_cache[self::TYPE_GROUP]);
        else
            return 0;
    }

    public function unsetConversationOnCache(string $id): bool
    {
        return $this->unsetOnCache($id, self::TYPE_CONVERSATION);
    }

    public function getCacheConversationSize(): int
    {
        if (isset($this->_cache[self::TYPE_CONVERSATION]))
            return sizeof($this->_cache[self::TYPE_CONVERSATION]);
        else
            return 0;
    }

    public function unsetCurrencyOnCache(string $id): bool
    {
        return $this->unsetOnCache($id, self::TYPE_CURRENCY);
    }

    public function getCacheCurrencySize(): int
    {
        if (isset($this->_cache[self::TYPE_CURRENCY]))
            return sizeof($this->_cache[self::TYPE_CURRENCY]);
        else
            return 0;
    }

    public function unsetTokenPoolOnCache(string $id): bool
    {
        return $this->unsetOnCache($id, self::TYPE_TOKEN);
    }

    public function getCacheTokenSize(): int
    {
        if (isset($this->_cache[self::TYPE_TOKEN]))
            return sizeof($this->_cache[self::TYPE_TOKEN]);
        else
            return 0;
    }

    public function unsetTokenOnCache(string $id): bool
    {
        return $this->unsetOnCache($id, self::TYPE_TOKENPOOL);
    }

    public function getCacheTokenPoolSize(): int
    {
        if (isset($this->_cache[self::TYPE_TOKENPOOL]))
            return sizeof($this->_cache[self::TYPE_TOKENPOOL]);
        else
            return 0;
    }

    public function unsetWalletOnCache(string $id): bool
    {
        return $this->unsetOnCache($id, self::TYPE_WALLET);
    }

    public function getCacheWalletSize(): int
    {
        if (isset($this->_cache[self::TYPE_WALLET]))
            return sizeof($this->_cache[self::TYPE_WALLET]);
        else
            return 0;
    }



    private function _filterLinkType(string &$type): void
    {
        if ($type != self::TYPE_LINK
            && $type != self::TYPE_TRANSACTION
        )
            $type = self::TYPE_LINK;
    }

    /**
     * Retire le cache d'une transaction.
     * C'est utilisé lorsque l'on modifie une propriété et que l'on souhaite forcer la relecture de la transaction.
     *
     * @param $link string
     * @return boolean
     */
    public function unsetCacheLink(string $link): bool
    {
        return $this->unsetOnCache($link, self::TYPE_LINK);
    }

    /**
     * Retourne le nombre de liens dans le cache.
     *
     * @return integer
     */
    public function getCacheLinkSize(): int
    {
        if (isset($this->_cache[self::TYPE_LINK]))
            return sizeof($this->_cache[self::TYPE_LINK]);
        else
            return 0;
    }
}



// ========================================================================================
//   011_session.php
//   020250215163515
//   1204e9b1679360f792e162f9fd6a6d6a80bd07e702d2df3136a74e4ba368e428.sha2.256

/**
 * Recovery entities class for the nebule library.
 * Must be serialized on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Session extends Functions
{
    const SESSION_SAVED_VARS = array(
        '_flushCache',
    );

    private bool $_flushCache = false;

    /*protected function _initialisation(): void
    {
        $this->_metrologyInstance->addLog('instancing class Session', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '5a444198');
    }*/

    /**
     * Lit la valeur d'une option dans la session php.
     * Si l'option n'est pas renseignée, retourne false.
     *
     * @param string $name
     * @return int|string|bool|null|array
     */
    public function getSessionStore(string $name): array|bool|int|string|null
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        session_start();

        if ($name == ''
            || $this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionOptions') // FIXME this->_configurationInstance = null on wake up.
            || !isset($_SESSION['Option'][$name])
        ) {
            session_write_close();
            return false;
        }
        $val = $_SESSION['Option'][$name];

        session_write_close();

        return $val;
    }

    public function getSessionStoreAsString(string $name): string
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        session_start();

        if ($name == ''
            || $this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionOptions')
            || !isset($_SESSION['Option'][$name])
        )
            $val = '';
        else
            $val = $_SESSION['Option'][$name];

        session_write_close();

        return $val;
    }

    /**
     * Ecrit la valeur d'une option dans la session php.
     *
     * @param string                     $name
     * @param int|bool|array|string|null $content
     * @return boolean
     */
    public function setSessionStore(string $name, int|bool|array|string|null $content): bool
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($name == ''
            || $this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionOptions')
        )
            return false;

        session_start();
        $_SESSION['Option'][$name] = $content;
        session_write_close();
        return true;
    }

    public function setSessionStoreAsString(string $name, string $content): bool
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($name == ''
            || $this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionOptions')
        )
            return false;

        session_start();
        $_SESSION['Option'][$name] = $content;
        session_write_close();
        return true;
    }

    /**
     * Vide les options dans la session php.
     * FIXME
     *
     * @return boolean
     */
    private function _flushSessionStore(): bool
    {
        $this->_metrologyInstance->addLog('Flush session store', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '1b83a0d1');
        session_start();
        unset($_SESSION['Option']);
        session_write_close();
        return true;
    }

    /**
     * Lit la valeur d'un contenu mémorisé dans la session php.
     * Si le contenu mémorisé n'est pas renseigné, retourne false.
     * FIXME
     *
     * @param string $name
     * @return int|string|bool|null
     */
    private function _getSessionBuffer(string $name): bool|int|string|null
    {
        session_start();

        if ($name == ''
            || $this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer')
            || !isset($_SESSION['Buffer'][$name])
        ) {
            session_write_close();
            return false;
        }

        $val = unserialize($_SESSION['Buffer'][$name]);
        session_write_close();
        return $val;
    }

    /**
     * Ecrit la valeur d'un contenu mémorisé dans la session php.
     * Le nombre de contenus mémorisés n'est pas comptabilisé par cette fonction.
     * FIXME
     *
     * @param string               $name
     * @param bool|int|string|null $content
     * @return boolean
     */
    private function _setSessionBuffer(string $name, bool|int|string|null $content): bool
    {
        if ($name == ''
            || $this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer')
        )
            return false;

        session_start();
        $_SESSION['Buffer'][$name] = serialize($content);
        session_write_close();
        return true;
    }

    public function setSessionStoreAsEntity(string $name, ?Node $instance): void {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($instance !== null)
            $this->setSessionStore($name, serialize($instance));
    }

    public function getSessionStoreAsEntity(string $name): ?Node {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $instance = $this->_getEntityFromSession($name);
        if ($instance === null || !$instance instanceof Entity)
            $instance = new Entity($this->_nebuleInstance, '0');
        $this->_metrologyInstance->addLog('get entity for ' . $name . ' from session EID=' . $instance->getID(), Metrology::LOG_LEVEL_AUDIT, __METHOD__, '19f3e422');
        return $instance;
    }

    private function _getEntityFromSession(string $name): ?Node {
        session_start();
        if ($this->_flushCache
            || !$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer')
            || !isset($_SESSION['Buffer'][$name])
            || !is_string($_SESSION['Buffer'][$name])
        ) {
            session_write_close();
            return null;
        }
        try {
            $instance = unserialize($_SESSION['Option'][$name]);
            $instance->setEnvironmentLibrary($this->_nebuleInstance);
            $instance->initialisation();
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog('unable to restore entity ' . $name . ' from session', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'b6dc60cc');
            return null;
        }
        session_write_close();
        return $instance;
    }

    /**
     * Supprime un contenu mémorisé dans la session php.
     * FIXME
     *
     * Fonction désactivée !
     *
     * @param string $name
     * @return boolean
     */
    public function unsetSessionBuffer(string $name): bool
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
/*        if ($name == ''
            || $this->_flushCache
            || !$this->_configuration->getOption('permitSessionBuffer')
        )
            return false;

        session_start();
        if (isset($_SESSION['Buffer'][$name]))
            unset($_SESSION['Buffer'][$name]);
        session_write_close();*/
        return true;
    }
}



// ========================================================================================
//   012_ticketing.php
//   020250215163515
//   a3546bee0a1984c777e6235abc2596d37d0ed341ff107b2669a5bc0b3cd920f8.sha2.256

/**
 * Configuration class for the nebule library.
 * Must be serialized on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Ticketing extends Functions
{
    const SESSION_SAVED_VARS = array(
        '_validTicket',
    );

    const TICKET_SIZE = 256; // Octet

    private bool $_validTicket = false;

    protected function _initialisation(): void
    {
        $this->_findActionTicket();
    }



    /**
     * Extract ticket from URL and check validity.
     *
     * @return void
     */
    private function _findActionTicket(): void
    {
        $this->_metrologyInstance->addLog('find ticket', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_configurationInstance->getOptionAsBoolean('permitActionWithoutTicket')) {
            $this->_metrologyInstance->addLog('check ticket: permitActionWithoutTicket=true', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'd767b2ca');
            $this->_validTicket = true;
            return;
        }

        $ticket = $this->getFilterInput(References::COMMAND_SELECT_TICKET);
        if (strlen($ticket) < self::TICKET_SIZE || !ctype_xdigit($ticket))
            $ticket = '';

        // Verify ticket.
        if ($ticket == '') {
            // No ticket or null, no action.
            $this->_metrologyInstance->addLog('check ticket: none', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'd396f0a9');
            $this->_validTicket = false;
            return;
        }
        session_start();
        if (isset($_SESSION['Ticket'][$ticket])
            && $_SESSION['Tickets'][$ticket] !== true
        ) {
            // Ticket already used, refused, no action.
            $this->_metrologyInstance->addLog('check ticket: replay ' . $ticket, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'd516f0d4');
            $this->_validTicket = false;
            $_SESSION['Ticket'][$ticket] = false;
        } elseif (isset($_SESSION['Ticket'][$ticket])
            && $_SESSION['Tickets'][$ticket] === true
        ) {
            // Valid and not already used ticket, accepted.
            $this->_metrologyInstance->addLog('check ticket: valid ' . $ticket, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '7083b07d');
            $this->_validTicket = true;
            $_SESSION['Tickets'][$ticket] = false;
        } else {
            // Unknown ticket, refused, no action.
            $this->_metrologyInstance->addLog('check ticket: error ' . $ticket, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'b221e760');
            $this->_validTicket = false;
        }
        session_write_close();
    }

    /**
     * Return a URL part with ticket.
     *
     * @return string
     */
    public function getActionTicketCommand(): string
    {
        return '&' . References::COMMAND_SELECT_TICKET . '=' . $this->getActionTicketValue();
    }

    /**
     * Return the value of a ticket to validate an action after. The value is stored to be compared after and refuse
     * unvalidated action or double played ticket. The value must be included on URL (GET or POST).
     *
     * @return string
     */
    public function getActionTicketValue(): string
    {
        $this->_metrologyInstance->addLog('get ticket', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $data = $this->_cryptoInstance->getRandom(self::TICKET_SIZE / 8, Crypto::RANDOM_PSEUDO);
        $ticket = bin2hex($data);
        $this->_metrologyInstance->addLog('new ticket ' . $ticket, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '8957de86');
        session_start();
        $_SESSION['Tickets'][$ticket] = true;
        session_write_close();
        return $ticket;
    }

    /**
     * Return if a valide ticket have been detected on URL.
     *
     * @return boolean
     */
    public function checkActionTicket(): bool
    {
        return $this->_validTicket;
    }

}



// ========================================================================================
//   013_documentation.php
//   020250215163515
//   f560ea1385f7a59fd479aa1012091275e72fd9791ef15598bd236aa9fdb86110.sha2.256

/**
 * Documentation class for the nebule library.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Documentation extends Functions
{
	/*protected function _initialisation(): void
    {
		// Nothing
	}*/

	public function display_content(): void
    {
?>

<h1>Table des matières</h1>
<ul>
    <?php
        Documentation::echoDocumentationTitles();
        ?>

    <li><a href="#o">O / Objet</a>
        <ul>

        <?php
        Node::echoDocumentationTitles();
        Group::echoDocumentationTitles();
        Entity::echoDocumentationTitles();
        Localisation::echoDocumentationTitles();
        Conversation::echoDocumentationTitles();
        Currency::echoDocumentationTitles();
        TokenPool::echoDocumentationTitles();
        Token::echoDocumentationTitles();
        Wallet::echoDocumentationTitles();
        Applications::echoDocumentationTitles();
        ?>

        </ul>
    </li>

        <?php
        BlocLink::echoDocumentationTitles();
        LinkRegister::echoDocumentationTitles();
        Transaction::echoDocumentationTitles();
        Crypto::echoDocumentationTitles();
        Social::echoDocumentationTitles();
        Metrology::echoDocumentationTitles();
        ?>

</ul>

<?php
        Documentation::echoDocumentationCore();
        Node::echoDocumentationCore();
        Group::echoDocumentationCore();
        Entity::echoDocumentationCore();
        Localisation::echoDocumentationCore();
        Conversation::echoDocumentationCore();
        Currency::echoDocumentationCore();
        TokenPool::echoDocumentationCore();
        Token::echoDocumentationCore();
        Wallet::echoDocumentationCore();
        Applications::echoDocumentationCore();
        Modules::echoDocumentationCore();
        BlocLink::echoDocumentationCore();
        LinkRegister::echoDocumentationCore();
        Transaction::echoDocumentationCore();
        Crypto::echoDocumentationCore();
        Social::echoDocumentationCore();
        Metrology::echoDocumentationCore();
    }

    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#f">F / Fondations</a></li>

        <?php
    }

    static public function echoDocumentationCore(): void
    {
        ?>

        <?php Displays::docDispTitle(1, 'f', 'Fondations'); ?>
        <p>Le projet nebule est un moteur de gestion d'objets utilisant une combinaison des principes de
            <a href="https://en.wikipedia.org/wiki/Distributed_hash_table">DHT</a> et de
            <a href="https://en.wikipedia.org/wiki/Resource_Description_Framework">RDF</a>.
            Cela peut être vu comme une forme de <a href="https://en.wikipedia.org/wiki/Graph_database">base de donnée
            graphe</a> orienté de type <a href="https://en.wikipedia.org/wiki/Hypergraph">hypergraphe</a>.</p>
        <p>Les objets sont les contenants de tout ce que l'on peut manipuler sous forme numérique.
            Les objets, tels les sommets d'un graphe, sont liés par des liens, tel les arêtes du graphe.
            Cette base de données graphe implémente une cryptographie évolutive afin de faire émerger de la confiance
            dans les objets manipulés.
            Mais le côté technique n'est pas une fin en soi. La forme des liens permet de faire émerger un côté social,
            c'est-à-dire du relationnel entre les humains, et permet ainsi d'apporter du sens aux objets et aux liens
            qui les relient.</p>

        <?php
	}
}



// ========================================================================================
//   100_io_interface.php
//   020241028173440
//   b5bb3354af72ab87d511f74637d971d5a9d67dc54ae06c9fd01f71ea4d8dad6d.sha2.256

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Les classes qui implémentent l'interface ioInterface permettent l'accès bas niveau aux
 *   objets nebule et à leurs liens.
 *
 * Elles permettent de vérifier la présence des objets nebule et leurs liens,
 *   de les lire, de les écrire, et de supprimer leurs contenus.
 *
 * Chaque objet nebule est référencé par une chaine de caractères contenant l'ID en
 *   hexadécimal de l'objet.
 *
 * On ne peut utiliser directement un objet (instance) ici, il faut
 *   préalablement en extraire l'ID hexadécimal sous forme de texte.
 */
interface ioInterface
{
    /**
     * Constructeur.
     *
     * @param nebule $nebuleInstance
     */
    public function __construct(nebule $nebuleInstance);



    // Fonctions de gestion des modules.

    /**
     * Retourne le type de système de fichiers.
     *
     * @return string
     */
    //public function getType(): string;

    /**
     * Retourne l'état de préparation'.
     *
     * @return bool
     */
    public function getReady(): bool;

    /**
     * Retourne la chaine de filtre de ce type de FS.
     *
     * @return string
     */
    public function getFilterString(): string;

    /**
     * Retourne le mode de lecture/écriture RO/RW.
     *
     * @return string
     */
    public function getMode(): string;

    /**
     * Retourne la chaine de localisation par défaut.
     *
     * @return string
     */
    public function getLocalisation(): string;

    /**
     * Initialise la clé de transcodage des fichiers de liens dissimulés.
     *
     * @param string $key
     * @return void
     */
    public function setFilesTranscodeKey(string &$key): void;

    /**
     * Supprime la clé de transcodage des fichiers de liens dissimulés.
     *
     * @return void
     */
    public function unsetFilesTranscodeKey(): void;

    /**
     * Retourne l'ID de l'entité locale de l'instance.
     *
     * @param string $url
     * @return string
     */
    public function getInstanceEntityID(string $url = ''): string;



    // Fonctions d'auto-test.

    /**
     * Vérifie l'arborescence des liens.
     *
     * @param string $url
     * @return boolean
     */
    public function checkLinksDirectory(string $url = ''): bool;

    /**
     * Vérifie l'arborescence des objets.
     *
     * @param string $url
     * @return boolean
     */
    public function checkObjectsDirectory(string $url = ''): bool;

    /**
     * Vérifie les capacité de lecture de l'arborescence des liens.
     *
     * @param string $url
     * @return boolean
     */
    public function checkLinksRead(string $url = ''): bool;

    /**
     * Vérifie les capacité d'écriture de l'arborescence des liens.
     *
     * @param string $url
     * @return boolean
     */
    public function checkLinksWrite(string $url = ''): bool;

    /**
     * Vérifie les capacité de lecture de l'arborescence des objets.
     *
     * @param string $url
     * @return boolean
     */
    public function checkObjectsRead(string $url = ''): bool;

    /**
     * Vérifie les capacité d'écriture de l'arborescence des objets.
     *
     * @param string $url
     * @return boolean
     */
    public function checkObjectsWrite(string $url = ''): bool;



    // Fonctions de test de présence.

    /**
     * Indique true si l'objet a des liens, ou false sinon.
     * Attend en entrée une chaine avec l'ID de l'objet.
     *
     * @param string $oid
     * @param string $url
     * @return boolean
     */
    public function checkLinkPresent(string $oid, string $url = ''): bool;

    /**
     * Indique true si l'objet est présent, ou false sinon.
     * Attend en entrée une chaine avec l'ID de l'objet.
     *
     * @param string $oid
     * @param string $url
     * @return boolean
     */
    public function checkObjectPresent(string $oid, string $url = ''): bool;



    // Fonctions de lecture.

    /**
     * Lit les liens de l'objet. Retourne un tableau des liens lus, même vide.
     * Attend en entrée une chaine avec l'ID de l'objet.
     *
     * @param string $oid
     * @param string $url
     * @param int    $offset
     * @return array
     */
    public function getBlockLinks(string $oid, string $url = '', int $offset = 0): array;

    /**
     * Lit les liens dissimulés de l'entité dite destinataire. Retourne un tableau des liens lus, même vide.
     * Attend en entrée une chaine avec l'ID de l'entité et si besoin une chaine avec l'ID du signataire source.
     * Si le signataire n'est pas précisé, il doit être positionné à 0.
     * Dans ce cas la recherche se fera sur tous les signataires qui ont générés des liens dissimulés pour l'entité destinataire.
     *
     * @param string $entity
     * @param string $signer
     * @param string $url
     * @return array
     */
    public function getObfuscatedLinks(string $entity, string $signer = '0', string $url = ''): array;

    /**
     * Lit le contenu de l'objet. Retourne le contenu lu ou false si erreur.
     *
     * @param string $oid
     * @param int    $maxsize
     * @param string $url
     * @return string|boolean
     */
    public function getObject(string $oid, int $maxsize = 0, string $url = '');



    // Fonctions d'écriture.

    /**
     * Ecrit un lien de l'objet. Retourne le nombre d'octets écrits ou false si erreur.
     *
     * @param string $oid
     * @param string $link
     * @param string $url
     * @return boolean
     */
    public function setBlockLink(string $oid, string &$link, string $url = ''): bool;

    /**
     * Write data to an object.
     *
     * @param string $oid
     * @param string $data
     * @param string $url
     * @return boolean
     */
    public function setObject(string $oid, string &$data, string $url = ''): bool;

    

    // Fonctions de suppression.

    /**
     * Supprime la ligne d'un lien dans les liens d'un objet.
     *
     * @param string $oid
     * @param string $link
     * @param string $url
     * @return boolean
     */

    public function unsetLink(string $oid, string &$link, string $url = ''): bool;

    /**
     * Supprime tous les liens d'un objet.
     *
     * @param string $oid
     * @param string $url
     * @return boolean
     */

    public function flushLinks(string $oid, string $url = ''): bool;

    /**
     * Supprime le contenu d'un objet. Retourne true si la suppression a réussi ou false si erreur.
     * Attend en entrée une chaine avec l'ID de l'objet.
     *
     * @param string $oid
     * @param string $url
     * @return boolean
     */
    public function unsetObject(string $oid, string $url = ''): bool;
}



// ========================================================================================
//   101_io.php
//   020250215163515
//   a4279edcd98e3ce12349111c0c8731825b412d2bbbd73ad2e1885b2c812163db.sha2.256

/**
 * La classe io.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * C'est une classe qui ne fait aucune action par elle-même.
 * Elle recense les classes de communication pour différents protocoles.
 * Elle est ensuite utilisée comme routeur pour recevoir les requêtes et les rediriger vers
 *   les bonnes classes par rapport aux protocoles utilisés dans les requêtes...
 */
class io extends Functions implements ioInterface
{
    const DEFAULT_CLASS = 'disk';
    const FILTER = '';
    const LOCALISATION = '';

    protected ?ioInterface $_defaultInstance = null;
    private array $_listLocalisations = array();
    private array $_listFilterStrings = array();
    private array $_listModes = array();
    protected string $_filesTranscodeKey = '';

    public function __sleep()
    {
        $this->_filesTranscodeKey = '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000';
        $this->_filesTranscodeKey = '';
        return array();
    }

    public function __destruct()
    {
        $this->_filesTranscodeKey = '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000';
        $this->_filesTranscodeKey = '';
    }

    public function __toString(): string
    {
        return self::TYPE;
    }

    protected function _initialisation(): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $myClass = get_class($this);
        $size = strlen($myClass);
        $list = get_declared_classes();
        foreach ($list as $class) {
            if (substr($class, 0, $size) == $myClass && $class != $myClass) {
                $this->_metrologyInstance->addLog('add class ' . $class, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'b8f416f7');
                $instance = $this->_initSubInstance($class);
                $filterString = $instance->getFilterString();
                $url = $instance->getLocalisation();
                $mode = $instance->getMode();
                $this->_listLocalisations[$url] = $instance;
                $this->_listFilterStrings[$instance::TYPE] = $filterString;
                $this->_listModes[$instance::TYPE] = $mode;
            }
        }
        $this->_defaultInstance = $this->_getDefaultSubInstance('ioLibrary');
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getFilterString()
     */
    public function getFilterString(): string
    {
        //if (self::FILTER == '' && ! is_null($this->_defaultInstance))
        //    return $this->_defaultInstance->getFilterString();
        return get_class($this)::FILTER;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getLocalisation()
     */
    public function getLocalisation(): string
    {
        if (get_class($this)::LOCALISATION == '' && ! is_null($this->_defaultInstance))
            return $this->_defaultInstance->getLocalisation();
        return get_class($this)::LOCALISATION;
    }

    private function _getInstanceByURL(string $url): ioInterface
    {
        $return = $this->_defaultInstance;
        foreach ($this->_listFilterStrings as $type => $pattern)
            if (preg_match($pattern, $url))
                $return =  $this->_listInstances[$type];
        if (!is_a($return, 'Nebule\Library\io')) {
            $return = $this;
        }
        return $return;
    }

    public function getModulesList(): array
    {
        return $this->_listTypes;
    }

    public function getModuleByType(string $type): ioInterface
    {
        if (isset($this->_listInstances[$type]))
            return $this->_listInstances[$type];
        return $this->_defaultInstance;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getMode()
     */
    public function getMode(): string
    {
        return $this->_defaultInstance->getMode();
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setFilesTranscodeKey()
     */
    public function setFilesTranscodeKey(string &$key): void
    {
        // Fait le tour des modules IO pour injecter la clé.
        foreach ($this->_listClasses as $instance)
            $instance->setFilesTranscodeKey($key);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetFilesTranscodeKey()
     */
    public function unsetFilesTranscodeKey(): void
    {
        // Fait le tour des modules IO pour supprimer la clé.
        foreach ($this->_listClasses as $instance)
            $instance->unsetFilesTranscodeKey();
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getInstanceEntityID()
     */
    public function getInstanceEntityID(string $url = ''): string
    {
        return $this->_defaultInstance->getInstanceEntityID($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksDirectory()
     */
    public function checkLinksDirectory(string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->checkLinksDirectory($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsDirectory()
     */
    public function checkObjectsDirectory(string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->checkObjectsDirectory($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksRead()
     */
    public function checkLinksRead(string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->checkLinksRead($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksWrite()
     */
    public function checkLinksWrite(string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->checkLinksWrite($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsRead()
     */
    public function checkObjectsRead(string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->checkObjectsRead($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsWrite()
     */
    public function checkObjectsWrite(string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->checkObjectsWrite($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinkPresent()
     */
    public function checkLinkPresent(string $oid, string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->checkLinkPresent($oid, $url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectPresent()
     */
    public function checkObjectPresent(string $oid, string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->checkObjectPresent($oid, $url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getBlockLinks()
     */
    public function getBlockLinks(string $oid, string $url = '', int $offset = 0): array
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->getBlockLinks($oid, $url, $offset);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getObfuscatedLinks()
     */
    public function getObfuscatedLinks(string $entity, string $signer = '0', string $url = ''): array
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->getObfuscatedLinks($entity, $signer, $url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getObject()
     */
    public function getObject(string $oid, int $maxsize = 0, string $url = '')
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->getObject($oid, $maxsize, $url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setBlockLink()
     */
    public function setBlockLink(string $oid, string &$link, string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->setBlockLink($oid, $link, $url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setObject()
     */
    public function setObject(string $oid, string &$data, string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->setObject($oid, $data, $url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetLink()
     */
    public function unsetLink(string $oid, string &$link, string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->unsetLink($oid, $link, $url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::flushLinks()
     */
    public function flushLinks(string $oid, string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->flushLinks($oid, $url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetObject()
     */
    public function unsetObject(string $oid, string $url = ''): bool
    {
        $instance = $this->_getInstanceByURL($url);
        return $instance->unsetObject($oid, $url);
    }
}



// ========================================================================================
//   102_io_disk.php
//   020250215163515
//   9874daecd36446c703265aced85eaa4084dcc4ae36f42c57691ae81dbc56bc3a.sha2.256

/**
 * La classe ioDisk.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class ioDisk extends io implements ioInterface
{
    const TYPE = 'Disk';
    const FILTER = '/^\//';
    const LOCALISATION = 'file://';

    private int $_maxLink = 0;
    private int $_maxData = 0;
    private string $_mode = '';

    protected function _initialisation(): void
    {
        if (!file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER))
            mkdir(nebule::NEBULE_LOCAL_LINKS_FOLDER);
        if (!file_exists(nebule::NEBULE_LOCAL_OBJECTS_FOLDER))
            mkdir(nebule::NEBULE_LOCAL_OBJECTS_FOLDER);

        $this->_maxLink = $this->_configurationInstance->getOptionAsInteger('ioReadMaxLinks');
        $this->_maxData = $this->_configurationInstance->getOptionAsInteger('ioReadMaxData');
        $this->_metrologyInstance->addLog('instancing class ioDisk', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'e4958dd2');
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getMode()
     */
    public function getMode(): string
    {
        if ($this->_mode == '') {
            $this->_mode = 'RO';
            if ($this->checkObjectsWrite()
                && $this->checkLinksWrite()
            )
                $this->_mode = 'RW';
        }
        return $this->_mode;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setFilesTranscodeKey()
     */
    public function setFilesTranscodeKey(string &$key): void
    {
        $this->_filesTranscodeKey = $key;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetFilesTranscodeKey()
     */
    public function unsetFilesTranscodeKey(): void
    {
        $this->_filesTranscodeKey = '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000';
        $this->_filesTranscodeKey = '';
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getLocalisation()
     */
    public function getLocalisation(): string
    {
        return self::LOCALISATION;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getInstanceEntityID()
     */
    public function getInstanceEntityID(string $url = ''): string
    {
        $filesize = filesize(nebule::NEBULE_LOCAL_ENTITY_FILE);
        return file_get_contents(nebule::NEBULE_LOCAL_ENTITY_FILE, false, null, 0, $filesize);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksDirectory()
     */
    public function checkLinksDirectory(string $url = ''): bool
    {
        if (!file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER)
            || !is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER)
        )
            return false;

        return true;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsDirectory()
     */
    public function checkObjectsDirectory(string $url = ''): bool
    {
        if (!file_exists(nebule::NEBULE_LOCAL_OBJECTS_FOLDER)
            || !is_dir(nebule::NEBULE_LOCAL_OBJECTS_FOLDER)
        ) {
            return false;
        }

        return true;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksRead()
     */
    public function checkLinksRead(string $url = ''): bool
    {
        $file = nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $this->_configurationInstance->getOptionAsString('puppetmaster');

        if (!file_exists($file))
            return false;
        $data = file_get_contents($file, false, null, 0, 16);
        if ($data === false)
            return false;

        return true;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksWrite()
     */
    public function checkLinksWrite(string $url = ''): bool
    {
        $file = nebule::NEBULE_LOCAL_LINKS_FOLDER . '/0';
        $resultDelete = false;

        // Test la création si pas déjà présent.
        if (file_exists($file))
            $resultCreate = true;
        else {
            $resultCreate = file_put_contents(
                $file,
                'checkLinksWrite');
        }

        // Test la suppression si le fichier a pu être créé.
        if (file_exists($file))
            unlink($file);
        if (!file_exists($file))
            $resultDelete = true;

        return ($resultCreate && $resultDelete);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsRead()
     */
    public function checkObjectsRead(string $url = ''): bool
    {
        $file = nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $this->_configurationInstance->getOptionAsString('puppetmaster');

        if (!file_exists($file))
            return false;
        $data = file_get_contents($file, false, null, 0, 16);
        if ($data === false)
            return false;

        return true;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsWrite()
     */
    public function checkObjectsWrite(string $url = ''): bool
    {
        $file = nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/0';
        $resultDelete = false;

        // Test la création si pas déjà présent.
        if (file_exists($file))
            $resultCreate = true;
        else {
            $resultCreate = file_put_contents(
                $file,
                'checkObjectsWrite');
        }

        // Test la suppression si le fichier a pu être créé.
        if (file_exists($file))
            unlink($file);
        if (!file_exists($file))
            $resultDelete = true;

        return ($resultCreate && $resultDelete);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinkPresent()
     */
    public function checkLinkPresent(string $oid, string $url = ''): bool
    {
        if (!Node::checkNID($oid, false)
            || !file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)
            || is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)
        )
            return false;

        return true;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectPresent()
     */
    public function checkObjectPresent(string $oid, string $url = ''):bool
    {
        if (!Node::checkNID($oid, false)
            || !file_exists(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid)
            || is_dir(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid)
        )
            return false;

        return true;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getBlockLinks()
     */
    public function getBlockLinks(string $oid, string $url = '', int $offset = 0): array
    {
        /**
         * Compteur de liens lus.
         * @var double $linkRead
         */
        $linkRead = 0;

        /**
         * Table des liens lus.
         */
        $linkList = array();

        if (!Node::checkNID($oid, false)
            || !file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)
            || is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)
        )
            return array();

        /**
         * Descripteur du fichier en cours de lecture.
         * @var finfo $file
         */
        $file = file(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid);
        foreach ($file as $link) {
            $linkList[$linkRead] = $link;
            // Vérifie que le nombre maximum de liens à lire n'est pas dépassé.
            $linkRead++;
            if ($linkRead > $this->_maxLink)
                break 1;
        }

        return $linkList;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getObfuscatedLinks()
     */
    public function getObfuscatedLinks(string $entity, string $signer = '0', string $url = ''): array
    {
        $linksRead = 0;
        $fileList = array();
        $linksList = array();

        // Vérifie la présence d'une clé de transcodage des noms des fichiers.
        if ($this->_filesTranscodeKey == '')
            return $linksList;

        // Vérifie l'entité destinataire des liens dissimulés.
        if (!Node::checkNID($entity, false)
            || !file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $entity)
            || is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $entity)
        )
            return $linksList;

        // Vérifie l'entité signataire des liens dissimulés.
        if (!is_string($signer)
            || $signer == ''
            || !file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $signer)
            || is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $signer)
        )
            $signer = '0';

        if ($signer == '0') {
            // Si aucun signataire particulier n'est demandé, lit tous les fichiers de liens attachés à l'entité destinataire.
            $fileList = glob(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $entity . '-*', GLOB_NOSORT);

            // Vérifie la validité du nom du fichier.
            /* TODO
             * foreach ($list as $l) {
             * if (preg_match("~^a+\.php$~",$file))
             * $files[] = $l;
             * }
             */
        } elseif (file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $entity . '-' . $signer)
            && !is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $entity . '-' . $signer)
        ) {
            // Si un signataire particulier est demandé, lit uniquement le fichier de liens concerné.
            $fileList[0] = $entity . '-' . $signer;
        } else {
            // Sinon il n'y a pas de liens dissimulés entre ces deux entités.
            return $linksList;
        }

        // Pour chaque fichier listé, lit les liens.
        foreach ($fileList as $filename) {
            $file = file(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $filename);
            foreach ($file as $link) {
                // @todo vérifier regex que le lien est de type c ...
                if (true)
                    $linksList[$linksRead] = $link;
                // Vérifie que le nombre maximum de liens à lire n'est pas dépassé.
                $linksRead++;
                if ($linksRead > $this->_maxLink)
                    break 1;
            }
        }

        return $linksList;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getObject()
     */
    public function getObject(string $oid, int $maxsize = 0, string $url = '')
    {
        if (!Node::checkNID($oid, false)
            || !file_exists(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid)
            || is_dir(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid)
        )
            return false;

        if ($maxsize == 0)
            $maxsize = $this->_maxData;

        $filesize = filesize(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid);
        if ($filesize > $maxsize)
            $filesize = $maxsize;

        return file_get_contents(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid, false, null, 0, $filesize);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setBlockLink()
     */
    public function setBlockLink(string $oid, string &$link, string $url = ''): bool
    {
        // Vérifie les arguments.
        if (!Node::checkNID($oid, false)
            || $link == ''
            || !$this->_checkFileLink($oid, $link)
            || !$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || $this->getMode() != 'RW'
            || is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)
        )
            return false;

        if (file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)) {
            // Si le fichier de lien est présent, teste la présence du lien.
            // Extrait un tableau avec une ligne par élément.
            $l = file(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid);
            foreach ($l as $k) {
                // Si déjà présent, on quitte.
                if (trim($k) == trim($link))
                    return true;
            }
        /*} else {
            // Si le fichier de lien n'est pas présent, le crée.
            file_put_contents(
                nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid,
                'nebule/liens/version/' . $this->_configuration->getOptionUntyped('defaultLinksVersion') . "\n");*/
        }

        if (file_put_contents(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid, $link . "\n", FILE_APPEND) !== false)
            return true;

        $this->_mode = 'RO';
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setObject()
     */
    public function setObject(string $oid, string &$data, string $url = ''): bool
    {
        if (!Node::checkNID($oid, false)
            || !$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            || $this->getMode() != 'RW'
        )
            return false;

        if (file_exists(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid))
            return true;
        if (file_put_contents(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid, $data) !== false) {
            $this->_metrologyInstance->addLog('ok write oid=' . $oid, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'e2f2baa1');
            return true;
        }

        $this->_mode = 'RO';
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetObject()
     */
    public function unsetObject(string $oid, string $url = ''): bool
    {
        if (!Node::checkNID($oid, false)
            || !$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            || $this->getMode() != 'RW'
            || is_dir(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid)
        )
            return false;

        if (!file_exists(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid))
            return true;

        // Essaye de supprimer le fichier de l'objet.
        unlink(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid);

        if (file_exists(nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid)) {
            $this->_mode = 'RO';
            return false;
        }
        return true;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetLink()
     */
    public function unsetLink(string $oid, string &$link, string $url = ''): bool
    {
        if (!Node::checkNID($oid, false)
            || !$this->_checkFileLink($oid, $link)
            || $link == ''
            || !$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || $this->getMode() != 'RW'
            || is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)
        )
            return false;

        // Prépare le fichier temporaire de travail des liens.
        if (!file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid . '.rmlnk'))
            return true;

        // TODO

        return true;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::flushLinks()
     */
    public function flushLinks(string $oid, string $url = ''): bool
    {
        if (!Node::checkNID($oid, false)
            || !$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || $this->getMode() != 'RW'
            || is_dir(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)
        )
            return false;

        if (!file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid))
            return true;

        // Essaye de supprimer le fichier des liens de l'objet.
        unlink(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid);

        if (file_exists(nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid)) {
            $this->_mode = 'RO';
            return false;
        }
        return true;
    }

    /**
     * Retourne l'identifiant traduit d'un objet en fonction de la clé de translation.
     * La traduction se fait par la prise d'empreinte de la concaténation de l'identifiant de l'objet, de l'identifiant de l'entité et de la clé de translation.
     * L'empreinte sur juste l'identifiant de l'objet est déjà non réversible en elle-même.
     * Même sans clé de translation, la translation varie d'une entité à l'autre. Et c'est pareil si deux enttiés utilisent la même clé de translation.
     * La valeur retournée dépend aussi de l'algorithme utilisé, c'est à dire celui par défaut pour les prises d'empreinte.
     * La fonction est non réversible.
     *
     * TODO à revoir avec ajout d'une option TranslateLinkHashAlgorithm
     *
     * @param string $id
     * @return string
     */
    private function _getTranlateID(string $id): string
    {
        return $this->_nebuleInstance->getCryptoInstance()->hash($id . $this->_entitiesInstance->getCurrentEntityID() . $this->_filesTranscodeKey);
    }

    /**
     * Vérification du fichier de liens que l'on doit utiliser.
     * Si le lien est de type c, le fichier à la forme "hash-hash".
     * Si non il a la forme "hash".
     *
     * TODO à revoir !
     *
     * @param string $oid
     * @param string $link
     * @return boolean
     */
    private function _checkFileLink(string &$oid, string &$link): bool
    {
        /**
         * Indice du champs lu, de 1 à 7.
         */
        $j = 1;

        /**
         * Action detectée.
         */
        $action = '';

        /**
         * Première lecture des champs, premier champs.
         * @var string $e
         */
        $e = strtok(trim($link), '_');

        // Extrait si lien type c.
        while ($e !== false) {
            if ($j == 4) {
                $action = trim($e);
            }
            if ($j < 8) {
                // Lecture de la suite des champs, champs suivant.
                $e = strtok('_');
            } else {
                // Ne doit pas avoir plus de 7 champs.
                return false;
            }
            $j++;
        }

        // Vérifie l'objet si lien d'offuscation ou non.
        if ($action == 'c') {
            $hashentsign = '';
            $hashentdest = '';
            $j = 1;
            $e = strtok(trim($link), '-');
            // Extrait les deux hashs.
            while ($e !== false) {
                if ($j == 1) {
                    $hashentsign = trim($e);
                } else {
                    $hashentdest = trim($e);
                }
                if ($j < 3) {
                    // Lecture de la suite des champs, champs suivant.
                    $e = strtok('-');
                } else {
                    // Ne doit pas avoir plus de 2 champs.
                    return false;
                }
                $j++;
            }

            if ($hashentsign = ''
                || $hashentdest = ''
                || $hashentsign . '-' . $hashentdest != $oid
            ) {
                return false;
            }
        }

        // Si on arrive là c'est que c'est bon.
        return true;
    }
}



// ========================================================================================
//   103_io_network_http.php
//   020241016180038
//   e59c8bc1a35bb8c2617342fca2e344547f4f816f4208ce48123bb150d9123b21.sha2.256

/**
 * La classe ioNetworkHTTP.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class ioNetworkHTTP extends io implements ioInterface
{
    const TYPE = 'HTTP';
    const FILTER = '/^http:/i';
    const LOCALISATION = 'http://localhost';

    private int $_maxLink = 0;
    private int $_maxData = 0;
    private string $_defaultLocalisation = '';

    protected function _initialisation(): void
    {
        global $nebuleLibVersion;

        $this->_maxLink = $this->_configurationInstance->getOptionAsInteger('ioReadMaxLinks');
        $this->_maxData = $this->_configurationInstance->getOptionAsInteger('ioReadMaxData');
        // Détermination de l'URL par défaut.
        //$this->_defaultLocalisation = self::LOCALISATION;
        $this->_defaultLocalisation = 'http' . '://' . $_SERVER['SERVER_NAME'];
        // Environnement PHP.
        ini_set('allow_url_fopen', 'true');
        ini_set('allow_url_include', 'true');
        ini_set('user_agent', 'nebule/ioHTTP/' . $nebuleLibVersion);
        ini_set('default_socket_timeout', $this->_configurationInstance->getOptionAsString('ioTimeout'));
        $this->_metrologyInstance->addLog('instancing class ioNetworkHTTP', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '024f57bf');
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getMode()
     */
    public function getMode(): string
    {
        return 'RO';
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setFilesTranscodeKey()
     */
    public function setFilesTranscodeKey(string &$key): void
    {
        $this->_filesTrancodeKey = $key;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetFilesTranscodeKey()
     */
    public function unsetFilesTranscodeKey(): void
    {
        $this->_filesTrancodeKey = '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000';
        $this->_filesTrancodeKey = '';
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getLocalisation()
     */
    public function getLocalisation(): string
    {
        //return self::LOCALISATION;
        return $this->_defaultLocalisation;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getInstanceEntityID()
     */
    public function getInstanceEntityID(string $url = ''): string
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_ENTITY_FILE;
        if ($this->_checkExistOverHTTP($url))
            return file_get_contents($url);
        return '0';
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksDirectory()
     */
    public function checkLinksDirectory(string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_LINKS_FOLDER . '/';
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsDirectory()
     */
    public function checkObjectsDirectory(string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/';
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksRead()
     */
    public function checkLinksRead(string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $this->_configurationInstance->getOptionAsString('puppetmaster');
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksWrite()
     */
    public function checkLinksWrite(string $url = ''): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsRead()
     */
    public function checkObjectsRead(string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $this->_configurationInstance->getOptionAsString('puppetmaster');
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsWrite()
     */
    public function checkObjectsWrite(string $url = ''): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinkPresent()
     */
    public function checkLinkPresent(string $oid, string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        if (!Node::checkNID($oid, false))
            return false;
        $url = $url . '/' . nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid;
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectPresent()
     */
    public function checkObjectPresent(string $oid, string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        if (!Node::checkNID($oid, false))
            return false;
        $url = $url . '/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid;
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getBlockLinks()
     */
    public function getBlockLinks(string $oid, string $url = '', int $offset = 0): array
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        if (!Node::checkNID($oid, false)
            || !$this->_configurationInstance->getOptionAsBoolean('permitSynchronizeLink')
        )
            return array();
        $url = $url . '/' . nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid;
        if (!$this->_checkExistOverHTTP($url))
            return array();

        $n = 0;
        $t = array();

        // Lecture et extraction des liens. TODO faire $offset
        $c = file_get_contents($url);
        $l = array_filter(explode(' ', strtr($c, "\n", ' ')));
        unset($c);

        // Filtre le nombre de liens lus.
        foreach ($l as $k) {
            $t[$n] = $k;
            if ($n > $this->_maxLink)
                break 1;
            $n++;
        }
        unset($l, $k, $n);
        return $t;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getObfuscatedLinks()
     */
    public function getObfuscatedLinks(string $entity, string $signer = '0', string $url = ''): array
    {
        // @todo
        return array();
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getObject()
     */
    public function getObject(string $oid, int $maxsize = 0, string $url = '')
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        if (!Node::checkNID($oid, false)
            || !$this->_configurationInstance->getOptionAsBoolean('permitSynchronizeObject')
        )
            return false;
        $url = $url . '/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid;
        if ($this->_checkExistOverHTTP($url))
            return file_get_contents($url);
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setBlockLink()
     */
    public function setBlockLink(string $oid, string &$link, string $url = ''): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setObject()
     */
    public function setObject(string $oid, string &$data, string $url = ''): bool
    {
        // Disabled on HTTP
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetObject()
     */
    public function unsetObject(string $oid, $url = ''): bool
    {
        // Disabled on HTTP
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetLink()
     */
    public function unsetLink(string $oid, string &$link, $url = ''): bool
    {
        // Disabled on HTTP
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::flushLinks()
     */
    public function flushLinks(string $oid, $url = ''): bool
    {
        // Disabled on HTTP
        return false;
    }

    /**
     * Vérifie la présence d'un fichier ou dossier via HTTP.
     *
     * @param string $url
     * @return boolean
     */
    private function _checkExistOverHTTP(string $url): bool
    {
        $url = parse_url($url);

        $handle = fsockopen($url['host'], 80, $errno, $errstr, 1);
        if ($handle === false)
            return false;

        $out = "HEAD " . $url['path'] . " HTTP/1.1\r\n"
            . "Host: " . $url['host'] . "\r\n"
            . "Connection: Close\r\n\r\n";
        $response = '';

        fwrite($handle, $out);
        while (!feof($handle)) {
            $response .= fgets($handle, 20);
            if (strlen($response) > 0)
                break;
        }
        fclose($handle);

        $pos = strpos($response, ' ');
        if ($pos === false)
            return false;

        $code = substr($response, $pos + 1, 3);
        if ($code == '200')
            return true;

        return false;
    }
}



// ========================================================================================
//   104_io_network_https.php
//   020241016180038
//   18702dde35020f8ff5ea57e796054dbc152c3ad52c90f406872230b96aad9d58.sha2.256

/**
 * La classe ioNetworkHTTPS.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class ioNetworkHTTPS extends io implements ioInterface
{
    const TYPE = 'HTTPS';
    const FILTER = '/^https:/i';
    const LOCALISATION = 'https://localhost';

    private int $_maxLink = 0;
    private int $_maxData = 0;
    private string $_defaultLocalisation = '';

    protected function _initialisation(): void
    {
        global $nebuleLibVersion;

        $this->_maxLink = $this->_configurationInstance->getOptionAsInteger('ioReadMaxLinks');
        $this->_maxData = $this->_configurationInstance->getOptionAsInteger('ioReadMaxData');
        // Détermination de l'URL par défaut.
        //$this->_defaultLocalisation = self::LOCALISATION;
        $this->_defaultLocalisation = 'https://' . $_SERVER['SERVER_NAME'];
        // Environnement PHP.
        ini_set('allow_url_fopen', 'true');
        ini_set('allow_url_include', 'true');
        ini_set('user_agent', 'nebule/ioHTTP/' . $nebuleLibVersion);
        ini_set('default_socket_timeout', $this->_configurationInstance->getOptionAsString('ioTimeout'));
        $this->_metrologyInstance->addLog('instancing class ioNetworkHTTPS', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '884a3959');
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getMode()
     */
    public function getMode(): string
    {
        return 'RO';
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setFilesTranscodeKey()
     */
    public function setFilesTranscodeKey(string &$key): void
    {
        $this->_filesTrancodeKey = $key;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetFilesTranscodeKey()
     */
    public function unsetFilesTranscodeKey(): void
    {
        $this->_filesTrancodeKey = '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000';
        $this->_filesTrancodeKey = '';
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getLocalisation()
     */
    public function getLocalisation(): string
    {
        //return self::LOCALISATION;
        return $this->_defaultLocalisation;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getInstanceEntityID()
     */
    public function getInstanceEntityID(string $url = ''): string
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_ENTITY_FILE;
        if ($this->_checkExistOverHTTP($url))
            return file_get_contents($url);
        return '0';
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksDirectory()
     */
    public function checkLinksDirectory(string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_LINKS_FOLDER . '/';
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsDirectory()
     */
    public function checkObjectsDirectory(string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/';
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksRead()
     */
    public function checkLinksRead(string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $this->_configurationInstance->getOptionAsString('puppetmaster');
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinksWrite()
     */
    public function checkLinksWrite(string $url = ''): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsRead()
     */
    public function checkObjectsRead(string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        $url = $url . '/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $this->_configurationInstance->getOptionAsString('puppetmaster');
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectsWrite()
     */
    public function checkObjectsWrite(string $url = ''): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkLinkPresent()
     */
    public function checkLinkPresent(string $oid, string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        if (!Node::checkNID($oid, false))
            return false;
        $url = $url . '/' . nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid;
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::checkObjectPresent()
     */
    public function checkObjectPresent(string $oid, string $url = ''): bool
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        if (!Node::checkNID($oid, false))
            return false;
        $url = $url . '/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid;
        return $this->_checkExistOverHTTP($url);
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getBlockLinks()
     */
    public function getBlockLinks(string $oid, string $url = '', int $offset = 0): array
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        if (!Node::checkNID($oid, false)
            || !$this->_configurationInstance->getOptionAsBoolean('permitSynchronizeLink')
        )
            return array();
        $url = $url . '/' . nebule::NEBULE_LOCAL_LINKS_FOLDER . '/' . $oid;
        if (!$this->_checkExistOverHTTP($url))
            return array();

        $n = 0;
        $t = array();

        // Lecture et extraction des liens. TODO faire $offset
        $c = file_get_contents($url);
        $l = array_filter(explode(' ', strtr($c, "\n", ' ')));
        unset($c);

        // Filtre le nombre de liens lus.
        foreach ($l as $k) {
            $t[$n] = $k;
            if ($n > $this->_maxLink)
                break 1;
            $n++;
        }
        unset($l, $k, $n);
        return $t;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getObfuscatedLinks()
     */
    public function getObfuscatedLinks(string $entity, string $signer = '0', string $url = ''): array
    {
        // @todo
        return array();
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::getObject()
     */
    public function getObject(string $oid, int $maxsize = 0, string $url = '')
    {
        if ($url == '')
            $url = $this->_defaultLocalisation;
        if (!Node::checkNID($oid, false)
            || !$this->_configurationInstance->getOptionAsBoolean('permitSynchronizeObject')
        )
            return false;
        $url = $url . '/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid;
        if ($this->_checkExistOverHTTP($url))
            return file_get_contents($url);
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setBlockLink()
     */
    public function setBlockLink(string $oid, string &$link, string $url = ''): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::setObject()
     */
    public function setObject(string $oid, string &$data, string $url = ''): bool
    {
        // Disabled on HTTP
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetObject()
     */
    public function unsetObject(string $oid, $url = ''): bool
    {
        // Disabled on HTTP
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::unsetLink()
     */
    public function unsetLink(string $oid, string &$link, $url = ''): bool
    {
        // Disabled on HTTP
        return false;
    }

    /**
     * {@inheritDoc}
     * @see ioInterface::flushLinks()
     */
    public function flushLinks(string $oid, $url = ''): bool
    {
        // Disabled on HTTP
        return false;
    }

    /**
     * Vérifie la présence d'un fichier ou dossier via HTTP.
     *
     * @param string $url
     * @return boolean
     */
    private function _checkExistOverHTTP(string $url): bool
    {
        $url = parse_url($url);

        $handle = fsockopen($url['host'], 80, $errno, $errstr, 1);
        if ($handle === false)
            return false;

        $out = "HEAD " . $url['path'] . " HTTP/1.1\r\n"
            . "Host: " . $url['host'] . "\r\n"
            . "Connection: Close\r\n\r\n";
        $response = '';

        fwrite($handle, $out);
        while (!feof($handle)) {
            $response .= fgets($handle, 20);
            if (strlen($response) > 0)
                break;
        }
        fclose($handle);

        $pos = strpos($response, ' ');
        if ($pos === false)
            return false;

        $code = substr($response, $pos + 1, 3);
        if ($code == '200')
            return true;

        return false;
    }
}



// ========================================================================================
//   200_crypto_interface.php
//   020241028173650
//   4d580ba22bae6683911c8af1936cddde5f28a7708482ffeb9b0b132884bfb3a8.sha2.256

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
interface CryptoInterface
{
    /**
     * Return default crypto instance.
     *
     * @return CryptoInterface
     */
    public function getCryptoInstance(): CryptoInterface;

    /**
     * Return default crypto class name.
     *
     * @return string
     */
    public function getCryptoInstanceName(): string;

    /**
     * Retourne le type de lib crypto.
     *
     * @return string
     */
    //public function getType(): string;

    /**
     * Retourne l'état de préparation'.
     *
     * @return bool
     */
    public function getReady(): bool;

    /**
     * Check if the cryptographique function have correct return value.
     *
     * @param string $algo
     * @param int $type
     * @return bool
     */
    public function checkFunction(string $algo, int $type): bool;

    /**
     * Check if the cryptographique function is supported.
     *
     * @param string $algo
     * @param int $type
     * @return bool
     */
    public function checkValidAlgorithm(string $algo, int $type): bool;

    // --------------------------------------------------------------------------------

    /**
     * Get $size octets of random string in raw form (strong) or in hexadecimal form (pseudo).
     * Quality of random sequence can be selected with strong or pseudo random.
     * But, to save precious entropy, you have to use pseudo random in all case where you do not absolutely need strong random.
     * If problem, return empty string.
     *
     * @param int $size
     * @param int $quality
     * @return string
     */
    public function getRandom(int $size = 32, int $quality = Crypto::RANDOM_PSEUDO): string;

    /**
     * Get a value of the data entropy.
     *
     * @param string $data
     * @return float
     */
    public function getEntropy(string &$data): float;

    // --------------------------------------------------------------------------------

    /**
     * Get the hash value for $data with a specified hash algorithm.
     * If problem, return empty string.
     *
     * @param string $data
     * @param string $algo
     * @return string
     */
    public function hash(string $data, string $algo = ''): string;

    // --------------------------------------------------------------------------------

    /**
     * Get encrypted $data with specified cryptographic algorithm, key in hexadecimal and IV in hexadecimal.
     * If problem, return empty string.
     *
     * @param string $data
     * @param string $algo
     * @param string $hexKey
     * @param string $hexIV
     * @return string
     */
    public function encrypt(string $data, string $algo, string $hexKey, string $hexIV = ''): string;

    /**
     * Get unencrypted data with specified cryptographic algorithm, key in hexadecimal and IV in hexadecimal.
     * If problem, return empty string.
     *
     * @param string $data
     * @param string $algo
     * @param string $hexKey
     * @param string $hexIV
     * @return string
     */
    public function decrypt(string $data, string $algo, string $hexKey, string $hexIV = ''): string;

    // --------------------------------------------------------------------------------

    /**
     * Get sign value of $data with private key (not EID).
     * If problem, return empty string.
     *
     * @param string $data
     * @param string $privateKey
     * @param string $privatePassword
     * @return string
     */
    public function sign(string $data, string $privateKey, string $privatePassword): string;

    /**
     * Verify sign value of data with public key (not EID).
     * If problem, return false.
     *
     * @param string $data
     * @param string $sign
     * @param string $publicKey
     * @return bool
     */
    public function verify(string $data, string $sign, string $publicKey): bool;

    /**
     * Encode $data with public key (not EID).
     * Data have a maximum size minus padding to pass without split.
     * If problem, return empty string.
     *
     * @param string $data
     * @param string $publicKey
     * @return string
     */
    public function encryptTo(string $data, string $publicKey): string;

    /**
     * Decode $data with private key (not EID).
     * Data have a maximum size minus padding to pass without split.
     * If problem, return empty string.
     *
     * @param string $code
     * @param string $privateKey
     * @param string $password
     * @return string
     */
    public function decryptTo(string $code, string $privateKey, string $password): string;

    /**
     * Generate a new asymmetric cryptographic bi-key.
     * If problem, return empty array.
     *
     * @param string $password
     * @return array
     */
    public function newAsymmetricKeys(string $password = ''): array;

    /**
     * Check password on a private key (not EID).
     *
     * @param string $privateKey
     * @param string $password
     * @return bool
     */
    public function checkPrivateKeyPassword(string $privateKey, string $password): bool;

    /**
     * Change password on a private key (not EID).
     * If problem, return empty string.
     *
     * @param string $privateKey
     * @param string $oldPassword
     * @param string $newPassword
     * @return string
     */
    public function changePrivateKeyPassword(string $privateKey, string $oldPassword, string $newPassword): string;
}



// ========================================================================================
//   201_crypto.php
//   020250215163515
//   adb692071b0cd1f74ba1ce30480940d14a8b632d77fac2cfe121069e24676f2b.sha2.256

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Crypto extends Functions implements CryptoInterface
{
    const SESSION_SAVED_VARS = array(
        '_defaultInstance',
        '_ready',
        '_listClasses',
        '_listInstances',
        '_listTypes',
    );

    const DEFAULT_CLASS = 'openssl';

    const RANDOM_PSEUDO = 1;
    const RANDOM_STRONG = 2;
    const TYPE_HASH = 1;
    const TYPE_SYMMETRIC = 2;
    const TYPE_ASYMMETRIC = 3;

    private ?CryptoInterface $_defaultInstance = null;

    public function __toString(): string
    {
        return self::TYPE;
    }

    protected function _initialisation(): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        foreach (get_declared_classes() as $class) {
            if (str_starts_with($class, get_class($this)) && $class != get_class($this)) {
                $this->_metrologyInstance->addLog('add class ' . $class, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '53556863');
                $this->_initSubInstance($class);
            }
        }
        $this->_defaultInstance = $this->_getDefaultSubInstance('cryptoLibrary');
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getCryptoInstance()
     */
    public function getCryptoInstance(): CryptoInterface
    {
        return $this->_defaultInstance;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getCryptoInstanceName()
     */
    public function getCryptoInstanceName(): string
    {
        return get_class($this->_defaultInstance);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkFunction()
     */
    public function checkFunction(string $algo, int $type): bool
    {
        return $this->_defaultInstance->checkFunction($algo, $type);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkValidAlgorithm()
     */
    public function checkValidAlgorithm(string $algo, int $type): bool
    {
        return $this->_defaultInstance->checkValidAlgorithm($algo, $type);
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getRandom()
     */
    public function getRandom(int $size = 32, int $quality = Crypto::RANDOM_PSEUDO): string
    {
        // FIXME refaire un sélecteur plus propre !
        if ($quality == Crypto::RANDOM_STRONG)
            return $this->_listInstances['openssl']->getRandom($size);
        else
            return $this->_listInstances['software']->getRandom($size);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getEntropy()
     */
    public function getEntropy(string &$data): float
    {
        return $this->_listInstances['software']->getEntropy($data);
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::hash()
     */
    public function hash(string $data, string $algo = ''): string
    {
        if ($algo == '')
            $algo = References::REFERENCE_CRYPTO_HASH_ALGORITHM;
        return $this->_defaultInstance->hash($data, $algo);
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::encrypt()
     */
    public function encrypt(string $data, string $algo, string $hexKey, string $hexIV = ''): string
    {
        return $this->_defaultInstance->encrypt($data, $hexKey, $hexIV);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::decrypt()
     */
    public function decrypt(string $data, string $algo, string $hexKey, string $hexIV = ''): string
    {
        return $this->_defaultInstance->decrypt($data, $hexKey, $hexIV);
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::sign()
     */
    public function sign(string $data, string $privateKey, string $privatePassword): string
    {
        return $this->_defaultInstance->sign($data, $privateKey, $privatePassword);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::verify()
     */
    public function verify(string $data, string $sign, string $publicKey): bool
    {
        return $this->_defaultInstance->verify($data, $sign, $publicKey);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::encryptTo()
     */
    public function encryptTo(string $data, string $publicKey): string
    {
        return $this->_defaultInstance->encryptTo($data, $publicKey);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::decryptTo()
     */
    public function decryptTo(string $code, string $privateKey, string $password): string
    {
        return $this->_defaultInstance->decryptTo($code, $privateKey, $password);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::newAsymmetricKeys()
     */
    public function newAsymmetricKeys(string $password = ''): array
    {
        return $this->_defaultInstance->newAsymmetricKeys($password);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkPrivateKeyPassword()
     */
    public function checkPrivateKeyPassword(string $privateKey, string $password): bool
    {
        return $this->_defaultInstance->checkPrivateKeyPassword($privateKey, $password);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::changePrivateKeyPassword()
     */
    public function changePrivateKeyPassword(string $privateKey, string $oldPassword, string $newPassword): string
    {
        return $this->_defaultInstance->changePrivateKeyPassword($privateKey, $oldPassword, $newPassword);
    }

    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles()
    {
        ?>

        <li><a href="#c">C / Confiance</a>
            <ul>
                <li><a href="#cfo">CFO / Fable des Origines</a></li>
                <li><a href="#co">CO / Confiance dans l’Objet</a></li>
                <li><a href="#cl">CL / Confiance dans le Lien</a></li>
                <li><a href="#coe">COE / Confiance dans l'Objet Entité</a></li>
                <li><a href="#ca">CA / Autorités</a>
                    <ul>
                        <li><a href="#cam">CAM / Autorité Maîtresse</a></li>
                        <li><a href="#cams">CAMS / Autorité Maîtresse de la Sécurité</a></li>
                        <li><a href="#camc">CAMC / Autorité Maîtresse du Code</a></li>
                        <li><a href="#cama">CAMA / Autorité Maîtresse de l'Annuaire</a></li>
                        <li><a href="#camt">CAMT / Autorité Maîtresse du Temps</a></li>
                    </ul>
                </li>
                <li><a href="#cc">CC / Configuration</a>
                    <ul>
                        <li><a href="#cco">CCO / Options</a>
                            <ul>
                                <li><a href="#ccor">CCOR / Réservation</a></li>
                                <li><a href="#ccof">CCOF / Options via Fichier</a></li>
                                <li><a href="#ccol">CCOL / Options via Liens</a></li>
                                <li><a href="#ccos">CCOS / Subordination</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="#ce">CE / Confiance dans les Échanges</a>
                    <ul>
                        <li><a href="#cems">CEMS / Moyens et Supports</a></li>
                        <li><a href="#cecto">CECTO / Comportement au Téléchargement d’Objets</a></li>
                        <li><a href="#cectl">CECTL / Comportement au Téléchargement de Liens</a></li>
                        <li><a href="#cecte">CECTE / Comportement au Téléchargement d'Entités</a></li>
                    </ul>
                </li>
                <li><a href="#ck">CK / Cryptographie</a>
                    <ul>
                        <li><a href="#ckl">CKL / Cryptographie du Lien</a></li>
                        <li><a href="#cko">CKO / Cryptographie de l'Objet</a>
                            <ul>
                                <li><a href="#ckode">CKODE / Cryptographie de l'Objet - Deux Étapes</a></li>
                                <li><a href="#ckoecs">CKOECS / Cryptographie de l'Objet - Étape Chiffrement Symétrique</a></li>
                                <li><a href="#ckoeca">CKOECA / Cryptographie de l'Objet - Étape Chiffrement Asymétrique</a></li>
                                <li><a href="#ckoep">CKOEP / Cryptographie de l'Objet - Ensemble du Processus</a></li>
                                <li><a href="#ckovi">CKOVI / Cryptographie de l'Objet - Vecteur Initial</a></li>
                                <li><a href="#ckoc">CKOC / Cryptographie de l'Objet - Compression</a></li>
                                <li><a href="#ckotm">CKOTM / Cryptographie de l'Objet - Type Mime</a></li>
                                <li><a href="#ckorc">CKORC / Cryptographie de l'Objet - Résolution de Conflits</a></li>
                            </ul>
                        </li>
                        <li><a href="#cka">CKA / Aléas cryptographiques</a></li>
                    </ul>
                </li>
                <li><a href="#cs">CS / Sociabilité</a></li>
                <li><a href="#cn">CN / Nettoyage, suppression et oubli</a></li>
            </ul>
        </li>
        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore()
    {
        ?>

        <h1 id="c">C / Confiance</h1>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>La confiance n’est pas quelque chose de palpable, même numériquement. Cela tient plus de la façon de concevoir les choses et le fait de faire en sorte que l’ensemble soit solide. L’ensemble doit être cohérent et résistant. On doit pouvoir compter sur ce que l’on a.</p>
        <p>La confiance est donc sous-jacente aux objets et aux liens.</p>
        <p>Les objets et les liens doivent tous être signés. Toute modification devient impossible <span style="font-weight:bold;">si l’on prend le temps de vérifier les signatures</span>.</p>
        <p>En l’absence de nouvelle découverte mathématique majeure, les algorithmes cryptographiques nous permettent aujourd’hui une offuscation forte et une prise d’empreinte fiable. C’est le chiffrement et la signature.</p>

        <h3 id="cfo">CFO / Fable des Origines</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p style="text-align:center; margin-bottom:10px;"><span style="font-weight:bold; font-family:monospace;">- 001 -</span><br />Le premier jour, il créa l'<span style="font-weight:bold;">objet</span>, essence de toute chose.<br />Ainsi la matière de l'information naquit du néant de l'éther binaire.</p>
        <p style="text-align:center; margin-bottom:10px;"><span style="font-weight:bold; font-family:monospace;">- 010 -</span><br />Le deuxième jour, il créa le <span style="font-weight:bold;">lien</span>, pour les relier tous.<br />Ainsi apparurent les objets à la lumière, ils pouvaient se voir mutuellement.<br />Ainsi l'univers informationnel naquit des objets et des liens.</p>
        <p style="text-align:center; margin-bottom:10px;"><span style="font-weight:bold; font-family:monospace;">- 011 -</span><br />Le troisième jour, il créa l'<span style="font-weight:bold;">entité</span>.<br />La matière inerte et uniforme devint active et protéiforme.<br />Ainsi la vie naquit de l'univers informationnel.</p>
        <p style="text-align:center; margin-bottom:10px;"><span style="font-weight:bold; font-family:monospace;">- 100 -</span><br />Le quatrième jour, il créa la <span style="font-weight:bold;">signature</span>.<br />L'univers informationnel s'illumina  du feu des entités attirants inexorablement les objets.<br />Ainsi les nébuleuses naquirent des entités.</p>
        <p style="text-align:center; margin-bottom:10px;"><span style="font-weight:bold; font-family:monospace;">- 101 -</span><br />Le cinquième jour, il créa le <span style="font-weight:bold;">groupe</span>.<br />A l'intérieur des nébuleuses, les objets se rassemblèrent en orbite autour des groupes.<br />Ainsi les galaxies naquirent des nébuleuses.</p>
        <p style="text-align:center; margin-bottom:10px;"><span style="font-weight:bold; font-family:monospace;">- 110 -</span><br />Le sixième jour, il créa le <span style="font-weight:bold;">cryptogramme</span>.<br />Pour la première fois, la matière des objets commença à disparaître de la lumière.<br />Ainsi les trous noirs naquirent des galaxies.</p>
        <p style="text-align:center; margin-bottom:10px;"><span style="font-weight:bold; font-family:monospace;">- 111 -</span><br />Le septième jour, il créa l'<span style="font-weight:bold;">interface</span>.<br />Et permit à l'homme de voir l'univers.<br />Ainsi l'univers fut achevé.</p>
        <p style="text-align:center; margin-bottom:10px;"><span style="font-weight:bold; font-family:monospace;">- 8 -</span><br />Le huitième jour, au nom de lui, l'homme créa la religion.<br />Il s'appropria tous les objets et soumit toutes les entités sous une seule.<br />Ainsi disparut l'univers dans un trou noir super-massif.</p>

        <h2 id="co">CO / Confiance dans l’Objet</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L’intégrité et la confidentialité des objets est garantie non pas par une <i>méta-donnée</i> mais par les mathématiques qui animent les algorithmes cryptographiques.</p>
        <p>Un objet numérique est identifié par une empreinte ou condensat (hash) numérique. Cette empreinte doit avoir des caractéristiques propres fortes correspondant à des fonctions de prise d’empreinte cryptographiques. C’est à dire :</p>
        <ol>
            <li>L’espace des valeurs possibles est suffisamment grand ;</li>
            <li>La répartition des valeurs possibles est équiprobable ;</li>
            <li>La résistance aux collisions est forte ;</li>
            <li>La fonction utilisée est non réversible.</li>
        </ol>
        <p>Il est donc extrêmement difficile de créer deux contenus différents ayants la même empreinte et extrêmement peu probable de trouver par hasard deux contenus différents ayants la même empreinte. Par 'extrêmement' on entend impossible avec les technologies actuelles ou prévisibles dans un proche avenir. Même à moyen terme, affabli, ces fonctions de prise d'empreinte seront à même d'empêcher une falsification massive des données.</p>
        <p>La fonction de prise d’empreinte actuellement recommandée est <code>sha256</code>. Elle remplie toutes les exigences évoquées ci-dessus. Aucune faille ne permet de remettre en question de façon significative sa résistance et sa non-réversibilité à cours terme.</p>
        <p>Pour certains petits besoins spécifiques, la fonction de prise d’empreinte peut être minimaliste, donc rapide et non sécurisée. Cependant, celle-ci doit faire au minimum 2 octets. Les valeurs sur un octets sont susceptibles d’être interprétées, comme la valeur <code>0</code> qui ne désigne aucun objet.</p>
        <p>Avec le temps, les fonctions de prise d'empreinte vont évoluer avec les besoins et la technologie.</p>
        <p>L’empreinte d’un objet doit être vérifiée lors de la fin de la réception de l’objet. L’empreinte d’un objet devrait être vérifiée avant chaque utilisation de cet objet. Un contenu d'objet avec une empreinte qui ne lui correspond pas doit être supprimé. Lors de la suppression d’un objet, les liens de cet objet sont conservés. La vérification de la validité des objets est complètement indépendante de celle des liens, et inversement (cf <a href="#oov">OOV</a> et <a href="#lv">LV</a>).</p>

        <h2 id="cl">CL / Confiance dans le Lien</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L’intégrité des liens est garantie non pas par une <i>méta-donnée</i> mais par les fonctions mathématiques utilisées par les algorithmes cryptographiques.</p>
        <p>La signature du lien est obligatoire. La signature doit être réalisée par le signataire. La signature englobe tout le lien à l’exception d’elle-même. Un lien avec une signature invalide ou non vérifiable doit être ignoré et supprimé.</p>
        <p>Toute modification de l’un des champs du lien entraîne l’invalidation de tout le lien.</p>
        <p>L’empreinte du signataire est inclue dans la partie signée, ainsi il ne peut être modifier sans invalider tout le lien. On ne peut ainsi pas usurper une autre entité.</p>
        <p>La signature d’un lien doit être vérifiée lors de la fin de la réception du lien. La signature d’un lien devrait être vérifiée avant chaque utilisation de ce lien. Un lien avec une signature invalide doit être supprimé. Lors de la suppression d’un lien, les autres liens de cet objet ne sont pas supprimés et l'objet n'est pas supprimé. La vérification de la validité des objets est complètement indépendante de celle des liens, et inversement (cf <a href="#lv">LV</a> et <a href="#oov">OOV</a>).</p>

        <h3 id="coe">COE / Confiance dans l'Objet Entité</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Une entité est un objet contenant une clé cryptographique publique. Cette clé permet de vérifier les liens signés par cette entité.</p>
        <p>A faire...</p>

        <h2 id="ca">CA / Autorités</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Les entités autorités, au nombre de 5, permettent de structurer et de gérer la confiance dans le code et l'utilisation du code de la bibliothèque et de toutes les applications.</p>
        <p>Cette restriction à cinq entités est une facilité pour le développement aujourd'hui. Mais ce n'est pas un modèle viable à moyen terme. L'autorité maîtresse pourra être concurrencée par une entité désignée de l'entité de l'instance locale du serveur. Et les autres entités appartiendront à des groupes spécifique dépendants à la fois de l'autorité maîtresse et de l'entité désignée par l'entité de l'instance locale du serveur.</p>

        <h3 id="cam">CAM / Autorité Maîtresse</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Autrement appelée entité maîtresse du tout, cette entité est la seule déclarée en dur dans le code de la bibliothèque. Toutes les autres entités sont définies par des liens de cette entité.</p>
        <p>Au besoin elle peut être remplacée par une autre entité via l'option <code>puppetmaster</code> dans le fichier de configuration. Cette option n'est pas utilisable via les liens.</p>
        <p>L'instance actuelle s'appelle <i>puppetmaster</i> et est localisée en <a href="http://puppetmaster.nebule.org">puppetmaster.nebule.org</a>.</p>
        <p>L'identifiant de cette entité est <code>88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea</code>.</p>

        <h4 id="cams">CAMS / Autorité Maîtresse de la Sécurité</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Cette entité est dédignée par le puppetmaster par rapport au rôle de maître de la sécurité. Le rôle est définit pas l'objet réservé <code>nebule/objet/entite/maitre/securite</code>. Voir <a href="#oor">OOR</a> et <a href="#oer">OER</a>.</p>
        <p>A faire...</p>
        <p>L'instance actuelle s'appelle <i>cerberus</i> et est localisée en <a href="http://cerberus.nebule.org">cerberus.nebule.org</a>.</p>
        <p>Les enfers n'ayant pas encore ouvert, cette entité n'est pas utilisée.</p>

        <h4 id="camc">CAMC / Autorité Maîtresse du code</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Cette entité est dédignée par le puppetmaster par rapport au rôle de maître du code. Le rôle est définit pas l'objet réservé <code>nebule/objet/entite/maitre/code</code>. Voir <a href="#oor">OOR</a> et <a href="#oer">OER</a>.</p>
        <p>A faire...</p>
        <p>L'instance actuelle s'appelle <i>bachue</i> et est localisée en <a href="http://bachue.nebule.org">bachue.nebule.org</a>.</p>

        <h4 id="cama">CAMA / Autorité Maîtresse de l'annuaire</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Cette entité est dédignée par le puppetmaster par rapport au rôle de maître de l'annuaire. Le rôle est définit pas l'objet réservé <code>nebule/objet/entite/maitre/annuaire</code>. Voir <a href="#oor">OOR</a> et <a href="#oer">OER</a>.</p>
        <p>A faire...</p>
        <p>L'instance actuelle s'appelle <i>asabiyya</i> et est localisée en <a href="http://asabiyya.nebule.org">asabiyya.nebule.org</a>.</p>

        <h4 id="camt">CAMT / Autorité Maîtresse du temps</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Cette entité est dédignée par le puppetmaster par rapport au rôle de maître du temps. Le rôle est définit pas l'objet réservé <code>nebule/objet/entite/maitre/temps</code>. Voir <a href="#oor">OOR</a> et <a href="#oer">OER</a>.</p>
        <p>A faire...</p>
        <p>L'instance actuelle s'appelle <i>kronos</i> et est localisée en <a href="http://kronos.nebule.org">kronos.nebule.org</a>.</p>

        <h2 id="cc">CC / Configuration</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="cco">CCO / Options</h3>
        <p>Les options permettent de modifier le comportement du code de la bibliothèque et des applications.</p>
        <p>La sensibilité des options est variable. On compte trois niveaux de sensibilité :</p>
        <ul>
            <li>utile (useful)</li>
            <li>important (careful)</li>
            <li>critique (critical)</li>
        </ul>
        <p>Les options sont rangées par catégories, c'est juste de l'affichage :</p>
        <ul>
            <?php foreach (\Nebule\Library\Configuration::OPTIONS_CATEGORIES as $o ) { echo "\t<li>".$o."</li>\n"; } ?>
        </ul>
        <p>Toutes les options ont une valeur par défaut. Les valeurs peuvent être modifiées via un fichier de configuration et via des liens. Les modifications appliquées dans le fichier de configuration ne sont pas écrasables par des modifications faites via des liens, cela force le comportement du code sur un serveur. Pour des raisons de sécurité, certaines options ne peuvent être modifiées que dans le fichier de configuration, elles sont dites en lecture seule.</p>
        <p>Liste des options :</p>
        <ul>
            <?php
            foreach ( \Nebule\Library\Configuration::OPTIONS_CATEGORIES as $categorie )
            {
                echo "\t<li>Catégorie '<code>".$categorie."</code>' :\n\t\t<ul>\n";
                foreach ( \Nebule\Library\Configuration::OPTIONS_LIST as $option )
                {
                    if ( \Nebule\Library\Configuration::OPTIONS_CATEGORY[$option] == $categorie )
                    {
                        echo "\t\t\t<li>Option '<code>$option</code>' :\n\t\t\t\t<ul>\n";
                        echo "\t\t\t\t\t<li>Description : <code>".\Nebule\Library\Configuration::OPTIONS_DESCRIPTION[$option]."</code></li>\n";
                        echo "\t\t\t\t\t<li>Criticité : <code>".\Nebule\Library\Configuration::OPTIONS_CRITICALITY[$option]."</code></li>\n";
                        echo "\t\t\t\t\t<li>Type : <code>".\Nebule\Library\Configuration::OPTIONS_TYPE[$option]."</code></li>\n";
                        $value = '';
                        if ( \Nebule\Library\Configuration::OPTIONS_TYPE[$option] == 'boolean' )
                        {
                            if ( \Nebule\Library\Configuration::OPTIONS_DEFAULT_VALUE[$option] == 'true' )
                                $value = 'true';
                            else
                                $value = 'false';
                        }
                        else
                            $value = \Nebule\Library\Configuration::OPTIONS_DEFAULT_VALUE[$option];
                        echo "\t\t\t\t\t<li>Valeur par défaut : <code>$value</code></li>\n";
                        if ( \Nebule\Library\Configuration::OPTIONS_WRITABLE[$option] != 'true' )
                            echo "\t\t\t\t\t<li>En lecture seule.</li>\n";
                        echo "\t\t\t\t</ul>\n\t\t\t</li>\n";
                    }
                }
                echo "\t\t</ul>\n\t</li>\n";
            }
            ?>
        </ul>

        <h4 id="ccor">CCOR / Réservation</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Les objets réservés spécifiquement pour les options :</p>
        <ul>
            <li>nebule/option</li>
        </ul>

        <h4 id="ccof">CCOF / Options via Fichier</h4>
        <p>Dans les deux méthodes pour gérer les options, il y a le fichier des options. Toutes les options inscrites
            dans ce fichier sont dites forcées et ne peuvent être surchargées par un lien d'option. Les options dites en
            lecture seule ne peuvent être changées que via le fichier des options.</p>
        <p>Le fichier contenant les options doit s'appeler
            <code><?php echo \Nebule\Bootstrap\LIB_LOCAL_ENVIRONMENT_FILE; ?></code>, doit être positionné à côté du
            fichier <code>index.php</code> utilisé, et doit être lisible de l'utilisateur du service web. Par sécurité,
            les fichiers <code><?php echo \Nebule\Bootstrap\LIB_LOCAL_ENVIRONMENT_FILE; ?></code> et
            <code>index.php</code> doivent être protégés en écriture, c'est-à-dire en lecture seule, pour l'utilisateur
            du service web.</p>
        <p>Chaque option est représentée sur une seule ligne commençant par le nom de l'option suivi du caractère
            <code>=</code> entouré ou non d'espaces. Tout ce qui est après le signe <code>=</code> constitue la valeur
            de l'option. La valeur ne nécessite par de simple ou double côte de protection.</p>
        <p>Dans le fichier des options, une ligne commençant par le caractère <code>#</code> est entièrement ignorée.
            C'est un commentaire. Une ligne ne contenant pas le signe <code>=</code> est ignorée, mais cela peut être
            perçu comme ambiguë, à éviter.</p>
        <p>Si des espaces sont présents en début ou fin de ligne, ils sont ignorés lors du traitement de l'option. Les
            espaces autour du signe <code>=</code> sont ignorés lors du traitement de l'option.</p>
        <p>Le fichier des options peut contenir indifféremment des options pour plusieurs bibliothèques et applications.
            Le fichier des options n'est parcouru que lors de la recherche d'une option. Les options inconnues sont
            ignorées. Seule la première occurrence d'une option est prise en compte.</p>
        <p>Les booléens sont comparés par rapport à <code>true</code>. C'est-à-dire que toute autre valeur équivaut à
            <code>false</code>.</p>
        <p>Pour modifier une option, si cela est authorisé, il faut aller modifier sa valeur dans le fichier
            <code><?php echo \Nebule\Bootstrap\LIB_LOCAL_ENVIRONMENT_FILE; ?></code> et au besoin retirer le
            <code>#</code> de mise en commentaire pour que la nouvelle valeur soit prise en compte. Ensuite, si une
            session est déjà ouverte, il faut vider le cache des options pour que ce soit pris en compte, voir
            <a href="oabc">OABC</a>.</p>
        <p>Par défaut, le fichier des options contient :</p>
        <pre>
# Generated by the <?php echo \Nebule\Bootstrap\BOOTSTRAP_NAME; ?>, part of the <?php echo \Nebule\Bootstrap\BOOTSTRAP_AUTHOR; ?>.
# <?php echo \Nebule\Bootstrap\BOOTSTRAP_SURNAME; ?>.
# Version : <?php echo \Nebule\Bootstrap\BOOTSTRAP_VERSION; ?>.
# <?php echo \Nebule\Bootstrap\BOOTSTRAP_WEBSITE; ?>.

# nebule php
<?php
foreach ( \Nebule\Library\Configuration::OPTIONS_LIST as $option )
{
    if ( \Nebule\Library\Configuration::OPTIONS_TYPE[$option] == 'boolean' ) {
        if ( \Nebule\Library\Configuration::OPTIONS_DEFAULT_VALUE[$option] == 'true' )
            $value = 'true';
        else
            $value = 'false';
    } elseif ( \Nebule\Library\Configuration::OPTIONS_TYPE[$option] == 'integer' ) {
        $value = (string)\Nebule\Library\Configuration::OPTIONS_DEFAULT_VALUE[$option];
    }
    else
        $value = \Nebule\Library\Configuration::OPTIONS_DEFAULT_VALUE[$option];
    echo '#'.$option.' = '.$value."\n";
}
?>
        </pre>

        <h4 id="ccol">CCOL / Options via Liens</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Dans les deux méthodes pour gérer les options, il y a le lien d'option. Toutes les options, à l'exception de celles dites en lecture seule, peuvent être définies par les liens d'options correspondants.</p>
        <p>Toutes les options définis par des liens sont attachées à des entités. C'est à dire que le lien d'une option doit contenir l'entité à laquelle s'applique le lien. L'utilisation ou non de l'option se fait par l'entité si le lien lui appartient ou si elle est subordonnée à l'entité signataire du lien (voir <a href="#ccos">CCOS</a>). Les liens de l'entité de subordination sont prioritaires sur les liens propres.</p>
        <p>Toutes les options inscrites dans le fichier des options sont dites forcées et ne peuvent être surchargées par un lien d'option.</p>
        <p>La valeur de l'option doit être présente ou écrite dans l'objet correspondant. Si la valeur de l'option ne peut être lu, elle ne sera pas prise en compte. Le nom de l'option n'a pas besoin d'être écrit dans l'objet correspondant, il est déjà défini dans le code.</p>
        <p>Les options définis par les liens ne sont pas prises en compte par la bibliothèque nebule en PHP procédurale du bootstrap.</p>
        <p>L'option se définit en créant un lien :</p>
        <ul>
            <li>Signature du lien</li>
            <li>Identifiant du signataire</li>
            <li>Horodatage</li>
            <li>action : <code>l</code></li>
            <li>source : ID entité visée</li>
            <li>cible : hash(valeur de l'option)</li>
            <li>méta : hash(‘nebule/option/’ + nom de l'option)</li>
        </ul>
        <p>Liste des options non modifiables via des liens :</p>
        <ul>
            <?php
            foreach ( \Nebule\Library\Configuration::OPTIONS_LIST as $option )
            {
                if ( \Nebule\Library\Configuration::OPTIONS_WRITABLE[$option] != 'true' )
                    echo "\t<li>Option '<code>$option</code>'</li>\n";
            }
            ?>
        </ul>
        <h4 id="ccos">CCOS / Subordination</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Une entité peut définir ses propres options mais peut aussi se voir défini ses options par une autre entité. C'est principalement utilisé afin de piloter des instances sur des serveurs distants.</p>
        <p>La mise en place de ce mécanisme permet de maintenir autant que possible le contrôle sur un serveur que l'on ne maîtrise pas physiquement. Elle est mise en place via l'option <code>subordinationEntity</code> en lecture seule écrite dans le fichier des options. Cela veut dire aussi qu'une entité peut être compromise et pilotée à distance si le fichier des options est modifié par une entité tièrce.</p>
        <p>La subordination peut être faite vers une seule entité, défini par son identifiant, ou pour un groupe d'entités. La gestion du groupe n'est pas encore fonctionnel, seule une entité peut être défini.</p>
        <p>La subordination n'est pas prise en compte par la bibliothèque nebule en PHP procédurale du bootstrap.</p>

        <h2 id="ce">CE / Confiance dans les Échanges</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="cems">CEMS / Moyens et Supports</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Il est possible de télécharger des objets et des liens avec différents protocoles. Le plus simple étant le <i>http</i>. Le protocole et le serveur distant doivent être capable de transmettre une requête et de renvoyer en sens inverse une réponse.</p>
        <p>Côté serveur, c’est à dire la machine qui fait office de relais des objets et liens, tout ne peut pas être demandé. Les requêtes doivent être triviales à traiter, ne pas nécessiter de forte puissance de calcul ni d’empreinte mémoire démesurée. Une avalanche de requêtes diverses ne doit pas mettre à plat le serveur.</p>
        <p>A faire...</p>

        <h5 id="cecto">CECTO / Comportement au Téléchargement d’Objets</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Comportement global (téléchargement sans localisation précisée) :</p>
        <ol>
            <li>Si l’empreinte de l’objet demandé est 0, on quitte le processus de téléchargement.</li>
            <li>Si l’objet existe déjà dans le répertoire public des objets, on quitte le processus de téléchargement.</li>
            <li>Si l’objet existe déjà dans le répertoire privé des objets, on quitte le processus de téléchargement.</li>
            <li>Si l’objet n’a pas de lien dans le répertoire public des liens, on quitte le processus de téléchargement.</li>
            <li>Si l’objet n’a pas de lien dans le répertoire privé des liens, on quitte le processus de téléchargement.</li>
            <li>On se réfère à l’objet <code>0f183d69e06108ac3791eb4fe5bf38beec824db0a2d9966caffcfef5bc563355</code> (<code>nebule/objet/entite/localisation</code>) pour trouver la localisation de toutes les entités connues.</li>
            <li>On parcourt les différentes localisations une à une (cf <i>comportement local</i>) pour essayer de télécharger l’objet demandé jusqu’à en obtenir une copie valide si c’est possible.</li>
        </ol>
        <p>Comportement local (téléchargement sur une localisation précise) :</p>
        <ol>
            <li>Si l’empreinte de l’objet demandé est 0, on quitte le processus de téléchargement.</li>
            <li>Si l’objet existe déjà dans le répertoire public des objets, on quitte le processus de téléchargement.</li>
            <li>Si l’objet existe déjà dans le répertoire privé des objets, on quitte le processus de téléchargement.</li>
            <li>Si l’objet n’a pas de lien dans le répertoire public des liens, on quitte le processus de téléchargement.</li>
            <li>Si l’objet n’a pas de lien dans le répertoire privé des liens, on quitte le processus de téléchargement.</li>
            <li>On télécharge un objet sur une localisation précise vers le répertoire public des objets.</li>
            <li>Si il est vide, on supprime l’objet.</li>
            <li>Si l’empreinte est invalide, on supprime l’objet.</li>
        </ol>

        <h5 id="cectl">CECTL / Comportement au Téléchargement de Liens</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h5 id="cecte">CECTE / Comportement au Téléchargement d'Entités</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h2 id="ck">CK / Cryptographie</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="ckl">CKL / Cryptographie du Lien</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le chiffrement permet de dissimuler des liens. Il est optionnel.</p>
        <p>A faire...</p>
        <p>L'option <code>permitObfuscatedLink</code> permet de désactiver la dissimulation (offuscation) des liens des objets. Dans ce cas le lien de type <code>c</code> est aussi rejeté comme invalide (cf <a href="#lrac">LRAC</a>).</p>

        <h3 id="cko">CKO / Cryptographie de l'Objet</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le chiffrement permet de cacher le contenu des objets. Il est optionnel.</p>
        <p>Ce chiffrement doit être résistant, c’est à dire correspondre à l’état de l’art en cryptographie appliquée. On doit être en mesure de parfaitement distinguer l’objet en clair de l’objet chiffré, même si le second est dérivé du premier.</p>
        <p>L'option <code>permitProtectedObject</code> permet de désactiver la protection (chiffrement) des objets. Dans ce cas le lien de type <code>k</code> est aussi rejeté comme invalide (cf <a href="#lrak">LRAK</a>).</p>

        <h5 id="ckode">CKODE / Cryptographie de l'Objet - Deux Étapes</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Les entités sont des objets contenant le matériel cryptographique nécessaire au chiffrement asymétrique. Cependant, le chiffrement asymétrique est très consommateur en ressources CPU (calcul). On peut l’utiliser directement pour chiffrer les objets avec la clé publique d’un correspondant, mais cela devient rapidement catastrophique en terme de performances et donc en expérience utilisateur. D’un autre côté, le chiffrement symétrique est beaucoup plus performant, mais sa gestion des clés de chiffrement est délicate. Pour améliorer l’ensemble, il faut mixer les deux pour profiter des avantages de chacun.</p>
        <p>Ainsi, on va aborder le chiffrement en deux étapes distinctes.</p>
        <p>Pour la compréhension des schémas, ne pas oublier que les propriétés des objets sont elles-mêmes des objets…</p>

        <h6 id="ckoecs">CKOECS / Cryptographie de l'Objet - Étape Chiffrement Symétrique</h6>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le chiffrement d’un objet peut prendre du temps, surtout si il est volumineux. On va donc privilégier le chiffrement symétrique qui est assez rapide. Nous avons besoin pour ce chiffrement de deux valeurs.</p>
        <p>La première valeur est une clé de chiffrement. Elle est dite clé de session. La longueur de celle-ci dépend de l’algorithme de chiffrement utilisé. Par exemple, elle fait 128bits pour l’AES. Elle est générée aléatoirement. C’est cette valeur qui va permettre le déchiffrement de l’objet et doit donc rester secrète. Mais il faut pouvoir la partager avec ses correspondants, c’est ce que l’on verra dans la deuxième étape.</p>
        <p>La seconde valeur est ce que l’on appelle une semence ou vecteur initial (IV = Initial Vector). Elle est utilisée dans la méthode de chiffrement sur plusieurs blocs, c’est à dire lorsque l’on chiffre un objet dont la taille dépasse le bloc, quantité de données que traite l’algorithme de chiffrement. Par exemple, le bloc fait 128bits pour l’AES, tout ce qui fait plus que cette taille doit être traité en plusieurs fois. Comme IV, je propose d’utiliser l’identifiant de l’objet à chiffrer, c’est à dire le hash de cet objet. Cela simplifie la diffusion de cette valeur qui n’a pas à être dissimulée.</p>
        <p>L’objet source que l’on voulait à l’origine protéger peut maintenant être marqué à supprimer. Il pourra être restauré depuis l’objet dérivé chiffré et la clé de session.</p>
        <p>Sur le schéma ci-dessous, la partie chiffrement symétrique est mise en valeur. On retrouve l’objet source en clair qui est ici une image de type JPEG. En chiffrant cet objet, cela génère un nouvel objet. Le chiffrement est matérialisé par un lien de type K. Ce lien associe aussi un objet contenant la clé de session. Le nouvel objet est de type AES-CTR, par exemple. Cela signifie qu’il est chiffré avec le protocole AES et la gestion des blocs CTR (CounTeR). L’objet contenant la clé de session est de type texte.</p>

        <h6 id="ckoeca">CKOECA / Cryptographie de l'Objet - Étape Chiffrement Asymétrique</h6>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Suite à la première étape de chiffrement, nous nous retrouvons avec un objet chiffré et un objet contenant la clé de session. Si le fichier chiffré est bien protégé (en principe) et peut donc être rendu public, l’objet avec la clé de session est au contraire bien embarrassant. C’est là qu’intervient le chiffrement asymétrique et les clés publiques/privées.</p>
        <p>Le système de clés publiques/privées va permettre de chiffrer l’objet contenant la clé de session avec la clé publique d’une entité. Ainsi on permet à cette entité, c’est à dire le destinataire, de récupérer la clé de session avec sa clé privé et donc de lire l’objet source. Et plus encore, en re-chiffrant cette même clé de session avec d’autres clés publiques, ce qui génère autant d’objets de clés chiffrés, nous permettons à autant de nouvelles entités de lire l’objet source.</p>
        <p>Le créateur de l’objet chiffré doit obligatoirement faire partie des entités destinataires si il souhaite pouvoir déchiffrer l’objet source plus tard. Sinon, il passe intégralement sous le contrôle d’une des entités destinataires.</p>
        <p>Sur le schéma ci-dessous, la partie chiffrement asymétrique est mise en valeur. On retrouve l’objet en clair qui est ici la clé des session. En chiffrant cet objet, cela génère un nouvel objet. Le chiffrement est matérialisé par un lien de type K. Ce lien associe aussi un objet contenant la clé publique d’une entité. Le nouvel objet est de type RSA.</p>

        <h5 id="ckoep">CKOEP / Cryptographie de l'Objet - Ensemble du Processus</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Évidemment, ce schéma de chiffrement ne ré-invente pas la roue. C’est une façon de faire assez commune, voire un cas d’école. Mais il est ici adapté au fonctionnement particulier de nebule et de ses objets.</p>
        <p>Il y a deux points à vérifier : – Partager l’objet chiffré et permettre à une autre entité de le voir, c’est aussi lui donner accès à la clé de session. Rien n’empêche cette entité de rediffuser ensuite cette clé de session en clair ou re-chiffrée à d’autres entités. Cependant, la clé de session est unique et n’a pas de valeur en dehors de l’objet chiffré qu’elle protège. De même, l’objet source peut toujours être re-chiffré avec une nouvelle clé de session et d’autres clés publiques. On retombe sur un problème commun, insoluble et le même constat : on perd automatiquement le contrôle de toute information que l’on diffuse à autrui. – L’empreinte (hash) de la clé de session est publique. Peut-être que cela affaiblie le chiffrement et donc la solidité de la protection des objets. A voir…</p>
        <p>Par commodité, je pense qu’il serait intéressant de lier explicitement l’entité destinataire et l’objet chiffré.</p>

        <h5 id="ckovi">CKOVI / Cryptographie de l'Objet - Vecteur Initial</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Pour la plupart des modes de chiffrements symétriques, un vecteur initial (semence ou IV) est nécessaire. Il est lié à l’objet chiffré pour permettre le déchiffrement de celui-ci. Par défaut, sa valeur est aléatoire.</p>
        <p>Si pas précisé, il est égale à 0.</p>
        <p>Du fait du fonctionnement du mode CTR (CounTeR), l’IV s’incrémente à chaque bloc chiffré.</p>

        <h4 id="ckoc">CKOC / Cryptographie de l'Objet - Compression</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Il est préférable d’associer de la compression avec le chiffrement.</p>
        <p>La compression des données déjà chiffrées est impossible, non que l’on ne puisse le faire, mais le gain de compression sera nul. L’entropie détermine la limite théorique maximum vers laquelle un algorithme de compression sans pertes peut espérer compresser des données. Quelque soit l’entropie des données d’origine, une fois chiffrées leur entropie est maximale. Si un algorithme obtient une compression des données chiffrées, il faut sérieusement remettre en question la fiabilité de l’algorithme de chiffrement. CF <a class="external text" title="http://fr.wikipedia.org/wiki/Entropie_de_Shannon" href="http://fr.wikipedia.org/wiki/Entropie_de_Shannon" rel="nofollow">Wikipedia – Entropie de Shannon</a>.</p>
        <p>A cause de l’entropie après chiffrement, si on veut compresser les données il est donc nécessaire de le faire avant le chiffrement.</p>
        <p>Ensuite, il faut choisir l’algorithme de compression. On pourrait forcer par défaut cet algorithme, pour tout le monde. C’est notamment ce qui se passe pour le HTML5 avec le WebM ou le H.264… et c’est précisément ce qui pose problème. En dehors des problèmes de droits d’utilisation à s’acquitter, c’est une facilité pour l’implémentation de cette compression par défaut dans les programmes. Cela évite de devoir négocier préalablement l’algorithme de compression. Mais si il est difficile de présenter des vidéos en plusieurs formats à pré-négocier, ce n’est pas le cas de la plupart des données. On perd la capacité d’évolution que l’on a en acceptant de nouveaux algorithmes de compression. Et plus encore, on perd la capacité du choix de l’algorithme le plus adapté aux données à compresser. Il faut donc permettre l’utilisation de différents algorithmes de compression.</p>
        <p>Cependant, si l’objet à chiffrer est déjà compressé en interne, comme le PNG ou OGG par exemple, la compression avant chiffrement est inutile. Ce serait une sur compression qui bien souvent n’apporte rien. Le chiffrement n’implique donc pas automatiquement une compression.</p>
        <p>Lors du chiffrement, l’objet résultant chiffré est lié à l’objet source non chiffré par un lien <code>k</code>. Il est aussi marqué comme étant un objet de <i>type-mime</i> correspondant à l’algorithme de chiffrement, via un lien <code>l</code>. Pour marquer la compression avant chiffrement, un autre lien <code>l</code> est ajouté comme <i>type-mime</i> vers l’algorithme de compression utilisé. Ce lien n’est ajouté que dans le cas d’une compression réalisée en même temps que le chiffrement.</p>
        <p>La seule contrainte, c’est l’obligation d’utiliser un algorithme de compression sans perte. L’objet, une fois décompressé doit être vérifiable par sa signature. Il doit donc être strictement identique, aucune modification ou perte n’est tolérée.</p>

        <h5 id="ckotm">CKOTM / Cryptographie de l'Objet - Type Mime</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Il n’existe pas de type mime généralistes pour des fichiers chiffrés. Comme les objets chiffrés ne sont liés à aucune application en particulier.</p>
        <p>Il faut aussi un moyen de préciser l’algorithme de chiffrement derrière. Une application aura besoin de connaître cet algorithme pour déchiffrer le <i>flux</i> d’octets. En suivant la <a class="external text" title="http://www.rfc-editor.org/rfc/rfc2046.txt" href="http://www.rfc-editor.org/rfc/rfc2046.txt" rel="nofollow">rfc2046</a>, il reste la possibilité de créer quelque chose en <code>application/x-...</code></p>
        <p>Voici donc comment seront définis les objets chiffrés dans nebule :</p>
        <ul>
            <li><code>application/x-encrypted/aes-256-ctr</code></li>
            <li><code>application/x-encrypted/aes-256-cbc</code></li>
            <li><code>application/x-encrypted/rsa</code></li>
            <li>Etc…</li>
        </ul>
        <p>En fonction de l’algorithme invoqué, on sait si c’est du chiffrement symétrique ou asymétrique, et donc en principe si c’est pour une clé de session ou pas.</p>

        <h5 id="ckorc">CKORC / Cryptographie de l'Objet - Résolution de Conflits</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Comment se comporter face à un objet que l’on sait (lien k) chiffré dans un autre objet mais qui est disponible chez d’autres entités ? Si on est destinataire légitime de cet objet, on ne le propage pas en clair. On ne télécharge pas la version en clair. On garde la version chiffrée.</p>

        <h3 id="cka">CKA / Aléas cryptographiques</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L'aléa de qualité cryptographique est défini comme une suite de bits reconnue comme aléatoire, c'est à dire lorsque son état futur est parfaitement imprédictible, y compris en disposant de l'intégralité de l'aléa généré par la machine dans le passé. Elle est nécessaire à certains processus cryptographiques.</p>
        <p>L'aléa de qualité cryptographique étant long à générer, il doit être utilisé avec précaution pour ne pas se retrouver épuisée lorsque le besoin est réel.</p>
        <p>Cependant, l'aléa peut être utile dans certaines fonctions sans pour autant nécessiter d'être de bonne qualité. Il faut donc disposer d'un aléa de qualité cryptographique et un aléa généraliste.</p>
        <p>La bibliothèque propose dans son code deux générations d'aléa.</p>

        <h2 id="cs">CS / Sociabilité</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Lors de l'exploitation des liens, plusieurs méthodes permettent une analyse pré-définie de la validité dite sociale des liens afin de les trier ou de les filtrer.</p>
        <p>A faire...</p>

        <h2 id="cn">CN / Nettoyage, suppression et oubli</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L'oubli vonlontaire de certains liens et objets n'est encore ni théorisé ni implémenté mais deviendra indispensable lorsque l'espace viendra à manquer (cf <a href="#ooo">OOO</a> et <a href="#lo">LO</a>).</p>

        <?php
    }
}



// ========================================================================================
//   202_crypto_openssl.php
//   020241016144740
//   65f0c630ea5100dc978362d7e160436723232c9987a8527aa66ba8048c83d6b3.sha2.256

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class CryptoOpenssl extends Crypto implements CryptoInterface
{
    const SESSION_SAVED_VARS = array();

    const TYPE = 'Openssl';

    const HASH_ALGORITHM = array(
        'sha1.128',
        'sha2.224',
        'sha2.256',
        'sha2.384',
        'sha2.512',
    );
    const TRANSLATE_HASH_ALGORITHM = array(
        'sha1.128' => 'sha1',
        'sha2.224' => 'sha224',
        'sha2.256' => 'sha256',
        'sha2.384' => 'sha384',
        'sha2.512' => 'sha512',
        '' => '',
    );
    const TEST_HASH_ALGORITHM = array(
        'value'    => 'Bienvenue dans le projet nebule.',
        'sha1.128' => 'd689bc73bbf35e6547e6de4b0ea79a5fd3b83ffa',
        'sha2.224' => '8ee809ef3ec56e4e31273e2ee232697683d260db72d543ce6db4ab64',
        'sha2.256' => '0b8dc4408e7ab1c81716ae978abe1f75d4bd3ea9a7b882b8da6afacdafc0e32b',
        'sha2.384' => 'fef7e57afdbf243a756eae37fa7c556bc71050f555209d78b29d2e8feef56e62ed92da5e291669b6262170cd4f0dd0ba',
        'sha2.512' => 'b9d7b17462c0e2657171975ee0bd37e8dc0cab5d6ebc6496864af2e261f16d35c16642898ba0af5174ad80bada202032c641595be0fc56e4d35599add72f8079',
    );

    const SYMMETRIC_ALGORITHM = array(
        'aes.128.cbc',
        'aes.128.ctr',
        'aes.192.cbc',
        'aes.192.ctr',
        'aes.256.cbc',
        'aes.256.ctr',
    );
    const TRANSLATE_SYMMETRIC_ALGORITHM = array(
        'aes.128.cbc' => 'aes-128-cbc',
        'aes.128.ctr' => 'aes-128-ctr',
        'aes.192.cbc' => 'aes-192-cbc',
        'aes.192.ctr' => 'aes-192-ctr',
        'aes.256.cbc' => 'aes-256-cbc',
        'aes.256.ctr' => 'aes-256-ctr',
        '' => '',
    );

    const ASYMMETRIC_ALGORITHM = array(
        'rsa.1024',
        'rsa.2048',
        'rsa.4096',
    );
    const TRANSLATE_ASYMMETRIC_ALGORITHM = array(
        'rsa.1024' => 'rsa1024',
        'rsa.2048' => 'rsa2048',
        'rsa.4096' => 'rsa4096',
        '' => '',
    );

    protected function _initialisation(): void
    {
        // Nothing to do.
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getCryptoInstance()
     */
    public function getCryptoInstance(): CryptoInterface
    {
        return $this;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getCryptoInstanceName()
     */
    public function getCryptoInstanceName(): string
    {
        return get_class($this);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkFunction()
     */
    public function checkFunction(string $algo, int $type): bool
    {
        switch ($type) {
            case (Crypto::TYPE_HASH):
                return $this->_checkHashFunction($algo);
            case (Crypto::TYPE_SYMMETRIC):
                return $this->_checkSymmetricFunction($algo);
            case (Crypto::TYPE_ASYMMETRIC):
                return $this->_checkAsymmetricFunction();
        }
        return false;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkValidAlgorithm()
     */
    public function checkValidAlgorithm(string $algo, int $type): bool
    {
        switch ($type) {
            case (Crypto::TYPE_HASH):
                return $this->_checkHashAlgorithm($algo);
            case (Crypto::TYPE_SYMMETRIC):
                return $this->_checkSymmetricAlgorithm($algo);
            case (Crypto::TYPE_ASYMMETRIC):
                return $this->_checkAsymmetricAlgorithm($algo);
        }
        return false;
    }

    private function _getAlgorithmName(string $algo): int
    {
        $v = preg_split('/\./', $algo); // aes.256.ctr
        return (int)$v[0];
    }

    private function _getAlgorithmSize(string $algo): int
    {
        $v = preg_split('/\./', $algo); // aes.256.ctr
        return (int)$v[1];
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getRandom()
     */
    public function getRandom(int $size = 32, int $quality = Crypto::RANDOM_STRONG): string
    {
        if ($quality == Crypto::RANDOM_STRONG)
            return $this->_getStrongRandom($size);
        else
            return '';
    }

    /**
     * Get robust random binary content.
     * Size is in octets.
     * If problem, return empty string.
     * To save precious entropy, you have to use pseudo random in all case where you do not absolutely need strong random.
     *
     * @param int $size
     * @return string
     */
    private function _getStrongRandom(int $size = 32): string
    {
        if ($size == 0)
            return '';
        $strong = false;
        $data = openssl_random_pseudo_bytes($size, $strong);
        if (!$strong
            || $data === false
        )
            return '';
        return $data;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getEntropy()
     */
    public function getEntropy(string &$data): float
    {
        return CryptoSoftware::getEntropyStatic($data);
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::hash()
     */
    public function hash(string $data, string $algo = ''): string
    {
        $algo = $this->_translateHashAlgorithm($algo);
        if ($algo == '')
            return '';
        return hash($algo, $data);
    }

    private function _checkHashFunction(string $algo): bool
    {
        if (!$this->_checkHashAlgorithm($algo))
            return false;
        $hash = $this->hash(self::TEST_HASH_ALGORITHM['value'], $algo);
        if (self::TEST_HASH_ALGORITHM[$algo] == $hash)
            return true;
        $this->_metrologyInstance->addLog('Error check hash ' . $algo . ' return ' . $hash, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'f462ce6c');
        return false;
    }

    private function _checkHashAlgorithm(string $algo): bool
    {
        if (isset(self::TRANSLATE_HASH_ALGORITHM[$algo]))
            return true;
        $this->_metrologyInstance->addLog('Unsupported ' . $algo, Metrology::LOG_LEVEL_ERROR, __METHOD__, '965d71cf');
        return false;
    }

    private function _translateHashAlgorithm(string $name): string
    {
        if (isset(self::TRANSLATE_HASH_ALGORITHM[$name]))
            return self::TRANSLATE_HASH_ALGORITHM[$name];
        $this->_metrologyInstance->addLog('Invalid hash algorithm ' . $name, Metrology::LOG_LEVEL_ERROR, __METHOD__, '43c10796');
        return '';
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::encrypt()
     */
    public function encrypt(string $data, string $algo, string $hexKey, string $hexIV = ''): string
    {
        if ($data == ''
            || $hexKey == ''
            || !$this->_checkSymmetricAlgorithm($algo)
        )
            return '';

        $binIV = $this->_getBinIV($hexIV, $algo);
        $binKey = pack("H*", $hexKey);

        return openssl_encrypt($data, $this->_translateSymmetricAlgorithm($algo), $binKey, OPENSSL_RAW_DATA, $binIV);
        //return openssl_encrypt($data, $this->_translateSymmetricAlgorithm($algo), $binKey, OPENSSL_RAW_DATA, pack("H*", $binIV));
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::decrypt()
     */
    public function decrypt(string $data, string $algo, string $hexKey, string $hexIV = ''): string
    {
        if ($data == ''
            || $hexKey == ''
            || !$this->_checkSymmetricAlgorithm($algo)
        )
            return '';

        $binIV = $this->_getBinIV($hexIV, $algo);
        $binKey = pack("H*", $hexKey);

        return openssl_decrypt($data, $this->_translateSymmetricAlgorithm($algo), $binKey, OPENSSL_RAW_DATA, $binIV);
        //return openssl_decrypt($data, $this->_translateSymmetricAlgorithm($algo), $binKey, OPENSSL_RAW_DATA, pack("H*", $binIV));
    }

    private function _checkSymmetricFunction(string $algo): bool
    {
        $data = 'Bienvenue dans le projet nebule.';
        $hexKey = "8fdf208b4a79cef62f4e610ef7d409c110cb5d20b0148b9770cad5130106b6a1";
        $hexIV = $this->hash(date(DATE_ATOM) . microtime(false), 'sha1');
        $code = $this->encrypt($data, $algo, $hexKey, $hexIV);
        if ($code == '')
        {
            $this->_metrologyInstance->addLog('Error check symmetric ' . $algo . ' can not encode', Metrology::LOG_LEVEL_ERROR, __METHOD__, '3ab8726b');
            return false;
        }

        $decode = $this->decrypt($code, $algo, $hexKey, $hexIV);
        if ($decode == '')
        {
            $this->_metrologyInstance->addLog('Error check symmetric ' . $algo . ' can not decode ' . $code, Metrology::LOG_LEVEL_ERROR, __METHOD__, '2a6da5e1');
            return false;
        }

        return true;
    }

    private function _checkSymmetricAlgorithm(string $algo): bool
    {
        if (isset(self::TRANSLATE_SYMMETRIC_ALGORITHM[$algo]))
            return true;
        $this->_metrologyInstance->addLog('Unsupported ' . $algo, Metrology::LOG_LEVEL_ERROR, __METHOD__, '13fab565');
        return false;
    }

    private function _translateSymmetricAlgorithm(string $name): string
    {
        if (isset(self::TRANSLATE_SYMMETRIC_ALGORITHM[$name]))
            return self::TRANSLATE_SYMMETRIC_ALGORITHM[$name];
        $this->_metrologyInstance->addLog('Invalid symmetric algorithm ' . $name, Metrology::LOG_LEVEL_ERROR, __METHOD__, '5f83d258');
        return '';
    }

    /**
     * Generate an empty IV as hexadecimal value full of zero.
     *
     * @param int $length
     * @return string
     */
    private function _getNullIV(int $length): string
    {
        $r = '';
        for ($i = 0; $i < $length; $i++)
            $r = $r . '0';
        return $r;
    }

    /**
     * Convert the IV on hexadecimal value as binary value with max size accepted by the cryptographic algorithm.
     *
     * @param string $hexIV
     * @param string $algo
     * @return string
     */
    private function _getBinIV(string $hexIV, string $algo): string
    {
        if ($hexIV == '')
            $hexIV = $this->_getNullIV($this->_getAlgorithmSize($algo));
        $binIV = pack("H*", $hexIV);
        $maxIV = openssl_cipher_iv_length($this->_translateSymmetricAlgorithm($algo));
        if (strlen($binIV) > $maxIV)
            $binIV = substr($binIV, 0, $maxIV);
        return $binIV;
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::sign()
     */
    public function sign(string $data, string $privateKey, string $privatePassword): string
    {
        $signatureBin = '';
        $ressource = openssl_pkey_get_private($privateKey, $privatePassword);
        if ($ressource === false)
            return '';
        $maxSize = ((int)openssl_pkey_get_details($ressource)['bits']/8) - 11;
        if (strlen($data) > $maxSize)
            $data = substr($data, 0, $maxSize); // for PKCS padding # 1.

        $dataBin = pack('H*', $data);
        if (openssl_private_encrypt($dataBin, $signatureBin, $ressource, OPENSSL_PKCS1_PADDING))
            return bin2hex($signatureBin);
        $this->_metrologyInstance->addLog('ERROR crypto sign', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '3c5e617d'); // Log
        return '';
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::verify()
     */
    public function verify(string $data, string $sign, string $publicKey): bool
    {
        $ressource = openssl_pkey_get_public($publicKey);
        if ($ressource === false)
            return false;
        $maxSize = ((int)openssl_pkey_get_details($ressource)['bits']/8) - 11;
        if (strlen($data) > $maxSize)
            $data = substr($data, 0, $maxSize); // for PKCS padding # 1.

        $signBin = pack('H*', $sign);
        $decodeOK = openssl_public_decrypt($signBin, $decrypted, $ressource, OPENSSL_PKCS1_PADDING);
        $decrypted = substr(bin2hex($decrypted), -strlen($data), strlen($data));
        if ($decodeOK && $decrypted == $data)
            return true;
        return false;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::encryptTo()
     */
    public function encryptTo(string $data, string $publicKey): string
    {
        $ressource = openssl_pkey_get_public($publicKey);
        if ($ressource === false)
            return '';

        $code = '';
        if (openssl_public_encrypt($data, $code, $ressource, OPENSSL_PKCS1_PADDING))
            return $code;
        return '';
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::decryptTo()
     */
    public function decryptTo(string $code, string $privateKey, string $password): string
    {
        $ressource = openssl_pkey_get_private($privateKey, $password);
        if ($ressource === false)
            return '';

        $data = '';
        if (openssl_private_decrypt($code, $data, $ressource, OPENSSL_PKCS1_PADDING))
            return $data;
        return '';
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::newAsymmetricKeys()
     */
    public function newAsymmetricKeys(string $password = ''): array
    {
        $algo = $this->_configurationInstance->getOptionAsString('cryptoAsymmetricAlgorithm');
        if (!$this->_checkAsymmetricAlgorithm($algo))
            return array();

        // Prepare configuration for OpenSSL.
        $config = array(
            'digest_alg' => $this->_translateHashAlgorithm($this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm')),
            'private_key_bits' => $this->_getAlgorithmSize($algo),
        );
        switch ($this->_getAlgorithmName($algo)) {
            case 'rsa' :
                $config['private_key_type'] = OPENSSL_KEYTYPE_RSA;
                break;
            case 'dsa' :
                $config['private_key_type'] = OPENSSL_KEYTYPE_DSA;
                break;
            default    :
                return array();
        }

        // Generate new Pkey.
        $pkey = openssl_pkey_new($config);

        // Get public key.
        $pkeyDetail = openssl_pkey_get_details($pkey);
        if ($pkeyDetail === false)
            return array();

        // Get private key with password.
        if ($password == '')
            $password = null;
        if (openssl_pkey_export($pkey, $privateKey, $password) !== true)
            return array();

        unset($pkey);
        return array(
            'public' => $pkeyDetail['key'],
            'private' => $privateKey,
        );
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkPrivateKeyPassword()
     */
    public function checkPrivateKeyPassword(string $privateKey, string $password): bool
    {
        $pkey = openssl_pkey_get_private($privateKey, $password);
        if ($pkey === false)
            return false;
        unset($pkey);
        return true;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::changePrivateKeyPassword()
     */
    public function changePrivateKeyPassword(string $privateKey, string $oldPassword, string $newPassword): string
    {
        $pkey = openssl_pkey_get_private($privateKey, $oldPassword);
        if ($pkey === false)
            return '';
        if (openssl_pkey_export($pkey, $privateKey, $newPassword) !== true)
            return '';
        return $privateKey;
    }

    private function _checkAsymmetricFunction(): bool
    {
        $private_pem = <<<EOD
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: AES-128-CBC,687B57E822A2DA943BFE465B95E9C217

A0Cv5nNdSrFq5R5kGgWlNytpTOlJh5E4+PiZK5L5D2JMwjIogB7ASjf+RDCwWWeJ
pgGBnMDLXyHdC10x0vMSidp6oUHv/fT8hgEKPr+KaUKAhLIQTrh/MiTmmaOlXBED
i1cTv3ZPo4u9m593vJ79dSP4DKNVmVoS2b7iZlPAimHx2CE+raKAttYYZv9yhWti
7HyA/cJcHypsK3WtTzBEkhtkD73wcAn7dmWBVaitrPUzZDJLtiwW4I4TmfMnOvFB
bQRia5vJzGg97rBhi7pc/hPozdQaFDrAvsnB/pqea486iIvVH6u7rEOd0gFSei1H
/O4zjxW/1Nx97cJkqGvaJ4ZMgKIz2t/YXUgZUMLBdaav4D4cUx9s05c9mwop1Vk6
ZEWbQ42aefq9GmU0N2sqCUwdrvxzO6Trf7T554F+kibqkY2YGZrEDD0iLK4ZWWOc
ILu5MNEvDrdBMi4JBr/BhWSOkCDmm6/l9qaWdSQW7x29I3KGcbPdNcbtzoqT+Sqa
T7UHkzbgHcLCjRtyecyLIBdgwJzoS+uS98dlQI+KOuxJk7Iw/+73z8aM5tuPDdtf
V3BAxDAIT6spAjomWgGBtGaOKXVuJjmj177qhY97L79PmFYvPZPVVVKBpbQNcH8z
3sso2/aWy4qotavOM4wWNBa/dmJmXa6kJ/VjwScaUUrTXYnHTr8uIoXqlldDj1sE
A+KwfxWveZxC6IE9XzQQuyk7DgfkHdbwKQ5+IKzDrrmSTjyDY5u6xiEsvLd8oSw6
LfMSjTNzTsdGnojuLQAt4r8t+K3cV6TgF1T+rxt67iXe0xn340KJK8jt31XN//F5
ktUEvdKGM4VuWt9E51bPC5p3znwTUGfP49Aeh2g3vhIJc51FSvMUtjIBytaTwqht
V37UMmkR6LtMOzwdGaoasZ0IZFVu2KvWt31OL9lEtWFAtLGWZ4NfwOVy0yQHeLkV
EtOLBWpMaxkwlTd5XS5TlGoS+/M9JGpHh0LnNrf5VsfixXEyiITyci32HEv/u8pS
zrJ/9cSj8mhj/gT0Tr2yp59YC6+3AoVX/qn8ucZX/Nwtd+XPvGeJ20z7IoJXbtjQ
0nnTnpOKEhjE41+Vc7ZxTeLtZ1dtW9PnoWHznGXYjb+Rj8FXBuRBz9tnsmBbtHs8
vORC2bv1py1GgvVbMuavNx4Y0MzbEfvNlLcctvarcN4zr2CavSmpAgVsmrjDFBWY
YfUKzDiIn3+O5T/nOXXvIjN5dw5tS2KUeZ+TFVQezoYhc6fZM5pNVlnbwa0zkXWZ
DW8RWy+bmB5nJiMliARWxqSSkaI5RG3dAyT5LsCV0U9Aolfr//bqvHWk/49zT0gf
uOUf4HEEslKM/f9RBDkLLOYAJzmq1Be/kWc4MkhVOqBu8qQg841aPsuioJdC6Ib2
mMw+at7hw80kCB6xqSJaSvbaSS4isTSGKxjPFtqXWQc9E2cvStTcoIaiT33JG/TN
U9tOokWpyoUJtPZanhMyBF/A9GAzo7DFuuL/4bGZ5bmoyFfH+wAjQPKqBDTREmHO
sTqIWSkAHD8dEZgukAY7kUsWrYnAqxaKbyAuT4Ni6SUcU2PiF2agvJh7Pe2SZyLj
-----END RSA PRIVATE KEY-----
EOD;
        $public_pem = <<<EOD
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvUKNo2kJ5XYg7hh1X6rS
roMdy5d1CAhGzas2PzAwAc/8UdTiaOpQkhVYgyP/oM5ouROaTuALQ4RCY04O14op
wk56EQTPZfnbIIFZYyGZeH8w8S5Nabv2F9XK9eQJL0LgozBWBMAQpsuiqgJiq0Fe
XAUetu3McVlSd9Ro1F0xsjTTff6HIxNvCEwLM748rCXIDLxTxGYG5+YehigzH/at
jRAiRdZxSruYPyQcxWhZei5mSqLr31beZ2HmoNRiqOgx9FRqrJSLlCQSjv0Z9Ubu
17EVQB2iTsdjaNk7GqPdclBnXkaOg/VxIHsVeoUylukOPda+uTkvMiu9Ao9s/+A9
bwIDAQAB
-----END PUBLIC KEY-----
EOD;
        $private_pass = "0000";
        $data = 'Bienvenue dans le projet nebule.';
        $hashData = hash('sha256', $data);
        $signed = $this->sign($hashData, $private_pem, $private_pass);
        if ($this->verify($hashData, $signed, $public_pem))
            return true;
        $this->_metrologyInstance->addLog('Error check asymmetric ' . $hashData . ' can not verify ' . $signed, Metrology::LOG_LEVEL_ERROR, __METHOD__, '3ab8726b');
        return false;
    }

    private function _checkAsymmetricAlgorithm(string $algo): bool
    {
        if (isset(self::TRANSLATE_ASYMMETRIC_ALGORITHM[$algo]))
            return true;
        $this->_metrologyInstance->addLog('Unsupported ' . $algo, Metrology::LOG_LEVEL_ERROR, __METHOD__, '2a04d29d');
        return false;
    }

    /*private function _translateAsymmetricAlgorithm(string $name): string
    {
        if (isset(self::TRANSLATE_ASYMMETRIC_ALGORITHM[$name]))
            return self::TRANSLATE_ASYMMETRIC_ALGORITHM[$name];
        $this->_metrology->addLog('Invalid asymmetric algorithm ' . $name, Metrology::LOG_LEVEL_ERROR, __METHOD__, '2b4c9b6b');
        return '';
    }*/
}



// ========================================================================================
//   203_crypto_software.php
//   020250215163515
//   30f67e8a074fe107782fa7325dc373369891b60730bacca46af66c62c729efa1.sha2.256

/**
 * Fallback library.
 * TODO can be used for new cryptogrammes.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class CryptoSoftware extends Crypto implements CryptoInterface
{
    const SESSION_SAVED_VARS = array();

    const TYPE = 'Software';

    protected function _initialisation(): void
    {
        // Nothing to do.
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getCryptoInstance()
     */
    public function getCryptoInstance(): CryptoInterface
    {
        return $this;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getCryptoInstanceName()
     */
    public function getCryptoInstanceName(): string
    {
        return get_class($this);
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkFunction()
     */
    public function checkFunction(string $algo, int $type): bool
    {
        switch ($type) {
            case (Crypto::TYPE_HASH):
                return $this->_checkHashFunction($algo);
            case (Crypto::TYPE_SYMMETRIC):
                return $this->_checkSymmetricFunction($algo);
            case (Crypto::TYPE_ASYMMETRIC):
                return $this->_checkAsymmetricFunction($algo);
        }
        return false;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkValidAlgorithm()
     */
    public function checkValidAlgorithm(string $algo, int $type): bool
    {
        switch ($type) {
            case (Crypto::TYPE_HASH):
                return $this->_checkHashAlgorithm($algo);
            case (Crypto::TYPE_SYMMETRIC):
                return $this->_checkSymmetricAlgorithm($algo);
            case (Crypto::TYPE_ASYMMETRIC):
                return $this->_checkAsymmetricAlgorithm($algo);
        }
        return false;
    }

    // --------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getRandom()
     */
    public function getRandom(int $size = 32, int $quality = Crypto::RANDOM_PSEUDO): string
    {
        if ($quality == Crypto::RANDOM_PSEUDO)
            return $this->_getPseudoRandom($size);
        else
            return '';
    }

    /**
     * Génère de l'aléa avec une source pas forcément fiable.
     * La taille est en octets.
     *
     * La graine de génération pseudo-aléatoire est un mélange de la date,
     *   de l'heure avec une précision de la micro-seconde,
     *   du nom et de la version de la bibliothèque.
     *
     * Ne doit pas être utilisé pour générer des mots de passes !
     *
     * @param int $size
     * @return string
     */
    private function _getPseudoRandom(int $size = 32): string
    {
        global $nebuleSurname, $nebuleLibVersion;

        if ($size == 0
            || !is_int($size)
        )
            return '';

        // Résultat à remplir.
        $result = '';

        // Définit l'algorithme de divergence.
        $algo = 'sha256';

        // Génère une graine avec la date pour le compteur interne.
        $internalCounter = date(DATE_ATOM) . microtime(false) . $nebuleSurname . $nebuleLibVersion . $this->_nebuleInstance->getEntitiesInstance()->getServerEntityID();

        // Boucle de remplissage.
        while (strlen($result) < $size) {
            $diffSize = $size - strlen($result);

            // Fait évoluer le compteur interne.
            $internalCounter = hash($algo, $internalCounter);

            // Fait diverger le compteur interne pour la sortie.
            // La concaténation avec un texte empêche de remonter à la valeur du compteur interne.
            $exitValue = pack("H*", hash($algo, $internalCounter . 'liberté égalité fraternité'));

            // Tronc au besoin la taille de la sortie.
            if (strlen($exitValue) > $diffSize)
                $exitValue = substr($exitValue, 0, $diffSize);

            // Ajoute la sortie au résultat final.
            $result .= $exitValue;
        }

        // Nettoyage.
        unset($internalCounter, $exitValue, $diffSize);

        $this->_nebuleInstance->getMetrologyInstance()->addLog('calculated pseudo random count : ' . strlen($result), Metrology::LOG_LEVEL_DEBUG, __METHOD__, '017fc207');
        $this->_nebuleInstance->getMetrologyInstance()->addLog('calculated pseudo random entropy : ' . self::getEntropyStatic($result), Metrology::LOG_LEVEL_DEBUG, __METHOD__, '8c154c7b');
        return $result;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::getEntropy()
     */
    public function getEntropy(string &$data): float
    {
        return self::getEntropyStatic($data);
    }

    /**
     * @see CryptoInterface::getEntropy()
     */
    static public function getEntropyStatic(string &$data): float
    {
        $h = 0;
        $s = strlen($data);
        if ($s == 0)
            return 0;
        foreach (count_chars($data, 1) as $v) {
            $p = $v / $s;
            $h -= $p * log($p) / log(2);
        }
        return $h;
    }

    // --------------------------------------------------------------------------------

    private function _checkHashFunction(string $algo): bool
    {
        return false;
    }

    private function _checkHashAlgorithm(string $algo): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::hash()
     */
    public function hash(string $data, string $algo = ''): string
    {
        return '';
    }

    // --------------------------------------------------------------------------------

    private function _checkSymmetricFunction(string $algo): bool
    {
        return false;
    }

    private function _checkSymmetricAlgorithm(string $algo): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::encrypt()
     */
    public function encrypt(string $data, string $algo, string $hexKey, string $hexIV = ''): string
    {
        return '';
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::decrypt()
     */
    public function decrypt(string $data, string $algo, string $hexKey, string $hexIV = ''): string
    {
        return '';
    }

    // --------------------------------------------------------------------------------

    private function _checkAsymmetricFunction(string $algo): bool
    {
        return false;
    }

    private function _checkAsymmetricAlgorithm(string $algo): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::sign()
     */
    public function sign(string $data, string $privateKey, string $privatePassword): string
    {
        return '';
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::verify()
     */
    public function verify(string $data, string $sign, string $publicKey): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::encryptTo()
     */
    public function encryptTo(string $data, string $publicKey): string
    {
        return '';
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::decryptTo()
     */
    public function decryptTo(string $code, string $privateKey, string $password): string
    {
        return '';
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::newAsymmetricKeys()
     */
    public function newAsymmetricKeys(string $password = ''): array
    {
        return array();
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::checkPrivateKeyPassword()
     */
    public function checkPrivateKeyPassword(string $privateKey, string $password): bool
    {
        return false;
    }

    /**
     * {@inheritDoc}
     * @see CryptoInterface::changePrivateKeyPassword()
     */
    public function changePrivateKeyPassword(string $privateKey, string $oldPassword, string $newPassword): string
    {
        return '';
    }
}



/*******************************************************************************
 *
 *      SHA256 static class for PHP
 *      implemented by feyd _at_ devnetwork .dot. net
 *      specification from http://csrc.nist.gov/cryptval/shs/sha256-384-512.pdf
 *
 *      ? Copyright 2005 Developer's Network. All rights reserved.
 *      This is licensed under the Lesser General Public License (LGPL)
 *
 *      Thanks to CertainKey Inc. for providing some example outputs in Javascript
 *
 *----- Version 1.0.1 ----------------------------------------------------------
 *
 *      Syntax:
 *            string SHA256::hashing( string message[, string format ])
 *
 *      Description:
 *            SHA256::hashing() is a static function that must be called with `message`
 *            and optionally `format`. Possible values for `format` are:
 *            'bin' binary string output
 *            'hex' default; hexidecimal string output (lower case)
 *
 *            Failures return FALSE.
 *
 *      Usage:
 *            $hash = SHA256::hashing('string to hash');
 *
 ******************************************************************************/

//      hashing class state and storage object. Abstract base class only.
class hashData
{
    //      final hash
    var $hash = null;
}

//      hashing class. Abstract base class only.
class hash
{
    //      The base modes are:
    //            'bin' - binary output (most compact)
    //            'bit' - bit output (largest)
    //            'oct' - octal output (medium-large)
    //            'hex' - hexidecimal (default, medium)

    //      perform a hash on a string
    function hash($str = '', $mode = 'hex'): bool
    {
        //trigger_error('hash::hash() NOT IMPLEMENTED', E_USER_WARNING);
        return false;
    }

    //      chop the resultant hash into $length byte chunks
    function hashChunk($str, $length, $mode = 'hex'): bool
    {
        trigger_error('hash::hashChunk() NOT IMPLEMENTED', E_USER_WARNING);
        return false;
    }

    //      perform a hash on a file
    function hashFile($filename, $mode = 'hex'): bool
    {
        trigger_error('hash::hashFile() NOT IMPLEMENTED', E_USER_WARNING);
        return false;
    }

    //      chop the resultant hash into $length byte chunks
    function hashChunkFile($filename, $length, $mode = 'hex'): bool
    {
        trigger_error('hash::hashChunkFile() NOT IMPLEMENTED', E_USER_WARNING);
        return false;
    }
}

class SHA256Data extends hashData
{
    //      buffer
    var $buf = array();

    //      padded data
    var $chunks = null;

    function SHA256Data($str)
    {
        $M = strlen($str);      //    number of bytes
        $L1 = ($M >> 28) & 0x0000000F;  //        top order bits
        $L2 = $M << 3;  //        number of bits
        $l = pack('N*', $L1, $L2);

        //      64 = 64 bits needed for the size mark. 1 = the 1 bit added to the
        //      end. 511 = 511 bits to get the number to be at least large enough
        //      to require one block. 512 is the block size.
        $k = $L2 + 64 + 1 + 511;
        $k -= $k % 512 + $L2 + 64 + 1;
        $k >>= 3;       //     convert to byte count

        $str .= chr(0x80) . str_repeat(chr(0), $k) . $l;

        assert('strlen($str) % 64 == 0');

        //      break the binary string into 512-bit blocks
        preg_match_all( '#.{64}#', $str, $this->chunks );
        $this->chunks = $this->chunks[0];

        //      H(0)
        /*
        $this->hash = array
        (
        (int)0x6A09E667, (int)0xBB67AE85,
        (int)0x3C6EF372, (int)0xA54FF53A,
        (int)0x510E527F, (int)0x9B05688C,
        (int)0x1F83D9AB, (int)0x5BE0CD19,
        );
        */

        $this->hash = array
        (
            1779033703,          -1150833019,
            1013904242,          -1521486534,
            1359893119,          -1694144372,
            528734635,            1541459225,
        );
    }
}


//      static class. Access via SHA256::hash()
class SHA256 extends hash
{
    static function hashing($str, $mode = 'hex'): bool
    {
        static $modes = array( 'hex', 'bin', 'bit' );
        $ret = false;

        if(!in_array(strtolower($mode), $modes))
        {
            trigger_error('mode specified is unrecognized: ' . $mode, E_USER_WARNING);
        }
        else
        {
            $data = new SHA256Data($str);

            SHA256::compute($data);

            $func = array('SHA256', 'hash' . $mode);
            if(is_callable($func))
            {
                $func = 'hash' . $mode;
                $ret = SHA256::$func($data);
                //$ret = call_user_func($func, $data);
            }
            else
            {
                trigger_error('SHA256::hash' . $mode . '() NOT IMPLEMENTED.', E_USER_WARNING);
            }
        }

        return $ret;
    }

    //      ------------
    //      begin internal functions

    //      32-bit summation
    static function sum(): int
    {
        $T = 0;
        for($x = 0, $y = func_num_args(); $x < $y; $x++)
        {
            //      argument
            $a = func_get_arg($x);

            //      carry storage
            $c = 0;

            for($i = 0; $i < 32; $i++)
            {
                //      sum of the bits at $i
                $j = (($T >> $i) & 1) + (($a >> $i) & 1) + $c;
                //      carry of the bits at $i
                $c = ($j >> 1) & 1;
                //      strip the carry
                $j &= 1;
                //      clear the bit
                $T &= ~(1 << $i);
                //      set the bit
                $T |= $j << $i;
            }
        }

        return $T;
    }


    //      compute the hash
    static function compute(&$hashData)
    {
        static $vars = 'abcdefgh';
        static $K = null;

        if($K === null)
        {
            /*
             $K = array(
             (int)0x428A2F98, (int)0x71374491, (int)0xB5C0FBCF, (int)0xE9B5DBA5,
             (int)0x3956C25B, (int)0x59F111F1, (int)0x923F82A4, (int)0xAB1C5ED5,
             (int)0xD807AA98, (int)0x12835B01, (int)0x243185BE, (int)0x550C7DC3,
             (int)0x72BE5D74, (int)0x80DEB1FE, (int)0x9BDC06A7, (int)0xC19BF174,
             (int)0xE49B69C1, (int)0xEFBE4786, (int)0x0FC19DC6, (int)0x240CA1CC,
             (int)0x2DE92C6F, (int)0x4A7484AA, (int)0x5CB0A9DC, (int)0x76F988DA,
             (int)0x983E5152, (int)0xA831C66D, (int)0xB00327C8, (int)0xBF597FC7,
             (int)0xC6E00BF3, (int)0xD5A79147, (int)0x06CA6351, (int)0x14292967,
             (int)0x27B70A85, (int)0x2E1B2138, (int)0x4D2C6DFC, (int)0x53380D13,
             (int)0x650A7354, (int)0x766A0ABB, (int)0x81C2C92E, (int)0x92722C85,
             (int)0xA2BFE8A1, (int)0xA81A664B, (int)0xC24B8B70, (int)0xC76C51A3,
             (int)0xD192E819, (int)0xD6990624, (int)0xF40E3585, (int)0x106AA070,
             (int)0x19A4C116, (int)0x1E376C08, (int)0x2748774C, (int)0x34B0BCB5,
             (int)0x391C0CB3, (int)0x4ED8AA4A, (int)0x5B9CCA4F, (int)0x682E6FF3,
             (int)0x748F82EE, (int)0x78A5636F, (int)0x84C87814, (int)0x8CC70208,
             (int)0x90BEFFFA, (int)0xA4506CEB, (int)0xBEF9A3F7, (int)0xC67178F2
             );
             */
            $K = array (
                1116352408,    1899447441,  -1245643825,  -373957723,
                961987163,     1508970993,  -1841331548,  -1424204075,
                -670586216,    310598401,    607225278,    1426881987,
                1925078388,   -2132889090,  -1680079193,  -1046744716,
                -459576895,   -272742522,    264347078,    604807628,
                770255983,     1249150122,   1555081692,   1996064986,
                -1740746414,  -1473132947,  -1341970488,  -1084653625,
                -958395405,   -710438585,    113926993,    338241895,
                666307205,     773529912,    1294757372,   1396182291,
                1695183700,    1986661051,  -2117940946,  -1838011259,
                -1564481375,  -1474664885,  -1035236496,  -949202525,
                -778901479,   -694614492,   -200395387,    275423344,
                430227734,     506948616,    659060556,    883997877,
                958139571,     1322822218,   1537002063,   1747873779,
                1955562222,    2024104815,  -2067236844,  -1933114872,
                -1866530822,  -1538233109,  -1090935817,  -965641998,
            );
        }

        $W = array();
        for($i = 0, $numChunks = sizeof($hashData->chunks); $i < $numChunks; $i++)
        {
            //      initialize the registers
            for($j = 0; $j < 8; $j++)
                ${$vars[$j]} = $hashData->hash[$j];

            //      the SHA-256 compression function
            for($j = 0; $j < 64; $j++)
            {
                if($j < 16)
                {
                    $T1  = ord($hashData->chunks[$i][$j*4]) & 0xFF; $T1 <<= 8;
                    $T1 |= ord($hashData->chunks[$i][$j*4+1]) & 0xFF; $T1 <<= 8;
                    $T1 |= ord($hashData->chunks[$i][$j*4+2]) & 0xFF; $T1 <<= 8;
                    $T1 |= ord($hashData->chunks[$i][$j*4+3]) & 0xFF;
                    $W[$j] = $T1;
                }
                else
                {
                    $W[$j] = SHA256::sum(((($W[$j-2] >> 17) & 0x00007FFF) | ($W[$j-2] << 15)) ^ ((($W[$j-2] >> 19) & 0x00001FFF) | ($W[$j-2] << 13)) ^ (($W[$j-2] >> 10) & 0x003FFFFF), $W[$j-7], ((($W[$j-15] >> 7) & 0x01FFFFFF) | ($W[$j-15] << 25)) ^ ((($W[$j-15] >> 18) & 0x00003FFF) | ($W[$j-15] << 14)) ^ (($W[$j-15] >> 3) & 0x1FFFFFFF), $W[$j-16]);
                }

                $T1 = SHA256::sum($h, ((($e >> 6) & 0x03FFFFFF) | ($e << 26)) ^ ((($e >> 11) & 0x001FFFFF) | ($e << 21)) ^ ((($e >> 25) & 0x0000007F) | ($e << 7)), ($e & $f) ^ (~$e & $g), $K[$j], $W[$j]);
                $T2 = SHA256::sum(((($a >> 2) & 0x3FFFFFFF) | ($a << 30)) ^ ((($a >> 13) & 0x0007FFFF) | ($a << 19)) ^ ((($a >> 22) & 0x000003FF) | ($a << 10)), ($a & $b) ^ ($a & $c) ^ ($b & $c));
                $h = $g;
                $g = $f;
                $f = $e;
                $e = SHA256::sum($d, $T1);
                $d = $c;
                $c = $b;
                $b = $a;
                $a = SHA256::sum($T1, $T2);
            }

            //      compute the next hash set
            for($j = 0; $j < 8; $j++)
                $hashData->hash[$j] = SHA256::sum(${$vars[$j]}, $hashData->hash[$j]);
        }
    }


    //      set up the display of the hash in hex.
    static function hashHex(&$hashData): string
    {
        $str = '';

        reset($hashData->hash);
        do
        {
            $str .= sprintf('%08x', current($hashData->hash));
        }
        while(next($hashData->hash));

        return $str;
    }


    //      set up the output of the hash in binary
    function hashBin(&$hashData): string
    {
        $str = '';

        reset($hashData->hash);
        do
        {
            $str .= pack('N', current($hashData->hash));
        }
        while(next($hashData->hash));

        return $str;
    }
}

/*
//--------------
//      REMOVAL ALL FUNCTIONS AFTER THIS WHEN NOT TESTING
//--------------

//      format a string into 4 byte hex chunks
function hexerize($str)
{
    $n = 0;
    $b = 0;
    if(is_array($str))
    {
        reset($str);
        $o = 'array(' . sizeof($str) . ')::' . "\n\n";
        while($s = current($str))
        {
            $o .= hexerize($s);
            next($str);
        }
        $o .= 'end array;'."\n";
    }
    else
    {
        if(is_integer($str) || is_float($str))
            $str = pack('N',$str);
        $o = 'string(' . strlen($str) . ')' . "::\n";
        for($i = 0, $j = strlen($str); $i < $j; $i++, $b = $i % 4)
        {
            $o .= sprintf('%02X', ord($str{$i}));
            //      only process when 32-bits have passed through
            if($i != 0 && $b == 3)
            {
                //      process new line points
                if($n == 3)
                    $o .= "\n";
                else
                    $o .= ' ';
                ++$n;
                $n %= 4;
            }
        }
    }

    return $o . "\n";
}


//      testing functions

function test1()
{
    $it = 1;

    echo '<pre>';

    $test = array('abc','abcdbcdecdefdefgefghfghighijhijkijkljklmklmnlmnomnopnopq');

    foreach($test as $str)
    {
        echo 'Testing ' . var_export($str,true) . "\n";
        list($s1,$s2) = explode(' ', microtime());
        for($x = 0; $x < $it; $x++)
            $data = new SHA256Data($str);
        list($e1,$e2) = explode(' ', microtime());
        echo hexerize($data->chunks);
        echo hexerize($data->hash);
        echo 'processing took ' . (($e2 - $s2 + $e1 - $s1) / $it) . ' seconds.' . "\n\n\n";
    }

    echo '</pre>';
}

function test2()
{
    $it = 1;

    echo '<pre>';

    $test = array('abc','abcdbcdecdefdefgefghfghighijhijkijkljklmklmnlmnomnopnopq');

    foreach($test as $str)
    {
        echo 'Testing ' . var_export($str,true) . "\n";
        list($s1,$s2) = explode(' ', microtime());
        for($x = 0; $x < $it; $x++)
            $o = SHA256::hash($str);
        list($e1,$e2) = explode(' ', microtime());
        echo $o;
        echo 'processing took ' . (($e2 - $s2 + $e1 - $s1) / $it) . ' seconds.' . "\n\n\n";
    }

    echo '</pre>';
}

function testSum()
{
    echo '<pre>';

    echo SHA256::sum(1,2,3,4,5,6,7,8,9,10);

    echo '</pre>';
}

function testSpeedHash($it = 10)
{
    $it = intval($it);
    if($it === 0)
        $it = 10;

    set_time_limit(-1);

    echo '<pre>' . "\n";

    $test = array(
        ''=>'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
        'abc'=>'ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad',
        'message digest'=>'f7846f55cf23e14eebeab5b4e1550cad5b509e3348fbc4efa3a1413d393cb650',
        'secure hash algorithm'=>'f30ceb2bb2829e79e4ca9753d35a8ecc00262d164cc077080295381cbd643f0d',
        'SHA256 is considered to be safe'=>'6819d915c73f4d1e77e4e1b52d1fa0f9cf9beaead3939f15874bd988e2a23630',
        'abcdbcdecdefdefgefghfghighijhijkijkljklmklmnlmnomnopnopq'=>'248d6a61d20638b8e5c026930c3e6039a33ce45964ff2167f6ecedd419db06c1',
        'For this sample, this 63-byte string will be used as input data'=>'f08a78cbbaee082b052ae0708f32fa1e50c5c421aa772ba5dbb406a2ea6be342',
        'This is exactly 64 bytes long, not counting the terminating byte'=>'ab64eff7e88e2e46165e29f2bce41826bd4c7b3552f6b382a9e7d3af47c245f8',
    );

    foreach($test as $str => $hash)
    {
        echo 'Testing ' . var_export($str,true) . "\n";
        echo 'Start time: ' . date('Y-m-d H:i:s') . "\n";
        if($it > 1)
        {
            list($s1,$s2) = explode(' ', microtime());
            $o = SHA256::hash($str);
            list($e1,$e2) = explode(' ', microtime());
            echo 'estimated time to perform test: ' . (($e2 - $s2 + $e1 - $s1) * $it) . ' seconds for ' . $it . ' iterations.' . "\n";
        }

        $t = 0;
        for($x = 0; $x < $it; $x++)
        {
            list($s1,$s2) = explode(' ', microtime());
            $o = SHA256::hash($str);
            list($e1,$e2) = explode(' ', microtime());
            $t += $e2 - $s2 + $e1 - $s1;
        }
        echo var_export($o,true) . ' == ' . var_export($hash,true) . ' ' . (strcasecmp($o,$hash)==0 ? 'PASSED' : 'FAILED') . "\n";
        echo 'processing took ' . ($t / $it) . ' seconds.' . "\n\n\n";
    }

    echo '</pre>';
}

//testSpeedHash(1);

//--------------
//      END REMOVAL HERE
//--------------
*/



// ========================================================================================
//   300_social_interface.php
//   020250215163515
//   631c135ca5008d6911290a59a27bd8dd9e8b93f4d9b2e0739164645576a88e15.sha2.256

/**
 * L'interface SocialInterface.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
interface SocialInterface
{
    public function __toString();

    /**
     * Retourne le type de système de fichiers.
     *
     * @return string
     */
    //public function getType(): string;

    /**
     * Retourne l'état de préparation'.
     *
     * @return bool
     */
    public function getReady(): bool;

    public function arraySocialFilter(array &$links, string $socialClass = ''): void;
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float;
    public function setList(array $listID): bool;
    public function unsetList(): bool;
}



// ========================================================================================
//   301_social.php
//   020250215163515
//   86ec450c7c450ef43a320c2fc0acae85a2b284cdf2b78ee8b788717eb6e3ee2f.sha2.256

/**
 * Head class to manage social interacts with links for current entity.
 * Must be serialized on PHP session with nebule class.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class Social extends Functions implements SocialInterface
{
    const DEFAULT_CLASS = 'authority';

    private ?SocialInterface $_defaultInstance = null;

    public function __toString(): string
    {
        return self::TYPE;
    }

    protected function _initialisation(): void
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $myClass = get_class($this);
        $size = strlen($myClass);
        $list = get_declared_classes();
        foreach ($list as $class) {
            if (substr($class, 0, $size) == $myClass && $class != $myClass) {
                $this->_metrologyInstance->addLog('add class ' . $class, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'aa8a205b');
                $this->_initSubInstance($class);
            }
        }
        $this->_defaultInstance = $this->_getDefaultSubInstance('socialLibrary');
    }

    /**
     * Gère le classement social des liens.
     *
     * @param array  $links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        if ($socialClass == ''
            || !isset($this->_listClasses[$socialClass])
            || !isset($this->_listInstances[$socialClass])
        )
        {
            $this->_defaultInstance->arraySocialFilter($links, '');
            return;
        }

        $this->_listInstances[$socialClass]->arraySocialFilter($links, '');
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister $link
     * @param string       $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        if ($socialClass != '')
            $result = $this->_listInstances[get_class($this) . $this->_listTypes[$socialClass]]->linkSocialScore($link, '');
        else
            $result = $this->_defaultInstance->linkSocialScore($link, '');
        return $result;
    }

    /**
     * Permet d'injecter une liste pour le calcul/filtrage social.
     * Nécessaire à certains filtrages sociaux, ignoré par d'autres.
     * La liste doit contenir des ID d'objet et non des objets.
     *
     * @param array  $listID
     * @param string $socialClass
     * @return boolean
     */
    public function setList(array $listID, string $socialClass = ''): bool
    {
        if ($socialClass != '')
            $result = $this->_listInstances[get_class($this) . $this->_listTypes[$socialClass]]->setList($listID);
        else
            $result = $this->_defaultInstance->setList($listID);
        return $result;
    }

    /**
     * Permet de vider la liste pour le calcul/filtrage social.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function unsetList(string $socialClass = ''): bool
    {
        if ($socialClass != '')
            $result = $this->_listInstances[get_class($this) . $this->_listTypes[$socialClass]]->unsetList();
        else
            $result = $this->_defaultInstance->unsetList();
        return $result;
    }

    /**
     * Retourne la liste des modes de calculs sociaux disponibles.
     *
     * @return array
     */
    public function getSocialNames(): array
    {
        return $this->_listTypes;
    }

    public function getSocialInstances(): array
    {
        return $this->_listInstances;
    }

    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#s">S / Social</a></li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h1 id="s">S / Social</h1>
        <p>Gestion des relations sociales dans l'exploitation des objets. En cours...</p>

        <?php
    }
}



// ========================================================================================
//   302_social_myself.php
//   020250215163515
//   6861d50861b1d008acb5a261d1b6d8cee115f69f2540562c032533153c6ecef7.sha2.256

/**
 * Classe de gestion du côté social des liens limités à l'entité en cours.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Si le signataire du lien est l'entité en cours, retourne un score de 1.
 * Sinon retourne un score de 0.
 */
class SocialMySelf extends Social implements SocialInterface
{
    const TYPE='myself';

    protected function _initialisation(): void
    {
        // Nothing to do.
    }

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) != 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=myself score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        // Si l'entité signataire du lien est une des entités courante, retourne la valeur sociale 1.
        foreach ($link->getSignersEID() as $signer) {
            if ($signer == $this->_nebuleInstance->getEntitiesInstance()->getCurrentEntityID()) {
                $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=myself score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                return 1;
            }
        }

        // Sinon par défaut retourne la valeur sociale 0.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=myself score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 0;
    }



    /**
     * Liste pour le calcul/filtrage social.
     * @var array:string
     */
    protected $_list = array();

    /**
     * Permet d'injecter une liste pour le calcul/filtrage social.
     * La liste doit contenir de préférence des ID d'objet et non des objets.
     * N'est utile que pour certains types de calculs sociaux.
     *
     * @param array $listID
     * @param string $socialClass
     * @return boolean
     */
    public function setList(array $listID, string $socialClass = ''): bool
    {
        foreach ($listID as $nid) {
            if (is_string($nid)
                && Node::checkNID($nid)
            )
                $this->_list[$nid] = $nid;
            elseif (is_a($nid, 'Entity'))
                $this->_list[$nid] = $nid->getID();
        }

        if (sizeof($this->_list) == 0)
            return false;
        return true;
    }

    /**
     * Permet de vider la liste pour le calcul/filtrage social.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function unsetList(string $socialClass = ''): bool
    {
        $this->_list = array();
        return true;
    }
}



// ========================================================================================
//   303_social_notmyself.php
//   020250215163515
//   1c0404114ce9125394a3a5b3f5695969b0fc9d0b3af9f199864c795a82a3c6e5.sha2.256

/**
 * Classe de gestion du côté social des liens limités à tout sauf l'entité en cours.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Si le signataire du lien est l'entité en cours, retourne un score de 0.
 * Sinon retourne un score de 1.
 */
class SocialNotMyself extends SocialMySelf implements SocialInterface
{
    const TYPE='notmyself';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) != 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=notmyself score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        // Si l'entité signataire du lien est une des entités courante, retourne la valeur sociale 1.
        foreach ($link->getSignersEID() as $signer) {
            if ($signer != $this->_nebuleInstance->getEntitiesInstance()->getCurrentEntityID()) {
                $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=notmyself score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                return 1;
            }
        }

        // Sinon par défaut retourne la valeur sociale 0.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=notmyself score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 0;
    }
}



// ========================================================================================
//   304_social_self.php
//   020250215163515
//   7a8e53909d6de608806c8a029e96a2d1937264fb63bb842e73da200cb864f8d4.sha2.256

/**
 * Classe de gestion du côté social des liens limités à l'entité en cours d'affichage.
 * Ce peut être une entité différente de l'entité déverrouillée.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Si le signataire du lien est l'entité en cours d'affichage, retourne un score de 1.
 * Sinon retourne un score de 0.
 */
class SocialSelf extends SocialMySelf implements SocialInterface
{
    const TYPE='self';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) != 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        global $applicationInstance;

        if (is_a($applicationInstance, 'Applications'))
            $currentEntity = $this->_nebuleInstance->getApplicationInstance()->getCurrentEntity();
        else
            $currentEntity = $this->_nebuleInstance->getEntitiesInstance()->getCurrentEntityID();

        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=self score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        // Si l'entité signataire du lien est une des entités courante, retourne la valeur sociale 1.
        foreach ($link->getSignersEID() as $signer) {
            if ($signer == $currentEntity) {
                $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=self score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                return 1;
            }
        }

        // Sinon par défaut retourne la valeur sociale 0.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=self score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 0;
    }
}



// ========================================================================================
//   305_social_notself.php
//   020250215163515
//   6017ffb9628af18c811d2a66ec2f311a82bbce863eb93b4a9358363bb0c317f5.sha2.256

/**
 * Classe de gestion du côté social des liens limités à tout sauf l'entité en cours d'affichage.
 * Ce peut être une entité différente de l'entité déverrouillée.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Si le signataire du lien est l'entité en cours d'affichage, retourne un score de 0.
 * Sinon retourne un score de 1.
 */
class SocialNotself extends SocialMySelf implements SocialInterface
{
    const TYPE='notself';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) != 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        global $applicationInstance;

        if (is_a($applicationInstance, 'Applications'))
            $currentEntity = $this->_nebuleInstance->getAuthoritiesInstance()->getCurrentEntity();
        else
            $currentEntity = $this->_nebuleInstance->getEntitiesInstance()->getCurrentEntityID();

        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=notself score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        // Si l'entité signataire du lien est une des entités courante, retourne la valeur sociale 1.
        foreach ($link->getSignersEID() as $signer) {
            if ($signer != $currentEntity) {
                $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=notself score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                return 1;
            }
        }

        // Sinon par défaut retourne la valeur sociale 0.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=notself score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 0;
    }
}



// ========================================================================================
//   306_social_authority.php
//   020250215163515
//   aadb7bfa31ea2578f4821303fb9a72bc67a394b48d99f2bf259aa64be4478efb.sha2.256

/**
 * Classe de gestion du côté social stricte des liens.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Si le signataire du lien est une des entités autorités locales, retourne un score de 1.
 * Sinon retourne un score de 0.
 */
class SocialAuthority extends SocialMySelf implements SocialInterface
{
    const TYPE='authority';

    /**
     * Gère le classement social des liens.
     *
     * @param array  &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) != 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister   &$link
     * @param string          $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=strict score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        // Si l'entité signataire du lien est une des entités autorités, retourne la valeur sociale 1.
        foreach ($this->_nebuleInstance->getAuthoritiesInstance()->getLocalAuthoritiesID() as $authority) {
            foreach ($link->getSignersEID() as $signer) {
                if ($signer == $authority) {
                    $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=strict score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                    return 1;
                }
            }
        }

        // Sinon par défaut retourne la valeur sociale 0.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=strict score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 0;
    }
}



// ========================================================================================
//   307_social_all.php
//   020250215163515
//   de73b4ff3cc2d6eb01bcf161cac9ad820ee3c8c0cda687ed82d1c03aa8cf4a3e.sha2.256

/**
 * Classe de gestion du côté social des liens, garde tout.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Retourne toujours un score de 1.
 */
class SocialAll extends SocialMySelf implements SocialInterface
{
    const TYPE='all';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) != 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=all score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=all score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);

        return 1;
    }
}



// ========================================================================================
//   308_social_none.php
//   020250215163515
//   86ad41ac2c91caac8731f0acb6d8e220a1966026420adb07e6bb70bf5b899fa9.sha2.256

/**
 * Classe de gestion du côté social des liens, supprime tout.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Retourne toujours un score de 0.
 */
class SocialNone extends SocialMySelf implements SocialInterface
{
    const TYPE='none';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        $links = array();
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=none score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=none score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);

        return 0;
    }
}



// ========================================================================================
//   309_social_onlist.php
//   020250215163515
//   f99762bd996abae33c35145a12f79ef1d436cdffa300dd3853e99e07a95d3913.sha2.256

/**
 * Classe de gestion du côté social des liens par rapport à une liste d'ID.
 * Ne sélectionne que les liens des entités de la liste.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * La liste doit être préalablement chargée.
 *
 * Si le signataire du lien est une des entités de la liste, retourne un score de 1.
 * Sinon retourne un score de 0.
 */
class SocialOnList extends SocialMySelf implements SocialInterface
{
    const TYPE='onlist';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) != 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=onlist score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        if (sizeof($this->_list) == 0) {
            return 0;
        }

        // Si l'entité signataire du lien est une des entités autorités, retourne la valeur sociale 1.
        foreach ($this->_list as $id) {
            foreach ($link->getSignersEID() as $signer) {
                if ($signer == $id) {
                    $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=onlist score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                    return 1;
                }
            }
        }

        // Sinon par défaut retourne la valeur sociale 0.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=onlist score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 0;
    }
}



// ========================================================================================
//   310_social_offlist.php
//   020250215163515
//   353393a1be1b2c01500d19e60e3ea228d58ffadb2651409cc35a6739676ffd01.sha2.256

/**
 * Classe de gestion du côté social des liens par rapport à une liste d'ID.
 * Ne sélectionne que les liens des entités qui ne sont pas dans la liste.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * La liste doit être préalablement chargée.
 *
 * Si le signataire du lien est une des entités de la liste, retourne un score de 0.
 * Sinon retourne un score de 1.
 */
class SocialOffList extends SocialMySelf implements SocialInterface
{
    const TYPE='offlist';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) != 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=onlist score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        if (sizeof($this->_list) == 0) {
            return 0;
        }

        // Si l'entité signataire du lien est une des entités autorités, retourne la valeur sociale 0.
        foreach ($this->_list as $id) {
            foreach ($link->getSignersEID() as $signer) {
                if ($signer == $id) {
                    $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=offlist score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                    return 0;
                }
            }
        }

        // Sinon par défaut retourne la valeur sociale 1.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=offlist score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 1;
    }
}



// ========================================================================================
//   311_social_reputation.php
//   020250215163515
//   5244633aa59ac75d4b59e772cd6a9a653ec659e94a402f634fbc27783ba9054b.sha2.256

/**
 * Classe de gestion du côté social des liens par rapport à la réputation des entités.
 * Ne sélectionne que les liens des entités qui sont bien réputées.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Si le signataire du lien est une des entités de la liste, retourne un score de 1.
 * Sinon retourne un score de 0.
 */
class SocialReputation extends SocialMySelf implements SocialInterface
{
    const TYPE='reputation';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) >= 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=reputation score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        // Si l'entité signataire du lien est une des entités autorités, retourne la valeur sociale 1.
        foreach ($this->_list as $id) {
            foreach ($link->getSignersEID() as $signer) {
                if (false) { // TODO check...
                    $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=reputation score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                    return 1;
                }
            }
        }

        // Sinon par défaut retourne la valeur sociale 0.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=reputation score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 0;
    }
}



// ========================================================================================
//   312_social_unreputation.php
//   020250215163515
//   d46c874acc9905b8368a4de0178c37183d9dda88d1ab0b9a7e79562ecc623c99.sha2.256

/**
 * Classe de gestion du côté social des liens par rapport à la réputation des entités.
 * Ne sélectionne que les liens des entités qui ne sont pas bien réputées.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Si le signataire du lien est une des entités de la liste, retourne un score de 1.
 * Sinon retourne un score de 0.
 */
class SocialUnreputation extends SocialMySelf implements SocialInterface
{
    const TYPE='unreputation';

    /**
     * Gère le classement social des liens.
     *
     * @param array &$links
     * @param string $socialClass
     * @return void
     */
    public function arraySocialFilter(array &$links, string $socialClass = ''): void
    {
        foreach ($links as $i => $link) {
            if ($this->linkSocialScore($link) < 1) {
                unset($links[$i]);
            }
        }
    }

    /**
     * Calcul le score social d'un lien.
     *
     * @param LinkRegister  &$link
     * @param string         $socialClass
     * @return float
     */
    public function linkSocialScore(LinkRegister &$link, string $socialClass = ''): float
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('Ask link social=unreputation score for ' . $link->getRaw(), Metrology::LOG_LEVEL_DEBUG);

        // Si l'entité signataire du lien est une des entités autorités, retourne la valeur sociale 1.
        foreach ($this->_list as $id) {
            foreach ($link->getSignersEID() as $signer) {
                if (true) { // @TODO
                    $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=unreputation score 1 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
                    return 1;
                }
            }
        }

        // Sinon par défaut retourne la valeur sociale 0.
        foreach ($link->getSignersEID() as $signer)
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Link social=unreputation score 0 for ' . $signer, Metrology::LOG_LEVEL_DEBUG);
        return 0;
    }
}



// ========================================================================================
//   400_node_interface.php
//   020240906141538
//   d5aadd67e1bc74420cedaa1db84a1ff49a0f159c6b2081164a66b2ceed9cc718.sha2.256

/**
 * L'interface nodeInterface
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 */
interface nodeInterface
{
    public function __construct(nebule $nebuleInstance, string $id);
    public function __toString(): string;
    public function __sleep(): array;
    public function __wakeup();

    public function getID(): string;
    static public function checkNID(string &$nid, bool $permitNull = false): bool;
}



// ========================================================================================
//   401_node.php
//   020250302164619
//   2832be4e48d6aaa38165d6144aeda66ad476e8e718d0294ad8d7ca901a1d2439.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe Object.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 *          To open a node as object, create instance with :
 *          - nebule instance;
 *          - node ID.
 *
 *          To create a new object with specific content, create a instance with :
 *          - nebule instance;
 *          - node ID = '0'
 *          On the node instance, call setContent() with :
 *          - data of the object.
 *          Don't forget to call write() if you want a persistant object on database /o.
 * ------------------------------------------------------------------------------------------
 */
class Node extends Functions implements nodeInterface
{
    const CRYPTO_SESSION_KEY_SIZE = 117; // FIXME utilisé par setProtected(), à refaire pour le cas général.
    const DEFAULT_ICON_RID = '6e6562756c652f6f626a657400000000000000000000000000000000000000000000.none.272';

    const SESSION_SAVED_VARS = array(
        '_id',
        '_fullName',
        '_cachePropertyLink',
        '_cachePropertiesLinks',
        '_cachePropertyID',
        '_cachePropertiesID',
        '_cacheProperty',
        '_cacheProperties',
        '_cacheMarkDanger',
        '_cacheMarkWarning',
        '_cacheMarkProtected',
        '_idProtected',
        '_idUnprotected',
        '_idProtectedKey',
        '_idUnprotectedKey',
        '_markProtectedChecked',
        '_usedUpdate',
        '_isEntity',
        '_isGroup',
        '_isConversation',
        '_isCurrency',
        '_isTokenPool',
        '_isToken',
        '_isWallet',
    );

    protected bool $_permitBuffer = false;
    protected string $_id = '0';
    protected string $_fullName = '';
    protected array $_cachePropertyLink = array();
    protected array $_cachePropertiesLinks = array();
    protected array $_cachePropertyID = array();
    protected array $_cachePropertiesID = array();
    protected array $_cacheProperty = array();
    protected array $_cacheProperties = array();
    protected bool $_cacheMarkDanger = false;
    protected bool $_cacheMarkWarning = false;
    protected bool $_cacheMarkProtected = false;
    protected string $_idProtected = '0';
    protected string $_idUnprotected = '0';
    protected string $_idProtectedKey = '0';
    protected string $_idUnprotectedKey = '0';
    protected bool $_markProtectedChecked = false;
    protected ?string $_data = null;
    protected bool $_haveData = false;
    protected string $_code = '';
    protected bool $_haveCode = false;
    protected array $_usedUpdate = array();
    protected bool $_isNew = false;

    /**
     * Create instance of a node or derivative.
     * Always give a valid nebule instance.
     * For new node, set $id as '0' or 'new'. This is mandatory to add data (or other) after with dedicated function.
     * If $id is invalid, the instance return getID = '0', even if new but not initialised.
     *
     * @param nebule $nebuleInstance
     * @param string $nid
     */
    public function __construct(nebule $nebuleInstance, string $nid)
    {
        parent::__construct($nebuleInstance);
        $this->setEnvironmentLibrary($nebuleInstance);

        $id = trim(strtolower($nid));
        if (self::checkNID($id, false, false)
        ) {
            $this->_id = $id;
            $this->_metrologyInstance->addLog('new instance ' . get_class($this) . ' nid=' . $id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '7fb8f6e3');
        } else {
            $this->_id = '0';
            $this->_isNew = true;
            $this->_metrologyInstance->addLog('instance for new ' . get_class($this), Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'a16c2373');
        }

        $this->initialisation();
    }

    public function __toString(): string
    {
        return $this->_id;
    }

    public function __sleep(): array
    {
        return $this::SESSION_SAVED_VARS;
    }

    public function __wakeup()
    {
        //global $nebuleInstance;
        //$this->_nebuleInstance = $nebuleInstance;
        //$this->setEnvironmentLibrary($nebuleInstance);
        //$this->_initialisation();
    }

    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_permitBuffer = $this->_configurationInstance->getOptionAsBoolean('permitBufferIO');
    }

    /**
     * On new node (ID='0'), add content and recalculate ID.
     * Don't forget to write with write().
     *
     * @param string $data
     * @return bool
     */
    public function setContent(string &$data): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_isNew
            || $this->_id != '0'
            || strlen($data) == 0
            || $this->_haveData
            || get_class($this) != 'Nebule\Library\Node'
        )
            return false;

        if (!$this->_configurationInstance->checkBooleanOptions(array('permitWrite', 'permitWriteObject', 'permitCreateObject'))) {
            $this->_metrologyInstance->addLog('Create object no authorized', Metrology::LOG_LEVEL_ERROR, __METHOD__, '83a27d1e');
            $this->_id = '0';
            return false;
        }

        $this->_id = $this->_nebuleInstance->getNIDfromData($data);
        $this->_data = $data;
        $this->_haveData = true;
        return true;
    }

    public function setWriteContent(string &$data, bool $protect = false, bool $obfuscated = false): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->setContent($data))
            return false;

        // @FIXME
        if ($protect)
            $this->setProtected($obfuscated);
        else
            $this->write();

        return true;
    }

    /*public function setContentOld(string &$data, bool $protect = false, bool $obfuscated = false): bool
    {
        if (!$this->_isNew
            || $this->_id != '0'
            || strlen($data) == 0
            || get_class($this) != 'Nebule\Library\Node'
        )
            return false;

        if ($this->_configuration->checkBooleanOptions(array('unlocked','permitWrite','permitWriteObject','permitWriteLink'))) {
            // calcul l'ID.
            $this->_id = $this->_nebuleInstance->getNIDfromData($data);
            if ($protect)
                $this->_metrology->addLog('Create protected object ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '1434b3ed');
            else
                $this->_metrology->addLog('Create object ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '52b9e412');

            // Mémorise les données.
            $this->_data = $data;
            $this->_haveData = true;

            // Création lien de hash.
            $date = '';
            if ($obfuscated)
                $date = '0';
            $target = $this->_nebuleInstance->getNIDfromData($this->_configuration->getOptionAsString('cryptoHashAlgorithm'));
            $meta = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_HASH);
            $this->_writeLink('l>' . $this->_id . '>' . $target . '>' . $meta, $obfuscated, $date);

            // Création du lien d'annulation de suppression.
            $this->_writeLink('x>' . $this->_id, $obfuscated);

            // Si l'objet doit être protégé.
            if ($protect)
                $this->setProtected($obfuscated);
            else
                $this->write();
        } else {
            $this->_metrology->addLog('Create object error no authorized', Metrology::LOG_LEVEL_ERROR, __METHOD__, '83a27d1e');
            $this->_id = '0';
            return false;
        }
        return true;
    }*/

    /**
     * Retourne l'ID de l'objet.
     *
     * @return string
     */
    public function getID(): string
    {
        return $this->_id;
    }

    /**
     * Object - Verify name structure of the node : hash.algo.size
     * There's a specific treatment for NID empty or '0'.
     *
     * @param string $nid
     * @param bool   $permitNull permit NID=''
     * @param bool   $permitZero permit NID='0'
     * @return boolean
     */
    static public function checkNID(string &$nid, bool $permitNull = false, bool $permitZero = false): bool
    {
        // May be empty or zero in some case.
        if ($permitNull && $nid == '') return true;
        if ($permitZero && $nid == '0') return true;

        // Check hash value. Hash size = (size value / 4) .
        $hash = strtok($nid, '.');
        if ($hash === false) return false;
        if ((strlen($hash) * 4) < BlocLink::NID_MIN_HASH_SIZE) return false;
        if ((strlen($hash) * 4) > BlocLink::NID_MAX_HASH_SIZE) return false;
        if (!ctype_xdigit($hash)) return false;

        // Check algo value.
        $algo = strtok('.');
        if ($algo === false) return false;
        if (strlen($algo) < BlocLink::NID_MIN_ALGO_SIZE) return false;
        if (strlen($algo) > BlocLink::NID_MAX_ALGO_SIZE) return false;
        if (!ctype_alnum($algo)) return false;

        // Check size value.
        $size = strtok('.');
        if ($size === false) return false;
        if (!ctype_digit($size)) return false; // Check content before!
        if ((int)$size < BlocLink::NID_MIN_HASH_SIZE) return false;
        if ((int)$size > BlocLink::NID_MAX_HASH_SIZE) return false;
        if ((strlen($hash) * 4) != (int)$size) return false;

        // Check item overflow
        if (strtok('.') !== false) return false;

        return true;
    }

    /**
     * Retourne la couleur primaire de l'objet.
     *
     * @return string
     */
    public function getPrimaryColor(): string
    {
        return substr($this->_id . '000000', 0, 6);
    }

    /**
     * Retourne l'algorithme de hash.
     * @return string
     * @todo
     *
     */
    public function getHashAlgo(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $algo = $this->getProperty(References::REFERENCE_NEBULE_OBJET_HASH, 'all');
        $this->_metrologyInstance->addLog('Object ' . $this->_id . ' hash = ' . $algo, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        if ($algo != '')
            return $algo;
        return '';
    }

    /**
     * Test si l'objet est présent.
     *
     * @return boolean
     */
    public function checkPresent(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_id == '0')
            return false;

        /*if ($this->_getMarkProtected())
            $result = $this->_nebuleInstance->getIoInstance()->checkObjectPresent($this->_idProtected);
        else*/
            $result = $this->_nebuleInstance->getIoInstance()->checkObjectPresent($this->_id);
        return $result;
    }

    /**
     * Test si l'objet a des liens.
     *
     * @return boolean
     */
    public function checkObjectHaveLinks(): bool
    {
        return $this->_ioInstance->checkLinkPresent($this->_id);
    }

    /**
     * Faire une recherche de liens type 'l' en fonction de l'objet méta.
     * Typiquement utilisé pour une recherche de propriétés d'un objet.
     * Fait une recherche sur de multiples algorithmes de hash au besoin.
     *
     * @param array  $links
     * @param string $nid3
     */
    private function _getLinksByNID3(array &$links, string $nid3): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $filter = array(
            'bl/rl/req' => 'l',
            'bl/rl/nid1' => $this->_id,
            'bl/rl/nid3' => $nid3,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($links, $filter, false);
    }

    /**
     * Lit une propriété de l'objet nebule dans ses liens.
     * Retourne la liste des liens définissants la propriété.
     *
     * @param string $type
     * @param string $socialClass
     * @return array
     */
    public function getPropertiesLinks(string $type, string $socialClass = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($type == '')
            return array();

        if (!$this->checkNID($type))
            $type = $this->_nebuleInstance->getNIDfromData($type);

        // Si déjà recherché, donne le résultat en cache.
//        if (isset($this->_cachePropertiesLinks[$type][$socialClass]))
//            return $this->_cachePropertiesLinks[$type][$socialClass];

        // Liste les liens à la recherche de la propriété.
        $links = array();
        $this->_getLinksByNID3($links, $type);

        if (sizeof($links) == 0)
            return array();

        // Trie la liste, pour les liens venants de plusieurs objets.
        $date = array();
        foreach ($links as $k => $r)
            $date[$k] = $r->getDate();
        array_multisort($date, SORT_STRING, SORT_ASC, $links);

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Mémorise le résultat dans le cache.
        //if ($this->_permitBuffer)
        //    $this->_cachePropertiesLinks[$type][$socialClass] = $links;

        // Résultat.
        return $links;
    }

    /**
     * Lit une propriété de l'objet nebule dans ses liens.
     * Retourne le lien unique définissant la propriété.
     * Retourne une chaine vide si pas de lien de propriété trouvé.
     *
     * @param string $type
     * @param string $socialClass
     * @return linkInterface|null
     */
    public function getPropertyLink(string $type, string $socialClass = ''): ?linkInterface
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($type == '')
            return null;

        // Si déjà recherché, donne le résultat en cache.
        if (isset($this->_cachePropertyLink[$type][$socialClass]))
            return $this->_cachePropertyLink[$type][$socialClass];

        // Liste les liens à la recherche de la propriété.
        $links = $this->getPropertiesLinks($type, $socialClass);

        if (sizeof($links) == 0)
            return null;

        // Extrait le dernier de la liste.
        //$link = end($links);
        //$link = $links[count($links)-1];
        $link = $links[0];

        // Mémorise le résultat dans le cache.
        //if ($this->_permitBuffer)
        //    $this->_cachePropertyLink[$type][$socialClass] = $link;

        // Résultat.
        return $link;
    }

    /**
     * Lit une propriété de l'objet nebule dans ses liens.
     * Retourne une chaine de texte de _une seule_ ligne, ou une chaine vide si problème.
     *
     * @param string $type
     * @param string $socialClass
     * @return string
     */
    public function getPropertyID(string $type, string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($type == '')
            return '';

        // Si déjà recherché, donne le résultat en cache.
        if (isset($this->_cachePropertyID[$type][$socialClass]))
            return $this->_cachePropertyID[$type][$socialClass];

        $property = '';

        // Liste les liens à la recherche de la propriété.
        $link = $this->getPropertyLink($type, $socialClass);

        if (!is_a($link, 'Link'))
            return '';

        // Extrait l'ID de l'objet de propriété.
        $property = $link->getParsed()['bl/rl/nid2'];
        unset($link);

        // Mémorise le résultat dans le cache.
        //if ($this->_permitBuffer)
        //    $this->_cachePropertyID[$type][$socialClass] = $property;

        // Résultat.
        return $property;
    }

    /**
     * Lit les propriétés de l'objet nebule dans ses liens.
     * Retourne un tableau de chaines de texte de une seule ligne, ou un tableau de une chaine vide si problème.
     *
     * @param string $type
     * @param string $socialClass
     * @return array
     */
    public function getPropertiesID(string $type, string $socialClass = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($type == '')
            return array();

        // Si déjà recherché, donne le résultat en cache.
        if (isset($this->_cachePropertiesID[$type][$socialClass]))
            return $this->_cachePropertiesID[$type][$socialClass];

        $properties = array();

        // Liste les liens à la recherche de la propriété.
        $list = array();
        $this->_getLinksByNID3($list, $type);

        if (sizeof($list) == 0)
            return array();

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($list, $socialClass);

        // Extrait les ID des objets de propriété.
        foreach ($list as $i => $l)
            $properties[$i] = $l->getParsed()['bl/rl/nid2'];
        unset($list);

        // Mémorise le résultat dans le cache.
        //if ($this->_permitBuffer)
        //    $this->_cachePropertiesID[$type][$socialClass] = $properties;

        // Résultat.
        return $properties;
    }

    /**
     * Lit une propriété de l'objet nebule dans ses liens.
     * Retourne une chaine de texte de _une seule_ ligne, ou une chaine vide si problème.
     *
     * @param string $type
     * @param string $socialClass
     * @return string
     */
    public function getProperty(string $type, string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($type == '')
            return '';

        // Si déjà recherché, donne le résultat en cache.
        if (isset($this->_cacheProperty[$type][$socialClass]))
            return $this->_cacheProperty[$type][$socialClass];

        // Liste les liens à la recherche de la propriété.
        $link = $this->getPropertyLink($type, $socialClass);

        if ($link == '' || !is_a($link, 'Nebule\Library\LinkRegister'))
            return '';

        // Extrait le contenu de l'objet de propriété.
        $property = $this->_readOneLineOtherObject($link->getParsed()['bl/rl/nid2']);

        // Mémorise le résultat dans le cache.
        //if ($this->_permitBuffer)
        //    $this->_cacheProperty[$type][$socialClass] = $property;

        // Résultat.
        return $property;
    }

    /**
     * Lit les propriétés de l'objet nebule dans ses liens.
     * Retourne un tableau de chaines de texte de une seule ligne, ou un tableau de une chaine vide si problème.
     *
     * @param string $type
     * @param string $socialClass
     * @return array
     */
    public function getProperties(string $type, string $socialClass = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($type == '')
            return array();

        // Si déjà recherché, donne le résultat en cache.
        if (isset($this->_cacheProperties[$type][$socialClass]))
            return $this->_cacheProperties[$type][$socialClass];

        $properties = array();

        // Liste les liens à la recherche de la propriété.
        $links = array();
        $this->_getLinksByNID3($links, $type);

        if (sizeof($links) == 0)
            return array();

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Extrait le contenu des objets de propriété.
        foreach ($links as $i => $l)
            $properties[$i] = $this->_readOneLineOtherObject($l->getParsed()['bl/rl/nid2']);
        unset($links);

        // Mémorise le résultat dans le cache.
        //if ($this->_permitBuffer)
        //    $this->_cacheProperties[$type][$socialClass] = $properties;

        // Résultat.
        return $properties;
    }

    /**
     * Lit si l'objet a une propriété particulière.
     *
     * @param string $type
     * @param string $property
     * @param string $socialClass
     * @return boolean
     */
    public function getHaveProperty(string $type, string $property, string $socialClass = 'myself'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Extrait la liste des propriétés.
        $list = $this->getProperties($type, $socialClass);

        // Cherche dans la liste la propriété de groupe.
        foreach ($list as $item) {
            if ($item == $property)
                return true;
        }

        // Si la propriété n'est pas trouvée.
        return false;
    }

    /**
     * Recherche les ID des entités qui ont signé une propriété de l'objet.
     * Si la propriété est vide, retourne les signataires de toute propriété.
     *
     * @param string $type
     * @return array:string
     */
    public function getPropertySigners(string $type = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $signers = array();

        // Si le type de l'objet est précisé, le converti en ID.
        if ($type != '')
            $type = $this->_nebuleInstance->getNIDfromData($type, References::REFERENCE_CRYPTO_HASH_ALGORITHM);

        // Extraction des entités signataires.
        $links = $this->getPropertiesLinks(References::REFERENCE_NEBULE_OBJET_TYPE, 'all');

        foreach ($links as $link) {
            if ($type == ''
                || ($type != ''
                    && $link->getParsed()['bl/rl/nid2'] == $type
                )
            )
                $signers[$link->getParsed()['bs/rs1/eid']] = $link->getParsed()['bs/rs1/eid'];
        }
        unset($links);

        return $signers;
    }

    /**
     * Recherche une propriété de l'objet est signée par une entité.
     * Si la propriété est vide, vérifie pour toute propriété.
     *
     * @param string $entity
     * @param string $type
     * @return boolean
     */
    public function getPropertySignedBy(string $entity, string $type = ''): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si le type de l'objet est précisé, le converti en ID.
        if ($type != '')
            $type = $this->_nebuleInstance->getNIDfromData($type, References::REFERENCE_CRYPTO_HASH_ALGORITHM);

        // extrait l'ID de l'entité si c'est un objet.
        if (is_a($entity, 'Node'))
            $entity = $entity->getID();

        // Extraction des entités signataires.
        $links = $this->getPropertiesLinks(References::REFERENCE_NEBULE_OBJET_TYPE, 'all');

        foreach ($links as $link) {
            if ($type == ''
                || $link->getParsed()['bl/rl/nid2'] == $type
            ) {
                if ($link->getParsed()['bs/rs1/eid'] == $entity)
                    return true;
            }
        }
        unset($links);

        return false;
    }

    /**
     * Ecrit la propriété de l'objet correspondant au type.
     * TODO protection et vidage cache
     * @param string $type
     * @param string $property
     * @param boolean $protect
     * @param boolean $obfuscated
     * @return boolean
     */
    public function setProperty(string $type, string $property, bool $protect = false, bool $obfuscated = false): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($type == ''
            || $property == ''
            || $protect // TODO
        )
            return false;

        $propertyOID = $this->_nebuleInstance->getNIDfromData($property);
        $this->_ioInstance->setObject($propertyOID, $property);

        $propertyRID = $this->_nebuleInstance->getNIDfromData($type);
        $link = 'l>' . $this->_id . '>' . $propertyOID . '>' . $propertyRID;
        $newBlockLink = new BlocLink($this->_nebuleInstance, 'new');
        $newBlockLink->addLink($link);
        //if ($obfuscated && !$newLink->setObfuscate()) FIXME obfuscation
        //    return false;
        $newBlockLink->signwrite($this->_entitiesInstance->getCurrentEntityID());

        // Supprime le résultat dans le cache.
        /*		if ( isset($this->_cacheProperty[$type]) )
		{
			foreach ( $this->_cacheProperty[$type] as $i => $v )
			{
				unset($this->_cacheProperty[$type][$i]);
			}
		}
		if ( isset($this->_cacheProperties[$type]) )
		{
			foreach ( $this->_cacheProperties[$type] as $i => $v )
			{
				unset($this->_cacheProperties[$type][$i]);
			}
		}*/
        // TODO ------------------------------------------------------------------------------- A revoir...
        $this->_cacheProperty = array();
        $this->_cacheProperties = array();

        return true;
    }

    /**
     * Lit l'ID du type mime.
     *
     * @param string $socialClass
     * @return string
     */
    public function getTypeID(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getPropertyID(References::REFERENCE_NEBULE_OBJET_TYPE, $socialClass);
    }

    /**
     * Lit le type mime.
     *
     * @param string $socialClass
     * @return string
     */
    public function getType(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions ' . $this->_id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_TYPE, $socialClass);
    }

    /**
     * Écriture du type mime.
     *
     * @param string $type
     * @return boolean
     */
    public function setType(string $type): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->setProperty(References::REFERENCE_NEBULE_OBJET_TYPE, $type);
    }

    /**
     * Lit la taille.
     * FIXME get from file on last solution
     *
     * @param string $socialClass
     * @return string
     */
    public function getSize(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return filter_var($this->getProperty(References::REFERENCE_NEBULE_OBJET_TAILLE, $socialClass), FILTER_SANITIZE_NUMBER_INT);
    }

    /**
     * Lit l'empreinte homomorphe.
     *
     * @param string $socialClass
     * @return string
     */
    public function getHomomorphe(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_HOMOMORPHE, $socialClass);
    }

    /**
     * Lit la date de création.
     *
     * @param string $socialClass
     * @return string
     */
    public function getDate(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_DATE, $socialClass);
    }

    /**
     * Lecture du nom.
     *
     * @param string $socialClass
     * @return string
     */
    public function getName(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $name = $this->getProperty(References::REFERENCE_NEBULE_OBJET_NOM, $socialClass);
        if ($name == '')
            $name = $this->_id;
        return $name;
    }

    /**
     * Ecriture du nom.
     *
     * @param string $name
     * @return boolean
     */
    public function setName(string $name): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->setProperty(References::REFERENCE_NEBULE_OBJET_NOM, $name, $this->_getMarkProtected());
    }

    /**
     * Lecture du préfix.
     *
     * @param string $socialClass
     * @return string
     */
    public function getPrefixName(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_PREFIX, $socialClass);
    }

    /**
     * Ecriture du préfix.
     *
     * @param string $prefix
     * @return boolean
     */
    public function setPrefix(string $prefix): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->setProperty(References::REFERENCE_NEBULE_OBJET_PREFIX, $prefix, $this->_getMarkProtected());
    }

    /**
     * Lecture du suffix.
     *
     * @param string $socialClass
     * @return string
     */
    public function getSuffixName(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_SUFFIX, $socialClass);
    }

    /**
     * Ecriture du suffix.
     *
     * @param string $suffix
     * @return boolean
     */
    public function setSuffix(string $suffix): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->setProperty(References::REFERENCE_NEBULE_OBJET_SUFFIX, $suffix, $this->_getMarkProtected());
    }

    /**
     * Lecture du prénom.
     *
     * @param string $socialClass
     * @return string
     */
    public function getFirstname(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_PRENOM, $socialClass);
    }

    /**
     * Ecriture du prénom.
     *
     * @param string $firstname
     * @return boolean
     */
    public function setFirstname(string $firstname): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->setProperty(References::REFERENCE_NEBULE_OBJET_SUFFIX, $firstname, $this->_getMarkProtected());
    }

    /**
     * Lecture du surnom.
     *
     * @param string $socialClass
     * @return string
     */
    public function getSurname(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_SURNOM, $socialClass);
    }

    /**
     * Ecriture du surnom.
     *
     * @param string $surname
     * @return boolean
     */
    public function setSurname(string $surname): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->setProperty(References::REFERENCE_NEBULE_OBJET_SURNOM, $surname, $this->_getMarkProtected());
    }

    /**
     * Lecture du nom complet.
     *
     * @param string $socialClass
     * @return string
     */
    public function getFullName(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (isset($this->_fullName)
            && trim($this->_fullName) != ''
        )
            return $this->_fullName;

        $fullname = $this->getName($socialClass);

        $prefix = $this->getPrefixName($socialClass);
        if ($prefix != '')
            $fullname = $prefix . '/' . $fullname;

        $suffix = $this->getSuffixName($socialClass);
        if ($suffix != '')
            $fullname = $fullname . '.' . $suffix;

        $firstname = $this->getFirstname($socialClass);
        if ($firstname != '')
            $fullname = $firstname . ' ' . $fullname;

        $surname = $this->getSurname($socialClass);
        if ($surname != '')
            $fullname = $fullname . ' ' . $surname;

        $this->_fullName = $fullname;
        return $fullname;
    }

    /**
     * Lecture des multiples localisations.
     *
     * @param string $socialClass
     * @return array
     */
    public function getLocalisations(string $socialClass = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperties(References::REFERENCE_NEBULE_OBJET_LOCALISATION, $socialClass);
    }

    /**
     * Lecture de la localisation.
     *
     * @param string $socialClass
     * @return string
     */
    public function getLocalisation(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_LOCALISATION, $socialClass);
    }

    /**
     * Ecriture de la localisation.
     *
     * @param string $localisation
     * @return boolean
     */
    public function setLocalisation(string $localisation): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->setProperty(References::REFERENCE_NEBULE_OBJET_LOCALISATION, $localisation);
    }


    /**
     * Variable si l'objet est marqué comme une entité.
     * @var boolean
     */
    protected $_isEntity = false;

    /**
     * Lit si l'objet est une entité.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function getIsEntity(string $socialClass = 'myself'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions ' . $this->_id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_isEntity)
            return true;

        $type = $this->getType($socialClass);
        $objHead = $this->readOneLineAsText(Entity::ENTITY_MAX_SIZE);
        $this->_isEntity = ($type == References::REFERENCE_OBJECT_ENTITY && strpos($objHead, References::REFERENCE_ENTITY_HEADER) !== false);

        unset($objHead);
        return $this->_isEntity;
    }


    /**
     * Variable si l'objet est marqué comme un groupe.
     * @var boolean
     */
    protected $_isGroup = false;

    /**
     * Lit si l'objet est un groupe.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function getIsGroup(string $socialClass = 'myself'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_isGroup)
            return true;

        $this->_isGroup = $this->getHaveProperty(References::REFERENCE_NEBULE_OBJET_TYPE, References::REFERENCE_NEBULE_OBJET_GROUPE, $socialClass);

        return $this->_isGroup;
    }

    /**
     * Retourne la liste des liens vers les groupes dont l'objet est membre.
     *
     * @param string $socialClass
     * @return array:Link
     */
    public function getListIsMemberOnGroupLinks(string $socialClass = 'myself'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $links = array();
        $filter = array(
            'bl/rl/req' => 'l',
            'bl/rl/nid3' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($links, $filter, false);

        // Tri sur les appartenances aux groupes ou équivalent.
        foreach ($links as $i => $link) {
            if ($link->getParsed()['bl/rl/nid1'] != $link->getParsed()['bl/rl/nid3'])
                unset($links[$i]);
        }

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Tri les objets de type groupe.
        foreach ($links as $i => $link) {
            $instance = $this->_cacheInstance->newGroup($link->getParsed()['bl/rl/nid1']);
            if (!$instance->getIsGroup('all'))
                unset($links[$i]);
        }

        return $links;
    }

    /**
     * Retourne la liste des ID vers les groupes dont l'objet est membre.
     *
     * @param string $socialClass
     * @return array:string
     */
    public function getListIsMemberOnGroupID(string $socialClass = 'myself'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $links = array();
        $filter = array(
            'bl/rl/req' => 'l',
            'bl/rl/nid3' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($links, $filter, false);

        // Tri sur les appartenances aux groupes ou équivalent.
        foreach ($links as $i => $link) {
            if ($link->getParsed()['bl/rl/nid1'] != $link->getParsed()['bl/rl/nid3'])
                unset($links[$i]);
        }

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Tri les objets de type groupe.
        foreach ($links as $i => $link) {
            $instance = $this->_cacheInstance->newGroup($link->getParsed()['bl/rl/nid1']);
            if ($instance->getIsGroup('all'))
                $list[$link->getParsed()['bl/rl/nid1']] = $link->getParsed()['bl/rl/nid1'];
        }

        return $list;
    }


    /**
     * Variable si l'objet est marqué comme une conversation.
     * @var boolean
     */
    protected $_isConversation = false;

    /**
     * Lit si l'objet est une conversation.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function getIsConversation(string $socialClass = 'myself'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_isConversation)
            return true;

        $this->_isConversation = $this->getHaveProperty(References::REFERENCE_NEBULE_OBJET_TYPE, References::REFERENCE_NEBULE_OBJET_CONVERSATION, $socialClass);

        return $this->_isConversation;
    }

    /**
     * Retourne la liste des liens vers les conversations dont l'objet est membre.
     * S'appuie sur la fonction dédiée aux groupes.
     *
     * @param string $socialClass
     * @return array:Link
     */
    public function getListIsMemberOnConversationLinks(string $socialClass = 'myself'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $links = array();
        $filter = array(
            'bl/rl/req' => 'l',
            'bl/rl/nid3' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($links, $filter, false);

        // Tri sur les appartenances aux groupes ou équivalent.
        foreach ($links as $i => $link) {
            if ($link->getParsed()['bl/rl/nid1'] != $link->getParsed()['bl/rl/nid3'])
                unset($links[$i]);
        }

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Tri les objets de type groupe.
        foreach ($links as $i => $link) {
            $instance = $this->_cacheInstance->newConversation($link->getParsed()['bl/rl/nid1']);
            if (!$instance->getIsConversation('all'))
                unset($links[$i]);
        }

        return $links;
    }

    /**
     * Retourne la liste des ID vers les conversations dont l'objet est membre.
     * S'appuie sur la fonction dédiée aux groupes.
     *
     * @param string $socialClass
     * @return array:string
     */
    public function getListIsMemberOnConversationID(string $socialClass = 'myself'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $links = array();
        $filter = array(
            'bl/rl/req' => 'l',
            'bl/rl/nid3' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($links, $filter, false);

        // Tri sur les appartenances aux groupes ou équivalent.
        foreach ($links as $i => $link) {
            if ($link->getParsed()['bl/rl/nid1'] != $link->getParsed()['bl/rl/nid3'])
                unset($links[$i]);
        }

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Tri les objets de type groupe.
        foreach ($links as $i => $link) {
            $instance = $this->_cacheInstance->newConversation($link->getParsed()['bl/rl/nid1']);
            if ($instance->getIsConversation('all'))
                $list[$link->getParsed()['bl/rl/nid1']] = $link->getParsed()['bl/rl/nid1'];
        }

        return $list;
    }


    /**
     * Variable si l'objet est marqué comme une monnaie.
     * @var boolean
     */
    protected $_isCurrency = false;

    /**
     * Lit si l'objet est une monnaie.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function getIsCurrency(string $socialClass = 'myself'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_isCurrency)
            return true;

        $this->_isCurrency = $this->getHaveProperty(References::REFERENCE_NEBULE_OBJET_TYPE, References::REFERENCE_NEBULE_OBJET_MONNAIE, $socialClass);

        return $this->_isCurrency;
    }


    /**
     * Variable si l'objet est marqué comme un sac de jetons.
     * @var boolean
     */
    protected $_isTokenPool = false;

    /**
     * Lit si l'objet est un sac de jetons.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function getIsTokenPool(string $socialClass = 'myself'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_isTokenPool)
            return true;

        $this->_isTokenPool = $this->getHaveProperty(References::REFERENCE_NEBULE_OBJET_TYPE, References::REFERENCE_NEBULE_OBJET_MONNAIE_SAC, $socialClass);

        return $this->_isTokenPool;
    }


    /**
     * Variable si l'objet est marqué comme un jeton.
     * @var boolean
     */
    protected $_isToken = false;

    /**
     * Lit si l'objet est un jeton.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function getIsToken(string $socialClass = 'myself'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_isToken)
            return true;

        $this->_isToken = $this->getHaveProperty(References::REFERENCE_NEBULE_OBJET_TYPE, References::REFERENCE_NEBULE_OBJET_MONNAIE_JETON, $socialClass);

        return $this->_isToken;
    }


    /**
     * Variable si l'objet est marqué comme un portefeuille.
     * @var boolean
     */
    protected $_isWallet = false;

    /**
     * Lit si l'objet est un portefeuille.
     *
     * @param string $socialClass
     * @return boolean
     */
    public function getIsWallet(string $socialClass = 'myself'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_isWallet)
            return true;

        $this->_isWallet = $this->getHaveProperty(References::REFERENCE_NEBULE_OBJET_TYPE, References::REFERENCE_NEBULE_OBJET_MONNAIE_PORTEFEUILLE, $socialClass);

        return $this->_isWallet;
    }


    /**
     * Lit les marques de Danger.
     * @return boolean
     * @todo
     *
     */
    public function getMarkDanger(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_cacheMarkDanger)
            return true;

        $list = array();
        $filter = array(
            'bl/rl/req' => 'f',
            'bl/rl/nid1' => $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_DANGER),
            'bl/rl/nid2' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($list, $filter, false);

        // Fait une recherche sur d'autres types de hash si celui par défaut ne renvoie rien.
        if (sizeof($list) == 0
            && $this->_configurationInstance->getOptionAsBoolean('permitListOtherHash')
        ) {
            // A faire...
        }

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->arraySocialFilter($list);

        // Si pas marqué, tout va bien. Résultat négatif.
        if (sizeof($list) == 0)
            return false;

        // Sinon.
        // Mémorise le résultat dans le cache.
        $this->_cacheMarkDanger = true;

        // Résultat positif.
        return true;
    }

    /**
     * Ecrit une marque de Danger.
     * @return boolean
     */
    public function setMarkDanger(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_cacheMarkDanger)
            return true;

        // Création lien de groupe.
        $target = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_DANGER);
        $this->writeLink('l>' . $this->_id . '>' . $target);

        $this->_cacheMarkDanger = true;
        return true;
    }

    /**
     * Lit les marques de Warning.
     * @return boolean
     * @todo
     *
     */
    public function getMarkWarning(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_cacheMarkWarning)
            return true;

        $list = array();
        $filter = array(
            'bl/rl/req' => 'f',
            'bl/rl/nid1' => $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_WARNING),
            'bl/rl/nid2' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($list, $filter, false);

        // Fait une recherche sur d'autres types de hash si celui par défaut ne renvoie rien.
        if (sizeof($list) == 0
            && $this->_configurationInstance->getOptionAsBoolean('permitListOtherHash')
        ) {
            // A faire...
        }

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->arraySocialFilter($list);

        // Si pas marqué, tout va bien. Résultat négatif.
        if (sizeof($list) == 0)
            return false;

        // Sinon.
        // Mémorise le résultat dans le cache.
        $this->_cacheMarkWarning = true;

        // Résultat positif.
        return true;
    }

    /**
     * Ecrit une marque de Warning.
     * @return boolean
     */
    public function setMarkWarning(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->_cacheMarkWarning)
            return true;

        // Création lien de groupe.
        $target = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_WARNING);
        $this->writeLink('l>' . $this->_id . '>' . $target);

        $this->_cacheMarkWarning = true;
        return true;
    }


    /**
     * Lit les marques de protection, c'est à dire un lien de chiffrement pour l'objet.
     * Fait une recherche complète.
     * @return boolean
     */
    public function getMarkProtected(): bool
    {
        $this->_getMarkProtected();
        return $this->_cacheMarkProtected;
    }

    /**
     * Lit les marques de protection, c'est à dire un lien de chiffrement pour l'objet.
     * Fait une recherche sommaire et rapide.
     * @return boolean
     */
    public function getMarkProtectedFast(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_markProtectedChecked === true)
            return $this->_cacheMarkProtected;

        if ($this->_id == '0')
            return false;

        // Liste les liens à la recherche de la propriété.
        $listS = array();
        $filter = array(
            'bl/rl/req' => 'k',
            'bl/rl/nid1' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($listS, $filter, false);
        $listT = array();
        $filter = array(
            'bl/rl/req' => 'k',
            'bl/rl/nid2' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($listT, $filter, false);

        // Si pas marqué, résultat négatif.
        if (sizeof($listS) == 0
            && sizeof($listT) == 0
        )
            return false;
        return true;
    }

    /**
     * Lit les marques de protection, c'est à dire un lien de chiffrement pour l'objet.
     * Force la relecture de la marque de protection. A utiliser par exemple après une synchronisation.
     * @return boolean
     */
    public function getReloadMarkProtected(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Réinitialisation.
        $this->_markProtectedChecked = false;
        $this->_cacheMarkProtected = false;
        $this->_idProtected = '0';
        $this->_idUnprotected = '0';
        $this->_idProtectedKey = '0';
        $this->_idUnprotectedKey = '0';

        // Recherche.
        $this->_getMarkProtected();
        return $this->_cacheMarkProtected;
    }

    /**
     * Lit les marques de protection, c'est à dire un lien de chiffrement pour l'objet.
     * Extrait toutes les valeurs nécéssaires au déchiffrement.
     * @return boolean
     * @todo
     *
     */
    protected function _getMarkProtected(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return false; // FIXME disabled!

        /*if ($this->_markProtectedChecked === true
            && $this->_entitiesInstance->getCurrentEntityIsUnlocked() === $this->_nebuleInstance->getCurrentEntityUnlocked()
        ) {
            if ($this->_cacheMarkProtected === true) {
                $this->_metrology->addLog('Object protected - cache - protected', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
            } else {
                $this->_metrology->addLog('Object protected - cache - not protected', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
            }
            return $this->_cacheMarkProtected;
        }

        if ($this->_id == '0') {
            return false;
        }

        // Mémorise l'état de connexion de l'entité courante.
        $this->_entitiesInstance->getCurrentEntityIsUnlocked() = $this->_nebuleInstance->getCurrentEntityUnlocked();

        // Liste les liens à la recherche de la propriété.
        $listS = array();
        $filter = array(
            'bl/rl/req' => 'k',
            'bl/rl/nid1' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($listS, $filter, false);
        $listT = array();
        $filter = array(
            'bl/rl/req' => 'k',
            'bl/rl/nid2' => $this->_id,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($listT, $filter, false);

        // Fait une recherche sur d'autres types de hash si celui par défaut ne renvoie rien.
        if (sizeof($listS) == 0
            && $this->_configuration->getOptionAsBoolean('permitListOtherHash')
        ) {
            // A faire...
        }
        if (sizeof($listT) == 0
            && $this->_configuration->getOptionAsBoolean('permitListOtherHash')
        ) {
            // A faire...
        }

        // Si pas marqué, résultat négatif.
        if (sizeof($listS) == 0
            && sizeof($listT) == 0
        ) {
            $this->_cacheMarkProtected = false;
            $this->_idProtected = '0';
            $this->_idUnprotected = $this->_id;
            $this->_idProtectedKey = '0';
            $this->_idUnprotectedKey = '0';
            $this->_metrology->addLog('Object protected - not protected', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
            return false;
        }

        // Sinon.
        $this->_markProtectedChecked = true;
        $result = false;

        if (sizeof($listS) == 0) {
            $this->_metrology->addLog('Object protected - id protected = ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
            $this->_idProtected = $this->_id;

            // Recherche la clé utilisée pour l'entité en cours.
            foreach ($listT as $linkSym) {
                // Si lien de chiffrement et l'objet source est l'objet en cours non protégé.
                if ($linkSym->getParsed()['bl/rl/req'] == 'k'
                    && $linkSym->getParsed()['bl/rl/nid2'] == $this->_idProtected
                ) {
                    // Lit l'objet de clé de chiffrement symétrique et ses liens.
                    $instanceSym = $this->_cacheInstance->newNode($linkSym->getParsed()['bl/rl/nid3']);
                    $linksAsym = array();
                    $this->getLinks($linksAsym, array(), false);
                    unset($instanceSym);
                    foreach ($linksAsym as $linkAsym) {
                        // Si lien de chiffrement.
                        $targetA = $linkAsym->getParsed()['bl/rl/nid2'];
                        if ($linkAsym->getParsed()['bl/rl/req'] == 'k'
                            && $linkAsym->getParsed()['bl/rl/nid2'] != $this->_idProtected
                            && $this->_nebuleInstance->getIoInstance()->checkObjectPresent($targetA)
                        ) {
                            $result = true;
                            $this->_idUnprotected = $linkSym->getParsed()['bl/rl/nid1'];
                            $this->_metrology->addLog('Object protected - id unprotected = ' . $this->_idUnprotected, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
                            $this->_idUnprotectedKey = $linkAsym->getParsed()['bl/rl/nid1'];
                            if ($linkAsym->getParsed()['bl/rl/nid3'] == $this->_nebuleInstance->getCurrentEntity()) {
                                $this->_idProtectedKey = $targetA;
                                break 2;
                            }
                        }
                    }
                    unset($linksAsym, $linkAsym);
                }
            }
            unset($listT, $linkSym);
        } else {
            $this->_metrology->addLog('Object protected - id unprotected = ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
            $this->_idUnprotected = $this->_id;

            // Recherche la clé utilisée pour l'entité en cours.
            foreach ($listS as $linkSym) {
                $targetS = $linkSym->getParsed()['bl/rl/nid2'];
                // Si lien de chiffrement et l'objet source est l'objet en cours non protégé.
                if ($linkSym->getParsed()['bl/rl/req'] == 'k'
                    && $linkSym->getParsed()['bl/rl/nid1'] == $this->_idUnprotected
                    && $this->_nebuleInstance->getIoInstance()->checkObjectPresent($targetS)
                ) {
                    // Lit l'objet de clé de chiffrement symétrique et ses liens.
                    $instanceSym = $this->_cacheInstance->newNode($linkSym->getParsed()['bl/rl/nid3']);
                    $linksAsym = array();
                    $this->getLinks($linksAsym, array(), false);
                    unset($instanceSym);
                    foreach ($linksAsym as $linkAsym) {
                        $targetA = $linkAsym->getParsed()['bl/rl/nid2'];
                        // Si lien de chiffrement.
                        if ($linkAsym->getParsed()['bl/rl/req'] == 'k'
                            && $linkAsym->getParsed()['bl/rl/nid1'] != $this->_idUnprotected
                            && $linkAsym->getParsed()['bl/rl/nid3'] == $this->_nebuleInstance->getCurrentEntity()
                            && $this->_nebuleInstance->getIoInstance()->checkObjectPresent($targetA)
                        ) {
                            $result = true;
                            $this->_idProtected = $targetS;
                            $this->_metrology->addLog('Object protected - id protected = ' . $this->_idProtected, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
                            $this->_idUnprotectedKey = $linkAsym->getParsed()['bl/rl/nid1'];
                            if ($linkAsym->getParsed()['bl/rl/nid3'] == $this->_nebuleInstance->getCurrentEntity()) {
                                $this->_idProtectedKey = $targetA;
                                break 2;
                            }
                        }
                    }
                    unset($linksAsym, $linkAsym);
                }
            }
            unset($listS, $linkSym);
        }

        // Résultat.
        $this->_cacheMarkProtected = $result;
        return $result;*/
    }

    /**
     * Lit l'ID de l'objet chiffré.
     *
     * @return string
     */
    public function getProtectedID(): string
    {
        return ''; // FIXME disabled!

        //$this->_getMarkProtected();
        //return $this->_idProtected;
    }

    /**
     * Lit l'ID de l'objet non chiffré.
     * @return string
     */
    public function getUnprotectedID(): string
    {
        return ''; // FIXME disabled!

        //$this->_getMarkProtected();
        //return $this->_idUnprotected;
    }

    /**
     * Protège l'objet.
     *
     * @param boolean $obfuscated
     * @return boolean
     */
    public function setProtected(bool $obfuscated = false): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return false; // FIXME disabled!

        /*if ($this->_id == '0')
            return false;
        if (!$this->_io->checkObjectPresent($this->_id)
            && !$this->_haveData
        )
            return false;

        // Vérifie si pas déjà protégé.
        if ($this->_getMarkProtected())
            return true;

        $this->_metrology->addLog('Ask protect object ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        // Vérifie que l'écriture d'objets et de liens est permise.
        if ($this->_configuration->checkBooleanOptions(array('unlocked','permitWrite','permitWriteObject','permitWriteLink'))) {
            // Génération de la clé de chiffrement.
            // Doit être au maximum de la taille de la clé de l'entité cible (exprimé en bits) moins 11 octets.
            // CF : http://php.net/manual/fr/function.openssl-public-encrypt.php
            // @todo à faire pour le cas général.
            $keySize = self::CRYPTO_SESSION_KEY_SIZE; // En octets.
            $key = $this->_crypto->getRandom($keySize, Crypto::RANDOM_STRONG);
            if (strlen($key) != $keySize)
                return false;
            $keyID = $this->_nebuleInstance->getNIDfromData($key);
            $this->_metrology->addLog('Protect object, key : ' . $keyID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

            // Si des donnnées sont disponibles, on les lit.
            if ($this->_haveData)
                $data = $this->_data;
            else {
                // Sinon, on lit le contenu de l'objet. @todo à remplacer par getContent...
                $limit = $this->_configuration->getOptionAsInteger('ioReadMaxData');
                $data = $this->_nebuleInstance->getIoInstance()->getObject($this->_id, $limit);

                // Vérification de quota de lecture. @todo à revoir...
                if (strlen($data) >= $limit) {
                    unset($data);
                    $this->_haveData = false;
                    $this->_data = null;
                    return false;
                }
                unset($limit);

                // Vérification de l'empreinte des données. Doit être identique à l'ID.
                // A faire pour le cas général.
                $hash = $this->_nebuleInstance->getNIDfromData($data);
                if ($hash != $this->_id) {
                    unset($data);
                    $this->_haveData = false;
                    $this->_data = null;
                    return false;
                }
                unset($hash);
            }

            // Chiffrement (symétrique) du contenu.
            $code = $this->_crypto->encrypt($data, $this->_configuration->getOptionAsString('cryptoSymmetricAlgorithm'), $key);
            unset($data, $keySize);

            // Vérification de bon chiffrement.
            if ($code == '')
                return false;

            // Chiffrement (asymétrique) de la clé de chiffrement du contenu.
            $codeKey = $this->_crypto->encryptTo($key, $this->_entitiesInstance->getCurrentEntityInstance()->getPublicKey());

            // Vérification de bon chiffrement.
            if ($codeKey === false)
                return false;

            // Ecrit le contenu chiffré.
            $codeInstance = new Node($this->_nebuleInstance, '0');
            $codeInstance->setContent($code, false);
            $codeID = $codeInstance->getID();
            $this->_metrology->addLog('Protect object, code : ' . $codeID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

            // Vérification de bonne écriture.
            if ($codeID == '0')
                return false;

            // Ecrit la clé de session chiffrée.
            $codeKeyInstance = new Node($this->_nebuleInstance, '0');
            $codeKeyInstance->setContent($codeKey, false);
            $codeKeyID = $codeKeyInstance->getID();
            $this->_metrology->addLog('Protect object, code key : ' . $codeKeyID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

            // Vérification de bonne écriture.
            if ($codeKeyID == '0')
                return false;

            $signer = $this->_nebuleInstance->getCurrentEntity();

            // Crée le lien de type d'empreinte de la clé.
            $target = $this->_nebuleInstance->getNIDfromData($this->_configuration->getOptionAsString('cryptoHashAlgorithm'));
            $meta = $this->_nebuleInstance->getNIDfromData('nebule/objet/hash');
            $this->writeLink('l>' . $keyID . '>' . $target . '>' . $meta);

            // Création du type mime des données chiffrées.
            $text = 'application/x-encrypted/' . $this->_configuration->getOptionAsString('cryptoSymmetricAlgorithm');
            $textID = $this->_nebuleInstance->createTextAsObject($text);
            if ($textID != '') {
                // Crée le lien de type d'empreinte.
                $meta = $this->_nebuleInstance->getNIDfromData('nebule/objet/type');
                $this->writeLink('l>' . $codeID . '>' . $textID . '>' . $meta, $obfuscated);
            }

            // Création du type mime de la clé chiffrée.
            $text = 'application/x-encrypted/' . $this->_configuration->getOptionAsString('cryptoAsymmetricAlgorithm');
            $textID = $this->_nebuleInstance->createTextAsObject($text);
            if ($textID != '') {
                // Crée le lien de type d'empreinte.
                $meta = $this->_nebuleInstance->getNIDfromData('nebule/objet/type');
                $this->writeLink('l>' . $codeKeyID . '>' . $textID . '>' . $meta, $obfuscated);
            }

            // Création du lien de chiffrement symétrique.
            $this->writeLink('k>' . $this->_id . '>' . $codeID . '>' . $keyID, $obfuscated);

            // Création du lien de chiffrement asymétrique.
            $this->writeLink('k>' . $keyID . '>' . $codekeyID . '>' . $signer, $obfuscated);

            // Supprime l'objet qui a été marqué protégé.
            $this->_metrology->addLog('Delete unprotected object ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
            $deleteObject = true;

            // Création lien.
            $this->writeLink('d>' . $this->_id);

            // Lit les liens.
            $links = array();
            $this->getLinks($links, array(), false);
            $entity = $this->_nebuleInstance->getCurrentEntity();
            foreach ($links as $link) {
                // Vérifie si l'entité signataire du lien est l'entité courante.
                if ($link->getParsed()['bs/rs1/eid'] != $entity) {
                    // Si ce n'est pas l'entité courante, quitte.
                    $this->_metrology->addAction('delobj', $this->_id, false);
                    $deleteObject = false;
                }
            }

            if ($deleteObject) {
                // Supprime l'objet.
                $r = $this->_io->unsetObject($this->_id);

                // Métrologie.
                $this->_metrology->addAction('delobj', $this->_id, $r);
            }

            // Mémorisation de l'état de protection.
            $this->_markProtectedChecked = true;
            $this->_cacheMarkProtected = true;
            $this->_idProtected = $codeID;
            $this->_idUnprotected = $this->_id;
            $this->_idProtectedKey = $codeKeyID;
            $this->_idUnprotectedKey = $keyID;

            // Si autorisé, partage la protection avec les entités de recouvrement.
            if ($this->_configuration->getOptionAsBoolean('permitRecoveryEntities')) {
                $listEntities = $this->_nebuleInstance->getRecoveryEntitiesInstance();
                foreach ($listEntities as $entity) {
                    if (is_a($entity, 'Entity')
                        && $entity->getID() != '0'
                        && $entity->getIsPublicKey()
                        && $entity != $this->_nebuleInstance->getCurrentEntity()
                    ) {
                        // Chiffrement (asymétrique) de la clé de chiffrement du contenu.
                        $codeKey = $this->_crypto->encryptTo($key, $entity->getPublicKey());

                        // Vérification de bon chiffrement.
                        if ($codeKey === false) {
                            $this->_metrology->addLog('Error (1) share protection to recovery ' . $entity->getID(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                            continue;
                        }

                        // Ecrit la clé de session chiffrée.
                        $codeKeyInstance = new Node($this->_nebuleInstance, '0');
                        $codeKeyInstance->setContent($codeKey, false);
                        $codeKeyID = $codeKeyInstance->getID();
                        $this->_metrology->addLog('Protect object, code key : ' . $codeKeyID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

                        // Vérification de bonne écriture.
                        if ($codeKeyID == '0') {
                            $this->_metrology->addLog('Error (2) share protection to recovery ' . $entity->getID(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                            continue;
                        }

                        // Création du type mime de la clé chiffrée.
                        $text = 'application/x-encrypted/' . $this->_configuration->getOptionAsString('cryptoAsymmetricAlgorithm');
                        $textID = $this->_nebuleInstance->createTextAsObject($text);
                        if ($textID != '') {
                            // Crée le lien de type d'empreinte.
                            $meta = $this->_nebuleInstance->getNIDfromData('nebule/objet/type');
                            $this->writeLink('l>' . $codeKeyID . '>' . $textID . '>' . $meta, $obfuscated);
                        }

                        // Création du lien de chiffrement asymétrique.
                        $this->writeLink('k>' . $keyID . '>' . $codekeyID . '>' . $entity->getID(), $obfuscated);

                        $this->_metrology->addLog('Set protection shared to recovery ' . $entity->getID(), Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
                    }
                }
            }

            return true;
        }
        return false;*/
    }

    /**
     * Déprotège l'objet.
     * @return boolean
     */
    public function setUnprotected(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return false; // FIXME disabled!

        /*// Vérifie que l'objet est protégé et que l'on peut y acceder.
        if (!$this->_getMarkProtected()
            || $this->_idProtected == '0'
            || $this->_idUnprotected == '0'
            || $this->_idProtectedKey == '0'
            || $this->_idUnprotectedKey == '0'
        )
            return false;

        $this->_metrology->addLog('Set unprotected ' . $this->_id, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');

        // TODO

        return false;*/
    }

    /**
     * Protège l'objet pour une entité.
     *
     * L'objet devient illisible en verrouillant l'entité courante !
     *
     * @param $entity string
     * @return boolean
     */
    public function setProtectedTo(string $entity): bool
    {
        return false; // FIXME disabled!

        // TODO
        //return false;
    }

    /**
     * Transmet la protection de l'objet à une entité.
     *
     * @param $entity entity|string
     * @return boolean
     */
    public function shareProtectionTo($entity): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return false; // FIXME disabled!

        /*if (is_string($entity)) {
            $entity = $this->_nebuleInstance->newEntity($entity);
        }
        if (!is_a($entity, 'entity'))
            $entity = $this->_nebuleInstance->newEntity($entity->getID());
        if (!$entity->getIsEntity('all'))
            return false;

        // Vérifie que l'objet est protégé et que l'on peut y acceder.
        if (!$this->_getMarkProtected()
            || $this->_idProtected == '0'
            || $this->_idUnprotected == '0'
            || $this->_idProtectedKey == '0'
            || $this->_idUnprotectedKey == '0'
        )
            return false;

        $this->_metrology->addLog('Set protected to ' . $entity->getID(), Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        // Lit la clé chiffrée. @todo à remplacer par getContent ...
        $limit = $this->_configuration->getOptionUntyped('ioReadMaxData');
        $codeKey = $this->_nebuleInstance->getIoInstance()->getObject($this->_idProtectedKey, $limit);
        // Calcul l'empreinte de la clé chiffrée.
        $hash = $this->_nebuleInstance->getNIDfromData($codeKey);
        if ($hash != $this->_idProtectedKey) {
            $this->_metrology->addLog('Error get protected key content : ' . $this->_idProtectedKey, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
            $this->_metrology->addLog('Protected key content hash : ' . $hash, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
            return false;
        }

        // Déchiffrement (asymétrique) de la clé de chiffrement du contenu.
        $key = $this->_entitiesInstance->getCurrentEntityInstance()->decrypt($codeKey);
        // Calcul l'empreinte de la clé.
        $hash = $this->_nebuleInstance->getNIDfromData($key);
        if ($hash != $this->_idUnprotectedKey) {
            $this->_metrology->addLog('Error get unprotected key content : ' . $this->_idUnprotectedKey, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
            $this->_metrology->addLog('Unprotected key content hash : ' . $hash, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
            return false;
        }

        // Chiffrement (asymétrique) de la clé de chiffrement du contenu.
        $codeKey = $this->_crypto->encryptTo($key, $entity->getPublicKey());

        // Vérification de bon chiffrement.
        if ($codeKey == '')
            return false;

        // Ecrit la clé chiffrée.
        $codeKeyInstance = new Node($this->_nebuleInstance, '0');
        $codeKeyInstance->setContent($codeKey, false);
        $codeKeyID = $codeKeyInstance->getID();
        $this->_metrology->addLog('Protect object, code key : ' . $codeKeyID, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');

        // Vérification de bonne écriture.
        if ($codeKeyID == '0')
            return false;

        $signer = $this->_nebuleInstance->getCurrentEntity();
        $date = date(DATE_ATOM);

        // Création du type mime de la clé chiffrée.
        $text = 'application/x-encrypted/' . $this->_configuration->getOptionAsString('cryptoAsymmetricAlgorithm');
        $textID = $this->_nebuleInstance->createTextAsObject($text);
        if ($textID != '') {
            // Crée le lien de type d'empreinte.
            $action = 'l';
            $source = $codeKeyID;
            $target = $textID;
            $meta = $this->_nebuleInstance->getNIDfromData('nebule/objet/type');
            $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
            $newLink = new BlocLink($this->_nebuleInstance, $link);
            // Signe le lien.
            $newLink->sign();
            // Ecrit le lien.
            $newLink->write();
        }

        // Création du lien de chiffrement asymétrique.
        $action = 'k';
        $source = $this->_idUnprotectedKey;
        $target = $codeKeyID;
        $meta = $entity->getID();
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new Link($this->_nebuleInstance, $link);
        // Signe le lien.
        $newLink->sign();
        // Ecrit le lien.
        $newLink->write();

        return true;*/
    }

    /**
     * Transmet l'annulation de la protection de l'objet à une entité.
     * Ne marche pas si il y a eu plusieurs protections/déprotections/protections/... !!!
     * @param $entity entity|string
     * @return boolean
     * @todo
     *
     */
    public function cancelShareProtectionTo($entity): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return false; // FIXME disabled!

        /*if (is_string($entity))
            $entity = $this->_nebuleInstance->newEntity($entity);
        if (!is_a($entity, 'entity'))
            $entity = $this->_nebuleInstance->newEntity($entity->getID());
        if (!$entity->getIsEntity('all'))
            return false;

        // Vérifie que l'objet est protégé et que l'on peut y acceder.
        if (!$this->_getMarkProtected())
            return false;
        if ($this->_idProtected == '0')
            return false;
        if ($this->_idUnprotected == '0')
            return false;
        if ($this->_idProtectedKey == '0')
            return false;
        if ($this->_idUnprotectedKey == '0')
            return false;

        // Vérifie que la protection n'est pas partagée à une entité de recouvrement.
        if (!$this->_configuration->getOptionAsBoolean('permitRecoveryRemoveEntity')
            && $this->_nebuleInstance->getIsRecoveryEntity($entity->getID())
        )
            return false;

        $this->_metrology->addLog('Cancel share protection to ' . $entity->getID(), Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');

        // Recherche l'objet de clé de chiffrement pour l'entité.
        $links = array();
        $filter = array(
            'bl/rl/req' => 'k',
            'bl/rl/nid1' => $this->_idUnprotectedKey,
            'bl/rl/nid3' => $entity->getID(),
            'bl/rl/nid4' => '',
        );
        $this->getLinks($links, $filter, false);

        if (sizeof($links) == 0)
            return true;

        foreach ($links as $item) {
            $idKey = $item->getParsed()['bl/rl/nid1'];
            $idProtectedKey = $item->getParsed()['bl/rl/nid2'];
            if ($idKey != '0' && $idProtectedKey != '0') {
                // Création du lien d'annulation de chiffrement asymétrique.
                $signer = $this->_nebuleInstance->getCurrentEntity();
                $date = date(DATE_ATOM);
                $action = 'x';
                $source = $idKey;
                $target = $idProtectedKey;
                $meta = $entity->getID();
                $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
                $newLink = new Link($this->_nebuleInstance, $link);
                // Signe le lien.
                $newLink->sign();
                // Ecrit le lien.
                $newLink->write();

                // Suppression de la clé de chiffrement protégée.
                $object = $this->_cacheInstance->newNode($idProtectedKey);
                //$object->deleteObject();
                $signerLinks = array();
                $this->getLinks($signerLinks, array(), false);
                $delete = true;
                foreach ($signerLinks as $itemSigner) {
                    // Si un lien a été généré par une autre entité, c'est que l'objet est encore utilisé.
                    if ($itemSigner->getParsed()['bs/rs1/eid'] != $signer
                        && $itemSigner->getParsed()['bs/rs1/eid'] != $this->_nebuleInstance->getCurrentEntity()
                    )
                        $delete = false;
                }
                if ($delete)
                    $this->_io->unsetObject($idProtectedKey);
                unset($object, $signerLinks, $itemSigner, $delete);
            }
        }
        unset($links);

        return true;*/
    }


    /**
     * Lit une émotion pour l'objet.
     * La sélection d'une classe sociale particulière permet de faire un filtre sur la recherche.
     * Les classes sociales intéressantes :
     *  - self : mes émotions sur l'objet ;
     *  - notself : les émotions de toutes les entités sauf moi sur l'objet ;
     *  - all : les émotions de toutes les entités sur l'objet.
     *
     * @param string      $emotion
     * @param string      $socialClass
     * @param string $context
     * @return boolean
     */
    public function getMarkEmotion(string $emotion, string $socialClass = '', string $context = ''): bool
    {
        if ($this->getMarkEmotionSize($emotion, $socialClass, $context) == 0)
            return false;
        return true;
    }

    /**
     * Lit la liste des entités qui ont marqué une émotion pour l'objet.
     * TODO hash alternatifs.
     * Par défaut, le contexte de recherche est vide.
     * Dans ce cas, on ne garde que les liens avec comme contexte l'entité qui a signé le lien.
     *
     * @param string $emotion
     * @param string $socialClass
     * @param string $context
     * @return array:Link
     */
    public function getMarkEmotionList(string $emotion, string $socialClass = '', string $context = '')
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $list = array();

        // Nettoyage du contexte.
        if (is_a($context, 'entity')
            || is_a($context, 'Node')
            || is_a($context, 'group')
            || is_a($context, 'conversation')
        )
            $context = $context->getID();
        if (!is_string($context)
            || $context == '0'
            || !ctype_xdigit($context)
        )
            $context = '';

        // Vérifie que l'émotion existe.
        if ($emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET
        )
            return $list;

        $hashEmotion = $this->_nebuleInstance->getNIDfromData($emotion);

        // Liste les liens à la recherche de la propriété.
        $list = array();
        $filter = array(
            'bl/rl/req' => 'f',
            'bl/rl/nid1' => $this->_id,
            'bl/rl/nid2' => $hashEmotion,
            'bl/rl/nid3' => $context,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($list, $filter, false);

        // Nettoyage.
        foreach ($list as $i => $link) {
            // Si méta à 0, supprime le lien.
            if ($link->getParsed()['bl/rl/nid3'] == '0')
                unset($list[$i]);
        }
        unset($link);

        // Fait une recherche sur d'autres types de hash si celui par défaut ne renvoie rien.
        if (sizeof($list) == 0
            && $this->_configurationInstance->getOptionAsBoolean('permitListOtherHash')
        ) {
            // A faire...
        }

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->arraySocialFilter($list, $socialClass);

        return $list;
    }

    /**
     * Lit le nombre d'entités qui ont marqué une émotion pour l'objet.
     *
     * @param string $emotion
     * @param string $socialClass
     * @param string $context
     * @return int
     */
    public function getMarkEmotionSize(string $emotion, string $socialClass = '', string $context = ''): int
    {
        $list = $this->getMarkEmotionList($emotion, $socialClass, $context);
        return sizeof($list);
    }

    /**
     * Lit toutes les émotions pour l'objet.
     *
     * @param string $socialClass
     * @param string $context
     * @return array:string
     */
    public function getMarkEmotions(string $socialClass = '', string $context = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $result = array();

        $result[References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE] = $this->getMarkEmotion(References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE, $socialClass, $context);
        $result[References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE] = $this->getMarkEmotion(References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE, $socialClass, $context);
        $result[References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR] = $this->getMarkEmotion(References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR, $socialClass, $context);
        $result[References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE] = $this->getMarkEmotion(References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE, $socialClass, $context);
        $result[References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE] = $this->getMarkEmotion(References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE, $socialClass, $context);
        $result[References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT] = $this->getMarkEmotion(References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT, $socialClass, $context);
        $result[References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE] = $this->getMarkEmotion(References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE, $socialClass, $context);
        $result[References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET] = $this->getMarkEmotion(References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET, $socialClass, $context);

        return $result;
    }

    /**
     * Ecrit une émotion pour l'objet.
     * La marque d'un émotion sur l'objet est un lien de type f avec :
     *  - source : l'ID de l'objet
     *  - cible : le hash de l'émotion
     *  - méta : le signataire ou l'objet de contexte (conversation par exemple)
     * Le lien peut être dissimulé.
     * L'émotion peut être rattachée en contexte à
     *  - une autre entité @param string $emotion
     *
     * TODO à revoir...
     *  - ou un objet particulier
     * Cela permet par défaut de discriminer précisément lorsque l'émotion concerne l'objet
     *   ou si l'émotion se réfère à un contexte particulier de l'objet comme une conversation.
     * Par défaut le contexte est l'entité en cours, l'émotion est attaché à cet objet directement.
     *
     * @param boolean $obfuscate
     * @param string  $context
     * @return boolean
     */
    public function setMarkEmotion(string $emotion, bool $obfuscate = false, string $context = ''): bool
    {
        return false; // FIXME disabled

        /*$this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Vérifie que l'émotion existe.
        if ($emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET
        ) {
            return false;
        }

        // Nettoyage du contexte.
        if (is_a($context, 'entity')
            || is_a($context, 'Node')
            || is_a($context, 'group')
            || is_a($context, 'conversation')
        ) {
            $context = $context->getID();
        }
        if (!is_string($context)
            || $context == '0'
            || $context == ''
            || !ctype_xdigit($context)
        ) {
            $context = $this->_nebuleInstance->getCurrentEntity();
        }

        // Création du lien.
        $signer = $this->_nebuleInstance->getCurrentEntity();
        $date = date(DATE_ATOM);
        $action = 'f';
        $source = $this->_id;
        $target = $this->_nebuleInstance->getNIDfromData($emotion);
        $meta = $context;
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new Link($this->_nebuleInstance, $link);
        $newLink->sign();
        if ($obfuscate)
            $newLink->setObfuscate();
        $newLink->write();

        return true;*/
    }

    /**
     * Supprime une émotion pour l'objet.
     * Le lien de suppression peut être dissimulé et ainsi laisser publique l'émotion.
     * L'émotion peut être rattachée à une autre entité.
     *
     * @param string  $emotion
     * @param boolean $obfuscate
     * @param string  $entity
     * @return boolean
     */
    public function unsetMarkEmotion(string $emotion, bool $obfuscate = false, string $entity = ''): bool
    {
        return false; // FIXME disabled

        /*$this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Vérifie que l'émotion existe.
        if ($emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE
            && $emotion != References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET
        )
            return false;

        // Nettoyage de l'entité demandé.
        if (is_a($entity, 'entity')
            || is_a($entity, 'Node')
            || is_a($entity, 'group')
            || is_a($entity, 'conversation')
        )
            $entity = $entity->getID();
        if (!is_string($entity)
            || $entity == '0'
            || $entity == ''
            || !ctype_xdigit($entity)
        )
            $entity = $this->_nebuleInstance->getCurrentEntity();

        // Création du lien.
        $signer = $this->_nebuleInstance->getCurrentEntity();
        $date = date(DATE_ATOM);
        $action = 'x';
        $source = $this->_id;
        $target = $this->_nebuleInstance->getNIDfromData($emotion);
        $meta = $entity;
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new Link($this->_nebuleInstance, $link);
        $newLink->sign();
        if ($obfuscate)
            $newLink->setObfuscate();
        $newLink->write();

        return true;*/
    }


    /**
     * Lit à quelles entités à été transmis la protection de l'objet.
     *
     * @return array:string
     */
    public function getProtectedTo(): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return array(); // FIXME disabled!

        $result = array();
        if (!$this->_getMarkProtected()) {
            return $result;
        }

        // Lit les liens de chiffrement de l'objet, chiffrement symétrique.
        $linksSym = array();
        $filter = array(
            'bl/rl/req' => 'k',
            'bl/rl/nid1' => $this->_idUnprotected,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($linksSym, $filter, false);
        foreach ($linksSym as $linkSym) {
            // Si lien de chiffrement.
            if ($linkSym->getParsed()['bl/rl/nid3'] != '0') {
                // Lit l'objet de clé de chiffrement symétrique et ses liens.
                $instanceSym = $this->_cacheInstance->newNode($linkSym->getParsed()['bl/rl/nid3']);
                $linksAsym = array();
                $filter = array(
                    'bl/rl/req' => 'k',
                    'bl/rl/nid1' => $linkSym->getParsed()['bl/rl/nid3'],
                    'bl/rl/nid4' => '',
                );
                $this->getLinks($linksAsym, $filter, false);
                unset($instanceSym);
                foreach ($linksAsym as $linkAsym) {
                    // Si lien de chiffrement.
                    if ($linkAsym->getParsed()['bl/rl/nid3'] != '0')
                        $result[] = $linkAsym->getParsed()['bl/rl/nid3'];
                }
                unset($linksAsym, $linkAsym);
            }
        }
        unset($linksSym, $linkSym);
        return $result;
    }


    /**
     * Vérifie la consistance de l'objet.
     *
     * Retourne true  si l'objet a déjà été vérifié.
     * Retourne false si l'objet n'est pas présent.
     * Retourne false si la fonction de hash n'est pas reconnue ou invalide, l'objet n'est pas vérifié.
     * Retourne false si l'extraction de l'objet échoue, l'objet n'est pas vérifié.
     * Retourne false si l'objet n'est pas valide, il est supprimé.
     * Retourne true  si l'empreinte de l'objet est valide.
     *
     * En cas de type de hash inconnu ou invalide, et si l'option permitDeleteObjectOnUnknownHash est à true,
     *   choisi l'algorithme de hash par défaut comme dernière chance.
     *   Si l'empreinte ne correspond pas, l'objet sera supprimé.
     *
     * @return boolean
     */
    public function checkConsistency(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_haveData)
            return true;

        if (!$this->_ioInstance->checkObjectPresent($this->_id))
            return false;

        // Si c'est l'objet 0, le supprime.
        if ($this->_id == '0' || !$this->checkNID($this->_id)) {
            $this->_data = null;
            $this->_metrologyInstance->addLog('Delete object 0', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
            $nid = '0';
            $this->_ioInstance->unsetObject($nid);
            return false;
        }

        if ($this->_configurationInstance->getOptionAsBoolean('permitSynchronizeLink'))
            $this->syncLinks(false);

        if ($this->_configurationInstance->getOptionAsBoolean('permitDeleteObjectOnUnknownHash'))
            $hashAlgo = $this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm');
        else
            return false;

        // Extrait le contenu de l'objet, si possible.
        $this->_metrologyInstance->addObjectRead(); // Metrologie.
        $this->_data = $this->_ioInstance->getObject($this->_id);
        if ($this->_data === false) {
            $this->_metrologyInstance->addLog('Cant read object ' . $this->_id, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_data = null;
            return false;
        }
        $limit = $this->_configurationInstance->getOptionUntyped('DEFAULT_IO_READ_MAX_DATA');
        $this->_metrologyInstance->addLog('Object size ' . $this->_id . ' ' . strlen($this->_data) . '/' . $limit, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        // Vérifie la taille.
        if (strlen($this->_data) > $limit) {
            $this->_data = null;
            return false;
        }

        // Calcul l'empreinte.
        $hash = $this->_nebuleInstance->getNIDfromData($this->_data, $hashAlgo);
        if ($hash == $this->_id) // Si l'objet est valide.
        {
            $this->_metrologyInstance->addObjectVerify(); // Metrologie.
            $this->_haveData = true;
            return true;
        }

        // Si la vérification est désactivée, quitte.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckObjectHash')) {
            $this->_metrologyInstance->addLog('Warning - Invalid object hash ' . $this->_id, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_haveData = true;
            return true;
        }

        // Sinon l'objet est présent mais invalide, le supprime.
        $this->_data = null;
        $this->_metrologyInstance->addLog('Delete unconsistency object ' . $this->_id . ' ' . $hashAlgo . ':' . $hash, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
        $this->_ioInstance->unsetObject($this->_id);
        return false;
    }

    /**
     * Lit le contenu de l'objet.
     * Retourne une chaine vide si l'empreinte des données diffère de l'ID.
     *
     * @param integer $limit limite de lecture du contenu de l'objet.
     * @return string
     */
    public function getContent(int $limit = 0): ?string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions ' . $this->_id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_haveData)
            return $this->_data; // FIXME gérer aussi la taille dans le cache !

        /*if ($this->_getMarkProtected())
            return $this->_getProtectedContent($limit);
        else*/
            return $this->_getUnprotectedContent($limit);
    }

    /**
     * Lit le contenu de l'objet sans essayer de le déchiffrer.
     * Retourne une chaine vide si l'empreinte des données diffère de l'ID.
     *
     * @param integer $limit limite de lecture du contenu de l'objet.
     * @return string
     */
    public function getContentAsUnprotected(int $limit = 0): ?string
    {
        return $this->_getUnprotectedContent($limit);
    }

    /**
     * Lit sans déchiffrer un contenu (non protégé).
     *
     * @param integer $limit limite de lecture du contenu de l'objet.
     * @return string|null
     */
    protected function _getUnprotectedContent(int $limit = 0): ?string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions ' . $this->_id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_haveData)
            return $this->_data;

        if (!$this->_ioInstance->checkObjectPresent($this->_id))
            return null;

        // Si c'est l'objet 0, le supprime.
        if ($this->_id == '0' || !$this->checkNID($this->_id)) {
            $this->_data = null;
            $this->_metrologyInstance->addLog('Delete object 0', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'f8873320');
            $nid = '0';
            $this->_ioInstance->unsetObject($nid);
            return null;
        }

        if ($this->_configurationInstance->getOptionAsBoolean('permitSynchronizeLink'))
            $this->syncLinks(false);

        if ($this->_configurationInstance->getOptionAsBoolean('permitDeleteObjectOnUnknownHash'))
            $hashAlgo = $this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm');
        else
            return null;

        // Prépare la limite de lecture.
        $maxLimit = $this->_configurationInstance->getOptionAsInteger('ioReadMaxData');
        if ($limit == 0
            || $limit > $maxLimit
        )
            $limit = $maxLimit;

        // Extrait le contenu de l'objet, si possible.
        $this->_metrologyInstance->addObjectRead(); // Metrologie.
        $this->_data = $this->_ioInstance->getObject($this->_id, $limit);
        if ($this->_data === false) {
            $this->_metrologyInstance->addLog('Cant read object ' . $this->_id, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_data = null;
            return null;
        }
        $this->_metrologyInstance->addLog('Object read size ' . $this->_id . ' ' . strlen($this->_data) . '/' . $maxLimit, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        // Vérifie la taille. Si trop grand mais qu'une limite est imposé, quitte sans vérifier l'empreinte.
        if (strlen($this->_data) >= $limit
            && $limit < $maxLimit
        ) {
            $this->_data = null;
            return null;
        }

        // Calcul l'empreinte.
        $hash = $this->_nebuleInstance->getNIDfromData($this->_data, $hashAlgo);
        if ($hash == $this->_id) // Si l'objet est valide.
        {
            $this->_metrologyInstance->addObjectVerify(); // Metrologie.
            $this->_haveData = true;
            return $this->_data;
        }

        // Si la vérification est désactivée, quitte.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckObjectHash')) {
            $this->_metrologyInstance->addLog('Warning - Invalid object hash ' . $this->_id, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_haveData = true;
            return $this->_data;
        }

        // Sinon l'objet est présent mais invalide, le supprime.
        $this->_data = null;
        $this->_metrologyInstance->addLog('Delete unconsistency object ' . $this->_id . ' ' . $hashAlgo . ':' . $hash, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
        $this->_ioInstance->unsetObject($this->_id);
        return null;
    }

    /**
     * Lit et déchiffre un contenu protégé.
     *
     * @param integer $limit          limite de lecture du contenu de l'objet.
     * @return string|null
     * @todo à revoir en entier !
     */
    protected function _getProtectedContent(int $limit = 0): ?string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return null; // FIXME disabled!

        if ($this->_haveData) {
            return $this->_data;
        }

        // Si non protégé, retourne le contenu de l'objet.
        if (!$this->_getMarkProtected()
            || $this->_idProtected == '0'
            || $this->_idUnprotected == '0'
            || $this->_idProtectedKey == '0'
            || $this->_idUnprotectedKey == '0'
        ) {
            return $this->_getUnprotectedContent($limit);
        }

//		if ( $limit == 0 )
//			$limit = $this->_configuration->getOption('ioReadMaxData');

        $permitTroncate = false; // @todo à retirer.

        $this->_metrologyInstance->addLog('Get protected content : ' . $this->_idUnprotected, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        // Lit la clé chiffrée.
        $codeKey = $this->_ioInstance->getObject($this->_idProtectedKey, 0);
        // Calcul l'empreinte de la clé chiffrée.
        $hash = $this->_nebuleInstance->getNIDfromData($codeKey);
        if ($hash != $this->_idProtectedKey) {
            $this->_metrologyInstance->addLog('Error get protected key content : ' . $this->_idProtectedKey, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_metrologyInstance->addLog('Protected key content hash : ' . $hash, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            return null;
        }

        // Déchiffrement (asymétrique) de la clé de chiffrement du contenu.
        $key = $this->_entitiesInstance->getCurrentEntityInstance()->decrypt($codeKey);
        // Calcul l'empreinte de la clé.
        $hash = $this->_nebuleInstance->getNIDfromData($key);
        if ($hash != $this->_idUnprotectedKey) {
            $this->_metrologyInstance->addLog('Error get unprotected key content : ' . $this->_idUnprotectedKey, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_metrologyInstance->addLog('Unprotected key content hash : ' . $hash, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            return null;
        }

        // Lit l'objet chiffré.
        $code = $this->_ioInstance->getObject($this->_idProtected, $limit);
        // Calcul l'empreinte des données.
        $hash = $this->_nebuleInstance->getNIDfromData($code);
        if ($hash != $this->_idProtected) {
            $this->_metrologyInstance->addLog('Error get protected data content : ' . $this->_idProtected, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_metrologyInstance->addLog('Protected data content hash : ' . $hash, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            return null;
        }

        $data = $this->_cryptoInstance->decrypt($code, $this->_configurationInstance->getOptionAsString('cryptoSymmetricAlgorithm'), $key);
        // Calcul l'empreinte des données.
        $hash = $this->_nebuleInstance->getNIDfromData($data);
        if ($hash != $this->_idUnprotected) {
            $this->_metrologyInstance->addLog('Error get unprotected data content : ' . $this->_idUnprotected, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_metrologyInstance->addLog('Unprotected data content hash : ' . $hash, Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            return null;
        }

        unset($code, $key, $codeKey, $hash);
        return $data;
    }

    /**
     * Vide le cache de données du contenu de l'objet.
     * Ca ne supprime pas l'objet ou son contenu mais juste la copie du contenu en mémoire.
     *
     * Cette fonction peut être utilisé lorsque l'on veut réduire la mémoire utilisée quand on manipule beaucoup d'objets un peu volumineux.
     *
     * @return void
     */
    public function flushDataCache(): void
    {
        $this->_data = null;
        $this->_haveData = false;
        $this->_code = '';
        $this->_haveCode = false;
    }

    /**
     * Lit la première ligne du contenu d'un (autre) objet nebule, extrait une chaine de texte imprimable.
     *
     * @param string $id
     * @return string
     */
    protected function _readOneLineOtherObject(string $id): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($id == ''
            || !$this->_ioInstance->checkObjectPresent($id)
        )
            return '';

        $instance = $this->_cacheInstance->newNode($id);
        $text = substr(trim(strtok(filter_var($instance->getContent(0), FILTER_SANITIZE_STRING), "\n")), 0, 1024);
        if (extension_loaded('mbstring'))
            $text = mb_convert_encoding($text, 'UTF-8');
        else
            $this->_metrologyInstance->addLog('mbstring extension not installed or activated!', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c2becfad');

        unset($instance);
        return $text;
    }

    /**
     * Lit la première ligne du contenu de l'objet nebule, extrait une chaine de texte imprimable.
     *
     * @param integer $limit
     * @return string
     */
    public function readOneLineAsText(int $limit = 0): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions ' . $this->_id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_ioInstance->checkObjectPresent($this->_id))
            return '';

        if ($limit == 0)
            $limit = $this->_configurationInstance->getOptionUntyped('ioReadMaxData');
        if ($limit < 4)
            $limit = 4;

        $text = trim(strtok(filter_var($this->getContent($limit), FILTER_SANITIZE_STRING), "\n"));
        if (extension_loaded('mbstring'))
            $text = mb_convert_encoding($text, 'UTF-8');
        else
            $this->_metrologyInstance->addLog('mbstring extension not installed or activated!', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c2becfad');

        if (strlen($text) > $limit)
            $text = substr($text, 0, ($limit - 3)) . '...';

        return $text;
    }

    /**
     * Lit le contenu de l'objet nebule, extrait une chaine de texte imprimable.
     *
     * @param integer $limit
     * @return string
     */
    public function readAsText(int $limit = 0): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_ioInstance->checkObjectPresent($this->_id))
            return '';
        if ($limit < 4)
            $limit = 4;

        $text = trim((string)filter_var($this->getContent($limit + 4), FILTER_SANITIZE_STRING));
        if (extension_loaded('mbstring'))
            $text = mb_convert_encoding($text, 'UTF-8');
        else
            $this->_metrologyInstance->addLog('mbstring extension not installed or activated!', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c2becfad');

        if (strlen($text) > $limit)
            $text = substr($text, 0, ($limit - 3)) . '...';
        return $text;
    }

    /**
     * Link - Read links, parse and filter each links.
     *
     * @param array  $links
     * @param array  $filter
     * @param bool   $withInvalidLinks
     * @return void
     */
    public function getLinks(array &$links, array $filter, bool $withInvalidLinks = false): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_id == '0'
            || !$this->_ioInstance->checkLinkPresent($this->_id)
        )
            return;

        if (!$this->_configurationInstance->getOptionAsBoolean('permitListInvalidLinks'))
            $withInvalidLinks = false;

        $lines = $this->_ioInstance->getBlockLinks($this->_id, '', 0);
        if (sizeof($lines) == 0)
            return;

        foreach ($lines as $line)
        {
            $bloc = $this->_cacheInstance->newBlockLink($line, Cache::TYPE_BLOCLINK);
            if ($bloc->getValidStructure()
                && ( $bloc->getValid() || $withInvalidLinks )
            ) {
                $newLinks = $bloc->getLinks(); // FIXME
                $this->_filterLinksByStructure($newLinks, $filter);
                $links = array_merge($links, $newLinks);
            }
            else
                $this->_cacheInstance->unsetOnCache($line, Cache::TYPE_BLOCLINK);
        }
    }

    /**
     * @param array $links
     * @param array $filter
     * @return void
     */
    protected function _filterLinksByStructure(array &$links, array $filter): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        foreach ($links as $i => $link)
        {
            if (!$this->_filterLinkByStructure($link, $filter))
                unset($links[$i]);
        }
    }

    /**
     * Test if a link match a filter.
     * Filtering on have bl/rl/req, bl/rl/nid1, bl/rl/nid2, bl/rl/nid3, bl/rl/nid4, bl/rl/nid*, bs/rs1/eid, or not have.
     * TODO revoir pour les liens de type x...
     *
     * @param LinkRegister $link
     * @param array        $filter
     * @return bool
     */
    protected function _filterLinkByStructure(LinkRegister &$link, array $filter): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $parsedLink = $link->getParsed();

        foreach ($filter as $n => $f)
        {
            $a = $f;
            if (is_string($f))
                $a = array($f);
            foreach ($a as $v)
            {
                if (isset($parsedLink[$n]) && ($parsedLink[$n] != $v || $v == ''))
                    return false;
            }
        }
        return true;
    }


    /**
     * Retourne un tableau d'objets de type Link ou un tableau vide si ça se passe mal.
     * Un filtre simple est réalisé lors de l'extraction des liens.
     *
     * @param string $eid
     * @param string $chr
     * @param string $req
     * @param string $nid1
     * @param string $nid2
     * @param string $nid3
     * @param string $nid4
     * @return array:Link
     */
    public function getLinksOnFields(string $eid = '', string $chr = '', string $req = '', string $nid1 = '', string $nid2 = '', string $nid3 = '', string $nid4 = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get links for nid=' . $this->getID(), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_ioInstance->checkLinkPresent($this->_id))
            return array();

        $links = array();
        $filter = array();

        if ($eid != '')
            $filter['bs/rs1/eid'] = $eid;
        if ($chr != '')
            $filter['bl/rc/chr'] = $chr;
        if ($req != '')
            $filter['bl/rl/req'] = $req;
        if ($nid1 != '')
            $filter['bl/rl/nid1'] = $nid1;
        if ($nid2 != '')
            $filter['bl/rl/nid2'] = $nid2;
        if ($nid3 != '')
            $filter['bl/rl/nid3'] = $nid3;
        if ($nid4 != '')
            $filter['bl/rl/nid4'] = $nid4;

        $this->getLinks($links, $filter, false);
        return $links;
    }

    /**
     * Try to find an update NID for the current NID. Empty if not found.
     *
     * @param boolean $present
     * @param boolean $synchro
     * @param string  $social
     * @return string
     */
    public function getUpdateNID(bool $present = true, bool $synchro = false, string $social = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $exclude = array();
        $oneLevelUpdate = $this->_findUpdate($this->_id, 0, $exclude, $social, $present, $synchro);
        if ($oneLevelUpdate != '')
            return $oneLevelUpdate;
        return '';
    }

    /**
     * Try to find a new level of update for an object.
     * Internal function which try to :
     * 1) If max update following is not reached, find list of update links ;
     * 2) Recall the function with each element of the list to search for deepest update, not empty ;
     * 3) If no deeper update found, check current NID validity. If OK, return NID, or return empty.
     *
     * @param string $nid
     * @param int    $level
     * @param array  $exclude
     * @param string $social
     * @param bool   $present
     * @param bool   $synchro
     * @return string
     */
    private function _findUpdate(string $nid, int $level, array &$exclude, string $social, bool $present = true, bool $synchro = false): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $level++;
        $links = array();
        if ($level < $this->_configurationInstance->getOptionAsInteger('linkMaxFollowedUpdates'))
        {
            $filter = array(
                'bl/rl/req' => 'u',
                'bl/rl/nid1' => $nid,
                'bl/rl/nid3' => '',
                'bl/rl/nid4' => '',
            );
            $this->getLinks($links, $filter, false);
            $this->_socialInstance->arraySocialFilter($links, $social);
            $this->_arrayDateSort($links);
        }

        foreach ($links as $link)
        {
            $nid2 = $link->getParsed()['bl/rl/nid2'];
            $nid2Update = '';
            if (!isset($exclude[$nid2]))
                $nid2Update = $this->_findUpdate($nid2, $level, $exclude, $social, $present, $synchro);
            if ($nid2Update != '')
                return $nid2Update;
            $exclude[$nid2] = null;
        }

        if (!$present || $this->_ioInstance->checkObjectPresent($nid))
            return $nid;
        elseif ($synchro) {
            $instance = $this->_cacheInstance->newNode($nid);
            $instance->syncObject();
            if ($this->_ioInstance->checkObjectPresent($nid))
                return $nid;
        }
        return '';
    }



    private function _getReferencedByLinks(string $reference = '', string $action = 'l'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if ($reference == '')
            $reference = References::REFERENCE_NEBULE_REFERENCE;

        if (!self::checkNID($reference))
            $reference = $this->_nebuleInstance->getNIDfromData($reference);

        $list = array();
        $filter = array(
            'bl/rl/req' => $action,
            'bl/rl/nid1' => $this->_id,
            'bl/rl/nid3' => $reference,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($list, $filter, false);

        return $list;
    }

    private function _getReferenceToLinks(string $reference = '', string $action = 'l'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if ($reference == '')
            $reference = References::REFERENCE_NEBULE_REFERENCE;

        if (!self::checkNID($reference))
            $reference = $this->_nebuleInstance->getNIDfromData($reference);

        $list = array();
        $filter = array(
            'bl/rl/req' => $action,
            'bl/rl/nid2' => $this->_id,
            'bl/rl/nid3' => $reference,
            'bl/rl/nid4' => '',
        );
        $this->getLinks($list, $filter, false);

        return $list;
    }

    public function getReferencedLinks(string $reference = '', string $socialClass = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $links = $this->_getReferencedByLinks($reference);
        $this->_socialInstance->arraySocialFilter($links, $socialClass);
        return $links;
    }

    public function getByReferencedNID(string $reference = '', string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $links = $this->getReferencedLinks($reference, $socialClass);
        if (sizeof($links) == 0) {
            return '';
        }

        $link = end($links);
        if (!is_a($link, '\Nebule\Library\LinkRegister'))
            return '';
        return $link->getParsed()['bl/rl/nid2'];
    }

    public function getReferencedOrSelfNID(string $reference = '', string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $nid = $this->getByReferencedNID($reference, $socialClass);
        if ($nid == '')
            return $this->_id;
        return $nid;
    }

    public function getReferencedSID(string $reference = '', string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $links = $this->getReferencedLinks($reference, $socialClass);
        $link = end($links);
        if (!is_a($link, '\Nebule\Library\LinkRegister'))
            return '';
        return $link->getParsed()['bs/rs1/eid'];
    }

    public function getReferencedListSID(string $reference = '', string $socialClass = ''): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $links = $this->getReferencedLinks($reference, $socialClass);
        $link = end($links);
        $list = array();
        $listOK = array();
        if (!is_a($link, '\Nebule\Library\LinkRegister'))
            return array();
        foreach ($links as $link) {
            if (!isset($listOK[$link->getParsed()['bs/rs1/eid']])) {
                $list[] = $link->getParsed()['bs/rs1/eid'];
                $listOK[$link->getParsed()['bs/rs1/eid']] = true;
            }
        }
        return $list;
    }

    /**
     * Cherche l'instance de l'objet par référence.
     * Si pas trouvé, retourne l'instance de l'objet sur lequel s'effectue la recherche.
     * Si le type de référence $reference n'est pas précisée, utilise References::REFERENCE_NEBULE_REFERENCE.
     *
     * @param string $reference
     * @param string $socialClass
     * @return Node
     */
    public function getReferencedObjectInstance(string $reference = '', string $socialClass = ''): Node
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions ref=' . $reference, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->getTypedInstanceFromNID($this->getReferencedOrSelfNID($reference, $socialClass));
    }

    /**
     * Cherche si l'objet est une référence.
     * Si le type de référence $reference n'est pas précisée, utilise References::REFERENCE_NEBULE_REFERENCE.
     * Les références sont converties en hash en hexadécimal.
     * Si la référence est un texte en hexadécimal, c'est à dire un ID d'objet, alors c'est utilisé directement.
     *
     * @param string $reference
     * @param string $socialClass
     * @return boolean
     */
    public function getIsReferencedBy(string $reference = '', string $socialClass = 'all'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $links = $this->_getReferencedByLinks($reference);

        if (sizeof($links) == 0)
            return false;

        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        if (sizeof($links) == 0)
            return false;
        return true;
    }

    /**
     * Cherche si l'objet est référencé par une autre objet.
     * Si le type de référence $reference n'est pas précisée, utilise References::REFERENCE_NEBULE_REFERENCE.
     * Les références sont converties en hash en hexadécimal.
     * Si la référence est un texte en hexadécimal, c'est à dire un ID d'objet, alors c'est utilisé directement.
     *
     * @param string $reference
     * @param string $socialClass
     * @return boolean
     */
    public function getIsReferenceTo(string $reference = '', string $socialClass = 'all'): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Liste les liens à la recherche de la propriété.
        $links = $this->_getReferenceToLinks($reference);

        if (sizeof($links) == 0)
            return false;

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        if (sizeof($links) == 0)
            return false;
        return true;
    }

    /**
     * Cherche l'ID de l'objet qui référence l'objet courant.
     * Si pas trouvé, retourne l'ID de l'objet sur lequel s'effectue la recherche.
     * Si le type de référence $reference n'est pas précisée, utilise References::REFERENCE_NEBULE_REFERENCE.
     *
     * @param string $reference
     * @param string $socialClass
     * @return string
     */
    public function getReferenceToObjectID(string $reference = '', string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Liste les liens à la recherche de la propriété.
        $links = $this->_getReferenceToLinks($reference);

        if (sizeof($links) == 0)
            return $this->_id;

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Extrait le dernier de la liste.
        $link = end($links);
        unset($links);

        if (!is_a($link, 'link'))
            return $this->_id;

        return $link->getParsed()['bl/rl/nid1'];
    }


    /**
     * Synchronisation de l'objet.
     *
     * @param boolean $hardSync
     * @return boolean
     * @todo
     */
    public function syncObject(bool $hardSync = false): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($hardSync !== true)
            $hardSync = false;

        // Vérifie que l'objet ne soit pas déjà présent.
        if ($this->_ioInstance->checkObjectPresent($this->_id))
            return true;

        // Vérifie si autorisé.
        if (!$this->_configurationInstance->checkBooleanOptions(array('permitWriteObject','permitSynchronizeObject')))
            return false;

        // Liste les liens à la recherche de la propriété de localisation.
        $links = array();
        $filter = array(
            'bl/rl/req' => 'l',
            'bl/rl/nid3' =>  $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_ENTITE_LOCALISATION),
            'bl/rl/nid4' => '',
        );
        $this->getLinks($links, $filter, false);

        // Fait une recherche sur d'autres types de hash si celui par défaut ne renvoie rien.
        if (sizeof($links) == 0
            && $this->_configurationInstance->getOptionAsBoolean('permitListOtherHash')
        ) {
            // A faire...
        }
        if (sizeof($links) == 0)
            return false;

        // Fait un tri par pertinance sociale.
        // A faire...

        // Extrait le contenu des objets de propriété.
        foreach ($links as $i => $l) {
            $localisations[$i] = $this->_readOneLineOtherObject($l->getParsed()['bl/rl/nid2']);
        }

        // Synchronisation
        foreach ($localisations as $localisation) {
            // Lecture de l'objet.
            $data = $this->_ioInstance->getObject($this->_id, 0, $localisation);
            // Ecriture de l'objet.
            $this->_ioInstance->setObject($this->_id, $data);
        }

        unset($localisations, $localisation);
        return true;
    }

    private $syncLinkAntiLoop = false;

    /**
     * Synchronisation des liens de l'objet.
     *
     * @param boolean $hardSync
     * @return boolean
     * @todo
     */
    public function syncLinks(bool $hardSync = false): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions ' . $this->_id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        // Anti loop.
        if ($this->syncLinkAntiLoop)
            return false;
        $this->syncLinkAntiLoop = true;

        // Vérifie si autorisé.
        if (!$this->_configurationInstance->checkBooleanOptions(array('permitWriteLink','permitSynchronizeLink')))
            return false;

        // Liste les liens à la recherche de la propriété de localisation.
        $links = array();
        $filter = array(
            'bl/rl/req' => 'l',
            'bl/rl/nid3' => $this->_nebuleInstance->getNIDfromData('nebule/objet/entite/localisation'),
            'bl/rl/nid4' => '',
        );
        $this->getLinks($links, $filter, false);

        // Fait une recherche sur d'autres types de hash si celui par défaut ne renvoie rien.
        /*if (sizeof($links) == 0
            && $this->_configuration->getOptionAsBoolean('permitListOtherHash')
        ) {
            // TODO
        }*/
        if (sizeof($links) == 0)
            return false;

        // Fait un tri par pertinance sociale.
        // A faire...

        // Extrait le contenu des objets de propriété.
        foreach ($links as $i => $l)
            $localisations[$i] = $this->_readOneLineOtherObject($l->getParsed()['bl/rl/nid2']);

        // Synchronisation
        foreach ($localisations as $localisation) {
            $links = $this->_ioInstance->getBlockLinks($this->_id, $localisation);
            $this->_metrologyInstance->addLog('Object links count read ' . $this->_id . ' ' . sizeof($links), Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

            foreach ($links as $link) {
                $linkInstance = $this->_cacheInstance->newBlockLink($link);
                $linkInstance->write();
            }
        }

        $this->syncLinkAntiLoop = false;
        return true;
    }

    /**
     * Supprime l'objet si plus aucune entité ne l'utilise.
     * Le lien de suppression est créé même si l'objet n'est pas supprimé.
     *
     * @return boolean
     */
    public function deleteObject(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $deleteObject = true;

        // Détecte si l'objet est protégé.
        $this->_getMarkProtected();
        $protected = ($this->_markProtectedChecked && $this->_cacheMarkProtected);
        if ($protected)
            $id = $this->_idUnprotected;
        else
            $id = $this->_id;

        $this->writeLink('d>' . $this->_id);

        // Lit les liens.
        $links = array();
        $this->getLinks($links, array(), false);
        $entity = $this->_entitiesInstance->getCurrentEntityID();
        foreach ($links as $link) {
            // Vérifie si l'entité signataire du lien est l'entité courante.
            if ($link->getParsed()['bs/rs1/eid'] != $entity) {
                // Si ce n'est pas l'entité courante, quitte.
                $this->_metrologyInstance->addAction('delobj', $id, false);
                $deleteObject = false;
            }
        }

        if ($deleteObject) {
            // Supprime l'objet.
            $r1 = $this->_ioInstance->unsetObject($id); // FIXME declare vars r1 r2
            $r2 = true;

            // Métrologie.
            $this->_metrologyInstance->addAction('delobj', $id, $r1);
        }

        // Si protégé.
        if ($protected) {
            $this->_metrologyInstance->addLog('Delete protected object ' . $this->_id, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
            $id = $this->_idProtected;

            $this->writeLink('d>' . $this->_id);

            // Lit les liens.
            $links = array();
            $this->getLinks($links, array(), false);
            $entity = $this->_entitiesInstance->getCurrentEntityID();
            foreach ($links as $link) {
                // Vérifie si l'entité signataire du lien est l'entité courante.
                if ($link->getParsed()['bs/rs1/eid'] != $entity) {
                    // Si ce n'est pas l'entité courante, quitte.
                    $this->_metrologyInstance->addAction('delobj', $id, false);
                    $deleteObject = false;
                }
            }

            if ($deleteObject) {
                // Supprime l'objet.
                $r2 = $this->_ioInstance->unsetObject($id);

                // Métrologie.
                $this->_metrologyInstance->addAction('delobj', $id, $r2);
            }
        }
        unset($links, $entity, $link, $deleteObject);

        return ($r1 && $r2);
    }

    /**
     * Supprime un objet et ses liens.
     *
     * @return boolean
     * @todo faire une suppression de ses propres liens uniquement.
     *
     */
    public function deleteObjectLinks(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->writeLink('d>' . $this->_id);

        $links = array();
        $this->getLinks($links, array(), false);
        $entity = $this->_entitiesInstance->getCurrentEntityID();
        foreach ($links as $link) {
            if ($link->getParsed()['bs/rs1/eid'] != $entity) {
                unset($links, $entity, $link);
                return false;
            }
        }

        unset($links, $entity, $link);

        $r = $this->_ioInstance->unsetObject($this->_id);

        $this->_metrologyInstance->addAction('delobj', $this->_id, $r);

        $this->_ioInstance->linksDelect($this->_id);

        return $r;
    }

    /**
     * Supprime un objet.
     * Force l'opération si l'entité est autorisée à le faire.
     *
     * @return boolean
     */
    public function deleteForceObject(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->writeLink('d>' . $this->_id);

        $r = $this->_ioInstance->unsetObject($this->_id);

        $this->_metrologyInstance->addAction('delobj', $this->_id, $r);

        return $r;
    }

    /**
     * Supprime un objet et ses liens.
     * Force l'opération si l'entité est autorisée à le faire.
     */
    public function deleteForceObjectLinks()
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Supprime l'objet.
        $this->_ioInstance->unsetObject($this->_id);

        // Supprime les liens de l'objet.
        $this->_ioInstance->flushLinks($this->_id);
    }

    /**
     * Trie un tableau de liens en fonction des dates des liens.
     *
     * @param array $links
     * @return boolean
     */
    protected function _arrayDateSort(array &$links): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (sizeof($links) == 0)
            return false;
        foreach ($links as $n => $t)
            $linksDate[$n] = $t->getDate();
        array_multisort($linksDate, SORT_STRING, SORT_DESC, $links);
        return true;
    }


    /**
     * Ecrit l'objet si non présent.
     *
     * @return boolean
     */
    public function write(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_configurationInstance->checkBooleanOptions(array('permitWrite','permitWriteObject'))) {
            $this->_metrologyInstance->addLog('Write object no authorized', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            return false;
        } // @TODO

        // Si protégé.
        if ($this->_cacheMarkProtected) {
            $this->_metrologyInstance->addAction('addobj', $this->_id, false);
            $this->_metrologyInstance->addLog('Write objet error, protected.', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            return false;
        }

        // Si pas de données.
        if (!$this->_haveData) {
            $this->_metrologyInstance->addAction('addobj', '0', false);
            $this->_metrologyInstance->addLog('Write objet error, no data.', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            return false;
        }

        $ok = $this->_ioInstance->setObject($this->_id, $this->_data);

        // vide les données.
        if (strlen($this->_data) > 1000000)
        {
            $this->_data = '';
            $this->_haveData = false;
        }

        $this->_metrologyInstance->addAction('addobj', $this->_id, $ok);
        $this->_metrologyInstance->addLog('OK write objet ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        return $ok;
    }

    public function writeLink(string $rl, bool $obfuscated = false, string $date = ''): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_configurationInstance->checkBooleanOptions(array('unlocked','permitWrite','permitWriteLink'))) {
            $this->_metrologyInstance->addLog('Write link not authorized', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            return false;
        }

        if ($rl == '')
            return false;
        $newBlockLink = new BlocLink($this->_nebuleInstance, 'new');
        $newBlockLink->addLink($rl);
        //if ($obfuscated && !$newLink->setObfuscate()) FIXME obfuscation
        //    return false;
        return $newBlockLink->signwrite($this->_entitiesInstance->getCurrentEntityID(), $date);
    }


    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#oo">OO / Objet</a>
            <ul>
                <li><a href="#oon">OON / Nommage</a></li>
                <li><a href="#oop">OOP / Protection</a></li>
                <li><a href="#ood">OOD / Dissimulation</a></li>
                <li><a href="#ool">OOL / Liens</a></li>
                <li><a href="#ooc">OOC / Création</a></li>
                <li><a href="#oos">OOS / Stockage</a>
                    <ul>
                        <li><a href="#oosa">OOSA / Arborescence</a></li>
                    </ul>
                </li>
                <li><a href="#oot">OOT / Transfert</a></li>
                <li><a href="#oor">OOR / Réservation</a></li>
                <li><a href="#ooi">OOI / Implémentation</a>
                    <ul>
                        <li><a href="#ooio">OOIO / Implémentation des Options</a></li>
                        <li><a href="#ooia">OOIA / Implémentation des Actions</a></li>
                    </ul>
                </li>
                <li><a href="#oov">OOV / Vérification</a></li>
                <li><a href="#ooo">OOO / Oubli</a></li>
            </ul>
        </li>
        <li><a href="#or">OR / Référence</a>
            <ul>
                <li><a href="#orn">ORN / Nommage</a></li>
                <li><a href="#orp">ORP / Protection</a></li>
                <li><a href="#ord">ORD / Dissimulation</a></li>
                <li><a href="#orl">ORL / Liens</a></li>
                <li><a href="#orc">ORC / Création</a></li>
                <li><a href="#ors">ORS / Stockage</a></li>
                <li><a href="#ort">ORT / Transfert</a></li>
                <li><a href="#orr">ORR / Réservation</a></li>
                <li><a href="#ori">ORI / Implémentation</a>
                    <ul>
                        <li><a href="#orio">ORIO / Implémentation des Options</a></li>
                        <li><a href="#oria">ORIA / Implémentation des Actions</a></li>
                    </ul>
                </li>
                <li><a href="#oro">ORO / Oubli</a></li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <?php Displays::docDispTitle(1, 'o', 'Objet'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <p>L'objet est le contenant de toutes les informations.</p>

        <?php Displays::docDispTitle(2, 'oo', 'Object'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L’objet est un agglomérat de données numériques.</p>
        <p>Un objet numérique est identifié par une empreinte ou condensat (hash) numérique de type cryptographique.
            Cette empreinte est à même d'empêcher la modification du contenu d'un objet, intentionnellement ou non (cf
            <a href="#co">CO</a>).</p>

        <?php Displays::docDispTitle(3, 'oon', 'Nommage'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le nommage à l’affichage du nom des objets repose sur plusieurs propriétés :</p>
        <ol>
            <li>nom</li>
            <li>prénom</li>
            <li>surnom</li>
            <li>préfixe</li>
            <li>suffixe</li>
        </ol>
        <p>Ces propriétés sont matérialisées par des liens de type <code>l</code> avec comme objets méta, respectivement
            :</p>
        <ol>
            <li><code>nebule/objet/nom</code></li>
            <li><code>nebule/objet/prenom</code></li>
            <li><code>nebule/objet/surnom</code></li>
            <li><code>nebule/objet/prefix</code></li>
            <li><code>nebule/objet/suffix</code></li>
        </ol>
        <p>Par convention, voici le nommage des objets pour l’affichage :</p>
        <p class="pcenter"><code>prénom préfixe/nom.suffixe surnom</code></p>

        <?php Displays::docDispTitle(3, 'oop', 'Protection'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>La protection d'un objet va permettre de cacher le contenu de l'objet.</p>
        <p>A faire...</p>

        <?php Displays::docDispTitle(3, 'ood', 'Dissimulation'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>La dissimulation des liens d'un objet va permettre de cacher la présence ou l'usage d'un objet.</p>
        <p>A faire...</p>

        <?php Displays::docDispTitle(3, 'ool', 'Liens'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'ooc', 'Création'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L’objet est identifié par un ID égal à la valeur de son empreinte.</p>
        <p>L’indication de la fonction de prise d’empreinte (hashage) est impératif. Elle est défini par le lien :</p>
        <ul>
            <li>Signature du lien</li>
            <li>Identifiant du signataire</li>
            <li>Horodatage</li>
            <li>action : <code>l</code></li>
            <li>source : ID de l’objet</li>
            <li>cible : hash du nom de l’algorithme de prise d’empreinte</li>
            <li>méta : hash(‘nebule/objet/hash’)</li>
        </ul>
        <p>Le lien de définition du type est optionnel. Le type est généralement le type mime reconnu de l’objet.</p>
        <ul>
            <li>Signature du lien</li>
            <li>Identifiant du signataire</li>
            <li>Horodatage</li>
            <li>action : <code>l</code></li>
            <li>source : ID de l'objet</li>
            <li>cible : hash(type de l'objet)</li>
            <li>méta : hash(‘nebule/objet/type’)</li>
        </ul>
        <p>A faire...</p>

        <?php Displays::docDispTitle(3, 'oos', 'Stockage'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Tous les contenus des objets sont stockés dans un même emplacement où sont visibles comme étant dans un même
            emplacement. Cet emplacement ne contient pas les liens (CF <a href="#ls">LS</a>).</p>
        <p>A faire...</p>

        <?php Displays::docDispTitle(4, 'oosa', 'Arborescence'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Sur un système de fichiers, tous les contenus des objets sont stockés dans des fichiers contenus dans le
            dossier <code>pub/o/</code> (<code>o</code> comme objet).</p>
        <p>A faire...</p>

        <?php Displays::docDispTitle(3, 'oot', 'Transfert'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oor', 'Réservation'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Les différents objets réservés pour les besoins de la bibliothèque nebule :</p>
        <ul>
            <?php
            $list = References::RESERVED_OBJECTS_LIST;
            foreach ($list as $item) {
                echo "\t<li><code>$item</code></li>\n";
            }
            unset($list, $item);
            ?>
        </ul>

        <p>Les objets réservés périmés :</p>
        <ul>
            <li>nebule/objet/entite/web</li>
            <li>nebule/objet/entite/web/applications</li>
        </ul>

        <?php Displays::docDispTitle(3, 'ooi', 'Implémentation'); ?>
        <?php Displays::docDispTitle(4, 'ooio', 'Implémentation des Options'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'ooia', 'Implémentation des Actions'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oov', 'Vérification'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L’empreinte d’un objet doit être vérifiée lors de la fin de la réception de l’objet. L’empreinte d’un objet
            devrait être vérifiée avant chaque utilisation de cet objet. Un contenu d'objet avec une empreinte qui ne
            lui correspond pas doit être supprimé. Lors de la suppression d’un objet, les liens de cet objet ne sont pas
            supprimés. La vérification de la validité des liens est complètement indépendante de celle des objets, et
            inversement (CF <a href="#co">CO</a> et <a href="#lv">LV</a>).</p>

        <?php Displays::docDispTitle(3, 'ooo', 'Oubli'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L'oubli volontaire de certains liens et objets n'est encore ni théorisé ni implémenté, mais deviendra
            indispensable lorsque l'espace viendra à manquer (CF <a href="#cn">CN</a>).</p>

        <?php Displays::docDispTitle(2, 'or', 'Référence'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'orn', 'Nommage'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'orp', 'Protection'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'ord', 'Dissimulation'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'orl', 'Liens'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'orc', 'Création'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Liste des liens à générer lors de la création d'une entité.</p>
        <p>A faire...</p>

        <?php Displays::docDispTitle(3, 'ors', 'Stockage'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <?php Displays::docDispTitle(3, 'ort', 'Transfert'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'orr', 'Réservation'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'ori', 'Implémentation'); ?>
        <?php Displays::docDispTitle(4, 'orio', 'Implémentation des Options'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oria', 'Implémentation des Actions'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oro', 'Oubli'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L'oubli volontaire de certains liens et objets n'est encore ni théorisé ni implémenté, mais deviendra
            indispensable lorsque l'espace viendra à manquer (CF <a href="#cn">CN</a>).</p>

        <?php
    }
}



// ========================================================================================
//   402_group.php
//   020250218165718
//   395f09fa56de765101431f3927e733a51a681a077fd5d0393da76e05669a7cf7.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe Group.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant l'ID d'un groupe ou 'new' ;
 *
 * L'ID d'un groupe est forcément un texte en hexadécimal.
 *
 * Si une erreur survient lors de la lecture du groupe ou lors de la création, assigne l'ID 0.
 *
 * Tout objet peut devenir un groupe sans avoir été préalablement marqué comme groupe.
 * Le simple faire de faire un lien pour désigner un objet comme membre du groupe d'un autre objet
 *   suffit à créer le groupe.
 * ------------------------------------------------------------------------------------------
 */
class Group extends Node implements nodeInterface
{
    const DEFAULT_SUFFIX_NEW_GROUP = '006e6562756c652f6f626a65742f67726f757065';
    const DEFAULT_ICON_RID = '6e6562756c652f6f626a65742f67726f757065000000000000000000000000000000.none.272';

    const SESSION_SAVED_VARS = array(
        '_id',
        '_fullName',
        '_cacheProperty',
        '_cacheProperties',
        '_cacheMarkProtected',
        '_idProtected',
        '_idUnprotected',
        '_idProtectedKey',
        '_idUnprotectedKey',
        '_markProtectedChecked',
        '_usedUpdate',
        '_isGroup',
        '_isConversation',
        '_isMarkClosed',
        '_isMarkProtected',
        '_isMarkObfuscated',
        '_referenceObject',
        '_referenceObjectClosed',
        '_referenceObjectProtected',
        '_referenceObjectObfuscated',
    );

    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->getReferenceObject();
        $this->getReferenceObjectClosed();
        $this->getReferenceObjectProtected();
        $this->getReferenceObjectObfuscated();

        if ($this->_isNew)
            $this->_createNewGroup();
        elseif ($this->_id != '0')
            $this->getIsGroup();
    }

    /**
     * Create a new group.
     * @return void
     */
    protected function _createNewGroup(): void
    {
        // Vérifie que l'on puisse créer un groupe et tous ses attributs.
        if ($this->_configurationInstance->getOptionAsBoolean('permitWrite')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            && $this->_configurationInstance->getOptionAsBoolean('permitCreateObject')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            && $this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            && $this->_entitiesInstance->getCurrentEntityIsUnlocked()
        ) {
            // calcul l'ID.
            $this->_id = $this->_nebuleInstance->getCryptoInstance()->hash($this->_nebuleInstance->getCryptoInstance()->getRandom(128, Crypto::RANDOM_PSEUDO)) . self::DEFAULT_SUFFIX_NEW_GROUP;

            // Log
            $this->_metrologyInstance->addLog('Create group ' . $this->_id, Metrology::LOG_LEVEL_DEBUG);

            // Mémorise les données.
            $this->_data = null;
            $this->_haveData = false;

            $signer = $this->_entitiesInstance->getCurrentEntityID();
            $date = date(DATE_ATOM);
            $hashGroup = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE);

            // Création lien de hash.
            $action = 'l';
            $source = $this->_id; // FIXME
            $target = $this->_cryptoInstance->hash($this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm'));
            $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_HASH);
            $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
            $newLink = new BlocLink($this->_nebuleInstance, $link);
            $newLink->signWrite();

            // Création lien de groupe.
            $action = 'l';
            $source = $this->_id; // FIXME
            $target = $hashGroup;
            $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_TYPE, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
            $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
            $newLink = new BlocLink($this->_nebuleInstance, $link);
            $newLink->signWrite();

            // Ecrit l'objet du groupe.
            $this->write();
            $this->_isGroup = true;
        } elseif ($this->_id != '0') {
            $this->_metrologyInstance->addLog('Create group error no authorized', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '8613d472');
            $this->_id = '0';
        } else
            $this->_id = '0';
    }

    /**
     * Extrait l'ID de l'entité.
     * Filtre l'entité et s'assure que c'est une entité.
     *
     * @param string|Node|entity $entity
     * @return string
     */
    protected function _checkExtractEntityID($entity): string
    {
        $entityInstance = null;
        if (is_string($entity)) {
            if (!Node::checkNID($entity, false, false)) {
                $id = '';
            } else {
                $id = $entity;
                $entityInstance = $this->_cacheInstance->newEntity($id);
            }
        } elseif (is_a($entity, 'Node')) {
            $id = $entity->getID();
            if ($id == '0')
                $id = '';
            else
                $entityInstance = $entity;
        } else
            $id = '';

        if ($id == '0')
            $id = '';

        if ($id != ''
            && !$entityInstance->getIsEntity('all')
        )
            $id = '';
        unset($entityInstance);

        return $id;
    }

    /**
     * Filtre l'objet.
     *
     * @param string|Node $object
     * @return string
     */
    private function _checkExtractObjectID($object): string
    {
        if (is_string($object)) {
            if (!Node::checkNID($object))
                $id = '';
            else
                $id = $object;
        } elseif (is_a($object, 'Node')) {
            $id = $object->getID();
            if ($id == '0')
                $id = '';
        } else
            $id = '';

        if ($id == '0')
            $id = '';

        return $id;
    }



    // Désactivation des fonctions de protection et autres.

    /**
     * Vérifie la consistance de l'objet.
     *
     * Retourne toujours true pour une conversation.
     * Il n'y a pas de contenu à vérifier pour un objet de référence.
     *
     * @return boolean
     */
    public function checkConsistency(): bool
    {
        return true;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return boolean
     */
    public function getReloadMarkProtected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return string
     */
    public function getProtectedID(): string
    {
        return '0';
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return string
     */
    public function getUnprotectedID(): string
    {
        return $this->_id;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @param bool $obfuscated
     * @return boolean
     */
    public function setProtected(bool $obfuscated = false): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return boolean
     */
    public function setUnprotected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @param $entity
     * @return boolean
     */
    public function setProtectedTo($entity): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return array
     */
    public function getProtectedTo(): array
    {
        return array();
    }



    /**
     * Ecrit l'objet comme n'étant plus un groupe.
     * TODO détecter le lien dissimulé d'origine, et dissimuler en conséquence.
     *
     * @return boolean
     */
    public function unsetGroup(): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Si déjà marqué, donne le résultat tout de suite.
        if (!$this->_isGroup)
            return true;

        // Création lien de suppression de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'x';
        $source = $this->_id;
        $target = $this->getReferenceObject();
        $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_TYPE);
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);
        $newLink->signWrite();

        $this->_isGroup = false;
        return true;
    }


    /**
     * Variable si l'objet est marqué comme un groupe fermé.
     * @var boolean
     */
    protected bool $_isMarkClosed = false;

    /**
     * Retourne si le groupe est marqué comme fermé.
     * En sélectionnant une entité, fait la recherche de marquage pour cette entité comme contributrice.
     *
     * @param string|entity|Node $entity
     * @return boolean
     */
    public function getMarkClosed(\Nebule\Library\Node|string|entity $entity = ''): bool
    {
        $this->_metrologyInstance->addLog(__METHOD__ . ' ' . $this->_id, Metrology::LOG_LEVEL_FUNCTION, __FUNCTION__, '00000000');

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Liste tous mes liens de définition de groupe fermé.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $this->_id,
            $id,
            $this->getReferenceObjectClosed()
        );

        // Fait un tri par pertinance sociale. Forcé à myself.
        $this->_socialInstance->arraySocialFilter($links, 'myself');

        // Mémorise le r&sultat.
        if ($id == $this->_entitiesInstance->getCurrentEntityID()) {
            if (sizeof($links) != 0)
                $this->_isMarkClosed = true;
            else
                $this->_isMarkClosed = false;
        }

        // Retourne le résultat.
        if (sizeof($links) != 0)
            return true;
        return false;
    }

    /**
     * Ecrit l'objet comme un groupe fermé.
     *
     * @param string|entity|Node $entity
     * @param boolean            $obfuscated
     * @return boolean
     */
    public function setMarkClosed(\Nebule\Library\Node|string|entity $entity = '', bool $obfuscated = false): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated(''))
            $obfuscated = true;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->getMarkClosed())
            return true;

        // Création du lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'l';
        $source = $this->_id;
        $target = $id;
        $meta = $this->getReferenceObjectClosed();
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated)
            $newLink->setObfuscate();

        // Ecrit le lien.
        if ($newLink->write()) {
            if ($id == $this->_entitiesInstance->getCurrentEntityID())
                $this->_isMarkClosed = true;
            return true;
        }
        return false;
    }

    /**
     * Ecrit l'objet comme n'étant pas un groupe fermé.
     *
     * TODO détecter le lien dissimulé d'origine, et dissimuler en conséquence.
     * @param string|entity|Node $entity
     * @return boolean
     */
    public function unsetMarkClosed(\Nebule\Library\Node|string|entity $entity = ''): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Si déjà marqué, donne le résultat tout de suite.
        if (!$this->getMarkClosed())
            return true;

        // Création lien de suppression de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'x';
        $source = $this->_id;
        $target = $id;
        $meta = $this->getReferenceObjectClosed();
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);

        if ($newLink->signWrite()) {
            if ($id == $this->_entitiesInstance->getCurrentEntityID())
                $this->_isMarkClosed = false;
            return true;
        }
        return false;
    }


    /**
     * Variable si l'objet est marqué comme un groupe protégé.
     * @var boolean
     */
    protected bool $_isMarkProtected = false;

    /**
     * Retourne si le groupe est marqué comme protégé.
     * En sélectionnant une entité, fait la recherche de marquage pour cette entité comme contributrice.
     *
     * @param string|entity|Node $entity
     * @return boolean
     */
    public function getMarkProtected(\Nebule\Library\Node|string|entity $entity = ''): bool
    {
        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Liste tous mes liens de définition de groupe protégé.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $this->_id,
            $id,
            $this->getReferenceObjectProtected()
        );

        // Fait un tri par pertinance sociale. Forcé à myself.
        $this->_socialInstance->arraySocialFilter($links, 'myself');

        // Mémorise le r&sultat.
        if ($id == $this->_entitiesInstance->getCurrentEntityID()) {
            if (sizeof($links) != 0)
                $this->_isMarkProtected = true;
            else
                $this->_isMarkProtected = false;
        }

        // Retourne le résultat.
        if (sizeof($links) != 0)
            return true;
        return false;
    }

    /**
     * Ecrit l'objet comme un groupe protégé.
     *
     * @param string|entity|Node $entity
     * @param boolean            $obfuscated
     * @return boolean
     */
    public function setMarkProtected(\Nebule\Library\Node|string|entity $entity = '', bool $obfuscated = false): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated(''))
            $obfuscated = true;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->getMarkProtected())
            return true;

        // Création du lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'l';
        $source = $this->_id;
        $target = $id;
        $meta = $this->getReferenceObjectProtected();
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated)
            $newLink->setObfuscate();

        // Ecrit le lien.
        if ($newLink->write()) {
            if ($id == $this->_entitiesInstance->getCurrentEntityID())
                $this->_isMarkProtected = true;
            return true;
        }
        return false;
    }

    /**
     * Ecrit l'objet comme n'étant pas un groupe protégé.
     *
     * TODO détecter le lien dissimulé d'origine, et dissimuler en conséquence.
     * @param string|entity|Node $entity
     * @return boolean
     */
    public function unsetMarkProtected(\Nebule\Library\Node|string|entity $entity = ''): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Si déjà marqué, donne le résultat tout de suite.
        if (!$this->getMarkProtected())
            return true;

        // Création lien de suppression de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'x';
        $source = $this->_id;
        $target = $id;
        $meta = $this->getReferenceObjectProtected();
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);

        if ($newLink->signWrite()) {
            if ($id == $this->_entitiesInstance->getCurrentEntityID())
                $this->_isMarkProtected = false;
            return true;
        }
        return false;
    }


    /**
     * Variable si l'objet est marqué comme un groupe dissimulé.
     * @var boolean
     */
    protected bool $_isMarkObfuscated = false;

    /**
     * Retourne si le groupe est marqué comme dissimulé.
     * En sélectionnant une entité, fait la recherche de marquage pour cette entité comme contributrice.
     *
     * @param string|entity|Node $entity
     * @return boolean
     */
    public function getMarkObfuscated(\Nebule\Library\Node|string|entity $entity = ''): bool
    {
        // Désactivée si option à false.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
            return false;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Liste tous mes liens de définition de groupe dissimulé.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $this->_id,
            $id,
            $this->getReferenceObjectObfuscated()
        );

        // Fait un tri par pertinance sociale. Forcé à myself.
        $this->_socialInstance->arraySocialFilter($links, 'myself');

        // Mémorise le r&sultat.
        if ($id == $this->_entitiesInstance->getCurrentEntityID()) {
            if (sizeof($links) != 0)
                $this->_isMarkObfuscated = true;
            else
                $this->_isMarkObfuscated = false;
        }

        // Retourne le résultat.
        if (sizeof($links) != 0)
            return true;
        return false;
    }

    /**
     * Ecrit l'objet comme un groupe dissimulé.
     *
     * @param string|entity|Node $entity
     * @param boolean            $obfuscated
     * @return boolean
     */
    public function setMarkObfuscated(\Nebule\Library\Node|string|entity $entity = '', bool $obfuscated = false): bool
    {
        // Désactivée si option à false.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink')) {
            return false;
        }

        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated(''))
            $obfuscated = true;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Si déjà marqué, donne le résultat tout de suite.
        if ($this->getMarkObfuscated())
            return true;

        // Création du lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'l';
        $source = $this->_id;
        $target = $id;
        $meta = $this->getReferenceObjectObfuscated();
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated)
            $newLink->setObfuscate();

        // Ecrit le lien.
        if ($newLink->write()) {
            if ($id == $this->_entitiesInstance->getCurrentEntityID())
                $this->_isMarkObfuscated = true;
            return true;
        }
        return false;
    }

    /**
     * Ecrit l'objet comme n'étant pas un groupe dissimulé.
     *
     * TODO détecter le lien dissimulé d'origine, et dissimuler en conséquence.
     * @param string|entity|Node $entity
     * @return boolean
     */
    public function unsetMarkObfuscated(\Nebule\Library\Node|string|entity $entity = ''): bool
    {
        // Désactivée si option à false.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
            return false;

        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        if ($id == '')
            $id = $this->_entitiesInstance->getCurrentEntityID();

        // Si déjà marqué, donne le résultat tout de suite.
        if (!$this->getMarkObfuscated())
            return true;

        // Création lien de suppression de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'x';
        $source = $this->_id;
        $target = $id;
        $meta = $this->getReferenceObjectObfuscated();
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);

        if ($newLink->signWrite()) {
            if ($id == $this->_entitiesInstance->getCurrentEntityID())
                $this->_isMarkObfuscated = false;
            return true;
        }
        return false;
    }


    /**
     * Retourne si l'objet est membre du groupe.
     *
     * @param string|Node $object
     * @param string      $socialClass
     * @return boolean
     */
    public function getIsMember(\Nebule\Library\Node|string $object, string $socialClass = ''): bool
    {
        // Extrait l'ID de l'objet.
        $id = $this->_checkExtractObjectID($object);

        // Vérifie que c'est bien un objet.
        if ($id == '')
            return false;

        // Liste tous les liens de définition des membres du groupe.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $this->_id,
            $id,
            $this->_id
        );

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        if (sizeof($links) != 0)
            return true;
        return false;
    }

    /**
     * Ajoute un objet comme membre dans le groupe.
     *
     * @param string|Node $object
     * @param boolean     $obfuscated
     * @return boolean
     */
    public function setMember(\Nebule\Library\Node|string $object, bool $obfuscated = false): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated(''))
            $obfuscated = true;

        // Extrait l'ID de l'objet.
        $id = $this->_checkExtractObjectID($object);

        // Vérifie que c'est bien un objet.
        if ($id == '')
            return false;

        // Création lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'l';
        $source = $this->_id;
        $target = $id;
        $meta = $this->_id;
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated)
            $newLink->setObfuscate();

        // Ecrit le lien.
        return $newLink->write();
    }

    /**
     * Retire un membre du groupe.
     *
     * TODo détecter le lien dissimulé d'origine, et dissimuler en conséquence.
     * TODO retirer la dissimulation déjà faite dans le code.
     * @param string|Node $object
     * @param boolean     $obfuscated
     * @return boolean
     */
    public function unsetMember(\Nebule\Library\Node|string $object = '', bool $obfuscated = false): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated(''))
            $obfuscated = true;

        // Extrait l'ID de l'objet.
        $id = $this->_checkExtractObjectID($object);

        // Vérifie que c'est bien un objet.
        if ($id == '')
            return false;

        // Création lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'x';
        $source = $this->_id;
        $target = $id;
        $meta = $this->_id;
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated)
            $newLink->setObfuscate();

        // Ecrit le lien.
        return $newLink->write();
    }


    /**
     * Extrait la liste des liens définissant les objets du groupe.
     * Le calcul social se fait par rapport à la classe sociale demandée,
     *   et donc utilise l'entité de _nebuleInstance ou de _applicationInstance en fonction.
     *
     * @param string $socialClass
     * @param array  $socialListID
     * @return array:Link
     */
    public function getListMembersLinks(string $socialClass = '', array $socialListID = array()): array
    {
        // Liste tous les liens des membres de la conversation.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $this->_id,
            '',
            $this->_id
        );

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->setList($socialListID);
        $this->_socialInstance->arraySocialFilter($links, $socialClass);
        $this->_socialInstance->unsetList();

        return $links;
    }

    /**
     * Extrait la liste des ID des objets du groupe.
     *
     * @param string $socialClass
     * @param array $socialListID
     * @return array:string
     */
    public function getListMembersID(string $socialClass = '', array $socialListID = array()): array
    {
        // Extrait les liens des groupes.
        $links = $this->getListMembersLinks($socialClass, $socialListID);

        // Extraction des ID cibles.
        $list = array();
        foreach ($links as $link)
            $list[$link->getParsed()['bl/rl/nid2']] = $link->getParsed()['bl/rl/nid2'];

        return $list;
    }

    /**
     * Retourne le nombre d'objets dans le groupe.
     *
     * @param string $socialClass
     * @param array  $socialListID
     * @return float
     */
    public function getCountMembers(string $socialClass = '', array $socialListID = array()): float
    {
        return sizeof($this->getListMembersLinks($socialClass, $socialListID));
    }


    /**
     * Retourne si l'entité est à l'écoute du groupe.
     *
     * @param string|Node $entity
     * @param string      $socialClass
     * @param array       $socialListID
     * @return boolean
     */
    public function getIsFollower(\Nebule\Library\Node|string $entity, string $socialClass = '', array $socialListID = array()): bool
    {
        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        // Vérifie que c'est bien une entité.
        if ($id == '')
            return false;

        // Liste tous les liens de définition des entités à l'écoutes du groupe.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $id,
            $this->_id,
            $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI)
        );

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->setList($socialListID);
        $this->_socialInstance->arraySocialFilter($links, $socialClass);
        $this->_socialInstance->unsetList();

        if (sizeof($links) != 0)
            return true;
        return false;
    }

    /**
     * Ajoute une entité comme à l'écoute du groupe.
     *
     * @param string  $entity
     * @param boolean $obfuscated
     * @return boolean
     */
    public function setFollower(string $entity, bool $obfuscated = false): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated(''))
            $obfuscated = true;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        // Vérifie que c'est bien une entité.
        if ($id == '')
            return false;

        // Création lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'l';
        $source = $id;
        $target = $this->_id;
        $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI);
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new BlocLink($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated)
            $newLink->setObfuscate();

        // Ecrit le lien.
        return $newLink->write();
    }

    /**
     * Retire une entité à l'écoute du groupe.
     *
     * TODO détecter le lien dissimulé d'origine, et dissimuler en conséquence.
     * TODO retirer la dissimulation déjà faite dans le code.
     * @param string  $entity
     * @param boolean $obfuscated
     * @return boolean
     */
    public function unsetFollower(string $entity = '', bool $obfuscated = false): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteGroup')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        )
            return false;

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated(''))
            $obfuscated = true;

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        // Vérifie que c'est bien une entité.
        if ($id == '')
            return false;

        // Création lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'x';
        $source = $id;
        $target = $this->_id;
        $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI);
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated)
            $newLink->setObfuscate();

        // Ecrit le lien.
        return $newLink->write();
    }


    /**
     * Extrait la liste des liens définissant les entités à l'écoute du groupe.
     * On ne peut pas voir un groupe comme fermé si on regarde pour une autre entité.
     * La pertinence sociale n'est pas utilisée pour un groupe fermé.
     *
     * @param string $socialClass
     * @param array  $socialListID
     * @return array:Link
     */
    public function getListFollowersLinks(string $socialClass = '', array $socialListID = array()): array
    {
        return $this->_getListFollowersLinks($this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI), $socialClass, $socialListID);
    }

    /**
     * Extrait la liste des liens définissant les entités à l'écoute d'un objet et définit par une référence de suivi.
     * L'objet définit par une référence de suivi doit se comporter comme un groupe.
     *
     * @param string $reference
     * @param string $socialClass
     * @param array  $socialListID
     * @return array:Link
     */
    protected function _getListFollowersLinks(string $reference, string $socialClass = '', array $socialListID = array()): array
    {
        // Vérifie la référence.
        if (!Node::checkNID($reference))
            $reference = $this->_cryptoInstance->hash($reference);

        // Liste tous les liens des entités à l'écoutes du groupe.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            '',
            $this->_id,
            $reference
        );

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->setList($socialListID);
        $this->_socialInstance->arraySocialFilter($links, $socialClass);
        $this->_socialInstance->unsetList();

        return $links;
    }

    /**
     * Extrait la liste des ID des entités à l'écoute du groupe.
     *
     * @param string $socialClass
     * @param array  $socialListID
     * @return array:string
     */
    public function getListFollowersID(string $socialClass = '', array $socialListID = array()): array
    {
        // Extrait les liens des groupes.
        $links = $this->_getListFollowersLinks($this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI), $socialClass, $socialListID);

        // Extraction des ID cibles.
        $list = array();
        foreach ($links as $link)
            $list[$link->getParsed()['bl/rl/nid1']] = $link->getParsed()['bl/rl/nid1'];

        return $list;
    }

    /**
     * Retourne le nombre d'entités à l'écoute du groupe.
     *
     * @param string $socialClass
     * @param array  $socialListID
     * @return float
     */
    public function getCountFollowers(string $socialClass = '', array $socialListID = array()): float
    {
        return sizeof($this->_getListFollowersLinks($this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI), $socialClass, $socialListID));
    }

    /**
     * Retourne la liste des entités qui ont ajouté l'entité cité comme suiveuse du groupe.
     *
     * @param string $entity
     * @param string $socialClass
     * @param array  $socialListID
     * @return array:string
     */
    public function getListFollowerAddedByID(string $entity, string $socialClass = 'all', array $socialListID = array()): array
    {
        // Extrait les liens des groupes.
        $links = $this->_getListFollowersLinks($this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI), $socialClass, $socialListID);

        // Extraction des ID cibles.
        $list = array();
        foreach ($links as $link) {
            if ($link->getParsed()['bl/rl/nid1'] == $entity)
                $list[$link->getParsed()['bs/rs1/eid']] = $link->getParsed()['bs/rs1/eid'];
        }

        return $list;
    }


    /**
     * ID de référence de l'objet.
     *
     * @var string
     */
    private string $_referenceObject = '';

    /**
     * Calcule et retourne la référence de l'objet.
     *
     * @return string
     */
    public function getReferenceObject(): string
    {
        if ($this->_referenceObject == '')
            $this->_referenceObject = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
        return $this->_referenceObject;
    }

    /**
     * ID de référence de l'objet de fermeture.
     *
     * @var string
     */
    private string $_referenceObjectClosed = '';

    /**
     * Calcule et retourne la référence de l'objet de fermeture.
     *
     * @return string
     */
    public function getReferenceObjectClosed(): string
    {
        if ($this->_referenceObjectClosed == '')
            $this->_referenceObjectClosed = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_FERME, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
        return $this->_referenceObjectClosed;
    }

    /**
     * ID de référence de l'objet de protection des membres.
     *
     * @var string
     */
    private string $_referenceObjectProtected = '';

    /**
     * Calcule et retourne la référence de l'objet de protection des membres.
     *
     * @return string
     */
    public function getReferenceObjectProtected(): string
    {
        if ($this->_referenceObjectProtected == '')
            $this->_referenceObjectProtected = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_PROTEGE, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
        return $this->_referenceObjectProtected;
    }

    /**
     * ID de référence de l'objet de dissimulation des membres.
     *
     * @var string
     */
    private string $_referenceObjectObfuscated = '';

    /**
     * Calcule et retourne la référence de l'objet de dissimulation des membres.
     *
     * @return string
     */
    public function getReferenceObjectObfuscated(): string
    {
        if ($this->_referenceObjectObfuscated == '')
            $this->_referenceObjectObfuscated = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_GROUPE_DISSIMULE, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
        return $this->_referenceObjectObfuscated;
    }


    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#og">OG / Groupe</a>
            <ul>
                <li><a href="#ogo">OGO / Objet</a></li>
                <li><a href="#ogn">OGN / Nommage</a></li>
                <li><a href="#ogp">OGP / Protection</a></li>
                <li><a href="#ogd">OGD / Dissimulation</a></li>
                <li><a href="#ogf">OGF / Fermeture</a></li>
                <li><a href="#ogpm">OGPM / Protection des membres</a></li>
                <li><a href="#ogdm">OGDM / Dissimulation des membres</a></li>
                <li><a href="#ogl">OGL / Liens</a></li>
                <li><a href="#ogc">OGC / Création</a></li>
                <li><a href="#ogs">OGS / Stockage</a></li>
                <li><a href="#ogt">OGT / Transfert</a></li>
                <li><a href="#ogr">OGR / Réservation</a></li>
                <li><a href="#ogio">OGIO / Implémentation des Options</a></li>
                <li><a href="#ogia">OGIA / Implémentation des Actions</a></li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h2 id="og">OG / Groupe</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <p>Le groupe est un objet définit comme tel, c’est à dire qu’il doit avoir un type mime <code>nebule/objet/groupe</code>.
        </p>
        <p>Fondamentalement, le groupe est un ensemble de plusieurs objets. C’est à dire, c’est le regroupement d’au
            moins deux objets. Le lien peut donc à ce titre être vu comme la matérialisation d’un groupe. Mais la
            définition du groupe doit être plus restrictive afin que celui-ci soit utilisable. Pour cela, dans <em>nebule</em>,
            le groupe n’est reconnu comme tel uniquement si il est marqué de son type mime. Il est cependant possible
            d’instancier explicitement un objet comme groupe et de l’utiliser comme tel en cas de besoin.</p>
        <p>Le groupe va permettre de regrouper, et donc d’associer et de retrouver, des objets. L’objet du groupe va
            avoir des liens vers d’autres objets afin de les définir comme membres du groupe.</p>
        <p>Un groupe peut avoir des liens de membres vers des objets définis aussi comme groupes. Ces objets peuvent
            être vus comme des sous-groupes. La bibliothèque <em>nebule</em> ne prend en compte qu’un seul niveau de
            groupe, c’est à dire que les sous-groupes sont gérés simplement comme des objets.</p>

        <h3 id="ogo">OGO / Objet</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L’objet du groupe peut être de deux natures.</p>
        <p>Soit c’est un objet existant qui est en plus définit comme un groupe. L’objet peut avoir un contenu et a
            sûrement d’autres types mime propres. Dans ce cas l’identifiant de groupe est l’identifiant de l’objet
            utilisé.</p>
        <p>Soit c’est un objet dit virtuel qui n’a pas et n’aura jamais de contenu. Cela n’empêche pas qu’il puisse
            avoir d’autres types mime. Dans ce cas l’identifiant de groupe a une forme commune aux objets virtuels.</p>
        <p>La création d’un objet virtuel comme groupe se fait en créant pour identifiant la concaténation d’un hash
            (<em>sha256</em>) d’une valeur aléatoire de 128bits et de la chaîne <code>006e6562756c652f6f626a65742f67726f757065</code>.
            Soit un identifiant complet de la taille de 104 caractères.</p>

        <h3 id="ogn">OGN / Nommage</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le nommage à l’affichage du nom des groupes repose sur une seule propriété :</p>
        <ol>
            <li>nom</li>
        </ol>
        <p>Cette propriété est matérialisée par un lien de type <code>l</code> avec comme objets méta :</p>
        <ol>
            <li><code>nebule/objet/nom</code></li>
        </ol>
        <p>Par convention, voici le nommage des groupes :</p>
        <ul>
            <li><code>nom</code></li>
        </ul>

        <h3 id="ogp">OGP / Protection</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>En tant que tel le groupe ne nécessite pas de protection puisque soit l’objet du groupe n’a pas de contenu
            soit on n’utilise pas son contenu directement.</p>
        <p>La gestion de la protection est désactivée dans une instance de groupe.</p>

        <h3 id="ogd">OGD / Dissimulation</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le groupe peut en tant que tel être dissimulé, c’est à dire que l’on dissimule l’existence du groupe, donc sa
            création.</p>
        <p>La dissimulation devrait se faire lors de la création du groupe.</p>
        <p>L’annulation de la dissimulation d’un groupe revient à révéler le lien de création du groupe.</p>
        <p>La dissimulation peut se (re)faire après la création du groupe mais son efficacité est incertaine si les
            liens de création ont déjà été diffusés. En cas de dissimulation à posteriori, il faut générer un lien de
            suppression du groupe puis générer un nouveau lien dissimulé de création du groupe à une date postérieure au
            lien de suppression.</p>

        <h3 id="ogf">OGF / Fermeture</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le groupe va contenir un certain nombre de membres ajouter par différentes entités. Il est possible de
            limiter le nombre des membres à utiliser dans un groupe en restreignant artificiellement les entités
            contributrices du groupe. Ainsi on marque le groupe comme fermé et on filtre sur les membres uniquement
            ajoutés par des entités définies.</p>
        <p>Dans nebule, l’objet réservé <code>nebule/objet/groupe/ferme</code> est dédié à la gestion des groupes
            fermés. Un groupe est considéré fermé quand on a l’objet réservé en champs méta, l’entité en cours en champs
            cible et l’ID du groupe en champs source. Si au lieu d’utiliser l’entité en cours pour le champs cible on
            utilise une autre entité, cela revient à prendre aussi en compte ses liens dans le groupe fermé. Dans ce cas
            c’est une entité contributrice.</p>
        <p>C’est uniquement un affichage du groupe que l’on a et non la suppression de membres du groupe.</p>
        <p>Lorsque l’on a marqué un groupe comme fermé, on doit explicitement ajouter des entités que l’on veut voir
            contribuer.</p>
        <p>Il est possible indéfiniment de fermer et ouvrir un groupe.</p>
        <p>Il est possible de fermer un groupe qui ne nous appartient pas afin par exemple de le rendre plus
            lisible.</p>
        <p>Lorsque l’on a marqué un groupe comme fermé, on peut voir la liste des entités explicitement que l’on veut
            voir contribuer. On peut aussi voir les entités que les autres entités veulent voir contribuer et décider ou
            non de les ajouter.</p>
        <p>Lorsqu’un groupe est marqué comme fermé, l’interface de visualisation du groupe peut permettre de le
            visualiser temporairement comme un groupe ouvert.</p>
        <p>Le traitement des liens de fermeture d’un groupe doit être fait exclusivement avec le traitement social <em>self</em>.
        </p>

        <h4 id="ogpm">OGPM / Protection des membres</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le groupe va contenir un certain nombre de membres ajouter par différentes entités. Il est possible de
            limiter la visibilité du contenu des membres utilisés dans un groupe en restreignant artificiellement les
            entités destinataires qui pourront les consulter.</p>
        <p>Dans nebule, l’objet réservé <code>nebule/objet/groupe/protege</code> est dédié à la gestion des groupes
            protégés. Un groupe est considéré protégé quand on a l’objet réservé en champs méta, l’entité en cours en
            champs cible et l’ID du groupe en champs source. Si au lieu d’utiliser l’entité en cours pour le champs
            cible on utilise une autre entité, cela revient à partager aussi les objets protégés créés pour ce groupe.
            Cela ne repartage pas la protection des objets déjà protégés.</p>
        <p>Dans un groupe marqué protégé, tous les nouveaux membres ajoutés au groupe ont leur contenu protégé. Ce n’est
            valable que pour l’entité en cours et éventuellement celles qui lui font confiance.</p>
        <p>Lorsque l’on a marqué un groupe comme protégé, on doit explicitement ajouter des entités avec qui on veut
            partager les contenus.</p>
        <p>Il est possible indéfiniment de protéger et déprotéger un groupe.</p>
        <p>Il est possible de protéger un groupe qui ne nous appartient afin de masquer le contenu des membres que l’on
            y ajoute.</p>
        <p>Lorsque l’on a marqué un groupe comme protégé, on peut voir la liste des entités explicitement a qui on veut
            partager les contenus. On peut aussi voir les entités a qui les autres entités veulent partager les contenus
            et décider ou non de les ajouter.</p>
        <p>Le traitement des liens de protection d’un groupe doit être fait exclusivement avec le traitement social <em>self</em>.
        </p>

        <h4 id="ogdm">OGDM / Dissimulation des membres</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le groupe va contenir un certain nombre de membres ajouter par différentes entités. Il est possible de
            limiter la visibilité de l’appartenance des membres utilisés dans un groupe en restreignant artificiellement
            les entités destinataires qui pourront les voir.</p>
        <p>Dans nebule, l’objet réservé <code>nebule/objet/groupe/dissimule</code> est dédié à la gestion des groupes
            dissimulés. Un groupe est considéré dissimulé quand on a l’objet réservé en champs méta, l’entité en cours
            en champs cible et l’ID du groupe en champs source. Si au lieu d’utiliser l’entité en cours pour le champs
            cible on utilise une autre entité, cela revient à partager aussi les objets dissimulés créés pour ce groupe.
            Cela ne repartage pas la dissimulation des objets déjà dissimulés.</p>
        <p>Dans un groupe marqué dissimulé, tous les nouveaux membres ajoutés au groupe sont dissimulés. Ce n’est
            valable que pour l’entité en cours et éventuellement celles qui lui font confiance.</p>
        <p>Lorsque l’on a marqué un groupe comme dissimulé, on doit explicitement ajouter des entités avec qui on veut
            partager les membres du groupe.</p>
        <p>Il est possible indéfiniment de dissimuler et dé-dissimuler un groupe.</p>
        <p>Il est possible de dissimuler un groupe qui ne nous appartient afin de masquer le contenu des membres que
            l’on y ajoute.</p>
        <p>Lorsque l’on a marqué un groupe comme dissimulé, on peut voir la liste des entités explicitement a qui on
            veut partager les contenus. On peut aussi voir les entités a qui les autres entités veulent partager les
            contenus et décider ou non de les ajouter.</p>
        <p>Le traitement des liens de dissimulation d’un groupe doit être fait exclusivement avec le traitement social
            <em>self</em>.</p>

        <h3 id="ogl">OGL / Liens</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Une entité doit être déverrouillée pour la création de liens.</p>
        <ul>
            <li>Le lien de définition du groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : hash(‘nebule/objet/groupe’)</li>
                    <li>méta : hash(‘nebule/objet/type’)</li>
                </ul>
            </li>
            <li>Le lien de suppression d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : hash(‘nebule/objet/groupe’)</li>
                    <li>méta : hash(‘nebule/objet/type’)</li>
                </ul>
            </li>
            <li>Le lien de suivi du groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de l'entité, par défaut l’entité signataire</li>
                    <li>cible : ID du groupe</li>
                    <li>méta : hash(‘nebule/objet/groupe/suivi’)</li>
                </ul>
            </li>
            <li>Le lien de suppression de suivi du groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID de l'entité, par défaut l’entité signataire</li>
                    <li>cible : ID du groupe</li>
                    <li>méta : hash(‘nebule/objet/groupe/suivi’)</li>
                </ul>
            </li>
            <li>Le lien de dissimulation d’un groupe est le lien de définition caché dans une lien de type
                <code>c</code>.
            </li>
            <li>Le lien de rattachement d’un membre du groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’objet</li>
                    <li>méta : ID du groupe</li>
                </ul>
            </li>
            <li>Le lien de suppression de rattachement d’un membre du groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’objet</li>
                    <li>méta : ID du groupe</li>
                </ul>
            </li>
            <li>Le lien de fermeture d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/ferme’)</li>
                </ul>
            </li>
            <li>Le lien de suppression de fermeture d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/ferme’)</li>
                </ul>
            </li>
            <li>Le lien de protection des membres d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/protege’)</li>
                </ul>
            </li>
            <li>Le lien de suppression de protection des membres d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/protege’)</li>
                </ul>
            </li>
            <li>Le lien de dissimulation des membres d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/dissimule’)</li>
                </ul>
            </li>
            <li>Le lien de suppression de dissimulation des membres d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/dissimule’)</li>
                </ul>
            </li>
        </ul>

        <h3 id="ogc">OGC / Création</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Liste des liens à générer lors de la création d'un groupe :</p>
        <ul>
            <li>Le lien de définition du groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : hash(‘nebule/objet/groupe’)</li>
                    <li>méta : hash(‘nebule/objet/type’)</li>
                </ul>
            </li>
            <li>Le lien de nommage du groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : hash(nom du groupe)</li>
                    <li>méta : hash(‘nebule/objet/nom’)</li>
                </ul>
            </li>
            <li>Le lien de suivi du groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de l'entité, par défaut l’entité signataire</li>
                    <li>cible : ID du groupe</li>
                    <li>méta : hash(‘nebule/objet/groupe/suivi’)</li>
                </ul>
            </li>
        </ul>
        <p>On peut aussi au besoin ajouter ces liens :</p>
        <ul>
            <li>Le lien de fermeture d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/ferme’)</li>
                </ul>
            </li>
            <li>Le lien de protection des membres d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/protege’)</li>
                </ul>
            </li>
            <li>Le lien de dissimulation des membres d’un groupe :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID du groupe</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/groupe/dissimule’)</li>
                </ul>
            </li>
        </ul>

        <h3 id="ogs">OGS / Stockage</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <h3 id="ogt">OGT / Transfert</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="ogr">OGR / Réservation</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Les objets réservés spécifiquement pour les groupes :</p>
        <ul>
            <li>nebule/objet/groupe</li>
            <li>nebule/objet/groupe/ferme</li>
            <li>nebule/objet/groupe/protege</li>
            <li>nebule/objet/groupe/dissimule</li>
        </ul>

        <h4 id="ogio">OGIO / Implémentation des Options</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Les options spécifiques aux groupes :</p>
        <ul>
            <li><code>permitWriteGroup</code> : permet toute écriture de groupes.</li>
        </ul>
        <p>Les options qui ont une influence sur les groupes :</p>
        <ul>
            <li><code>permitWrite</code> : permet toute écriture d’objets et de liens ;</li>
            <li><code>permitWriteObject</code> : permet toute écriture d’objets ;</li>
            <li><code>permitCreateObject</code> : permet la création locale d’objets ;</li>
            <li><code>permitWriteLink</code> : permet toute écriture de liens ;</li>
            <li><code>permitCreateLink</code> : permet la création locale de liens.</li>
        </ul>
        <p>Il est nécessaire à la création d’un groupe de pouvoir écrire des objets comme le nom du groupe, même si
            l’objet du groupe ne sera pas créé.</p>

        <h4 id="ogia">OGIA / Implémentation des Actions</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Dans les actions, on retrouve les chaînes :</p>
        <ul>
            <li><code>creagrp</code> : Crée un groupe.</li>
            <li><code>creagrpnam</code> : Nomme le groupe à créer.</li>
            <li><code>creagrpcld</code> : Marque fermé le groupe à créer.</li>
            <li><code>creagrpobf</code> : Dissimule les liens du groupe à créer.</li>
            <li><code>actdelgrp</code> : Supprime un groupe.</li>
            <li><code>actaddtogrp</code> : Ajoute l’objet courant membre à groupe.</li>
            <li><code>actremtogrp</code> : Retire l’objet courant membre d’un groupe.</li>
            <li><code>actadditogrp</code> : Ajoute un objet membre au groupe courant.</li>
            <li><code>actremitogrp</code> : Retire un objet membre du groupe courant.</li>
        </ul>

        <?php
    }
}



// ========================================================================================
//   403_entity.php
//   020250218163049
//   052875a868981dcad297c05a9514946f5fd730f863e9b01894d068c4478ebda6.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe Entity.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant l'ID d'une entité ou 'new' ;
 *
 * L'ID d'une entité est forcément un texte en hexadécimal.
 *
 * Si une erreur survient lors de la lecture de l'entité ou lors de la création, assigne l'ID 0.
 * ------------------------------------------------------------------------------------------
 */
class Entity extends Node implements nodeInterface
{
    const ENTITY_MAX_SIZE = 16000;
    const ENTITY_PASSWORD_SALT_SIZE = 128;
    const ENTITY_TYPE = 'application/x-pem-file';
    const ENTITY_PUBLIC_HEADER = '-----BEGIN PUBLIC KEY-----';
    const ENTITY_PRIVATE_HEADER = '-----BEGIN ENCRYPTED PRIVATE KEY-----';
    const DEFAULT_ICON_RID = '6e6562756c652f6f626a65742f656e74697465000000000000000000000000000000.none.272';

    const SESSION_SAVED_VARS = array(
        '_id',
        '_fullName',
        '_cacheProperty',
        '_cacheProperties',
        '_cacheMarkProtected',
        '_idProtected',
        '_idUnprotected',
        '_idProtectedKey',
        '_idUnprotectedKey',
        '_markProtectedChecked',
        '_code',
        '_haveCode',
        '_usedUpdate',
        '_publicKey',
        '_privateKeyID',
        '_privateKey',
        '_newPrivateKey',
        '_privateKeyPassword',
        '_privateKeyPasswordSalt',
        '_isSetPrivateKeyPassword',
        '_faceCache',
    );

    private string $_publicKey = '';
    private string $_privateKeyID = '0';
    private string $_privateKey = '';
    private bool $_newPrivateKey = false;
    private string $_privateKeyPassword = '';
    private string $_privateKeyPasswordSalt = '';
    private bool $_isSetPrivateKeyPassword = false;
    private array $_faceCache = array();
    private bool $_cacheCurrentEntityUnlocked = false;

    /**
     * Specific part of constructor for an entity.
     * @return void
     */
    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (is_a($this->_entitiesInstance, 'Nebule\Library\Node'))
            $this->_cacheCurrentEntityUnlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();
        if ($this->_isNew)
            $this->_createNewEntity();
        elseif ($this->_id != '0')
            $this->_loadEntity($this->_id);
    }

    /**
     * Chargement d'une entité existante.
     *
     * @param $id string
     * @return void
     */
    private function _loadEntity(string $id): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions id=' . $id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_ioInstance->checkObjectPresent($id)
            || !$this->_ioInstance->checkLinkPresent($id)
        ) {
            $this->_id = '0';
            return;
        }

        $this->_metrologyInstance->addLog('Load entity ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '2f5d9e5a');

        // Trouve la clé publique.
        $this->_findPublicKey();
    }

    /**
     * Création d'une nouvelle entité.
     * La création est légèrement différente de la création d'un objet parce que les liens de l'entité ne peuvent pas encore être vérifiés.
     * Une entité par nature ne peut pas être dissimulée.
     *
     * @return void
     */
    private function _createNewEntity(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Vérifie que l'on puisse créer une entité.
        if ($this->_configurationInstance->getOptionAsBoolean('permitWrite')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteEntity')
            && ($this->_entitiesInstance->getCurrentEntityIsUnlocked()
                || $this->_configurationInstance->getOptionAsBoolean('permitPublicCreateEntity')
            )
        ) {
            $this->_metrologyInstance->addLog('Create entity ' . $this->_configurationInstance->getOptionAsString('cryptoAsymmetricAlgorithm'), Metrology::LOG_LEVEL_NORMAL, __METHOD__, '7344db13');

            // Génère une biclé cryptographique.
            $this->_privateKeyPassword = $this->_cryptoInstance->getRandom(32, Crypto::RANDOM_STRONG);
            $newPkey = $this->_cryptoInstance->newAsymmetricKeys($this->_privateKeyPassword);
            if (sizeof($newPkey) != 0) {
                // Extraction des infos.
                $this->_publicKey = $newPkey['public'];
                $this->_id = $this->_nebuleInstance->getNIDfromData($this->_publicKey);
                $this->_metrologyInstance->addLog('Generated entity ' . $this->_id, Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'b5dacb0d');
                $this->_privateKeyPasswordSalt = '';
                $this->_privateKey = $newPkey['private'];
                $this->_privateKeyID = $this->_nebuleInstance->getNIDfromData($this->_privateKey);
                $this->_isSetPrivateKeyPassword = true;
                $this->_newPrivateKey = true;

                // Écriture de la clé publique.
                $this->write();
                // La clé privée n'est pas écrite. Son mot de passe doit être changé avant son écriture.

                // Définition de la date.
                $date = date(DATE_ATOM);

                // Création lien 1.
                $source = $this->_id;
                $target = $this->_nebuleInstance->getNIDfromData($this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm'));
                $meta = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_HASH);
                $link = '_' . $this->_id . '_' . $date . '_l_' . $source . '_' . $target . '_' . $meta;
                $this->_createNewEntityWriteLink($link, $source, $target, $meta);

                // Création lien 2.
                $source = $this->_id;
                $target = $this->_nebuleInstance->getNIDfromData(self::ENTITY_TYPE);
                $meta = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_TYPE);
                $link = '_' . $this->_id . '_' . $date . '_l_' . $source . '_' . $target . '_' . $meta;
                $this->_createNewEntityWriteLink($link, $source, $target, $meta);

                // TODO effacement sécurisé...
                unset($newPkey);
            } else {
                $this->_metrologyInstance->addLog('Create entity error on generation', Metrology::LOG_LEVEL_ERROR, __METHOD__, '98b648b1');
                $this->_id = '0';
            }
        } elseif ($this->_id != '0') {
            $this->_metrologyInstance->addLog('Create entity error no authorized', Metrology::LOG_LEVEL_ERROR, __METHOD__, '6fcb7d18');
            $this->_id = '0';
        } else
            $this->_id = '0';
    }

    // Ecrit le lien pour les objets concernés.
    // Utilisé pour la création d'une nouvelle entité, càd dont la clé publique n'est pas encore reconnue.
    private function _createNewEntityWriteLink(string $link, string $source, string $target, string $meta): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Signe le lien.
        $signe = $this->signLink($link);
        if ($signe === false)
            return;
        $signedLink = $signe . '.' . $this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm') . $link;

        // Écrit le lien pour l'objet de l'entité signataire.
        if ($this->_configurationInstance->getOptionUntyped('permitAddLinkToSigner'))
            $this->_ioInstance->setBlockLink($this->_id, $signedLink);

        // Écrit le lien pour l'objet source.
        $this->_ioInstance->setBlockLink($source, $signedLink);

        // Écrit le lien pour l'objet cible.
        $this->_ioInstance->setBlockLink($target, $signedLink);

        // Écrit le lien pour l'objet méta.
        $this->_ioInstance->setBlockLink($meta, $signedLink);
    }


    /**
     * Vérifier que c'est en hexa, et que c'est une entité.
     * @return boolean
     */
    private function _verifyEntity(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $t = false;
        // Extrait le contenu de l'objet source.
        $objHead = $this->readOneLineAsText(Entity::ENTITY_MAX_SIZE);
        // Vérifie si le contenu contient un entête de clé privée
        if ((strstr($objHead, self::ENTITY_PRIVATE_HEADER)) !== false)
            $t = true;
        // Vérifie si le contenu contient un entête de clé publique
        if ((strstr($objHead, self::ENTITY_PUBLIC_HEADER)) !== false)
            $t = true;
        unset($objHead);

        // TODO Faire une vérifications plus complète...

        $this->_typeVerified = $t;
        return $t;
    }

    private bool $_typeVerified = false;

    public function getKeyType(): string
    {
        if ($this->_id == '0')
            return '';
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_ENTITE_TYPE, 'all');
    }

    public function getTypeVerify(): bool
    {
        $this->_verifyEntity();
        return $this->_typeVerified;
    }

    public function getIsPublicKey(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $t = false;
        // Extrait le contenu de l'objet source.
        $objHead = $this->readOneLineAsText(Entity::ENTITY_MAX_SIZE);
        // Vérifie si le contenu contient un entête de clé public
        if ((strstr($objHead, self::ENTITY_PUBLIC_HEADER)) !== false)
            $t = true;
        unset($objHead);
        return $t;
    }

    public function getIsPrivateKey(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $t = false;
        // Extrait le contenu de l'objet source.
        $objHead = $this->readOneLineAsText(Entity::ENTITY_MAX_SIZE);
        // Vérifie si le contenu contient un entête de clé public
        if ((strstr($objHead, self::ENTITY_PRIVATE_HEADER)) !== false)
            $t = true;
        unset($objHead);
        return $t;
    }


    // Retrouve et retourne la clé publique.
    public function getPublicKeyID(): string
    {
        return $this->_id;
    }

    public function getPublicKey(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_id == '0'
            || $this->_publicKey == ''
        )
            return '';
        return $this->_publicKey;
    }

    // Retrouve la clé publique.
    private function _findPublicKey(): void
    {
        $this->_publicKey = $this->_ioInstance->getObject($this->_id, self::ENTITY_MAX_SIZE);
    }


    // Retourne l'identifiant de la clé privée.
    public function getPrivateKeyID(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Vérifie la présence d'un ID de clé privée. La recherche au besoin.
        if (!isset($this->_privateKeyID)
            || !$this->_privateKeyID != '0'
        )
            $this->_findPrivateKeyID();
        // Retourne l'ID.
        return $this->_privateKeyID;
    }

    // Retrouve l'identifiant de la clé privée.
    private function _findPrivateKeyID(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $oidPKey = $this->_nebuleInstance->getNIDfromData(References::REFERENCE_PRIVATE_KEY);

        if (isset($this->_privateKeyID)
            && $this->_privateKeyID != '0'
        )
            return true;

        $list = $this->getLinksOnFields($this->_id, '', 'f', $this->_id, '', $oidPKey);
        if (sizeof($list) == 0)
            return true;

        $refDate = '0';
        foreach ($list as $link) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('Try link ' . $link->getParsed()['bl/rl'], Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'bc321274');
            /*if (!$link->getValid()) FIXME
                continue;*/

            $nid2 = $link->getParsed()['bl/rl/nid2'];
            $instance = $this->_cacheInstance->newNode($nid2);
            $line = $instance->getContent(self::ENTITY_MAX_SIZE);
            if ($link->getBlocLink()->getParsed()['bs/rs1/eid'] == $this->_id
                && $link->getParsed()['bl/rl/req'] == 'f'
                && $link->getParsed()['bl/rl/nid1'] == $this->_id
                && $link->getParsed()['bl/rl/nid3'] == $oidPKey
                && strlen($nid2) > 0
                && $line !== null
                && strstr($line, self::ENTITY_PRIVATE_HEADER) !== false
                && strcmp($link->getDate(), $refDate) > 0
            ) {
                $this->_privateKeyID = $nid2;
                $refDate = $link->getDate();
                $this->_nebuleInstance->getMetrologyInstance()->addLog('OK private key ' . $nid2, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '63781bce');
            } else
                $this->_nebuleInstance->getMetrologyInstance()->addLog('Invalid private key ' . $nid2, Metrology::LOG_LEVEL_ERROR, __METHOD__, '293d8170');
        }

        if (isset($this->_privateKeyID)
            && $this->_privateKeyID != '0'
        )
            return true;
        return false;
    }

    // Retrouve la clé privée.
    private function _findPrivateKey(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Vérifie la présence d'une clé privée.
        if (isset($this->_privateKey) && $this->_privateKey != '')
            return true;
        // Vérifie la présence d'un ID de clé privée. La recherche au besoin.
        if (!isset($this->_privateKeyID) || !$this->_privateKeyID != '0')
            $this->_findPrivateKeyID();
        // Extrait le contenu de l'objet.
        $this->_privateKey = $this->_ioInstance->getObject($this->_privateKeyID, self::ENTITY_MAX_SIZE);
        return true;
        // A faire... vérifier que c'est bien une clé privée _pour_ cette clé publique.
    }

    // Définit le mot de passe de la clé privée.
    public function setPrivateKeyPassword(string $passwd): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_findPrivateKey();
        if (!$this->_cryptoInstance->checkPrivateKeyPassword($this->_privateKey, $passwd))
            return false;
        $this->_privateKeyPasswordSalt = $this->_cryptoInstance->getRandom(self::ENTITY_PASSWORD_SALT_SIZE, Crypto::RANDOM_STRONG);
        // TODO le chiffrement du mot de passe avec le sel et l'ID de session php...
        $this->_privateKeyPassword = $passwd;
        $this->_isSetPrivateKeyPassword = true;
        $this->_nebuleInstance->addListEntitiesUnlocked($this);
        return true;
    }

    /**
     * Supprime le mot de passe de l'entité.
     * Cela verrouille l'entité.
     *
     * @return boolean
     */
    public function unsetPrivateKeyPassword(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_id == '0')
            return false;
        $this->_privateKeyPassword = $this->_privateKeyPasswordSalt;
        $this->_privateKeyPassword = '';
        $this->_privateKeyPasswordSalt = '';
        $this->_isSetPrivateKeyPassword = false;
        $this->_nebuleInstance->removeListEntitiesUnlocked($this);
        return true;
    }

    public function isSetPrivateKeyPassword(): bool
    {
        return $this->_isSetPrivateKeyPassword;
    }

    public function changePrivateKeyPassword(string $newPasswd): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_id == '0')
            return false;
        // Vérifie que le mot de passe actuel est présent.
        if (!$this->_isSetPrivateKeyPassword)
            return false;

        $this->_metrologyInstance->addLog('change entity password - old ' . $this->_privateKeyID, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '38022519');
        $oldPrivateKeyID = $this->_privateKeyID;

        if (!$this->_cryptoInstance->checkPrivateKeyPassword($this->_privateKey, $this->_privateKeyPassword))
            return false;

        $newKey = $this->_cryptoInstance->changePrivateKeyPassword($this->_privateKey, $this->_privateKeyPassword, $newPasswd);
        if ($newKey == '')
            return false;

        $this->_privateKeyPasswordSalt = $this->_cryptoInstance->getRandom(self::ENTITY_PASSWORD_SALT_SIZE, Crypto::RANDOM_STRONG);
        // A faire... le chiffrement du mot de passe avec le sel et l'ID de session php...
        $this->_privateKeyPassword = $newPasswd;
        $this->_privateKey = $newKey;
        $this->_privateKeyID = $this->_nebuleInstance->getNIDfromData($newKey);
        $this->_isSetPrivateKeyPassword = true;
        $this->_metrologyInstance->addLog('change entity password - new ' . $this->_privateKeyID, Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'd11dc438');

        unset($newKey);

        // Ecrit l'objet de la nouvelle clé privée.
        $this->_ioInstance->setObject($this->_privateKeyID, $this->_privateKey);

        // Définition de la date.
        $date = date(DATE_ATOM);

        // Si ce n'est pas une création d'entité, fait les liens de mises à jour de clés privées.
        if (!$this->_newPrivateKey) {
            // Création lien 1.
            $link = '_' . $this->_id . '_' . $date . '_x_' . $oldPrivateKeyID . '_' . $this->_id . '_0';
            $this->_createNewEntityWriteLink($link, $oldPrivateKeyID, $this->_id, '0');

            // Création lien 2.
            $link = '_' . $this->_id . '_' . $date . '_u_' . $oldPrivateKeyID . '_' . $this->_privateKeyID . '_0';
            $this->_createNewEntityWriteLink($link, $oldPrivateKeyID, $this->_privateKeyID, '0');
        }

        // Création lien 3.
        $target = $this->_nebuleInstance->getNIDfromData($this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm'));
        $meta = $this->_nebuleInstance->getNIDfromData('nebule/objet/hash');
        $link = '_' . $this->_id . '_' . $date . '_l_' . $this->_privateKeyID . '_' . $target . '_' . $meta;
        $this->_createNewEntityWriteLink($link, $this->_privateKeyID, $target, $meta);

        // Création lien 4.
        $target = $this->_nebuleInstance->getNIDfromData(self::ENTITY_TYPE);
        $meta = $this->_nebuleInstance->getNIDfromData('nebule/objet/type');
        $link = '_' . $this->_id . '_' . $date . '_l_' . $this->_privateKeyID . '_' . $target . '_' . $meta;
        $this->_createNewEntityWriteLink($link, $this->_privateKeyID, $target, $meta);

        // Création lien 5.
        $target = $this->_id;
        $link = '_' . $this->_id . '_' . $date . '_f_' . $this->_privateKeyID . '_' . $target . '_0';
        $this->_createNewEntityWriteLink($link, $this->_privateKeyID, $target, '0');

        unset($date, $source, $target, $meta, $link);

        $this->_newPrivateKey = false;
        return true;
    }


    /**
     * Signature de liens.
     *
     * @param string $link
     * @param string $algo
     * @return string|null
     */
    public function signLink(string $link, string $algo = ''): ?string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_privateKey == '') {
            $this->_metrologyInstance->addLog('ERROR entity no private key', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '91353b7d');
            return null;
        }
        if ($this->_privateKeyPassword == '') {
            $this->_metrologyInstance->addLog('ERROR entity no password for private key', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '63de2900');
            return null;
        }
        if ($algo == '')
            $algo = $this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm');

        $hash = $this->_cryptoInstance->hash($link, $algo);
        return $this->_cryptoInstance->sign($hash, $this->_privateKey, $this->_privateKeyPassword) . '.' . $algo;
    }

    /**
     * Signature et écriture de liens.
     *
     * @param string $link
     * @return string|boolean
     */
    public function signWriteLink(string $link)
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $signe = $this->signLink($link);
        if ($signe === false) {
            return false;
        }
        $signedLink = $signe . $link;
        // A faire...
        return $signedLink;
    }

    /**
     * Déchiffrement de données pour l'entité.
     * Déchiffrement asymétrique uniquement, càd avec la clé privée.
     *
     * @param string $code
     * @return string
     */
    public function decrypt(string $code): string
    {
        return $this->_cryptoInstance->decryptTo($code, $this->_privateKey, $this->_privateKeyPassword);
    }


    /**
     * Lecture du nom complet.
     * La construction du nom complet d'une entité est légèrement différente d'un objet.
     *
     * @param string $socialClass
     * @return string
     */
    public function getFullName(string $socialClass = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_id == '0')
            return '';
        if (isset($this->_fullName)
            && trim($this->_fullName) != ''
        )
            return $this->_fullName;

        $name = $this->getName($socialClass);
        $prefix = $this->getPrefixName($socialClass);
        $suffix = $this->getSuffixName($socialClass);
        $firstname = $this->getFirstname($socialClass);
        $surname = $this->getSurname($socialClass);

        $fullname = $name;
        if ($surname != '')
            $fullname = '&ldquo;' . $surname . '&rdquo; ' . $fullname;
        if ($firstname != '')
            $fullname = $firstname . ' ' . $fullname;
        if ($prefix != '')
            $fullname = $prefix . ' ' . $fullname;
        if ($suffix != '')
            $fullname = $fullname . ' ' . $suffix;
        $this->_fullName = $fullname;

        return $fullname;
    }

    // Retourne les localisations de l'entité.
    public function getLocalisations(string $socialClass = ''): array
    {
        if ($this->_id == '0')
            return array();
        return $this->getProperties(References::REFERENCE_NEBULE_OBJET_ENTITE_LOCALISATION, $socialClass);
    }

    public function getLocalisationsID(string $socialClass = ''): array
    {
        if ($this->_id == '0')
            return array();
        return $this->getPropertiesID(References::REFERENCE_NEBULE_OBJET_ENTITE_LOCALISATION, $socialClass);
    }

    public function getLocalisation(string $socialClass = ''): string
    {
        if ($this->_id == '0')
            return '';
        return $this->getProperty(References::REFERENCE_NEBULE_OBJET_ENTITE_LOCALISATION, $socialClass);
    }

    public function getLocalisationID(string $socialClass = ''): string
    {
        if ($this->_id == '0')
            return '';
        return $this->getPropertyID(References::REFERENCE_NEBULE_OBJET_ENTITE_LOCALISATION, $socialClass);
    }

    /**
     * Recherche la miniature d'un image la plus proche possible de la dimension demandée. Recherche faite sur un seul niveau d'arborescence.
     *
     * @param int $size
     * @return string
     */
    public function getFaceID(int$size = 400): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_id == '0')
            return '';
        if ($size == '0')
            return '';

        $ximg = (int)($this->getProperty('EXIF/ImageWidth', 'all'));
        if ($ximg == 0)
            $ximg = (int)($this->getProperty('COMPUTED.Width', 'all'));

        $yimg = (int)($this->getProperty('EXIF/ImageHeight', 'all'));
        if ($yimg == 0)
            $yimg = (int)($this->getProperty('COMPUTED.Height', 'all'));

        if ($ximg == 0 || $yimg == 0) // Si pas de dimensions trouvées, continue avec des valeurs par défaut.
        {
            $ximg = 10000;
            $yimg = 10000;
        }

        // Si l'objet est plus petit que la 'miniature' demandée, retourne 0.
        $xyimg = sqrt($ximg * $yimg);
        if ($size >= $xyimg)
            return '0';

        $list = array();
        $links = array();
        //_l_fnd($this->_id, $links, 'f', $this->_id, '', '0');				// @todo Vérifier le bon fonctionnement.
        $links = $this->getLinksOnFields('', '', 'f', $this->_id, '', '0');
        foreach ($links as $link) {
            $instance6 = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid2']);
            $type = $instance6->getType('all');
            if (($type == 'image/png'
                    || $type == 'image/jpeg')
                && $instance6->checkPresent()
            ) {
                $xsize = (int)($instance6->getProperty('EXIF/ImageWidth', 'all'));
                if ($xsize == 0)
                    $xsize = (int)($instance6->getProperty('COMPUTED.Width', 'all'));
                $ysize = (int)($instance6->getProperty('EXIF/ImageHeight', 'all'));
                if ($ysize == 0)
                    $ysize = (int)($instance6->getProperty('COMPUTED.Width', 'all'));
                if ($xsize != ''
                    && $ysize != ''
                    && $xsize != '0'
                    && $ysize != '0'
                ) {
                    $list[$instance6->getID()][0] = $instance6->getID();
                    $list[$instance6->getID()][1] = sqrt((int)$xsize * (int)$ysize);
                }
            }
        }

        // Recherche la résolution la plus proche.
        $best = $xyimg;
        $bestimg = '0';
        if (sizeof($list) != 0) {
            foreach ($list as $img) {
                if (abs($size - $img[1]) < $best) {
                    $bestimg = $img[0];
                    $best = abs($size - $img[1]);
                }
            }
        }
        if ($bestimg != $this->_id && $xyimg < $best)
            return '0';
        if ($bestimg != $this->_id)
            return $bestimg;
        else // Si pas trouvé d'objet aux dimmensions intéressantes, recherche si ça ne marche pas mieux avec l'objet parent.
        {
            $uplinks = array();
            //_l_fnd($this->_id, $uplinks, 'f', '', $this->_id, '0');							// @todo Vérifier le bon fonctionnement.
            $uplinks = $this->getLinksOnFields('', '', 'f', '', $this->_id, '0');
            foreach ($uplinks as $uplink) {
                $instance5 = $this->_cacheInstance->newNode($uplink->getParsed()['bl/rl/nid1']);
                $type = $instance5->getType('all');
                if (($type == 'image/png' || $type == 'image/jpeg') && $instance5->checkPresent()) {
                    $list = array();
                    $links = array();
                    //_l_fnd($instance5->getID(), $links, 'f', $instance5->getID(), '', '0');          // @todo Vérifier le bon fonctionnement.
                    $links = $instance5->getLinksOnFields('', '', 'f', $instance5->getID(), '', '0');
                    foreach ($links as $link) {
                        $instance6 = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid2']);
                        $type = $instance6->getType('all');
                        if ($type == 'image/png'
                            || $type == 'image/jpeg'
                        ) {
                            $xsize = (int)($instance6->getProperty('EXIF/ImageWidth', 'all'));
                            if ($xsize == 0)
                                $xsize = (int)($instance6->getProperty('COMPUTED.Width', 'all'));
                            $ysize = (int)($instance6->getProperty('EXIF/ImageHeight', 'all'));
                            if ($ysize == 0)
                                $ysize = (int)($instance6->getProperty('COMPUTED.Width', 'all'));
                            if ($xsize != ''
                                && $ysize != ''
                                && $xsize != '0'
                                && $ysize != '0'
                            ) {
                                $list[$instance6->getID()][0] = $instance6->getID();
                                $list[$instance6->getID()][1] = sqrt((int)$xsize * (int)$ysize);
                            }
                        }
                    }
                }
            }
        }
        if (sizeof($list) != 0) {
            foreach ($list as $img) {
                if (abs($size - $img[1]) < $best) {
                    $bestimg = $img[0];
                    $best = abs($size - $img[1]);
                }
            }
        }
        if ($xyimg < $best)
            return '0';
        return $bestimg;
    }


    // Ecrit l'objet si non présent.
    public function write(): bool
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $ok = $this->_ioInstance->setObject($this->_id, $this->_publicKey);
        $this->_metrologyInstance->addAction('addent', $this->_id, $ok);

        return $ok;
    }



    // Désactivation des fonctions de protection.

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return boolean
     */
    public function getMarkProtected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return boolean
     */
    public function getReloadMarkProtected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return string
     */
    public function getProtectedID(): string
    {
        return '0';
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return string
     */
    public function getUnprotectedID(): string
    {
        return $this->_id;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @param bool $obfuscated
     * @return boolean
     */
    public function setProtected(bool $obfuscated = false): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return boolean
     */
    public function setUnprotected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @param string $entity
     * @return boolean
     */
    public function setProtectedTo(string $entity): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les groupes.
     *
     * @return array
     */
    public function getProtectedTo(): array
    {
        return array();
    }


    /**
     * Retourne la liste des liens vers les groupes dont l'entité est à l'écoute.
     *
     * @param string $socialClass
     * @return array:Link
     */
    public function getListIsFollowerOfGroupLinks(string $socialClass = 'myself'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Liste tous les liens de définition des membres du groupe.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $this->_id,
            '',
            $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI)
        );

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Tri les objets de type groupe.
        foreach ($links as $i => $link) {
            $instance = $this->_cacheInstance->newGroup($link->getParsed()['bl/rl/nid2']);
            if (!$instance->getIsGroup('all')) {
                unset($links[$i]);
            }
        }

        return $links;
    }

    /**
     * Retourne la liste des ID vers les groupes dont l'entité est à l'écoute.
     *
     * @param string $socialClass
     * @return array:string
     */
    public function getListIsFollowerOnGroupID(string $socialClass = 'myself'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $list = array();

        // Liste tous les liens de définition des membres du groupe.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $this->_id,
            '',
            $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_GROUPE_SUIVI)
        );

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Tri les objets de type groupe.
        foreach ($links as $i => $link) {
            $instance = $this->_cacheInstance->newGroup($link->getParsed()['bl/rl/nid2']);
            if ($instance->getIsGroup('all')) {
                $list[$link->getParsed()['bl/rl/nid2']] = $link->getParsed()['bl/rl/nid2'];
            }
        }

        return $list;
    }

    /**
     * Retourne la liste des liens vers les conversations dont l'entité est à l'écoute.
     * S'appuie sur la fonction dédiée aux groupes.
     *
     * @param string $socialClass
     * @return array:Link
     */
    public function getListIsFollowerOfConversationLinks(string $socialClass = 'myself'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        // Liste tous les liens de définition des membres du groupe.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $this->_id,
            '',
            $this->_nebuleInstance->getNIDfromData(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE)
        );

        // Fait un tri par pertinence sociale.
        $this->_socialInstance->arraySocialFilter($links, $socialClass);

        // Tri les objets de type groupe.
        foreach ($links as $i => $link) {
            $instance = $this->_cacheInstance->newConversation($link->getParsed()['bl/rl/nid2']);
            if (!$instance->getIsConversation('all')) {
                unset($links[$i]);
            }
        }

        return $links;
    }

    /**
     * Retourne la liste des ID vers les conversations dont l'entité est à l'écoute.
     * S'appuie sur la fonction dédiée aux groupes.
     *
     * @param string $socialClass
     * @return array:string
     */
    public function getListIsFollowerOnConversationID(string $socialClass = 'myself'): array
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $list = array();

        // Liste tous les liens de définition des membres du groupe.
        $links = $this->getListIsFollowerOfConversationLinks($socialClass);

        // Tri les objets de type groupe.
        foreach ($links as $i => $link) {
            $instance = $this->_cacheInstance->newConversation($link->getParsed()['bl/rl/nid2']);
            if ($instance->getIsConversation('all')) {
                $list[$link->getParsed()['bl/rl/nid2']] = $link->getParsed()['bl/rl/nid2'];
            }
        }

        return $list;
    }


    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#oe">OE / Entité</a>
            <ul>
                <li><a href="#oen">OEM / Entités Maîtresses</a></li>
                <li><a href="#oen">OEN / Nommage</a></li>
                <li><a href="#oep">OEP / Protection</a></li>
                <li><a href="#oed">OED / Dissimulation</a></li>
                <li><a href="#oel">OEL / Liens</a></li>
                <li><a href="#oec">OEC / Création</a></li>
                <li><a href="#oes">OES / Stockage</a></li>
                <li><a href="#oet">OET / Transfert</a></li>
                <li><a href="#oer">OER / Réservation</a></li>
                <li><a href="#oeio">OEIO / Implémentation des Options</a></li>
                <li><a href="#oeia">OEIA / Implémentation des Actions</a></li>
                <li><a href="#oeo">OEO / Oubli</a></li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h2 id="oe">OE / Entité</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <p>L’entité est un objet caractéristique. Elle dispose d’une clé publique, par laquelle elle est identifiée, et
            d’une clé privée.</p>
        <p>L’indication de la fonction de prise d’empreinte (hashage) ainsi que le type de bi-clé sont impératifs. Le
            lien est identique à celui défini pour un objet.</p>
        <p>Le type mime <code>mime-type:application/x-pem-file</code> est suffisant pour indiquer que cet objet est une
            entité. <i>Des valeurs équivalentes pourront être définies ultérieurement</i>.</p>
        <p>Toutes les autres indications sont optionnelles.</p>

        <h3 id="oem">OEM / Entités Maîtresses</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>La bibliothèque utilise actuellement plusieurs entités spéciales, dites autorités maîtresses, avec des rôles
            prédéfinis.</p>
        <ol>
            <li>Maître du tout. L'instance actuelle s'appelle <a href="http://puppetmaster.nebule.org">puppetmaster</a>.
                Voir <a href="#cam">CAM</a>.
            </li>
            <li>Maître de la sécurité. L'instance actuelle s'appelle <a href="http://cerberus.nebule.org">cerberus</a>.
                Voir <a href="#cams">CAMS</a>.
            </li>
            <li>Maître du code. L'instance actuelle s'appelle <a href="http://bachue.nebule.org">bachue</a>. Voir <a
                    href="#camc">CAMC</a>.
            </li>
            <li>Maître de l'annuaire. L'instance actuelle s'appelle <a href="http://asabiyya.nebule.org">assabyia</a>.
                Voir <a href="#cama">CAMA</a>.
            </li>
            <li>Maître du temps. L'instance actuelle s'appelle <a href="http://kronos.nebule.org">kronos</a>. Voir <a
                    href="#camt">CAMT</a>.
            </li>
        </ol>

        <h3 id="oen">OEN / Nommage</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le nommage à l’affichage du nom des entités repose sur plusieurs propriétés :</p>
        <ol>
            <li>nom</li>
            <li>prénom</li>
            <li>surnom</li>
            <li>préfixe</li>
            <li>suffixe</li>
        </ol>
        <p>Ces propriétés sont matérialisées par des liens de type <code>l</code> avec comme objets méta, respectivement
            :</p>
        <ol>
            <li><code>nebule/objet/nom</code></li>
            <li><code>nebule/objet/prenom</code></li>
            <li><code>nebule/objet/surnom</code></li>
            <li><code>nebule/objet/prefix</code></li>
            <li><code>nebule/objet/suffix</code></li>
        </ol>
        <p>Par convention, voici le nommage des entités :</p>
        <p><code>préfixe prénom "surnom" nom suffixe</code></p>

        <h3 id="oep">OEP / Protection</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="oed">OED / Dissimulation</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="oel">OEL / Liens</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="oec">OEC / Création</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>La première étape consiste en la génération d’un bi-clé (public/privé) cryptographique. Ce bi-clé peut être
            de type RSA ou équivalent. Aujourd’hui, seul RSA est reconnu.</p>
        <p>On extrait la clé publique du bi-clé. Le calcul de l’empreinte cryptographique de la clé publique donne
            l’identifiant de l’entité. On écrit dans les objets (o/*) l’objet avec comme contenu la clé publique et
            comme id son empreinte cryptographique.</p>
        <p>On extrait la clé privée du bi-clé. Il est fortement conseillé lors de l’extraction de protéger tout de suite
            la clé privée avec un mot de passe. On écrit dans les objets (o/*) l’objet avec comme contenu la clé privée
            et comme id son empreinte cryptographique (différente de celle de la clé publique).</p>
        <p>A partir de maintenant, le bi-clé n’est plus nécessaire. Il faut le supprimer avec un effacement
            sécurisé.</p>
        <p>Pour que l’objet soit reconnu comme entité il faut créer les liens correspondants.</p>
        <ul>
            <li>Lien 1 :
                <ul>
                    <li>Signature du lien par la clé privée de la nouvelle entité</li>
                    <li>Identifiant de la clé publique</li>
                    <li>Horodatage</li>
                    <li>Lien de type <code>l</code></li>
                    <li>Identifiant de la clé <span style="font-weight:bold;">publique</span></li>
                    <li>Empreinte de l’algorithme de hash utilisé pour le calcul des empreintes</li>
                    <li>Empreinte de ‘<?php echo References::REFERENCE_NEBULE_OBJET_HASH; ?>’</li>
                </ul>
            </li>
            <li>Lien 2 :
                <ul>
                    <li>Signature du lien par la clé privée de la nouvelle entité</li>
                    <li>Identifiant de la clé publique</li>
                    <li>Horodatage</li>
                    <li>Lien de type <code>l</code></li>
                    <li>Identifiant de la clé <span style="font-weight:bold;">privée</span></li>
                    <li>Empreinte de l’algorithme de hash utilisé pour le calcul des empreintes</li>
                    <li>Empreinte de ‘<?php echo References::REFERENCE_NEBULE_OBJET_HASH; ?>’</li>
                </ul>
            </li>
            <li>Lien 3 :
                <ul>
                    <li>Signature du lien par la clé privée de la nouvelle entité</li>
                    <li>Identifiant de la clé publique</li>
                    <li>Horodatage</li>
                    <li>Lien de type <code>l</code></li>
                    <li>Identifiant de la clé <span style="font-weight:bold;">publique</span></li>
                    <li>Empreinte de ‘<?php echo References::REFERENCE_OBJECT_ENTITY; ?>’</li>
                    <li>Empreinte de ‘<?php echo References::REFERENCE_NEBULE_OBJET_TYPE; ?>’</li>
                </ul>
            </li>
            <li>Lien 4 :
                <ul>
                    <li>Signature du lien par la clé privée de la nouvelle entité</li>
                    <li>Identifiant de la clé publique</li>
                    <li>Horodatage</li>
                    <li>Lien de type <code>l</code></li>
                    <li>Identifiant de la clé <span style="font-weight:bold;">privée</span></li>
                    <li>Empreinte de ‘<?php echo References::REFERENCE_OBJECT_ENTITY; ?>’</li>
                    <li>Empreinte de ‘<?php echo References::REFERENCE_NEBULE_OBJET_TYPE; ?>’</li>
                </ul>
            </li>
            <li>Lien 5 :
                <ul>
                    <li>Signature du lien par la clé privée de la nouvelle entité</li>
                    <li>Identifiant de la clé publique</li>
                    <li>Horodatage</li>
                    <li>Lien de type <code>f</code> ;</li>
                    <li>Identifiant de la clé <span style="font-weight:bold;">privée</span></li>
                    <li>Identifiant de la clé <span style="font-weight:bold;">publique</span></li>
                    <li>Empreinte de ‘<?php echo References::REFERENCE_PRIVATE_KEY; ?>’.</li>
                </ul>
            </li>
        </ul>
        <p>C’est le minimum vital pour une entité. Ensuite, d’autres propriétés peuvent être ajoutées à l’entité (id clé
            publique) comme sont nom, son type, etc…</p>
        <p>Si le mot de passe de la clé privée est définit par l’utilisateur demandeur de la nouvelle entité, il faut
            supprimer ce mot de passe avec un effacement sécurisé.</p>
        <p>Si le mot de passe de la clé privée a été généré, donc que la nouvelle entité est esclave d’une entité
            maître, le mot de passe doit être stocké dans un objet chiffré pour l’entité maître. Et il faut générer un
            lien reliant l’objet de mot de passe à la clé privée de la nouvelle entité.</p>

        <h3 id="oes">OES / Stockage</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <h3 id="oet">OET / Transfert</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="oer">OER / Réservation</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="oeio">OEIO / Implémentation des Options</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="oeia">OEIA / Implémentation des Actions</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="oeo">OEO / Oubli</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L'oubli vonlontaire de certains liens et objets n'est encore ni théorisé ni implémenté mais deviendra
            indispensable lorsque l'espace viendra à manquer (cf <a href="#cn">CN</a>).</p>

        <?php
    }
}



// ========================================================================================
//   404_location.php
//   020250215163515
//   de1a4d8e886717896bd7af90cb043c93f0aeff346593d3cce83e74d0dfaa1872.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe Localisation.
 * @todo à revoir complètement !
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant l'ID de la localisation ou la localisation.
 *
 * La localisation est forcément un texte et est passée automatiquement en minuscule.
 * ------------------------------------------------------------------------------------------
 */
class Localisation extends Node implements nodeInterface
{
    private $_localisation = '';
    private $_protocol = '';

    /**
     * Specific part of constructor for an entity.
     * @return void
     */
    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_cacheCurrentEntityUnlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();

        if ($this->_id != '0')
        {
            $this->_localisation = trim(strtolower($this->_ioInstance->getObject($this->_id)));
            $this->_parseURL();
        }
    }

    /**
     * Donne le texte par défaut lorsque l'instance est utilisée comme texte.
     *
     * @return string
     */
    public function __toString(): string
    {
        return $this->_localisation;
    }

    private function _parseURL(): void
    {
        switch (preg_split('/:/', $this->_localisation)[0]) {
            case 'http':
            case 'https':
                // TODO Test la validité de l'adresse.
                $this->_protocol = 'HTTP';
                break;
            /*case 'smtp':
                $this->_protocol = 'SMTP';
                break;
            case 'xmpp':
                $this->_protocol = 'XMPP';
                break;*/
            default:
                $this->_protocol = '';
        }
    }

    /**
     * Create new URL localisation.
     * @param string $url
     * @param bool   $protected
     * @param bool   $obfuscated
     * @return bool
     */
    public function setNewLocalisation(string $url, bool $protected = false, bool $obfuscated = false): bool
    {
        $this->_localisation = trim(strtolower($url));
        $this->_parseURL();
        if ($this->_protocol == '')
        {
            $this->_localisation = '';
            return false;
        }
        return true;
    }

    // Synchronise l'objet avec l'ID donné si non présent localement.
    public function syncObjectID($id)
    {
        // @todo
    }

    // Synchronise les liens.
    public function syncLinksID($id)
    {
        // @todo
    }

    // Synchronise à la fois les liens et l'objet avec l'ID donné.
    public function syncID($id)
    {
        $this->syncLinksID($id);
        $this->syncObjectID($id);
    }

    private function _addPonderate($time)
    {
        if ($this->_configurationInstance->getOptionAsBoolean('permitLocalisationStats')) {
            return false;
        }

        // @todo
    }



    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#ol">OL / Localisation</a>
            <ul>
                <li><a href="#oln">OLN / Nommage</a></li>
                <li><a href="#olp">OLP / Protection</a></li>
                <li><a href="#old">OLD / Dissimulation</a></li>
                <li><a href="#oll">OLL / Liens</a></li>
                <li><a href="#olc">OLC / Création</a></li>
                <li><a href="#ols">OLS / Stockage</a></li>
                <li><a href="#olt">OLT / Transfert</a></li>
                <li><a href="#olr">OLR / Réservation</a></li>
                <li><a href="#olio">OLIO / Implémentation des Options</a></li>
                <li><a href="#olia">OLIA / Implémentation des Actions</a></li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h2 id="ol">OL / Localisation</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <p>Une localisation permet de trouver l’emplacement des objets et liens générés par une entité.</p>
        <p>Un emplacement n’a de sens que pour une entité.</p>
        <p>Une entité peut disposer de plusieurs localisations. Il faut considérer que toute entité qui héberge l’objet
            d’une autre entité devient de fait une localisation valide même si cela n’est pas explicitement définit.</p>

        <h3 id="oln">OLN / Nommage</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="olp">OLP / Protection</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="old">OLD / Dissimulation</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="oll">OLL / Liens</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="olc">OLC / Création</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Liste des liens à générer lors de la création d'une localisation.</p>
        <p>A faire...</p>

        <h3 id="ols">OLS / Stockage</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <h3 id="olt">OLT / Transfert</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="olr">OLR / Réservation</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="olio">OLIO / Implémentation des Options</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="olia">OLIA / Implémentation des Actions</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php
    }
}



// ========================================================================================
//   405_conversation.php
//   020250218165657
//   f71ce49388b123e4fe7531178610124c2d4ed608b39ffea943497eb25d697e76.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe Conversation.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant l'ID d'une conversation ou 'new' ;
 *
 * L'ID d'une conversation est forcément un texte en hexadécimal.
 *
 * Si une erreur survient lors de la lecture de la conversation ou lors de la création, assigne l'ID 0.
 *
 * Tout objet peut devenir une conversation sans avoir été préalablement marqué comme conversation.
 * Le simple faire de faire un lien pour désigner un objet comme membre de la conversation d'un autre objet
 *   suffit à créer la conversation.
 * ------------------------------------------------------------------------------------------
 */
class Conversation extends Group implements nodeInterface
{
    const DEFAULT_ICON_RID = '6e6562756c652f6f626a65742f636f6e766572736174696f6e000000000000000000.none.272';

    const SESSION_SAVED_VARS = array(
        '_id',
        '_fullName',
        '_cacheProperty',
        '_cacheProperties',
        '_cacheMarkProtected',
        '_idProtected',
        '_idUnprotected',
        '_idProtectedKey',
        '_idUnprotectedKey',
        '_markProtectedChecked',
        '_cacheCurrentEntityUnlocked',
        '_usedUpdate',
        '_isGroup',
        '_isConversation',
        '_isMarkClosed',
        '_isMarkProtected',
        '_isMarkObfuscated',
        '_referenceObject',
        '_referenceObjectClosed',
        '_referenceObjectProtected',
        '_referenceObjectObfuscated',
    );

    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitCurrency') )
        {
            $this->_id = '0';
            $this->_isNew = false;
            return;
        }
        if (is_a($this->_entitiesInstance, 'Nebule\Library\Node'))
            $this->_cacheCurrentEntityUnlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();

        $this->getReferenceObject();
        $this->getReferenceObjectClosed();
        $this->getReferenceObjectProtected();
        $this->getReferenceObjectObfuscated();

        if ($this->_isNew)
            $this->_createNewConversation();
        elseif ($this->_id != '0')
            $this->getIsConversation();
    }

    /**
     * Création d'une nouvelle conversation.
     *
     * @param boolean $closed
     * @param boolean $protected
     * @param boolean $obfuscated
     * @return boolean
     */
    protected function _createNewConversation(bool $closed = false, bool $protected = false, bool $obfuscated = false): bool
    {
        // Vérifie que l'on puisse créer une conversation.
        if ($this->_configurationInstance->getOptionAsBoolean('permitWrite')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteConversation')
            && $this->_entitiesInstance->getCurrentEntityIsUnlocked()
        ) {
            // Génère un contenu aléatoire.
            $data = $this->_cryptoInstance->getRandom(32, Crypto::RANDOM_PSEUDO);

            // Si le contenu est valide.
            if ($data != '') {
                // Calcul l'ID référence de la conversation.
                $this->_id = substr($this->_cryptoInstance->hash($data), 0, 32)
                    . '0000656e7562656c6f2f6a627465632f6e6f6576737274616f690a6e';
                $this->_metrologyInstance->addLog('Create conversation ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

                // Mémorise les données.
                $this->_data = $data;
                $this->_haveData = true;
                $data = null;

                $signer = $this->_entitiesInstance->getCurrentEntityID();
                $date = date(DATE_ATOM);
                $hashconversation = $this->getReferenceObject();

                // Création lien de hash.
                $date2 = $date;
                if ($obfuscated) {
                    $date2 = '0';
                }
                $action = 'l';
                $source = $this->_id;
                $target = $this->_cryptoInstance->hash($this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm'));
                $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_HASH);
                $link = '0_' . $signer . '_' . $date2 . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
                $newLink = $this->_cacheInstance->newBlockLink($link);
                $newLink->signWrite();

                // Création lien de conversation.
                $action = 'l';
                $source = $this->_id;
                $target = $hashconversation;
                $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_TYPE);
                $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
                $newLink = $this->_cacheInstance->newBlockLink($link);
                $newLink->sign();
                if ($obfuscated) {
                    $newLink->setObfuscate();
                }
                $newLink->write();

                // Si besoin, marque la conversation comme fermée.
                if ($closed) {
                    $this->_metrologyInstance->addLog('Create closed conversation', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                    $action = 'l';
                    $source = $this->_id;
                    $target = $signer;
                    $meta = $this->getReferenceObjectClosed();
                    $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
                    $newLink = $this->_cacheInstance->newBlockLink($link);
                    $newLink->sign();
                    if ($obfuscated) {
                        $newLink->setObfuscate();
                    }
                    $newLink->write();
                }

                // Si besoin, marque la conversation comme protégée.
                if ($protected) {
                    $this->_metrologyInstance->addLog('Create protected conversation', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                    $action = 'l';
                    $source = $this->_id;
                    $target = $signer;
                    $meta = $this->getReferenceObjectProtected();
                    $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
                    $newLink = $this->_cacheInstance->newBlockLink($link);
                    $newLink->sign();
                    if ($obfuscated) {
                        $newLink->setObfuscate();
                    }
                    $newLink->write();
                }

                // Si besoin, marque la conversation comme dissimulée.
                if ($obfuscated) {
                    $this->_metrologyInstance->addLog('Create obfuscated conversation', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                    $action = 'l';
                    $source = $this->_id;
                    $target = $signer;
                    $meta = $this->getReferenceObjectObfuscated();
                    $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
                    $newLink = $this->_cacheInstance->newBlockLink($link);
                    $newLink->sign();
                    $newLink->setObfuscate();
                    $newLink->write();
                }

                // Création du lien de l'entité originaire de la conversation.
                $action = 'l';
                $source = $signer;
                $target = $this->_id;
                $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE);
                $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
                $newLink = $this->_cacheInstance->newBlockLink($link);
                $newLink->sign();
                if ($obfuscated) {
                    $newLink->setObfuscate();
                }
                $newLink->write();

                $this->_isConversation = true;
            } else {
                $this->_metrologyInstance->addLog('Create conversation error on generation', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
                $this->_id = '0';
                return false;
            }
        } else {
            $this->_metrologyInstance->addLog('Create conversation error not authorized', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
            $this->_id = '0';
            return false;
        }
        return true;
    }



    // Désactivation des fonctions de protection et autres.

    /**
     * Vérifie la consistance de l'objet.
     *
     * Retourne toujours true pour une conversation.
     * Il n'y a pas de contenu à vérifier pour un objet de référence.
     *
     * @return boolean
     */
    public function checkConsistency(): bool
    {
        return true;
    }

    /**
     * Fonction pour les objets, désactivée pour les conversations.
     *
     * @return boolean
     */
    public function getReloadMarkProtected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les conversations.
     *
     * @return string
     */
    public function getProtectedID(): string
    {
        return '0';
    }

    /**
     * Fonction pour les objets, désactivée pour les conversations.
     *
     * @return string
     */
    public function getUnprotectedID(): string
    {
        return $this->_id;
    }

    /**
     * Fonction pour les objets, désactivée pour les conversations.
     *
     * @return boolean
     */
    public function setProtected(bool $obfuscated = false): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les conversations.
     *
     * @return boolean
     */
    public function setUnprotected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les conversations.
     *
     * @param string|Entity $entity
     * @return boolean
     */
    public function setProtectedTo($entity): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les conversations.
     *
     * @return array
     */
    public function getProtectedTo(): array
    {
        return array();
    }


    /**
     * Retourne si l'entité est à l'écoute du groupe.
     *
     * @param string|Node $entity
     * @param string      $socialClass
     * @param array:string $socialListID
     * @return boolean
     */
    public function getIsFollower(Node|string $entity, string $socialClass = '', $socialListID = null): bool
    {
        // Vérifie que c'est bien une entité.
        if ($entity == '') {
            return false;
        }

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        // Vérifie que c'est bien une entité.
        if ($id == '') {
            return false;
        }

        // Liste tous les liens de définition des entités à l'écoutes du groupe.
        $links = $this->getLinksOnFields(
            '',
            '',
            'l',
            $id,
            $this->_id,
            $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE)
        );

        // Fait un tri par pertinance sociale.
        $this->_socialInstance->setList($socialListID);
        $this->_socialInstance->arraySocialFilter($links, $socialClass);
        $this->_socialInstance->unsetList();

        if (sizeof($links) != 0) {
            return true;
        }
        return false;
    }

    /**
     * Ajoute une entité comme à l'écoute du groupe.
     *
     * @param string|Node $entity
     * @param boolean     $obfuscated
     * @return boolean
     */
    public function setFollower($entity, bool $obfuscated = false): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteConversation')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        ) {
            return false;
        }

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated('')) {
            $obfuscated = true;
        }

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        // Vérifie que c'est bien une entité.
        if ($id == '') {
            return false;
        }

        // Création lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'l';
        $source = $id;
        $target = $this->_id;
        $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE);
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new BlocLink($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated) {
            $newLink->setObfuscate();
        }

        // Ecrit le lien.
        return $newLink->write();
    }

    /**
     * Retire un entité à l'écoute du groupe.
     *
     * @todo détecter le lien dissimulé d'origine, et dissimuler en conséquence.
     * @todo retirer la dissimulation déjà faite dans le code.
     * @param string|Node $entity
     * @param boolean     $obfuscated
     * @return boolean
     */
    public function unsetFollower($entity = '', bool $obfuscated = false): bool
    {
        // Vérifie que la création de liens est possible.
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteConversation')
            || !$this->_entitiesInstance->getCurrentEntityIsUnlocked()
        ) {
            return false;
        }

        // Si la dissimulation est activée, la force.
        if ($this->getMarkObfuscated('')) {
            $obfuscated = true;
        }

        // Extrait l'ID de l'entité.
        $id = $this->_checkExtractEntityID($entity);

        // Vérifie que c'est bien une entité.
        if ($id == '') {
            return false;
        }

        // Création lien de groupe.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $action = 'x';
        $source = $id;
        $target = $this->_id;
        $meta = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE);
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new BlocLink($this->_nebuleInstance, $link);
        $newLink->sign();

        // Si besoin, obfuscation du lien.
        if ($obfuscated) {
            $newLink->setObfuscate();
        }

        // Ecrit le lien.
        return $newLink->write();
    }


    /**
     * Extrait la liste des liens définissant les entités à l'écoute de la conversation.
     *
     * @param string $socialClass
     * @param array:string $socialListID
     * @return array:Link
     */
    public function getListFollowersLinks(string $socialClass = '', $socialListID = null): array
    {
        return $this->_getListFollowersLinks($this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE), $socialClass, $socialListID);
    }

    /**
     * Extrait la liste des ID des entités à l'écoute du groupe.
     *
     * @param string $socialClass
     * @param array:string $socialListID
     * @return array:string
     */
    public function getListFollowersID(string $socialClass = '', $socialListID = null): array
    {
        // Extrait les liens des groupes.
        $links = $this->_getListFollowersLinks($this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE), $socialClass, $socialListID);

        // Extraction des ID cibles.
        $list = array();
        foreach ($links as $link) {
            $list[$link->getParsed()['bl/rl/nid1']] = $link->getParsed()['bl/rl/nid1'];
        }

        return $list;
    }

    /**
     * Retourne le nombre d'entités à l'écoute du groupe.
     *
     * @param string $socialClass
     * @param array:string $socialListID
     * @return float
     */
    public function getCountFollowers(string $socialClass = '', $socialListID = null): float
    {
        return sizeof($this->_getListFollowersLinks($this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE), $socialClass, $socialListID));
    }

    /**
     * Retourne la liste des entités qui ont ajouté l'entité cité comme suiveuse de la conversation.
     *
     * @param string $entity
     * @param string $socialClass
     * @param array:string $socialListID
     * @return array:string
     */
    public function getListFollowerAddedByID(string $entity, string $socialClass = 'all', $socialListID = null): array
    {
        // Extrait les liens des groupes.
        $links = $this->_getListFollowersLinks($this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_SUIVIE), $socialClass, $socialListID);

        // Extraction des ID cibles.
        $list = array();
        foreach ($links as $link) {
            if ($link->getParsed()['bl/rl/nid1'] == $entity) {
                $list[$link->getParsed()['bs/rs1/eid']] = $link->getParsed()['bs/rs1/eid'];
            }
        }

        return $list;
    }


    /**
     * ID de référence de l'objet.
     *
     * @var string
     */
    private $_referenceObject = '';

    /**
     * Calcule et retourne la référence de l'objet.
     *
     * @return string
     */
    public function getReferenceObject(): string
    {
        if ($this->_referenceObject == '') {
            $this->_referenceObject = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
        }
        return $this->_referenceObject;
    }

    /**
     * ID de référence de l'objet de fermeture.
     *
     * @var string
     */
    private $_referenceObjectClosed = '';

    /**
     * Calcule et retourne la référence de l'objet de fermeture.
     *
     * @return string
     */
    public function getReferenceObjectClosed(): string
    {
        if ($this->_referenceObjectClosed == '') {
            $this->_referenceObjectClosed = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_FERMEE, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
        }
        return $this->_referenceObjectClosed;
    }

    /**
     * ID de référence de l'objet de protection des membres.
     *
     * @var string
     */
    private $_referenceObjectProtected = '';

    /**
     * Calcule et retourne la référence de l'objet de protection des membres.
     *
     * @return string
     */
    public function getReferenceObjectProtected(): string
    {
        if ($this->_referenceObjectProtected == '') {
            $this->_referenceObjectProtected = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_PROTEGEE, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
        }
        return $this->_referenceObjectProtected;
    }

    /**
     * ID de référence de l'objet de dissimulation des membres.
     *
     * @var string
     */
    private $_referenceObjectObfuscated = '';

    /**
     * Calcule et retourne la référence de l'objet de dissimulation des membres.
     *
     * @return string
     */
    public function getReferenceObjectObfuscated(): string
    {
        if ($this->_referenceObjectObfuscated == '') {
            $this->_referenceObjectObfuscated = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_CONVERSATION_DISSIMULEE, References::REFERENCE_CRYPTO_HASH_ALGORITHM);
        }
        return $this->_referenceObjectObfuscated;
    }


    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#oc">OC / Conversation</a>
            <ul>
                <li><a href="#oco">OCO / Objet</a></li>
                <li><a href="#ocn">OCN / Nommage</a></li>
                <li><a href="#ocp">OCP / Protection</a></li>
                <li><a href="#ocd">OCD / Dissimulation</a></li>
                <li><a href="#ocf">OCF / Fermeture</a></li>
                <li><a href="#ocpm">OCPM / Protection des membres</a></li>
                <li><a href="#ocdm">OCDM / Dissimulation des membres</a></li>
                <li><a href="#ocl">OCL / Liens</a></li>
                <li><a href="#occ">OCC / Création</a></li>
                <li><a href="#ocs">OCS / Stockage</a></li>
                <li><a href="#oct">OCT / Transfert</a></li>
                <li><a href="#ocr">OCR / Réservation</a></li>
                <li><a href="#ocio">OCIO / Implémentation des Options</a></li>
                <li><a href="#ocia">OCIA / Implémentation des Actions</a></li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h2 id="oc">OC / Conversation</h2>
        <p>La conversation est un objet définit comme tel, c’est à dire qu’il doit avoir un type mime <code>nebule/objet/conversation</code>.
        </p>
        <p>Fondamentalement, la conversation est un groupe de plusieurs objets et est donc géré de la même façon qu'un
            groupe. Ainsi, un membre de la conversation n'est pas une entité mais un message, une entité est dite entité
            contributrice. Certains liens générés sont communs avec ceux des groupes et si un objet est marqué comme
            groupe et conversation, ses membres seront les mêmes.</p>
        <p>La conversation va permettre de regrouper, et donc d’associer et de retrouver, des message. L’objet de la
            conversation va avoir des liens vers d’autres objets afin de les définir comme messages (membres) de la
            conversation.</p>
        <p>Une conversation peut avoir des liens de membres vers des objets définis aussi comme conversations. Ces
            objets peuvent être vus comme des sous-conversations. La bibliothèque <em>nebule</em> ne prend en compte
            qu’un seul niveau de conversation, c’est à dire que les sous-conversations sont gérés simplement comme des
            objets.</p>

        <h3 id="oco">OCO / Objet</h3>
        <p>L’objet de la conversation peut être de deux natures.</p>
        <p>Soit c’est un objet existant qui est en plus définit comme une conversation. L’objet peut avoir un contenu et
            a sûrement d’autres types mime propres. Dans ce cas l’identifiant de conversation est l’identifiant de
            l’objet utilisé.</p>
        <p>Soit c’est un objet dit virtuel qui n’a pas et n’aura jamais de contenu. Cela n’empêche pas qu’il puisse
            avoir d’autres types mime. Dans ce cas l’identifiant de conversation a une forme commune aux objets
            virtuels.</p>
        <p>La création d’un objet virtuel comme conversation se fait en créant pour identifiant la concaténation d’un
            hash (<em>sha256</em>) d’une valeur aléatoire de 128bits et de la chaîne <code>006e6562756c652f6f626a65742f636f6e766572736174696f6e</code>.
            Soit un identifiant complet de la taille de 116 caractères.</p>

        <h3 id="ocn">OCN / Nommage</h3>
        <p>Le nommage à l’affichage du nom des conversations repose sur une seule propriété :</p>
        <ol>
            <li>nom</li>
        </ol>
        <p>Cette propriété est matérialisée par un lien de type <code>l</code> avec comme objets méta :</p>
        <ol>
            <li><code>nebule/objet/nom</code></li>
        </ol>
        <p>Par convention, voici le nommage des conversations :</p>
        <ul>
            <li><code>nom</code></li>
        </ul>

        <h3 id="ocp">OCP / Protection</h3>
        <p>En tant que tel la conversation ne nécessite pas de protection puisque soit l’objet de la conversation n’a
            pas de contenu soit on n’utilise pas son contenu directement.</p>
        <p>La gestion de la protection est désactivée dans une instance de conversation.</p>

        <h3 id="ocd">OCD / Dissimulation</h3>
        <p>La conversation peut en tant que tel être dissimulée, c’est à dire que l’on dissimule l’existence de la
            conversation, donc sa création.</p>
        <p>La dissimulation devrait se faire lors de la création de la conversation.</p>
        <p>L’annulation de la dissimulation d’une conversation revient à révéler le lien de création de la
            conversation.</p>
        <p>La dissimulation peut se (re)faire après la création de la conversation mais son efficacité est incertaine si
            les liens de création ont déjà été diffusés. En cas de dissimulation à posteriori, il faut générer un lien
            de suppression de la conversation puis générer un nouveau lien dissimulée de création de la conversation à
            une date postérieure au lien de suppression.</p>

        <h3 id="ocf">OCF / Fermeture</h3>
        <p>La conversation va contenir un certain nombre de membres (messages) ajouter par différentes entités. Il est
            possible de limiter le nombre des membres à utiliser dans une conversation en restreignant artificiellement
            les entités contributrices de la conversation. Ainsi on marque la conversation comme fermée et on filtre sur
            les membres uniquement ajoutés par des entités définies.</p>
        <p>Dans nebule, l’objet réservé <code>nebule/objet/conversation/fermee</code> est dédié à la gestion des
            conversations fermées. Une conversation est considéré fermée quand on a l’objet réservé en champs méta,
            l’entité en cours en champs cible et l’ID de la conversation en champs source. Si au lieu d’utiliser
            l’entité en cours pour le champs cible on utilise une autre entité, cela revient à prendre aussi en compte
            ses liens dans la conversation fermée. Dans ce cas c’est une entité contributrice.</p>
        <p>C’est uniquement un affichage de la conversation que l’on a et non la suppression de membres de la
            conversation.</p>
        <p>Lorsque l’on a marqué une conversation comme fermée, on doit explicitement ajouter des entités que l’on veut
            voir contribuer.</p>
        <p>Il est possible indéfiniment de fermer et ouvrir une conversation.</p>
        <p>Il est possible de fermer une conversation qui ne nous appartient afin par exemple de la rendre plus
            lisible.</p>
        <p>Lorsque l’on a marqué une conversation comme fermée, on peut voir la liste des entités explicitement que l’on
            veut voir contribuer. On peut aussi voir les entités que les autres entités veulent voir contribuer et
            décider ou non de les ajouter.</p>
        <p>Lorsqu’une conversation est marqué comme fermée, l’interface de visualisation de la conversation peut
            permettre de la visualiser temporairement comme une conversation ouvert.</p>
        <p>Le traitement des liens de fermeture d’une conversation doit être fait exclusivement avec le traitement
            social <em>self</em>.</p>

        <h4 id="ocpm">OCPM / Protection des membres</h4>
        <p>La conversation va contenir un certain nombre de membres (messages) ajouter par différentes entités. Il est
            possible de limiter la visibilité du contenu des membres utilisés dans une conversation en restreignant
            artificiellement les entités destinataires qui pourront les consulter.</p>
        <p>Dans nebule, l’objet réservé <code>nebule/objet/conversation/protegee</code> est dédié à la gestion des
            conversations protégées. Une conversation est considéré protégée quand on a l’objet réservé en champs méta,
            l’entité en cours en champs cible et l’ID de la conversation en champs source. Si au lieu d’utiliser
            l’entité en cours pour le champs cible on utilise une autre entité, cela revient à partager aussi les objets
            protégées créés pour cette conversation. Cela ne repartage pas la protection des objets déjà protégés.</p>
        <p>Dans une conversation marqué protégée, tous les nouveaux membres ajoutés à la conversation ont leur contenu
            protégé. Ce n’est valable que pour l’entité en cours et éventuellement celles qui lui font confiance.</p>
        <p>Lorsque l’on a marqué une conversation comme protégée, on doit explicitement ajouter des entités avec qui on
            veut partager les contenus.</p>
        <p>Il est possible indéfiniment de protéger et déprotéger une conversation.</p>
        <p>Il est possible de protéger une conversation qui ne nous appartient afin de masquer le contenu des membres
            que l’on y ajoute.</p>
        <p>Lorsque l’on a marqué une conversation comme protégée, on peut voir la liste des entités explicitement a qui
            on veut partager les contenus. On peut aussi voir les entités a qui les autres entités veulent partager les
            contenus et décider ou non de les ajouter.</p>
        <p>Le traitement des liens de protection d’une conversation doit être fait exclusivement avec le traitement
            social <em>self</em>.</p>

        <h4 id="ocdm">OCDM / Dissimulation des membres</h4>
        <p>La conversation va contenir un certain nombre de membres (messages) ajouter par différentes entités. Il est
            possible de limiter la visibilité de l’appartenance des membres utilisés dans une conversation en
            restreignant artificiellement les entités destinataires qui pourront les voir.</p>
        <p>Dans nebule, l’objet réservé <code>nebule/objet/conversation/dissimulee</code> est dédié à la gestion des
            conversations dissimulées. Une conversation est considéré dissimulée quand on a l’objet réservé en champs
            méta, l’entité en cours en champs cible et l’ID de la conversation en champs source. Si au lieu d’utiliser
            l’entité en cours pour le champs cible on utilise une autre entité, cela revient à partager aussi les objets
            dissimulées créés pour cette conversation. Cela ne repartage pas la dissimulation des objets déjà
            dissimulés.</p>
        <p>Dans une conversation marqué dissimulée, tous les nouveaux membres ajoutés à la conversation sont dissimulés.
            Ce n’est valable que pour l’entité en cours et éventuellement celles qui lui font confiance.</p>
        <p>Lorsque l’on a marqué une conversation comme dissimulée, on doit explicitement ajouter des entités avec qui
            on veut partager les membres de la conversation.</p>
        <p>Il est possible indéfiniment de dissimuler et dé-dissimuler une conversation.</p>
        <p>Il est possible de dissimuler une conversation qui ne nous appartient afin de masquer le contenu des membres
            que l’on y ajoute.</p>
        <p>Lorsque l’on a marqué une conversation comme dissimulée, on peut voir la liste des entités explicitement a
            qui on veut partager les contenus. On peut aussi voir les entités a qui les autres entités veulent partager
            les contenus et décider ou non de les ajouter.</p>
        <p>Le traitement des liens de dissimulation d’une conversation doit être fait exclusivement avec le traitement
            social <em>self</em>.</p>

        <h3 id="ocl">OCL / Liens</h3>
        <p>Une entité doit être déverrouillée pour la création de liens.</p>
        <ul>
            <li>Le lien de définition de la conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : hash(‘nebule/objet/conversation’)</li>
                    <li>méta : hash(‘nebule/objet/type’)</li>
                </ul>
            </li>
            <li>Le lien de suppression d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : hash(‘nebule/objet/conversation’)</li>
                    <li>méta : hash(‘nebule/objet/type’)</li>
                </ul>
            </li>
            <li>Le lien de suivi de la conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de l'entité, par défaut l’entité signataire</li>
                    <li>cible : ID de la conversation</li>
                    <li>méta : hash(‘nebule/objet/conversation/suivie’)</li>
                </ul>
            </li>
            <li>Le lien de suppression de suivi de la conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID de l'entité, par défaut l’entité signataire</li>
                    <li>cible : ID de la conversation</li>
                    <li>méta : hash(‘nebule/objet/conversation/suivie’)</li>
                </ul>
            </li>
            <li>Le lien de dissimulation d’une conversation est le lien de définition caché dans une lien de type <code>c</code>.
            </li>
            <li>Le lien de rattachement d’un membre (message) de la conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’objet</li>
                    <li>méta : ID de la conversation</li>
                </ul>
            </li>
            <li>Le lien de suppression de rattachement d’un membre (message) de la conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’objet</li>
                    <li>méta : ID de la conversation</li>
                </ul>
            </li>
            <li>Le lien de fermeture d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire.</li>
                    <li>méta : hash(‘nebule/objet/conversation/fermee’)</li>
                </ul>
            </li>
            <li>Le lien de suppression de fermeture d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire.</li>
                    <li>méta : hash(‘nebule/objet/conversation/fermee’)</li>
                </ul>
            </li>
            <li>Le lien de protection des membres d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire.</li>
                    <li>méta : hash(‘nebule/objet/conversation/protegee’)</li>
                </ul>
            </li>
            <li>Le lien de suppression de protection des membres d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire.</li>
                    <li>méta : hash(‘nebule/objet/conversation/protegee’)</li>
                </ul>
            </li>
            <li>Le lien de dissimulation des membres d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire.</li>
                    <li>méta : hash(‘nebule/objet/conversation/dissimulee’)</li>
                </ul>
            </li>
            <li>Le lien de suppression de dissimulation des membres d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>x</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire.</li>
                    <li>méta : hash(‘nebule/objet/conversation/dissimulee’)</li>
                </ul>
            </li>
        </ul>

        <h3 id="occ">OCC / Création</h3>
        <p>Liste des liens à générer lors de la création d'une conversation :</p>
        <ul>
            <li>Le lien de définition de la conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : hash(‘nebule/objet/conversation’)</li>
                    <li>méta : hash(‘nebule/objet/type’)</li>
                </ul>
            </li>
            <li>Le lien de nommage de la conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : hash(nom de la conversation)</li>
                    <li>méta : hash(‘nebule/objet/nom’)</li>
                </ul>
            </li>
            <li>Le lien de suivi de la conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de l'entité, par défaut l’entité signataire</li>
                    <li>cible : ID de la conversation</li>
                    <li>méta : hash(‘nebule/objet/conversation/suivie’)</li>
                </ul>
            </li>
        </ul>
        <p>On peut aussi au besoin ajouter ces liens :</p>
        <ul>
            <li>Le lien de fermeture d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/conversation/ferme’)</li>
                </ul>
            </li>
            <li>Le lien de protection des membres d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/conversation/protege’)</li>
                </ul>
            </li>
            <li>Le lien de dissimulation des membres d’une conversation :
                <ul>
                    <li>Signature du lien</li>
                    <li>Identifiant du signataire</li>
                    <li>Horodatage</li>
                    <li>action : <code>l</code></li>
                    <li>source : ID de la conversation</li>
                    <li>cible : ID de l’entité, par défaut l’entité signataire</li>
                    <li>méta : hash(‘nebule/objet/conversation/dissimule’)</li>
                </ul>
            </li>
        </ul>

        <h3 id="ocs">OCS / Stockage</h3>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <h3 id="oct">OCT / Transfert</h3>
        <p>A faire...</p>

        <h3 id="ocr">OCR / Réservation</h3>
        <p>Les objets réservés spécifiquement pour les conversations :</p>
        <ul>
            <li>nebule/objet/conversation</li>
            <li>nebule/objet/conversation/fermee</li>
            <li>nebule/objet/conversation/protegee</li>
            <li>nebule/objet/conversation/dissimulee</li>
        </ul>

        <h4 id="ocio">OCIO / Implémentation des Options</h4>
        <p>Les options spécifiques aux conversations :</p>
        <ul>
            <li><code>permitWriteConversation</code> : permet toute écriture de conversations.</li>
        </ul>
        <p>Les options qui ont une influence sur les conversations :</p>
        <ul>
            <li><code>permitWrite</code> : permet toute écriture d’objets et de liens ;</li>
            <li><code>permitWriteObject</code> : permet toute écriture d’objets ;</li>
            <li><code>permitCreateObject</code> : permet la création locale d’objets ;</li>
            <li><code>permitWriteLink</code> : permet toute écriture de liens ;</li>
            <li><code>permitCreateLink</code> : permet la création locale de liens.</li>
        </ul>
        <p>Il est nécessaire à la création d’une conversation de pouvoir écrire des objets comme le nom de la
            conversation, même si l’objet de la conversation ne sera pas créé.</p>

        <h4 id="ocia">OCIA / Implémentation des Actions</h4>
        <p>Dans les actions, on retrouve les chaînes :</p>
        <ul>
            <li><code>creagrp</code> : Crée une conversation.</li>
            <li><code>creagrpnam</code> : Nomme la conversation à créer.</li>
            <li><code>creagrpcld</code> : Marque fermée la conversation à créer.</li>
            <li><code>creagrpobf</code> : Dissimule les liens de la conversation à créer.</li>
            <li><code>actdelgrp</code> : Supprime une conversation.</li>
            <li><code>actaddtogrp</code> : Ajoute l’objet courant membre à conversation.</li>
            <li><code>actremtogrp</code> : Retire l’objet courant membre d’une conversation.</li>
            <li><code>actadditogrp</code> : Ajoute un objet membre à la conversation courant.</li>
            <li><code>actremitogrp</code> : Retire un objet membre de la conversation courant.</li>
        </ul>

        <?php
    }
}



// ========================================================================================
//   406_currency.php
//   020250218163844
//   953292a645a7ab7956e5c44bcad55c468036c28fead97b48d51468ff460251e6.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe Currency.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant l'ID d'une monnaie ou 'new' ;
 * - un tableau des paramètres de la nouvelle monnaie.
 *
 * L'ID d'une monnaie est forcément un texte en hexadécimal.
 *
 * Si une erreur survient lors de la lecture de la monnaie ou lors de la création, assigne l'ID 0.
 * ------------------------------------------------------------------------------------------
 */
class Currency extends Node implements nodeInterface
{
    const SESSION_SAVED_VARS = array(
        '_id',
        '_fullName',
        '_cachePropertyLink',
        '_cachePropertiesLinks',
        '_cachePropertyID',
        '_cachePropertiesID',
        '_cacheProperty',
        '_cacheProperties',
        '_cacheMarkDanger',
        '_cacheMarkWarning',
        '_cacheMarkProtected',
        '_idProtected',
        '_idUnprotected',
        '_idProtectedKey',
        '_idUnprotectedKey',
        '_markProtectedChecked',
        '_cacheCurrentEntityUnlocked',
        '_usedUpdate',
        '_isEntity',
        '_isGroup',
        '_isConversation',
        '_isCurrency',
        '_isTokenPool',
        '_isToken',
        '_isWallet',
        '_properties',
        '_propertiesInherited',
        '_propertiesForced',
        '_seed',
        '_inheritedCID',
        '_inheritedPID',
    );

    protected array $_properties = array();
    protected array $_propertiesInherited = array();
    protected array $_propertiesForced = array();

    /**
     * Tableau des noms des propriétés disponibles.
     *
     * Le premier niveau définit les différentes catégories d'objets.
     *
     * Le second niveau nomme la propriété en interne et dispose de sous-propriétés :
     * - key : le nom publique de la clé pour l'objet.
     * - shortname : le nom de la clé pour les échangent en HTML, sans ambiguité par rapport au type d'objet.
     * - type : typage de la valeur attendu.
     * - info : le code de renvoi dans la page de documentation.
     * - force : valeur forcée dans le code, donc non modifiable lors de la création de l'objet.
     * - forceable : la clé:valeur peut être forcée dans l'objet généré. Sinon la valeur peut être surchargée par un lien.
     * - inherite : la valeur est hérité et n'est pas écrite.
     * - calculate : valeur calculée à postériori. Si présent, est équivalent à true.
     * - multivalue : clé à valeurs multiples séparées par des espaces. Si présent, est équivalent à true.
     * - limit : limit de la valeur attendu. Utilisé par les filtres de netoyage des valeurs.
     * - meta : l'objet à utiliser en temps que meta pour les liens.
     * - display : la taille du champs à utiliser pour la saisie de la valeur, non limitatif sur la taille de la valeur saisie.
     * - select : réduit le nombre de réponses possibles via un menu déroulant de taille fixe. Une seule réponse peut être sélectionnée.
     * - checkbox : permet une sélection multiple sur une liste. La valeur manipulée est une chaîne séparée par des espaces.
     *
     * @var array
     */
    protected array $_propertiesList = array(
        'currency' => array(
            'CurrencyHaveContent' => array('key' => 'HCT', 'shortname' => 'chct', 'type' => 'boolean', 'info' => 'omcphct', 'force' => 'true',),
            'CurrencyType' => array('key' => 'TYP', 'shortname' => 'ctyp', 'type' => 'string', 'info' => 'omcptyp', 'limit' => '32', 'display' => '16', 'force' => 'cryptocurrency',),
            'CurrencySerialID' => array('key' => 'SID', 'shortname' => 'csid', 'type' => 'hexadecimal', 'info' => 'omcpsid', 'limit' => '1024', 'display' => '64',),
            'CurrencyCapacities' => array('key' => 'CAP', 'shortname' => 'ccap', 'type' => 'string', 'info' => 'omcpcap', 'limit' => '1024', 'display' => '128', 'force' => 'TYP MOD SID CAP AID MID NAM UNI DTA DTC DTD COM CPR IDM IDR IDP VMD VID TRS CID PID FID BID VAL CLB CLD SVC TID', 'multivalue' => true,),
            'CurrencyExploitationMode' => array('key' => 'MOD', 'shortname' => 'cmod', 'type' => 'string', 'info' => 'omcpmod', 'limit' => '3', 'display' => '10', 'force' => 'CTL',),
            'CurrencyAutorityID' => array('key' => 'AID', 'shortname' => 'caid', 'type' => 'hexadecimal', 'info' => 'omcpaid', 'limit' => '1024', 'display' => '64', 'force' => '',),
            'CurrencyCurrencyName' => array('key' => 'NAM', 'shortname' => 'cnam', 'type' => 'string', 'info' => 'omcpnam', 'limit' => '256', 'display' => '32', 'forceable' => true,),
            'CurrencyCurrencyUnit' => array('key' => 'UNI', 'shortname' => 'cuni', 'type' => 'string', 'info' => 'omcpuni', 'limit' => '3', 'display' => '6', 'forceable' => true,),
            'CurrencyDateAuthorityID' => array('key' => 'DTA', 'shortname' => 'cdta', 'type' => 'hexadecimal', 'info' => 'omcpdta', 'limit' => '1024', 'display' => '64', 'forceable' => true,),
            'CurrencyDateCreate' => array('key' => 'DTC', 'shortname' => 'cdtc', 'type' => 'date', 'info' => 'omcpdtc', 'display' => '32', 'forceable' => true,),
            'CurrencyDateDelete' => array('key' => 'DTD', 'shortname' => 'cdtd', 'type' => 'date', 'info' => 'omcpdtd', 'display' => '32', 'forceable' => true,),
            'CurrencyComment' => array('key' => 'COM', 'shortname' => 'ccom', 'type' => 'string', 'info' => 'omcpcom', 'limit' => '4096', 'display' => '128', 'forceable' => true,),
            'CurrencyCopyright' => array('key' => 'CPR', 'shortname' => 'ccpr', 'type' => 'string', 'info' => 'omcpcpr', 'limit' => '1024', 'display' => '128', 'forceable' => true,),
            'CurrencyInflateMode' => array('key' => 'IDM', 'shortname' => 'cidm', 'type' => 'string', 'info' => 'omcpidm', 'limit' => '10', 'display' => '12', 'forceable' => true, 'select' => array('disabled', 'creation', 'transaction'),),
            'CurrencyInflateRate' => array('key' => 'IDR', 'shortname' => 'cidr', 'type' => 'number', 'info' => 'omcpidr', 'limit' => '2', 'display' => '10', 'forceable' => true,),
            'CurrencyInflatePeriod' => array('key' => 'IDP', 'shortname' => 'cidp', 'type' => 'number', 'info' => 'omcpidp', 'limit' => '1048576', 'display' => '10', 'forceable' => true,),
            'CurrencyValidationMode' => array('key' => 'VMD', 'shortname' => 'cvmd', 'type' => 'string', 'info' => 'omcpvmd', 'limit' => '10', 'display' => '12', 'forceable' => true, 'select' => array('central'),),
            'CurrencyValidationID' => array('key' => 'VID', 'shortname' => 'cvid', 'type' => 'hexadecimal', 'info' => 'omcpvid', 'limit' => '1024', 'display' => '64', 'forceable' => true, 'multivalue' => true,),
            'CurrencyManageID' => array('key' => 'MID', 'shortname' => 'cmid', 'type' => 'hexadecimal', 'info' => 'omcpmid', 'limit' => '1024', 'display' => '64', 'forceable' => true, 'checkbox' => '', 'multivalue' => true,),
            'CurrencyTransacMethods' => array('key' => 'TRS', 'shortname' => 'ctrs', 'type' => 'string', 'info' => 'omcptrs', 'limit' => '1024', 'display' => '128', 'force' => 'LNS', 'multivalue' => true,),
            'CurrencyID' => array('key' => 'CID', 'shortname' => 'ccid', 'type' => 'hexadecimal', 'info' => 'omcpcid', 'limit' => '1024', 'display' => '64', 'calculate' => true,),
        ),
        'tokenpool' => array(
            'PoolHaveContent' => array('key' => 'HCT', 'shortname' => 'phct', 'type' => 'boolean', 'info' => 'omgcphct', 'force' => 'true',),
            'PoolType' => array('key' => 'TYP', 'shortname' => 'ptyp', 'type' => 'string', 'info' => 'omgcptyp', 'limit' => '32', 'display' => '16', 'force' => 'tokenpool',),
            'PoolSerialID' => array('key' => 'SID', 'shortname' => 'psid', 'type' => 'hexadecimal', 'info' => 'omgcpsid', 'limit' => '1024', 'display' => '64',),
            'PoolCapacities' => array('key' => 'CAP', 'shortname' => 'pcap', 'type' => 'string', 'info' => 'omgcpcap', 'display' => '128', 'inherite' => 'currency', 'multivalue' => true,),
            'PoolCurrencyID' => array('key' => 'CID', 'shortname' => 'pcid', 'type' => 'hexadecimal', 'info' => 'omgcpcid', 'limit' => '1024', 'display' => '64', 'force' => '',),
            'PoolForgeID' => array('key' => 'FID', 'shortname' => 'pfid', 'type' => 'hexadecimal', 'info' => 'omgcpfid', 'limit' => '1024', 'display' => '64', 'force' => '',),
            'PoolDateAuthorityID' => array('key' => 'DTA', 'shortname' => 'pdta', 'type' => 'hexadecimal', 'info' => 'omgcpdta', 'display' => '64', 'inherite' => 'currency',),
            'PoolDateCreate' => array('key' => 'DTC', 'shortname' => 'pdtc', 'type' => 'date', 'info' => 'omgcpdtc', 'display' => '32', 'forceable' => true,),
            'PoolDateDelete' => array('key' => 'DTD', 'shortname' => 'pdtd', 'type' => 'date', 'info' => 'omgcpdtd', 'display' => '32', 'forceable' => true,),
            'PoolComment' => array('key' => 'COM', 'shortname' => 'pcom', 'type' => 'string', 'info' => 'omgcpcom', 'limit' => '4096', 'display' => '128', 'forceable' => true,),
            'PoolCopyright' => array('key' => 'CPR', 'shortname' => 'pcpr', 'type' => 'string', 'info' => 'omgcpcpr', 'limit' => '1024', 'display' => '128', 'forceable' => true,),
            'PoolManageID' => array('key' => 'MID', 'shortname' => 'pmid', 'type' => 'hexadecimal', 'info' => 'omgcpmid', 'limit' => '1024', 'display' => '64', 'forceable' => true, 'checkbox' => '', 'multivalue' => true,),
            'PoolID' => array('key' => 'PID', 'shortname' => 'ppid', 'type' => 'hexadecimal', 'info' => 'omgcppid', 'limit' => '1024', 'display' => '64', 'calculate' => true,),
        ),
        'token' => array(
            'TokenHaveContent' => array('key' => 'HCT', 'shortname' => 'thct', 'type' => 'boolean', 'info' => 'omjcphct', 'force' => 'true',),
            'TokenType' => array('key' => 'TYP', 'shortname' => 'ttyp', 'type' => 'string', 'info' => 'omjcptyp', 'limit' => '32', 'display' => '16', 'force' => 'cryptoken',),
            'TokenSerialID' => array('key' => 'SID', 'shortname' => 'tsid', 'type' => 'hexadecimal', 'info' => 'omjcpsid', 'limit' => '1024', 'display' => '64',),
            'TokenCapacities' => array('key' => 'CAP', 'shortname' => 'tcap', 'type' => 'string', 'info' => 'omjcpcap', 'display' => '128', 'inherite' => 'currency', 'multivalue' => true,),
            'TokenCurrencyID' => array('key' => 'CID', 'shortname' => 'tcid', 'type' => 'hexadecimal', 'info' => 'omjcpcid', 'limit' => '1024', 'display' => '64', 'force' => '',),
            'TokenForgeID' => array('key' => 'FID', 'shortname' => 'tfid', 'type' => 'hexadecimal', 'info' => 'omjcpfid', 'limit' => '1024', 'display' => '64', 'force' => '',),
            'TokenPoolID' => array('key' => 'PID', 'shortname' => 'tpid', 'type' => 'hexadecimal', 'info' => 'omjcppid', 'limit' => '1024', 'display' => '64', 'inherite' => 'pool',),
            'TokenBlockID' => array('key' => 'BID', 'shortname' => 'tbid', 'type' => 'hexadecimal', 'info' => 'omjcpbid', 'limit' => '1024', 'display' => '64', 'forceable' => true,),
            'TokenCurrencyName' => array('key' => 'NAM', 'shortname' => 'tnam', 'type' => 'string', 'info' => 'omjcpnam', 'display' => '32', 'inherite' => 'currency',),
            'TokenCurrencyUnit' => array('key' => 'UNI', 'shortname' => 'tuni', 'type' => 'string', 'info' => 'omjcpuni', 'display' => '6', 'inherite' => 'currency',),
            'TokenValue' => array('key' => 'VAL', 'shortname' => 'tval', 'type' => 'number', 'info' => 'omjcpval', 'limit' => '1048576', 'display' => '10', 'forceable' => true,),
            'TokenService' => array('key' => 'SVC', 'shortname' => 'tsvc', 'type' => 'string', 'info' => 'omjcpsvc', 'limit' => '1024', 'display' => '128', 'forceable' => true,),
            'TokenDateAuthorityID' => array('key' => 'DTA', 'shortname' => 'tdta', 'type' => 'hexadecimal', 'info' => 'omjcpdta', 'display' => '64', 'inherite' => 'currency',),
            'TokenDateCreate' => array('key' => 'DTC', 'shortname' => 'tdtc', 'type' => 'date', 'info' => 'omjcpdtc', 'display' => '32', 'forceable' => true,),
            'TokenDateDelete' => array('key' => 'DTD', 'shortname' => 'tdtd', 'type' => 'date', 'info' => 'omjcpdtd', 'display' => '32', 'forceable' => true,),
            'TokenComment' => array('key' => 'COM', 'shortname' => 'tcom', 'type' => 'string', 'info' => 'omjcpcom', 'limit' => '4096', 'display' => '128', 'forceable' => true,),
            'TokenCopyright' => array('key' => 'CPR', 'shortname' => 'tcpr', 'type' => 'string', 'info' => 'omjcpcpr', 'limit' => '1024', 'display' => '128', 'forceable' => true,),
            'TokenInflateMode' => array('key' => 'IDM', 'shortname' => 'tidm', 'type' => 'string', 'info' => 'omjcpidm', 'display' => '12', 'inherite' => 'currency',),
            'TokenInflateRate' => array('key' => 'IDR', 'shortname' => 'tidr', 'type' => 'number', 'info' => 'omjcpidr', 'display' => '10', 'inherite' => 'currency',),
            'TokenInflatePeriod' => array('key' => 'IDP', 'shortname' => 'tidp', 'type' => 'number', 'info' => 'omjcpidp', 'display' => '10', 'inherite' => 'currency',),
            'TokenCancelable' => array('key' => 'CLB', 'shortname' => 'tclb', 'type' => 'boolean', 'info' => 'omjcpclb', 'forceable' => true,),
            'TokenCanceled' => array('key' => 'CLD', 'shortname' => 'tcld', 'type' => 'boolean', 'info' => 'omjcpcld', 'force' => 'false',),
            'TokenTransacMethods' => array('key' => 'TRS', 'shortname' => 'ttrs', 'type' => 'string', 'info' => 'omjcptrs', 'display' => '128', 'inherite' => 'currency', 'multivalue' => true,),
            'TokenID' => array('key' => 'TID', 'shortname' => 'ttid', 'type' => 'hexadecimal', 'info' => 'omjcptid', 'limit' => '1024', 'display' => '64', 'calculate' => true,),
        ),
    );

    protected string $_seed = '';
    protected ?Currency $_inheritedCID = null;
    protected ?TokenPool $_inheritedPID = null;
    protected array $_CAParray = array();

    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitCurrency'))
        {
            $this->_id = '0';
            $this->_isNew = false;
            return;
        }
        if (is_a($this->_entitiesInstance, 'Nebule\Library\Node'))
            $this->_cacheCurrentEntityUnlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();

        if ($this->_id != '0')
            $this->_loadCurrency($this->_id);
    }

    /**
     *  Chargement d'une monnaie existant.
     *
     * @param string $id
     */
    private function _loadCurrency(string $id): void
    {
        // Vérifie que c'est bien un objet.
        if (!Node::checkNID($id)
            || !$this->_ioInstance->checkLinkPresent($id)
            || !$this->_configurationInstance->getOptionAsBoolean('permitCurrency')
        ) {
            $id = '0';
        }

        $this->_id = $id;
        $this->_metrologyInstance->addLog('Load currency ' . $id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        // On ne recherche pas les paramètres si ce n'est pas une monnaie.
        if ($this->getIsCurrency('myself')) {
            $this->setAID();
            $this->setFID('0');
        }

        // Vérifie la monnaie.
        $TYP = $this->_getParamFromObject('TYP', (int)$this->_propertiesList['currency']['CurrencyType']['limit']);
        $SID = $this->_getParamFromObject('SID', (int)$this->_propertiesList['currency']['CurrencySerialID']['limit']);
        $CAP = $this->_getParamFromObject('CAP', (int)$this->_propertiesList['currency']['CurrencyCapacities']['limit']);
        $MOD = $this->_getParamFromObject('MOD', (int)$this->_propertiesList['currency']['CurrencyExploitationMode']['limit']);
        $AID = $this->_getParamFromObject('AID', (int)$this->_propertiesList['currency']['CurrencyAutorityID']['limit']);
        if ($TYP == ''
            || $SID == ''
            || $CAP == ''
            || $MOD == ''
            || $AID == ''
        ) {
            $this->_id = '0';
        } else {
            $this->_propertiesList['currency']['CurrencyID']['force'] = $id;
            $this->_properties['CID'] = $id;
        }
        $this->_propertiesForced['TYP'] = true;
        $this->_propertiesForced['SID'] = true;
        $this->_propertiesForced['CAP'] = true;
        $this->_propertiesForced['MOD'] = true;
        $this->_propertiesForced['AID'] = true;
        $this->_propertiesForced['CID'] = true;
    }

    /**
     * Création d'une nouvelle monnaie.
     *
     * @param array $param
     * @param bool  $protected
     * @param bool  $obfuscated
     * @return boolean
     */
    public function setNewCurrency(array $param, bool $protected = false, bool $obfuscated = false): bool
    {
        $this->_metrologyInstance->addLog('Ask create currency', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        if (!$this->_isNew
            || sizeof($param) == 0
            || ( get_class($this) != 'Currency'
                && get_class($this) != 'Nebule\Library\Currency'
            )
        )
            return false;

        // Vérifie que l'on puisse créer une monnaie.
        if ($this->_configurationInstance->getOptionAsBoolean('permitWrite')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            && $this->_configurationInstance->getOptionAsBoolean('permitCurrency')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteCurrency')
            && $this->_configurationInstance->getOptionAsBoolean('permitCreateCurrency')
            && $this->_entitiesInstance->getCurrentEntityIsUnlocked()
        ) {
            // Génère la nouvelle monnaie.
            $this->_id = $this->_createCurrency($param, $protected, $obfuscated);

            // Si la génération s'est mal passée.
            if ($this->_id == '0') {
                $this->_metrologyInstance->addLog('Create currency error on generation', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
                $this->_id = '0';
                return false;
            }
        } else {
            $this->_metrologyInstance->addLog('Create currency error not autorized', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
            $this->_id = '0';
            return false;
        }
        return true;
    }



    // Désactivation des fonctions de protection et autres.

    /**
     * Fonction pour les objets, désactivée pour les monnaies.
     *
     * @return boolean
     */
    public function getReloadMarkProtected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les monnaies.
     *
     * @return string
     */
    public function getProtectedID(): string
    {
        return '0';
    }

    /**
     * Fonction pour les objets, désactivée pour les monnaies.
     *
     * @return string
     */
    public function getUnprotectedID(): string
    {
        return $this->_id;
    }

    /**
     * Fonction pour les objets, désactivée pour les monnaies.
     *
     * @param bool $obfuscated
     * @return boolean
     */
    public function setProtected(bool $obfuscated = false): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les monnaies.
     *
     * @return boolean
     */
    public function setUnprotected(): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les monnaies.
     *
     * @param string|Entity $entity
     * @return boolean
     */
    public function setProtectedTo($entity): bool
    {
        return false;
    }

    /**
     * Fonction pour les objets, désactivée pour les monnaies.
     *
     * @return array
     */
    public function getProtectedTo(): array
    {
        return array();
    }


    /**
     * Nettoye la table des paramètres en entrée avant exploitation.
     *
     * @param array $param
     * @return void
     * @todo faire le forcage de valeurs.
     *
     * array( 'currency' => array(
     * ...,
     * 'CurrencyType' => array(
     * 'key' => 'TYP',
     * 'shortname' => 'ctyp',
     * 'type' => 'string',
     * 'info' => 'omcptyp',
     * 'limit' => '32',
     * 'force' => 'cryptocurrency', ),
     * 'display' => '64',
     * 'forceable' => true,
     * ...,
     * ),
     * ...,
     * )
     *
     */
    protected function _normalizeInputParam(&$param): void
    {
        foreach ($param as $key => $value) {
            foreach ($this->_propertiesList as $type => $nameArray) {
                // Si ce n'est pas le type d'objet en cours de création, continue.
                if (strtolower(get_class($this)) != $type) {
                    continue;
                }

                foreach ($nameArray as $name => $propArray) {
                    if ($key == $name) {
                        $param[$key] = null;

                        if (isset($propArray['force'])) {
                            // Détecte une tentative de modifier une valeur forçée.
                            if ($value != $propArray['force']
                                && $value != ''
                                && $value != null
                            ) {
                                $this->_metrologyInstance->addLog(get_class($this) . ' - Try to overwrite forced value ' . $propArray['key'] . ':' . $value, Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
                            }

                            $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize force ' . $propArray['key'] . ':' . $propArray['force'], Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                            if ($propArray['type'] == 'boolean') {
                                if ($propArray['force'] == 'true') {
                                    $param[$key] = true;
                                } else {
                                    $param[$key] = false;
                                }
                            } elseif ($propArray['type'] == 'number') {
                                $param[$key] = (int)$propArray['force'];
                            } else {
                                $param[$key] = $propArray['force'];
                            }
                        } else {
                            if ($propArray['type'] == 'boolean'
                                && is_string($value)
                            ) {
                                $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize bool ' . $key . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                                if ($value == 'true') {
                                    $param[$key] = true;
                                }
                                if ($value == 'false') {
                                    $param[$key] = false;
                                }
                                break 2;
                            }

                            if ($propArray['type'] == 'string') {
                                $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize string ' . $key . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                                if (isset($propArray['limit'])
                                    && strlen($value) > (int)$propArray['limit']
                                ) {
                                    $param[$key] = substr($value, 0, (int)$propArray['limit']);
                                } else {
                                    $param[$key] = $value;
                                }
                                break 2;
                                // @todo faire validation des selects.
                            }

                            if ($propArray['type'] == 'hexadecimal') {
                                if (isset($propArray['checkbox'])) {
                                    $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize multi hex ' . $key . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                                    $valueArray = explode(' ', $value);
                                    $value = '';
                                    foreach ($valueArray as $item) {
                                        if (Node::checkNID($item)) {
                                            $value .= ' ' . $item;
                                        }
                                    }
                                    unset($valueArray);

                                    if (isset($propArray['limit'])
                                        && strlen(trim($value)) > (int)$propArray['limit']
                                    ) {
                                        $param[$key] = substr(trim($value), 0, (int)$propArray['limit']);
                                    } else {
                                        $param[$key] = trim($value);
                                    }
                                } else {
                                    $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize hex ' . $key . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                                    if (!Node::checkNID($value)) {
                                        // Si pas un hexa, supprime la valeur.
                                        $param[$name] = null;
                                    }
                                    if (isset($propArray['limit'])
                                        && strlen($value) > (int)$propArray['limit']
                                    ) {
                                        $param[$key] = substr($value, 0, (int)$propArray['limit']);
                                    } else {
                                        $param[$key] = $value;
                                    }
                                }
                                break 2;
                            }

                            if ($propArray['type'] == 'date') {
                                $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize date ' . $key . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                                if (isset($propArray['limit'])
                                    && strlen($value) > (int)$propArray['limit']
                                ) {
                                    $param[$key] = substr($value, 0, (int)$propArray['limit']);
                                } else {
                                    $param[$key] = $value;
                                }
                                // @todo faire la vérification que c'est une date !
                                break 2;
                            }

                            if ($propArray['type'] == 'number'
                                && is_string($value)
                            ) {
                                $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize number ' . $key . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                                $param[$key] = (double)$value;
                                if (isset($propArray['limit'])
                                    && $value > (double)$propArray['limit']
                                ) {
                                    $param[$key] = (double)$propArray['limit'];
                                } else {
                                    $param[$key] = $value;
                                }
                                break 2;
                            }
                        }
                    }
                    if ($key == 'Force' . $name
                        && isset($propArray['forceable'])
                        && $propArray['forceable']
                    ) {
                        $param[$key] = false;
                        $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize force ' . $key . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                        if ($value === true) {
                            $param[$key] = true;
                        }
                        break 2;
                    }
                }
            }
        }

        // Rempli les paramètres non renseignés.
        foreach ($this->_propertiesList as $nameArray) {
            foreach ($nameArray as $name => $propArray) {
                if (isset($param[$name])) {
                    continue;
                }

                if ($propArray['type'] == 'boolean') {
                    $param[$name] = false;
                    $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize add ' . $propArray['key'] . ':false', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                } else {
                    $param[$name] = null;
                    $this->_metrologyInstance->addLog(get_class($this) . ' - Normalize add ' . $propArray['key'] . ':null', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                }
            }
        }
    }

    /**
     * Crée une monnaie.
     *
     * Les paramètres force* ne sont utilisés que si currencyHaveContent est à true.
     * Pour l'instant le code commence à prendre en compte currencyHaveContent à false mais le paramètre est forçé à true tant que le code n'est pas prêt.
     *
     * Les options pour la génération d'une monnaie :
     * currencyHaveContent
     * currencySerialID
     * currencyAutorityID
     *
     * forceCurrencyAutorityID
     *
     * Retourne la chaine avec 0 si erreur.
     *
     * array( 'currency' => array(
     * ...,
     * 'CurrencyType' => array(
     * 'key' => 'TYP',
     * 'shortname' => 'ctyp',
     * 'type' => 'string',
     * 'info' => 'omcptyp',
     * 'limit' => '32',
     * 'force' => 'cryptocurrency', ),
     * 'display' => '64',
     * 'forceable' => true,
     * ...,
     * ),
     * ...,
     * )
     *
     * @param array $param
     * @param boolean $protected
     * @param boolean $obfuscated
     * @return string
     */
    private function _createCurrency($param, $protected = false, $obfuscated = false): string
    {
        // Identifiant final de la monnaie.
        $this->_id = '0';

        // Normalise les paramètres.
        $this->_normalizeInputParam($param);

        // Force l'écriture de l'objet de la monnaie.
        $param['CurrencyHaveContent'] = true;

        // Force l'écriture du serial.
        $param['ForceCurrencySerialID'] = true;

        // Force le paramètre AID avec l'entité en cours.
        $param['CurrencyAutorityID'] = $this->_entitiesInstance->getCurrentEntityID();
        $param['ForceCurrencyAutorityID'] = true;
        $this->_properties['AID'] = $param['CurrencyAutorityID'];

        // Force les capacités.
        $param['ForceCurrencyCapacities'] = true;

        // Détermine si la monnaie a un numéro de série fourni.
        $sid = '';
        if (isset($param['CurrencySerialID'])
            && is_string($param['CurrencySerialID'])
            && ctype_xdigit($param['CurrencySerialID'])
        ) {
            $sid = $this->_stringFilter($param['CurrencySerialID']);
            $this->_metrologyInstance->addLog('Generate currency asked SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        } else {
            // Génération d'un numéro de série de monnaie unique aléatoire.
            $sid = $this->_nebuleInstance->getCryptoInstance()->getRandom(128, Crypto::RANDOM_PSEUDO);
            $param['CurrencySerialID'] = $sid;
            $this->_metrologyInstance->addLog('Generate currency rand SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        }


        // Détermine si la monnaie doit avoir un contenu.
        if (isset($param['CurrencyHaveContent'])
            && $param['CurrencyHaveContent'] === true
        ) {
            $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' HCT:true', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

            // Le contenu final commence par l'identifiant interne de la monnaie.
            $content = 'TYP:' . $this->_propertiesList['currency']['CurrencyType']['force'] . "\n"; // @todo peut être intégré au reste.
            $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' TYP:' . $this->_propertiesList['currency']['CurrencyType']['force'], Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            $content .= 'SID:' . $sid . "\n";
            $content .= 'CAP:' . $this->_propertiesList['currency']['CurrencyCapacities']['force'] . "\n";
            $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' CAP:' . $this->_propertiesList['currency']['CurrencyCapacities']['force'], Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            $content .= 'MOD:' . $this->_propertiesList['currency']['CurrencyExploitationMode']['force'] . "\n";
            $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' MOD:' . $this->_propertiesList['currency']['CurrencyExploitationMode']['force'], Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            $content .= 'AID:' . $this->_entitiesInstance->getCurrentEntityID() . "\n";
            $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' AID:' . $this->_entitiesInstance->getCurrentEntityID(), Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

            // Pour chaque propriété, si présente et forcée, l'écrit dans l'objet.
            foreach ($this->_propertiesList['currency'] as $name => $property) {
                if ($property['key'] != 'HCT'
                    && $property['key'] != 'TYP'
                    && $property['key'] != 'SID'
                    && $property['key'] != 'CAP'
                    && $property['key'] != 'MOD'
                    && $property['key'] != 'AID'
                    //&& $property['key'] != 'PCN'
                    //&& $property['key'] != 'TCN'
                    && isset($property['forceable'])
                    && $property['forceable'] === true
                    && isset($param['Force' . $name])
                    && $param['Force' . $name] === true
                    && isset($param[$name])
                    && $param[$name] != ''
                    && $param[$name] != null
                ) {
                    $value = null;
                    if ($property['type'] == 'boolean') {
                        if ($param[$name] === true) {
                            $value = true;
                        } else {
                            $value = false;
                        }
                    } elseif ($property['type'] == 'number') {
                        $value = (string)$param[$name];
                    } else {
                        $value = $param[$name];
                    }

                    // Ajoute la ligne.
                    $content .= $property['key'] . ':' . $value . "\n";
                    $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' force ' . $property['key'] . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                }
            }

            // Crée l'objet avec le contenu et l'écrit.
            $this->_data = $content;
            $this->_haveData = true;
            unset($content);

            // calcul l'ID.
            $this->_id = $this->_cryptoInstance->hash($this->_data);

            // Si l'objet doit être protégé.
            if ($protected) {
                $this->setProtected($obfuscated);
            } else {
                // Sinon écrit l'objet directement.
                $this->write();
            }
        } else {
            $this->_id = $sid;
            $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' HCT:false', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        }

        // La monnaie a maintenant un CID.
        $param['CurrencyID'] = $this->_id;
        $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' CID:' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');


        // Prépare la génération des liens.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $source = $this->_id;
        $argObf = $obfuscated;

        // Le lien de type.
        $action = 'l';
        $target = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_MONNAIE);
        $meta = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_TYPE);
        $this->_createLink($signer, $date, $action, $source, $target, $meta, false);

        // Le lien de nommage si le nom est présent.
        if (isset($param['NAM'])
            && $param['NAM'] != null
            && $param['NAM'] != ''
        ) {
            $this->setName($param['NAM']);
        }

        // Crée les liens associés à la monnaie.
        //$action	= 'l';

        // Pour chaque propriété, si présente et a un méta, écrit le lien.
        foreach ($this->_propertiesList['currency'] as $name => $property) {
            if (isset($param[$name])
                && $param[$name] != null
            ) {
                $value = null;
                if ($property['type'] == 'boolean') {
                    if ($param[$name] === true) {
                        $value = 'true';
                    } else {
                        $value = 'false';
                    }
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                } elseif ($property['type'] == 'number') {
                    $value = (string)$param[$name];
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                } elseif ($property['type'] == 'hexadecimal') {
                    $value = $param[$name];
                    $target = $value;
                } else {
                    $value = $param[$name];
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                }

                if ($value != null) {
                    $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' add ' . $property['key'] . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash($property['key']);
                    $this->_createLink($signer, $date, $action, $source, $target, $meta, $argObf);
                    $this->_metrologyInstance->addLog('Generate currency SID:' . $sid . ' link=' . $target . '_' . $meta, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                }
            }
        }


        // Retourne l'identifiant de la monnaie.
        $this->_metrologyInstance->addLog('Generate currency end SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        return $this->_id;
    }


    /**
     * Filtrage d'un texte sur les caractères chiffres et lettres uniquement, et sur une seule ligne.
     *
     * @param string $value
     * @return string
     */
    protected function _stringFilter($value, $limit = 1024): string
    {
        if ($value == '') {
            return '';
        }

        // Contenu retourné.
        $result = mb_convert_encoding(trim(strtok(filter_var(trim($value), FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW | FILTER_FLAG_NO_ENCODE_QUOTES), "\n")), 'UTF-8'); // @todo faire la restriction de caractères plus fine...

        if ($result === false) {
            $result = '';
        }

        if (strlen($result) > $limit) {
            $result = substr($result, 0, $limit);
        }

        return $result;
    }

    /**
     * Retourne la liste des sacs de jetons de la monnaie.
     *
     * @return array:string
     */
    public function getPoolList(): array
    {
        return $this->_getItemList('CID');
    }

    /**
     * Retourne le nombre de sacs de jetons de la monnaie.
     *
     * @return integer
     */
    public function getPoolCount(): int
    {
        return sizeof($this->_getItemList('CID'));
    }

    protected function _getItemList($type): array
    {
        $links1 = array();
        $links2 = array();
        $links3 = array();
        $list = array();

        // Prépare la recherche des monnaies.
        $referenceType = $this->_nebuleInstance->getCryptoInstance()->hash($type);
        $meta = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_TYPE);
        if ($type == 'CID') {
            $target = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_MONNAIE_SAC);
        } elseif ($type == 'PID') {
            $target = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_MONNAIE_JETON);
        } else {
            return $list;
        }

        // Recherche les monnaies pour l'entité en cours.
        $links1 = $this->getLinksOnFields(
            '',
            '',
            'l',
            '',
            $this->_id,
            $referenceType
        );

        // Filtrage type recherché. @todo faire filtrage sur MID.
        foreach ($links1 as $i => $link) {
            $instance = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid1']);
            $links2 = $instance->getLinksOnFields(
                $link->getParsed()['bs/rs1/eid'],
                '',
                'l',
                $link->getParsed()['bl/rl/nid1'],
                $target,
                $meta
            );

            if (sizeof($links2) != 0) {
                $list[$link->getParsed()['bl/rl/nid1']] = $link->getParsed()['bl/rl/nid1'];
            }
        }

        return $list;
    }

    /**
     * Lit une clé et retourne un texte avec la valeur.
     *
     * Cette fonction est héritée par les sacs de jetons et les jetons et doit fonctionner dans les différentes classes.
     *
     * @param string $key
     * @param integer $maxsize
     * @return bool|string|null
     */
    protected function _getParam($key, $maxsize): bool|string|null
    {
        // La réponse.
        $result = null;

        if (!is_a($this, 'Currency')) {
            return $result;
        }

        // Lit le cache.
        if (isset($this->_properties[$key])) {
            $result = $this->_properties[$key];
        }

        // Traite les paramètres de présence de données forçées à part.
        if ($key == 'HCT'
            && $this->checkPresent()
        ) {
            $this->_propertiesForced['HCT'] = true;
            $result = true;
        }

        // Traite les paramètres de nombre de sacs ou jetons à part.
        /*		if ( $key == 'PCN' )
		{
			$result = sizeof($this->_getItemList('PID'));
		}
		if ( $key == 'TCN' )
		{
			$result = sizeof($this->_getItemList('TID'));
		}*/

        // Cherche l'option dans la monnaie définie (pas pour les monnaies).
        if ($result === null
            && $key != 'HCT'
            && $key != 'TYP'
            && $key != 'SID'
            && $key != 'FID'
            && $key != 'BID'
            && $key != 'COM'
            && $key != 'CPR'
        ) {
            $result = $this->_getParamFromCurrency($key, $maxsize);
        }

        // Cherche l'option dans le sac de jetons (pour les jetons).
        if ($result === null
            && $key != 'HCT'
            && $key != 'TYP'
            && $key != 'SID'
            && $key != 'FID'
            && $key != 'BID'
            && $key != 'COM'
            && $key != 'CPR'
        ) {
            $result = $this->_getParamFromPool($key, $maxsize);
        }

        // Cherche l'option dans l'environnement.
        if ($result === null) {
            $result = $this->_getParamFromObject($key, $maxsize);
        }

        // Si non trouvé, cherche l'option dans les liens.
        if ($result === null) {
            $result = $this->_getParamFromLinks($key, $maxsize);
        }

        $this->_metrologyInstance->addLog(get_class($this) . ' return param final ' . $this->_id . ' - ' . $key . ' = ' . (string)$result, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        // Ecrit le cache.
        $this->_properties[$key] = $result;

        return $result;
    }

    /**
     * Lit une clé dans la monnaie définie retourne un texte avec la valeur.
     *
     * @param string  $key
     * @param integer $maxsize
     * @return bool|string|null
     */
    protected function _getParamFromCurrency($key, $maxsize): bool|string|null
    {
        $return = null;

        // N'est pas utilisable pour une monnaie.
        if ($this->_inheritedCID === null
            || get_class($this) == 'Currency'
        ) {
            return null;
        }

        $this->_metrologyInstance->addLog(get_class($this) . ' get param on currency ' . $this->_id . ' - ' . $key, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        $return = $this->_inheritedCID->getParam($key);

        $this->_propertiesForced[$key] = $this->_inheritedCID->getParamForced($key);

        if ($return == ''
            && !$this->_propertiesForced[$key]
        ) {
            $return = null;
        }

        if ($return === null) {
            $this->_propertiesInherited[$key] = false;
        } else {
            $this->_propertiesInherited[$key] = true;
            $this->_metrologyInstance->addLog(get_class($this) . ' return param inherited on currency ' . $this->_id . ' - ' . $key, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        }

        $this->_metrologyInstance->addLog(get_class($this) . ' return param on currency ' . $this->_id . ' - ' . $key . ':' . (string)$return, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        return $return;
    }

    /**
     * Lit une clé dans le sac de jetons défini et retourne un texte avec la valeur.
     *
     * @param string $key
     * @param integer $maxsize
     * @return ?string
     */
    protected function _getParamFromPool($key, $maxsize): ?string
    {
        $return = null;

        // N'est pas utilisable pour une monnaie ou un sac de jetons.
        if ($this->_inheritedPID === null
            || get_class($this) == 'Currency'
            || get_class($this) == 'TokenPool'
        ) {
            return null;
        }

        $this->_metrologyInstance->addLog(get_class($this) . ' get param on pool ' . $this->_id . ' - ' . $key, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        $return = $this->_inheritedPID->getParam($key);

        $this->_propertiesForced[$key] = $this->_inheritedPID->getParamForced($key);

        if ($return == ''
            && !$this->_propertiesForced[$key]
        ) {
            $return = null;
        }

        if ($return === null) {
            $this->_propertiesInherited[$key] = false;
        } else {
            $this->_propertiesInherited[$key] = true;
            $this->_metrologyInstance->addLog(get_class($this) . ' return param inherited on pool ' . $this->_id . ' - ' . $key, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        }

        $this->_metrologyInstance->addLog(get_class($this) . ' return param on pool ' . $this->_id . ' - ' . $key . ':' . (string)$return, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        return $return;
    }

    /**
     * Lit une clé dans le contenu de l'objet et retourne un texte avec la valeur.
     *
     * @param string $key
     * @param integer $maxsize
     * @return ?string
     */
    protected function _getParamFromObject($key, $maxsize): ?string
    {
        $result = null;

        // Lit le contenu de l'objet.
        $maxLimit = $this->_configurationInstance->getOptionUntyped('ioReadMaxData');
        $content = $this->getContent($maxLimit);

        // Si l'objet monnaie a du contenu.
        if ($content != null) {
            // Extrait un tableau avec une ligne par élément.
            $contentArray = explode("\n", $content);
            unset($content);

            foreach ($contentArray as $i => $line) {
                $l = trim($line);

                // Si commentaire, passe à la ligne suivante.
                if (substr($l, 0, 1) == "#"
                    || ($key == 'TYP' && $i != 0)
                    || ($key == 'SID' && $i != 1)
                    || (get_class($this) == 'Currency' && $key == 'CAP' && $i != 2)
                    || (get_class($this) == 'Currency' && $key == 'MOD' && $i != 3)
                    || (get_class($this) == 'Currency' && $key == 'AID' && $i != 4)
                    || (get_class($this) == 'TokenPool' && $key == 'CID' && $i != 2)
                    || (get_class($this) == 'Token' && $key == 'CID' && $i != 2)
                    || (get_class($this) == 'Token' && $key == 'PID' && $i != 3)
                ) {
                    continue;
                }

                // Recherche l'option demandée.
                if (filter_var(trim(strtok($l, ':')), FILTER_SANITIZE_STRING) == $key) {
                    $result = trim((string)filter_var(trim(substr($l, strpos($l, ':') + 1)), FILTER_SANITIZE_STRING));
                    break;
                }
            }
            unset($contentArray, $line, $l);
        }

        // Ecrit l'état de forçage de la valeur pour la clé.
        if ($result === null) {
            $this->_propertiesForced[$key] = false;
        } else {
            $this->_propertiesForced[$key] = true;
            $this->_metrologyInstance->addLog(get_class($this) . ' return param forced on object ' . $this->_id . ' - ' . $key, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        }

        $this->_metrologyInstance->addLog(get_class($this) . ' return param on object ' . $this->_id . ' - ' . $key . ':' . (string)$result, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        return $result;
    }

    /**
     * Lit une clé dans les liens de l'objet et retourne un texte avec la valeur.
     *
     * @param string $key
     * @param integer $maxsize
     * @return ?string
     */
    protected function _getParamFromLinks($key, $maxsize): ?string
    {
        $result = '';

        $id = '';
        $instance = null;

        $autorityList = array();

        // Vérifie que l'AID et/ou l'FID sont connus pour vérifier les liens.
        if (isset($this->_properties['AID'])) {
            $autorityList[] = $this->_properties['AID'];
        }
        if (isset($this->_properties['FID'])) {
            $autorityList[] = $this->_properties['FID']; // @todo à vérifier mais ce ne devrait pas être présent ici !?
        }

        $meta = '';
        foreach ($this->_propertiesList as $nameArray) {
            foreach ($nameArray as $name => $propArray) {
                if ($propArray['key'] == $key) {
                    $meta = $propArray['key'];
                    break 2;
                }
            }
        }

        $this->_metrologyInstance->addLog(get_class($this) . ' get param on links ' . $this->_id . ' - metatype:' . $meta, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        if ($meta != '') {
            $this->_socialInstance->setList($autorityList, 'onlist');
            $id = $this->getPropertyID($meta, 'onlist');
            //$id = $this->getPropertyID($meta, 'all');
            $this->_socialInstance->unsetList();
        }

        $this->_metrologyInstance->addLog(get_class($this) . ' get param on links ' . $this->_id . ' - meta:' . $id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        if ($id != '') {
            $instance = $this->_cacheInstance->newNode($id);
        }

        if (is_a($instance, 'Node')
            && $instance->getID() != '0'
        ) {
            // Extrait la valeur en fonction du type.
            foreach ($this->_propertiesList as $type => $nameArray) {
                // Si ce n'est pas le type d'objet attendu, continue.
                if (strtolower(get_class($this)) != $type) {
                    continue;
                }

                foreach ($nameArray as $name => $propArray) {
                    if ($key == $propArray['key']) {
                        if ($propArray['type'] == 'hexadecimal') {
                            $result = $instance->getID();
                        } else {
                            $result = $instance->getContent($maxsize);
                        }
                    }
                }
            }
        }

        unset($meta, $id, $instance);

        $this->_metrologyInstance->addLog(get_class($this) . ' return param on links ' . $this->_id . ' - ' . $key . ':' . (string)$result, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        if ($result == '') {
            return null;
        }
        return $result;
    }

    /**
     * Ecrit un paramètre en lien avec une monnaie ou dérivé.
     * Vérifie que le paramètre n'est pas en lecture seule, càd dans l'objet.
     * Le paramètre est enregistré sous forme d'un lien.
     *
     * @param unknown $key
     * @param unknown $value
     * @return boolean
     */
    protected function _setParam($key, $value): bool
    {
        // @todo

        return false;
    }

    /**
     * Lit une clé et retourne un texte avec la valeur.
     * La taille maximum dépend de la clé.
     *
     * @param string $key
     * @return bool|string|null
     */
    public function getParam($key): bool|string|null
    {
        // @todo faire les vérifications des variables.

        // Détermine la taille maximum à lire.
        $maxsize = 0;
        foreach ($this->_propertiesList as $nameArray) {
            foreach ($nameArray as $name => $propArray) {
                if ($propArray['key'] == $key) {
                    if ($propArray['type'] == 'boolean') {
                        $maxsize = 5;
                        break 2;
                    } elseif ($propArray['type'] == 'number') {
                        $maxsize = 15;
                        break 2;
                    } elseif (isset($propArray['limit'])) {
                        $maxsize = (float)$propArray['limit'];
                        break 2;
                    }
                }
            }
        }

        if ($maxsize == 0) {
            return null;
        }

        return $this->_getParam($key, $maxsize);
    }

    /**
     * Lit si la valeur d'une clé est forçée par héritage.
     *
     * Pas d'héritage pour une monnaie mais c'est géré lors de la recherche de la clé.
     *
     * @param string $key
     * @return boolean
     */
    public function getParamInherited($key): bool
    {
        if (get_class($this) == 'Currency') {
            return false;
        }

        // Initalise les caches.
        if (!isset($this->_propertiesInherited[$key])) {
            $this->getParam($key);
        }

        // Retourne l'état d'héritage.
        if (isset($this->_propertiesInherited[$key])) {
            if ($this->_propertiesInherited[$key]) {
                $this->_metrologyInstance->addLog(get_class($this) . ' get param inherited ' . $this->_id . ' - ' . $key . ':true', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            } else {
                $this->_metrologyInstance->addLog(get_class($this) . ' get param inherited ' . $this->_id . ' - ' . $key . ':false', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            }
            return $this->_propertiesInherited[$key];
        } else {
            $this->_metrologyInstance->addLog(get_class($this) . ' get param inherited ' . $this->_id . ' - ' . $key . ':not defined (false)', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            return false;
        }
    }

    /**
     * Lit si la valeur d'une clé est forçée.
     *
     * @param string $key
     * @return boolean
     */
    public function getParamForced($key): bool
    {
        // Initalise les caches.

        if (!isset($this->_propertiesForced[$key])) {
            $this->getParam($key);
        }

        // Retourne l'état de forçage.
        if (isset($this->_propertiesForced[$key])) {
            if ($this->_propertiesForced[$key]) {
                $this->_metrologyInstance->addLog(get_class($this) . ' get param forced ' . $this->_id . ' - ' . $key . ':true', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            } else {
                $this->_metrologyInstance->addLog(get_class($this) . ' get param forced ' . $this->_id . ' - ' . $key . ':false', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            }
            return $this->_propertiesForced[$key];
        } else {
            $this->_metrologyInstance->addLog(get_class($this) . ' get param forced ' . $this->_id . ' - ' . $key . ':not defined (false)', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            return false;
        }
    }

    /**
     * Ecrit un paramètre en lien avec une monnaie ou dérivé.
     * Vérifie que le paramètre n'est pas en lecture seule, càd dans l'objet.
     * Le paramètre est enregistré sous forme d'un lien.
     * Un paramètre ne peut pas être ajouté à l'objet sans modifier son identifiant.
     *
     * @param unknown $key
     * @param unknown $value
     * @return boolean
     */
    public function setParam($key, $value): bool
    {
        // @todo faire les vérifications des variables.

        return $this->_setParam($key, $value);
    }

    /**
     * Définit la monnaie de référence utilisée.
     * N'est utilisé que pour les sacs de jetons et les jetons.
     *
     * @param $currency string|Currency
     * @return boolean
     */
    public function setCID($currency = '0'): bool
    {
        if (is_string($currency)
            && $currency != ''
            && $currency != '0'
            && $this->_ioInstance->checkLinkPresent($currency)
        ) {
            $currency = new Currency($this->_nebuleInstance, $currency);
        }
        if (!get_class($currency) == 'Currency') {
            return false;
        }
        if (get_class($this) != 'TokenPool'
            && get_class($this) != 'Token'
        ) {
            return false;
        }
        if ($currency->getID() == '0') {
            return false;
        }

        // @todo vérifier que le CID est cohérent pour cet item dans les liens.

        $this->_metrologyInstance->addLog('set CID ' . $currency->getID() . ' for ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        $this->_inheritedCID = $currency;

        // Ecrit le cache.
        $this->_properties['CID'] = $currency->getID();

        return true;
    }

    /**
     * Définit le sac de jetons de référence utilisé.
     * N'est utilisé que pour les jetons.
     *
     * @param $pool string|TokenPool
     * @return boolean
     */
    public function setPID($pool = '0'): bool
    {
        if (is_string($pool)
            && $pool != ''
            && $pool != '0'
            && $this->_ioInstance->checkLinkPresent($pool)
        ) {
            $pool = new TokenPool($this->_nebuleInstance, $pool);
        }
        if (!get_class($pool) == 'TokenPool') {
            return false;
        }
        if (get_class($this) != 'Token') {
            return false;
        }
        if ($pool->getID() == '0') {
            return false;
        }

        // @todo vérifier que le PID est cohérent pour ce jeton dans les liens.

        $this->_metrologyInstance->addLog('set PID ' . $pool->getID() . ' for ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        $this->_inheritedPID = $pool;

        // Ecrit le cache.
        $this->_properties['PID'] = $pool->getID();

        return true;
    }

    /**
     * Initialise l'AID, entité autorité de la monnaie.
     * Si l'instance est une monnaie, recherche le paramètre AID dans l'objet de la monnaie.
     *
     * @return boolean
     */
    public function setAID(): bool
    {
        if (get_class($this) == 'Currency') {
            $id = $this->_getParamFromObject('AID', (int)$this->_propertiesList['currency']['CurrencyAutorityID']['limit']);
            $this->_metrologyInstance->addLog('set AID by param - AID:' . $id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        } else {
            $id = $this->_getParamFromCurrency('AID', (int)$this->_propertiesList['currency']['CurrencyAutorityID']['limit']);
            $this->_metrologyInstance->addLog('set AID from currency - AID:' . $id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        }

        // Vérifie l'ID.
        if (is_string($id)
            && Node::checkNID($id)
            && $this->_ioInstance->checkObjectPresent($id)
//				&& $this->_io->checkLinkPresent($id)
        ) {
            $this->_properties['AID'] = $id;
            $this->_metrologyInstance->addLog('set AID ' . $id . ' for ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            return true;
        }
        $this->_metrologyInstance->addLog('error set AID for ' . $this->_id, Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
        return false;
    }

    /**
     * Initialise l'FID, entité forge de la monnaie.
     * Si l'instance est une monnaie, recherche le paramètre FID et ne tient pas compte de l'argument de la fonction.
     *
     * @param string $id
     * @return boolean
     */
    public function setFID(string $id): bool
    {
        if (get_class($this) == 'Currency') {
            //$id = $this->_getParam('FID', (int)$this->_propertiesList['currency']['CurrencyForgeID']['limit']);
            $id = '';
        } elseif (get_class($this) == 'TokenPool')
            $id = $this->_getParam('FID', (int)$this->_propertiesList['tokenpool']['PoolForgeID']['limit']);
        elseif (get_class($this) == 'Token')
            $id = $this->_getParam('FID', (int)$this->_propertiesList['token']['TokenForgeID']['limit']);
        $this->_metrologyInstance->addLog('set FID by param', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        // Vérifie l'ID.
        if (is_string($id)
            && Node::checkNID($id)
            && $this->_ioInstance->checkObjectPresent($id)
//				&& $this->_io->checkLinkPresent($id)
        ) {
            $this->_properties['FID'] = $id;
            $this->_metrologyInstance->addLog('set FID ' . $id . ' for ' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            return true;
        }
        $this->_metrologyInstance->addLog('error set FID for ' . $this->_id, Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
        return false;
    }

    /**
     * Crée un lien.
     *
     * @param      $signer
     * @param      $date
     * @param      $action
     * @param      $source
     * @param      $target
     * @param      $meta
     * @param bool $obfuscate
     * @return boolean
     */
    protected function _createLink($signer, $date, $action, $source, $target, $meta, bool $obfuscate = false): bool
    {
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new BlocLink($this->_nebuleInstance, $link);

        // Signe le lien.
        $newLink->sign($signer);

        // Si besoin, obfuscation du lien.
        if ($obfuscate
            && $this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink')
        )
            $newLink->setObfuscate();

        // Ecrit le lien.
// TODO        return $newLink->write();
        return false;
    }

    /**
     * Extrait les capacités de la monnaie dans le champs CAP dans un tableau.
     * Ce tableau doit faciliter la vérification des champs à utiliser.
     *
     * @return void
     */
    private function _extractCAParray(): void
    {
        $this->_CAParray = array();

        if (!isset($this->_propertiesForced['CAP'])
            || sizeof($this->_propertiesForced['CAP']) == 0
        )
            return;

        $value = $this->_propertiesForced['CAP'];
        $subitems = explode(' ', $value);
        foreach ($subitems as $subitem)
            $this->_CAParray[$subitem] = $subitem;
    }

    /**
     * Retourne la liste des propriétés des objets monnaies et hérités.
     *
     * @return array
     */
    public function getPropertiesList(): array
    {
        return $this->_propertiesList;
    }


    /**
     * Extrait la valeur relative de la monnaie à un instant donné.
     *
     * @param $date string
     * @return float|int
     */
    public function getRelativeValue($date): float|int
    {

        // Récupère la liste des jetons.
        $items = $this->_getItemList('CID');

        $total = 0;

        foreach ($items as $item) {
            $instance = $this->_cacheInstance->newTokenPool($item);
            if ($instance->getID() != '0') {
                $total += $instance->getRelativeValue($date);
            }
        }

        return $total;
    }


    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#om">OM / Monnaie</a>
            <ul>
                <li><a href="#omf">OMF / Fonctionnement</a></li>
                <li><a href="#omn">OMN / Nommage</a></li>
                <li><a href="#omp">OMP / Protection</a></li>
                <li><a href="#omd">OMD / Dissimulation</a></li>
                <li><a href="#oml">OML / Liens</a></li>
                <li><a href="#omv">OMV / Valeur</a></li>
                <li><a href="#omc">OMC / Création</a>
                    <ul>
                        <li><a href="#omcl">OMCL / Liens</a></li>
                        <li><a href="#omcp">OMCP / Propriétés</a>
                            <ul>
                                <li><a href="#omcph">OMCPH / Héritage</a></li>
                                <li><a href="#omcphct">OMCPHCT / HCT</a></li>
                                <li><a href="#omcptyp">OMCPTYP / TYP</a></li>
                                <li><a href="#omcpsid">OMCPSID / SID</a></li>
                                <li><a href="#omcpcap">OMCPCAP / CAP</a></li>
                                <li><a href="#omcpmod">OMCPMOD / MOD</a></li>
                                <li><a href="#omcpaid">OMCPAID / AID</a></li>
                                <li><a href="#omcpmid">OMCPMID / MID</a></li>
                                <li><a href="#omcpfid">OMCPFID / FID</a></li>
                                <li><a href="#omcpcid">OMCPCID / CID</a></li>
                                <li><a href="#omcpnam">OMCPNAM / NAM</a></li>
                                <li><a href="#omcpuni">OMCPUNI / UNI</a></li>
                                <li><a href="#omcpdta">OMCPDTA / DTA</a></li>
                                <li><a href="#omcpdtc">OMCPDTC / DTC</a></li>
                                <li><a href="#omcpdtd">OMCPDTD / DTD</a></li>
                                <li><a href="#omcpcom">OMCPCOM / COM</a></li>
                                <li><a href="#omcpcpr">OMCPCPR / CPR</a></li>
                                <li><a href="#omcpidm">OMCPIDM / IDM</a></li>
                                <li><a href="#omcpidr">OMCPIDR / IDR</a></li>
                                <li><a href="#omcpidp">OMCPIDP / IDP</a></li>
                                <li><a href="#omcpvmd">OMCPVMD / VMD</a></li>
                                <li><a href="#omcpvid">OMCPVID / VID</a></li>
                                <li><a href="#omcptrs">OMCPTRS / TRS</a></li>
                                <li><a href="#omcppcn">OMCPPCN / PCN</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="#oms">OMS / Stockage</a></li>
                <li><a href="#omt">OMT / Transfert</a></li>
                <li><a href="#omr">OMR / Réservation</a></li>
                <li><a href="#omio">OMIO / Implémentation des Options</a></li>
                <li><a href="#omia">OMIA / Implémentation des Actions</a></li>
                <li><a href="#omo">OMO / Oubli</a></li>
                <li><a href="#omg">OMG / Sac de jetons</a>
                    <ul>
                        <li><a href="#omgf">OMGF / Fonctionnement</a></li>
                        <li><a href="#omgn">OMGN / Nommage</a></li>
                        <li><a href="#omgp">OMGP / Protection</a></li>
                        <li><a href="#omgd">OMGD / Dissimulation</a></li>
                        <li><a href="#omgl">OMGL / Liens</a></li>
                        <li><a href="#omgv">OMGV / Valeur</a></li>
                        <li><a href="#omgc">OMGC / Création</a>
                            <ul>
                                <li><a href="#omgcl">OMGCL / Liens</a></li>
                                <li><a href="#omgcp">OMGCP / Propriétés</a>
                                    <ul>
                                        <li><a href="#omgcph">OMGCPH / Héritage</a></li>
                                        <li><a href="#omgcphct">OMGCPHCT / HCT</a></li>
                                        <li><a href="#omgcptyp">OMGCPTYP / TYP</a></li>
                                        <li><a href="#omgcpsid">OMGCPSID / SID</a></li>
                                        <li><a href="#omgcpcap">OMGCPCAP / CAP</a></li>
                                        <li><a href="#omgcpfid">OMGCPFID / FID</a></li>
                                        <li><a href="#omgcpmid">OMGCPMID / MID</a></li>
                                        <li><a href="#omgcppid">OMGCPPID / PID</a></li>
                                        <li><a href="#omgcpcid">OMGCPCID / CID</a></li>
                                        <li><a href="#omgcpdta">OMGCPDTA / DTA</a></li>
                                        <li><a href="#omgcpdtc">OMGCPDTC / DTC</a></li>
                                        <li><a href="#omgcpdtd">OMGCPDTD / DTD</a></li>
                                        <li><a href="#omgcpcom">OMGCPCOM / COM</a></li>
                                        <li><a href="#omgcpcpr">OMGCPCPR / CPR</a></li>
                                        <li><a href="#omgcpidm">OMGCPIDM / IDM</a></li>
                                        <li><a href="#omgcpidr">OMGCPIDR / IDR</a></li>
                                        <li><a href="#omgcpidp">OMGCPIDP / IDP</a></li>
                                        <li><a href="#omgcptcn">OMGCPTCN / TCN</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#omgs">OMGS / Stockage</a></li>
                        <li><a href="#omgt">OMGT / Transfert</a></li>
                        <li><a href="#omgr">OMGR / Réservation</a></li>
                        <li><a href="#omgo">OMGO / Oubli</a></li>
                    </ul>
                </li>
                <li><a href="#omj">OMJ / Jeton</a>
                    <ul>
                        <li><a href="#omjf">OMJF / Fonctionnement</a></li>
                        <li><a href="#omjn">OMJN / Nommage</a></li>
                        <li><a href="#omjp">OMJP / Protection</a></li>
                        <li><a href="#omjd">OMJD / Dissimulation</a></li>
                        <li><a href="#omjl">OMJL / Liens</a></li>
                        <li><a href="#omjv">OMJV / Valeur</a></li>
                        <li><a href="#omjc">OMJC / Création</a>
                            <ul>
                                <li><a href="#omjcl">OMJCL / Liens</a></li>
                                <li><a href="#omjcp">OMJCP / Propriétés</a>
                                    <ul>
                                        <li><a href="#omjcph">OMJCPH / Héritage</a></li>
                                        <li><a href="#omjcphct">OMJCPHCT / HCT</a></li>
                                        <li><a href="#omjcptyp">OMJCPTYP / TYP</a></li>
                                        <li><a href="#omjcpsid">OMJCPSID / SID</a></li>
                                        <li><a href="#omjcpcap">OMJCPCAP / CAP</a></li>
                                        <li><a href="#omjcpcid">OMJCPCID / CID</a></li>
                                        <li><a href="#omjcppid">OMJCPPID / PID</a></li>
                                        <li><a href="#omjcptid">OMJCPTID / TID</a></li>
                                        <li><a href="#omjcpfid">OMJCPFID / FID</a></li>
                                        <li><a href="#omjcpbid">OMJCPBID / BID</a></li>
                                        <li><a href="#omjcpnam">OMJCPNAM / NAM</a></li>
                                        <li><a href="#omjcpuni">OMJCPUNI / UNI</a></li>
                                        <li><a href="#omjcpval">OMJCPVAL / VAL</a></li>
                                        <li><a href="#omjcpdta">OMJCPDTA / DTA</a></li>
                                        <li><a href="#omjcpdtc">OMJCPDTC / DTC</a></li>
                                        <li><a href="#omjcpdtd">OMJCPDTD / DTD</a></li>
                                        <li><a href="#omjcpcom">OMJCPCOM / COM</a></li>
                                        <li><a href="#omjcpcpr">OMJCPCPR / CPR</a></li>
                                        <li><a href="#omjcpidm">OMJCPIDM / IDM</a></li>
                                        <li><a href="#omjcpidr">OMJCPIDR / IDR</a></li>
                                        <li><a href="#omjcpidp">OMJCPIDP / IDP</a></li>
                                        <li><a href="#omjcpsvc">OMJCPSVC / SVC</a></li>
                                        <li><a href="#omjcpclb">OMJCPCLB / CLB</a></li>
                                        <li><a href="#omjcpcld">OMJCPCLD / CLD</a></li>
                                        <li><a href="#omjcptrs">OMJCPTRS / TRS</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#omjs">OMJS / Stockage</a></li>
                        <li><a href="#omjt">OMJT / Transfert</a>
                            <ul>
                                <li><a href="#omjti">OMJCTI / Transfert d'information</a></li>
                                <li><a href="#omjtv">OMJCTV / Transfert de valeur</a></li>
                            </ul>
                        </li>
                        <li><a href="#omjm">OMJM / Modes de transfert</a>
                            <ul>
                                <li><a href="#omjmlns">OMJMLNS / Mode LNS</a></li>
                            </ul>
                        </li>
                        <li><a href="#omjr">OMJR / Réservation</a></li>
                        <li><a href="#omjo">OMJO / Oubli</a></li>
                    </ul>
                </li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h2 id="om">OM / Monnaie</h2>
        <p>Certains objets permettre de mettre en place et de gérer plusieurs types de monnaies et plusieurs monnaies
            concurrentes.</p>

        <h3 id="omf">OMF / Fonctionnement</h3>
        <p>Une monnaie est un objet de référence qui va gérer des sac de jetons. La gestion se fait par différentes
            entités détenant des rôles spécifiques aux monnaies.</p>
        <p>Une monnaie va disposer de plusieurs propriétés connues par leurs abréviations, voir <a href="#omcp">OMCP</a>.
        </p>
        <p>L'objet de référence de la monnaie peut être virtuel ou non. Aujourd'hui le code ne gère que des monnaies
            avec un objet de référence non virtuel.</p>
        <p>Si l'objet de référence de la monnaie est virtuel, il est forçément généré aléatoirement. Sinon il dépend du
            contenu de l'objet et est rendu unique grâce à la propriété <code>SID</code>.</p>
        <p>Exemple d'objet de monnaie :</p>
        <pre>
TYP:currency
SID:5f3ad5265bb3306b3266e1935d067d9ec15965d0a970554bc6161eb3328907a9
CAP:TYP MOD SID CAP AID MID NAM UNI DTA DTC DTD COM CPR IDM IDR IDP VMD VID TRS CID PID FID BID VAL CLB CLD SVC TID
MOD:CTL
AID:f0f7cf5c921320b97daedeb7c53f2417921c747c77b696f8a25ff29277661d2f
MID:f0f7cf5c921320b97daedeb7c53f2417921c747c77b696f8a25ff29277661d2f
NAM:poux
UNI:pou
CPR:(c) nebule/qantion 2020
</pre>

        <h3 id="omn">OMN / Nommage</h3>
        <p>Une monnaie peut disposer d'un nom complet. Ce nom est définit par la propriété <code>NAM</code> et est
            doublé par un lien de nommage classique comme tout objet.</p>
        <p>Une monnaie peut aussi disposer d'une abréviation définit par la propriété <code>UNI</code>.</p>
        <p>Le nom complet d'un objet de type monnaie est uniquement extrait de la propriété <code>NAM</code>. Dans
            certains cas il peut êrte formé de <code>NAM(UNI)</code> mais la propriété <code>UNI</code> a plutôt
            vocation a être utilisée dans un affichage condensé.</p>

        <h3 id="omp">OMP / Protection</h3>
        <p>A faire...</p>

        <h3 id="omd">OMD / Dissimulation</h3>
        <p>A faire...</p>

        <h3 id="oml">OML / Liens</h3>
        <p>A faire...</p>

        <h3 id="omv">OMV / Valeur</h3>
        <p>La valeur de la monnaie, à un instant donné, est égale à la somme des sac de jetons de la monnaie au même
            instant.</p>

        <h3 id="omc">OMC / Création</h3>
        <p>A faire...</p>

        <h4 id="omcl">OMCL / Liens</h4>
        <p>Liste des liens à générer lors de la création d'une monnaie.</p>
        <p>A faire...</p>

        <h4 id="omcp">OMCP / Propriétés</h4>
        <p></p>

        <h5 id="omcph">OMCPH / Héritage</h5>
        <p>Certaines propriétés des sacs de jetons et jetons sont héritées de la monnaie, si ces propriétés sont
            définies dans la monnaie. Les héritages sont prioritaires sur les propriétés définies via l'objet et les
            liens des sacs de jetons et jetons.</p>

        <h5 id="omcphct">OMCPHCT / HCT</h5>
        <p>Définit si l'objet de la monnaie a un contenu. Si il n'a pas de contenu l'objet de la monnaie est virtuel et
            correspond à son SID, et les paramètres de la monnaie ne peuvent pas être forcés.</p>
        <p>Ce n'est pas écrit dans l'objet de la monnaie ni enregistré via des liens. Cela sert uniquement au moment de
            la création d'une monnaie.</p>

        <h5 id="omcptyp">OMCPTYP / TYP</h5>
        <p>Le type de monnaie.</p>
        <p>Toujours à la valeur <i>cryptocurrency</i>.</p>
        <p>Présence obligatoire en ligne 1 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpsid">OMCPSID / SID</h5>
        <p>Le numéro de série identifiant de la monnaie (<i>serial</i>).</p>
        <p>Si l'objet de référence de la monnaie est virtuel, l'identifiant de la monnaie <code>CID</code> sera le
            <code>SID</code>.</p>
        <p>Si l'objet de référence de la monnaie n'est pas virtuel, l'identifiant de la monnaie <code>CID</code> dépend
            du contenu de l'objet et est rendu unique grâce à la propriété <code>SID</code>.</p>
        <p>La valeur est de préférence aléatoire mais peut être un compteur à condition d'être unique. L’utilisation
            d’un compteur de faible valeur est fortement déconseillée.</p>
        <p>Si aléatoire, la génération pseudo aléatoire du <code>SID</code> est faite en partant d’un dérivé de la date
            avec quelques valeurs locales. Il n’y a pas de contrainte de sécurité sur cette valeur. Puis une boucle
            interne génère un bon aléa au fur et à mesure de la génération des jetons via une fonction de hash. Le tout
            ne consomme pas du tout de précieux aléa de bonne qualité.</p>
        <p>Présence obligatoire en ligne 2 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpcap">OMCPCAP / CAP</h5>
        <p>Liste des capacités connues de la monnaie.</p>
        <p>Si une capacité n'est pas présente elle ne peut être invoquée, même si elle est forcée.</p>
        <p>Présence obligatoire en ligne 3 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpmod">OMCPMOP / MOP</h5>
        <p>Définit le mode d'exploitation de la monnaie.</p>
        <p>Si une capacité n'est pas présente elle ne peut être invoquée, même si elle est forcée.</p>
        <p>Présence obligatoire en ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpaid">OMCPAID / AID</h5>
        <p>Identifiant de l'entité authorité de la monnaie (<i>autority</i>).</p>
        <p>C'est l'entité qui forge la monnaie et délègue la gestion aux entités gestionnaires (MID).</p>
        <p>Présence obligatoire en ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpmid">OMCPMID / MID</h5>
        <p>Identifiant d'une entité de gestion de la monnaie (<i>manage</i>).</p>
        <p>Une monnaie peut avoir plusieurs entités de gestion.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpfid">OMCPFID / FID</h5>
        <p>Non utilisé !!!</p>
        <p>Identifiant de l'entité ayant forgé la monnaie (<i>forge</i>).</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpcid">OMCPCID / CID</h5>
        <p>Identifiant de l’objet de la monnaie (<i>currency</i>).</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème. Ce qui va faire la différence c'est l'autorité et ses liens.</p>
        <p>L'objet d'une monnaie ne peut en aucun cas contenir son propre identifiant <code>CID</code>.</p>

        <h5 id="omcpnam">OMCPNAM / NAM</h5>
        <p>Le nom de la monnaie. Limité à 256 caractères.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpuni">OMCPUNI / UNI</h5>
        <p>Le nom de l'unité de la monnaie en 3 lettres maximum. Pas de chiffre.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpdta">OMCPDTA / DTA</h5>
        <p>Identifiant de l’entité autorité de temps pour les limites de temps.</p>
        <p>La gestion du temps avec une autorité de temps permet de prendre en compte sérieusement les suppression
            programmées de jeton (<code>DTC</code>/<code>DTD</code>) ainsi que leur inflation/déflation automatique
            (<code>IDM</code>/<code>IDR</code>/<code>IDP</code>).</p>
        <p>L’autorité de temps peut être spécifique pour chaque jeton mais il est plus logique qu’elle soit commune à
            une monnaie ou dans certains cas à un sac de jetons.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpdtc">OMCPDTC / DTC</h5>
        <p>Date de création de la monnaie.</p>
        <p>Forme texte libre limitée à 128 caractères. Doit pourvoir être interprété comme une date.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpdtd">OMCPDTD / DTD</h5>
        <p>Date de suppression programmée de la monnaie.</p>
        <p> Forme texte libre limitée à 128 caractères. Doit pourvoir être interprété comme une date pour être
            fonctionel.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpcom">OMCPCOM / COM</h5>
        <p>Commentaire texte libre limité à 4096 caractères.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpcpr">OMCPCPR / CPR</h5>
        <p>Licence du jeton sous forme d’une texte libre limité à 1024 caractères.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpidm">OMCPIDM / IDM</h5>
        <p>Mode de fonctionnement du mécanisme d’inflation/déflation (<i>mode</i>) de tous les jetons de la monnaie.</p>
        <p>Les modes sont <i>creation</i> ou <i>transaction</i> ou <i>disabled</i>.</p>
        <p>Suivant le mode, le mécanisme tient compte du temps passé depuis la dernière transaction ou depuis l’émission
            du jeton.</p>
        <p>Le mécanisme d’inflation/déflation (<code>IDM</code>/<code>IDR</code>/<code>IDP</code>), si activé, avec un
            taux de variation inférieur à 1, donc en déflation, permet de forcer les détenteurs de jeton à les utiliser
            plutôt que de les stocker. Les jetons concernés vont donc perdre de la valeur par rapport aux nouveaux
            jetons ou par rapport à ceux qui circulent.</p>
        <p>Si activé, avec un taux de variation suppérieur à 1, donc en inflation, permet de favoriser la conservation
            des jetons et valorise les vieux jetons sur les nouveaux ou ceux qui circulent beaucoup.</p>
        <p>En ne forçant pas cette propriété dans l'objet des jetons, il est possible d'avoir un taux de variation
            fluctuant en fonction des besoins. En le positionnant forçé à <i>disabled</i> cela désactive définitivement
            ce mécanisme au niveau de la monnaie et donc pour tous les jetons.</p>
        <p>Un jeton peut se déprécier avec le temps mais une entité peut demander à l’autorité émettrice de la monnaie
            un échange de jeton ancien contre un jeton plus jeune, si l’autorité émettrice le permet.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>CF <a href="#omgcpidm">P/IDM</a> et <a href="#omjcpidm">T/IDM</a>.</p>

        <h5 id="omcpidr">OMCPIDR / IDR</h5>
        <p>Taux de variation du mécanisme d’inflation/déflation (<i>rate</i>) de tous les jetons de la monnaie.</p>
        <p>Égal à 1 (un), taux constant donc pas de variation.</p>
        <p>Doit être activé par <code>IDM</code>.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpidp">OMCPIDP / IDP</h5>
        <p>Périodicité d’application du taux de variation du mécanisme d’inflation/déflation (<i>period</i>) de tous les
            jetons de la monnaie.</p>
        <p>Unité exprimée en minutes.</p>
        <p>Si à 0 (zéro), la période n'est pas utilisé, donc la variation est non effective.</p>
        <p>Doit être activé par <code>IDM</code>.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpvmd">OMCPVMD / VMD</h5>
        <p>Définit le mode de validation des transactions de jetons de la monnaie. C'est le mode de fonctionnement
            global de la monnaie.</p>
        <p>Actuellement seul est supporté le mode centralisé.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcpvid">OMCPVID / VID</h5>
        <p>Dans le mode de validation centralisé, c'est l'entité de validation des transactions de jetons de la
            monnaie.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcptrs">OMCPTRS / TRS</h5>
        <p>Liste des méthodes de transaction supportées.</p>
        <p>Le code <code>LNS</code> désigne la méthode de base avec un lien (L) matérialisant une transaction et
            imposant un jeton non sécable (NS).</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omcppcn">OMCPPCN / PCN</h5>
        <p>Non utilisé !!!</p>
        <p>Définit le nombre de sacs de jetons à créer avec la monnaie. Ce nombre multiplié par le <a href="#omgcptcn">TCN</a>
            donne le nombre total de jetons créés pour la monnaie.</p>
        <p>Ce n'est pas écrit dans l'objet de la monnaie, ni dans les sacs de jetons ni enregistré via des liens. Cela
            sert uniquement au moment de la création de la monnaie. Cependant un lien de rattachement sera créé pour
            chaque sac de jeton depuis la monnaie avec en meta le <a href="#omgcppid"></a>PID</a>.</p>

        <h3 id="oms">OMS / Stockage</h3>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <h3 id="omt">OMT/ Transfert</h3>
        <p>A faire...</p>

        <h3 id="omr">OMR / Réservation</h3>
        <p>Les objets réservés spécifiquement pour les monnaies :</p>
        <ul>
            <li>nebule/objet/monnaie</li>
        </ul>

        <h4 id="omio">OMIO / Implémentation des Options</h4>
        <p>A faire...</p>

        <h4 id="omia">OMIA / Implémentation des Actions</h4>
        <p>A faire...</p>

        <h3 id="omo">OMO / Oubli</h3>
        <p>L'oubli vonlontaire de certains liens et objets n'est encore ni théorisé ni implémenté mais deviendra
            indispensable lorsque l'espace viendra à manquer (cf <a href="#cn">CN</a>).</p>


        <h3 id="omg">OMG / Sac de jetons</h3>
        <p>A faire...</p>

        <h3 id="omgf">OMGF / Fonctionnement</h3>
        <p>A faire...</p>
        <p>Exemple d'objet de sac de jetons :</p>
        <pre>
TYP:tokenpool
SID:5f3ad5265bb3306b3266e1935d067d9ec15965d0a970554bc6161eb3328907a9
CAP:TYP MOD SID CAP AID MID NAM UNI DTA DTC DTD COM CPR IDM IDR IDP VMD VID TRS CID PID FID BID VAL CLB CLD SVC TID
CID:daf832e3042cc849efcd5b6531df835a9c5f6251b2101e20972f9a9db2a8ae24
FID:f0f7cf5c921320b97daedeb7c53f2417921c747c77b696f8a25ff29277661d2f
MID:f0f7cf5c921320b97daedeb7c53f2417921c747c77b696f8a25ff29277661d2f
</pre>
        <p>Un sac de jetons va disposer de plusieurs propriétés connues par leurs abréviations, voir <a href="#omgcp">OMGCP</a>.
        </p>
        <p>A faire...</p>

        <h3 id="omgn">OMGN / Nommage</h3>
        <p>Un sac de jetons hérite du nommage de la monnaie à laquelle il est rattaché.</p>
        <p>Le nom complet d'un objet de type sac de jetons est uniquement extrait de la propriété <code>NAM</code>. Dans
            certains cas il peut êrte formé de <code>NAM(UNI)</code> mais la propriété <code>UNI</code> a plutôt
            vocation a être utilisée dans un affichage condensé.</p>

        <h3 id="omgp">OMGP / Protection</h3>
        <p>A faire...</p>

        <h3 id="omgd">OMGD / Dissimulation</h3>
        <p>A faire...</p>

        <h3 id="omgl">OMGL / Liens</h3>
        <p>A faire...</p>

        <h3 id="omgv">OMGV / Valeur</h3>
        <p>La valeur du sac de jeton, à un instant donné, est égale à la somme des jetons du sac au même instant.</p>

        <h3 id="omgc">OMGC / Création</h3>
        <p>A faire...</p>

        <h4 id="omgcl">OMGCL / Liens</h4>
        <p>Liste des liens à générer lors de la création d'un sac de jetons.</p>
        <p>A faire...</p>

        <h4 id="omgcp">OMGCP / Propriétés</h4>
        <p></p>

        <h5 id="omgcph">OMGCPH / Héritage</h5>
        <p>Certaines propriétés sont héritées de la monnaie, si ces propriétés sont définies dans la monnaie. Ce doit
            être la monnaie déclarée en cours d'utilisation et le sac de jetons doit dépendre de cette monnaie
            directement. Les héritages sont prioritaires sur les propriétés définies via l'objet et les liens.</p>

        <h5 id="omgcphct">OMGCPHCT / HCT</h5>
        <p>Définit si l'objet du sac de jetons a un contenu. Si il n'a pas de contenu l'objet du sac de jetons est
            virtuel et correspond à son SID, et les paramètres du sac de jetons ne peuvent pas être forcés.</p>
        <p>Ce n'est pas écrit dans l'objet du sac de jetons ni enregistré via des liens. Cela sert uniquement au moment
            de la création d'un sac de jetons.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie.</p>

        <h5 id="omgcptyp">OMGCPTYP / TYP</h5>
        <p>Le type de sac de jetons.</p>
        <p>Toujours à la valeur <i>tokenpool</i>.</p>
        <p>Présence obligatoire en ligne 1 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie.</p>

        <h5 id="omgcpsid">OMGCPSID / SID</h5>
        <p>Le numéro de série identifiant du sac de jetons (<i>serial</i>).</p>
        <p>Si l'objet de référence du sac de jetons est virtuel, l'identifiant du sac de jetons <code>PID</code> sera le
            <code>SID</code>.</p>
        <p>Si l'objet de référence du sac de jetons n'est pas virtuel, l'identifiant du sac de jetons <code>PID</code>
            dépend du contenu de l'objet et est rendu unique grâce à la propriété <code>SID</code>.</p>
        <p>La valeur est de préférence aléatoire mais peut être un compteur à condition d'être unique. L’utilisation
            d’un compteur de faible valeur est fortement déconseillée.</p>
        <p>Si aléatoire, la génération pseudo aléatoire du <code>SID</code> est faite en partant d’un dérivé de la date
            avec quelques valeurs locales. Il n’y a pas de contrainte de sécurité sur cette valeur. Puis une boucle
            interne génère un bon aléa au fur et à mesure de la génération des jetons via une fonction de hash. Le tout
            ne consomme pas du tout de précieux aléa de bonne qualité.</p>
        <p>Présence obligatoire en ligne 2 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie.</p>

        <h5 id="omgcpcap">OMGCPCAP / CAP</h5>
        <p>Liste des capacités connues du sac de jetons.</p>
        <p>Si une capacité n'est pas présente elle ne peut être invoquée, même si elle est forcée.</p>
        <p>Présence obligatoire en ligne 3 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omgcpcid">OMGCPCID / CID</h5>
        <p>Identifiant de l’objet de la monnaie auquel est rattaché le sac de jetons (<i>currency</i>).</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence obligatoire en ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omgcpfid">OMGCPFID / FID</h5>
        <p>Identifiant de l'entité ayant forgé le sac de jetons (<i>forge</i>).</p>
        <p>L'entité forge doit désigner une entité de gestion, par défaut c'est elle-même.</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie.</p>

        <h5 id="omgcpmid">OMGCPMID / MID</h5>
        <p>Identifiant de l'entité de gestion du sac de jetons (<i>manage</i>).</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie.</p>

        <h5 id="omgcppid">OMGCPPID / PID</h5>
        <p>Identifiant de l’objet du sac de jetons (<i>pool</i>).</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>L'objet d'un sac de jetons ne peut en aucun cas contenir son propre identifiant <code>PID</code>.</p>

        <h5 id="omgcpdta">OMGCPDTA / DTA</h5>
        <p>Identifiant de l’entité autorité de temps pour les limites de temps.</p>
        <p>La gestion du temps avec une autorité de temps permet de prendre en compte sérieusement les suppression
            programmées de jeton (<code>DTC</code>/<code>DTD</code>) ainsi que leur inflation/déflation automatique
            (<code>IDM</code>/<code>IDR</code>/<code>IDP</code>).</p>
        <p>L’autorité de temps peut être spécifique pour chaque jeton mais il est plus logique qu’elle soit commune à
            une monnaie ou dans certains cas à un sac de jetons.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omgcpdtc">OMGCPDTC / DTC</h5>
        <p>Date de création du sac de jetons.</p>
        <p>Forme texte libre limitée à 128 caractères. Doit pourvoir être interprété comme une date.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omgcpdtd">OMGCPDTD / DTD</h5>
        <p>Date de suppression programmée du sac de jetons.</p>
        <p> Forme texte libre limitée à 128 caractères. Doit pourvoir être interprété comme une date pour être
            fonctionel.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omgcpcom">OMGCPCOM / COM</h5>
        <p>Commentaire texte libre limité à 4096 caractères.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie.</p>

        <h5 id="omgcpcpr">OMGCPCPR / CPR</h5>
        <p>Licence du jeton sous forme d’une texte libre limité à 1024 caractères.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie.</p>

        <h5 id="omgcpidm">OMGCPIDM / IDM</h5>
        <p>Mode de fonctionnement du mécanisme d’inflation/déflation (<i>mode</i>) des jetons dépendants du sac de
            jetons.</p>
        <p>Les modes sont <i>creation</i> ou <i>transaction</i> ou <i>disabled</i>.</p>
        <p>Suivant le mode, le mécanisme tient compte du temps passé depuis la dernière transaction ou depuis l’émission
            du jeton.</p>
        <p>Le mécanisme d’inflation/déflation (<code>IDM</code>/<code>IDR</code>/<code>IDP</code>), si activé, avec un
            taux de variation inférieur à 1, donc en déflation, permet de forcer les détenteurs de jeton à les utiliser
            plutôt que de les stocker. Les jetons concernés vont donc perdre de la valeur par rapport aux nouveaux
            jetons ou par rapport à ceux qui circulent.</p>
        <p>Si activé, avec un taux de variation suppérieur à 1, donc en inflation, permet de favoriser la conservation
            des jetons et valorise les vieux jetons sur les nouveaux ou ceux qui circulent beaucoup.</p>
        <p>En ne forçant pas cette propriété dans l'objet des jetons, il est possible d'avoir un taux de variation
            fluctuant en fonction des besoins. En le positionnant forçé à <i>disabled</i> cela désactive définitivement
            ce mécanisme au niveau du sac de jetons et de tous les jetons en dépendant.</p>
        <p>Un jeton peut se déprécier avec le temps mais une entité peut demander à l’autorité émettrice de la monnaie
            un échange de jeton ancien contre un jeton plus jeune, si l’autorité émettrice le permet.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>CF <a href="#omcpidm">C/IDM</a>.</p>

        <h5 id="omgcpidr">OMGCPIDR / IDR</h5>
        <p>Taux de variation du mécanisme d’inflation/déflation (<i>rate</i>) des jetons dépendants du sac de jetons.
        </p>
        <p>Égal à 1 (un), taux constant donc pas de variation.</p>
        <p>Doit être activé par <code>IDM</code>.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omgcpidp">OMGCPIDP / IDP</h5>
        <p>Périodicité d’application du taux de variation du mécanisme d’inflation/déflation (<i>period</i>) des jetons
            dépendants du sac de jetons.</p>
        <p>Unité exprimée en minutes.</p>
        <p>Si à 0 (zéro), la période n'est pas utilisé, donc la variation est non effective.</p>
        <p>Doit être activé par <code>IDM</code>.</p>
        <p>Présence facultative sans ordre après la ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omgcptcn">OMGCPTCN / TCN</h5>
        <p>Non utilisé !!!</p>
        <p>Définit le nombre de jetons à créer dans le pool ou par pools créés (cf <a href="#omcppcn">PCN</a>).</p>
        <p>Ce n'est pas écrit dans l'objet du sac de jetons ni enregistré via des liens. Cela sert uniquement au moment
            de la création d'un sac de jetons. Cependant un lien de rattachement sera créé pour chaque jeton depuis le
            sac de jeton avec en meta le <a href="#omjcptid"></a>TID</a>.</p>

        <h3 id="omgs">OMGS / Stockage</h3>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <h3 id="omgt">OMGT/ Transfert</h3>
        <p>A faire...</p>

        <h3 id="omgr">OMGR / Réservation</h3>
        <p>Les objets réservés spécifiquement pour les sacs de jetons :</p>
        <ul>
            <li>nebule/objet/monnaie/sac</li>
        </ul>

        <h3 id="omgo">OMGO / Oubli</h3>
        <p>L'oubli vonlontaire de certains liens et objets n'est encore ni théorisé ni implémenté mais deviendra
            indispensable lorsque l'espace viendra à manquer (cf <a href="#cn">CN</a>).</p>


        <h3 id="omj">OMJ / Jeton</h3>
        <p>A faire...</p>

        <h3 id="omjf">OMJF / Fonctionnement</h3>
        <p>Un jeton est un objet de référence qui va servir de support de transmission de valeur. Il est attaché à un ou
            plusieurs sacs de jetons. Sa gestion se fait dans des monnaies par l'intermédiaire de sacs de jetons
            attachés aux monnaies.</p>
        <p>Le jeton plus simple est un objet virtuel dont l’identifiant (<code>TID</code>) est généré aléatoirement. Ce
            peut être un simple compteur aussi mais chaque identifiant doit être unique par monnaie, et donc par sac de
            jetons aussi. L’utilisation d’un compteur de faible valeur est fortement déconseillé pour le
            <code>TID</code>. Par exemple :</p>
        <code>4d831b11bbf828b9cfd4752223bb8918cbd634c4b858691736afd8b34f1f0c62</code>
        <p>La deuxième forme de jeton est donc un objet dont le contenu va donner par son empreinte cryptographique un
            identifiant de jeton unique (<code>TID</code>). Il n’est dans ce cas pas possible d’avoir un compteur
            puisque les valeurs de identifiant sont assimilées à des valeurs aléatoires.</p>
        <p>Exemple d'objet de jeton :</p>
        <pre>
TYP:cryptoken
SID:5f3ad5265bb3306b3266e1935d067d9ec15965d0a970554bc6161eb3328907a9
CAP:TYP MOD SID CAP AID MID NAM UNI DTA DTC DTD COM CPR IDM IDR IDP VMD VID TRS CID PID FID BID VAL CLB CLD SVC TID
CID:daf832e3042cc849efcd5b6531df835a9c5f6251b2101e20972f9a9db2a8ae24
PID:37aa32a2cec224ae908226eb1c600fbeacd5faf1f84b2e292c0be808c0296333
FID:f0f7cf5c921320b97daedeb7c53f2417921c747c77b696f8a25ff29277661d2f
NAM:poux
UNI:pou
VAL:100
</pre>
        <p>Un jeton va disposer de plusieurs propriétés connues par leurs abréviations, voir <a href="#omjcp">OMJCP</a>.
        </p>

        <h3 id="omjn">OMJN / Nommage</h3>
        <p>Un jeton hérite du nommage de la monnaie via le sac de jeton auquel il est rattaché.</p>
        <p>Le nom complet d'un objet de type jeton est uniquement extrait de la propriété <code>NAM</code>. Dans
            certains cas il peut êrte formé de <code>NAM(UNI)</code> mais la propriété <code>UNI</code> a plutôt
            vocation a être utilisée dans un affichage condensé avec une valeur.</p>

        <h3 id="omjp">OMJP / Protection</h3>
        <p>A faire...</p>

        <h3 id="omjd">OMJD / Dissimulation</h3>
        <p>A faire...</p>

        <h3 id="omjl">OMJL / Liens</h3>
        <p>A faire...</p>

        <h3 id="omjv">OMJV / Valeur</h3>
        <p>C’est une valeur calculée strictement numérique du jeton à un instant donné par rapport à une monnaie. Elle
            s'appelle la valeur relative du jeton.</p>
        <p>Par défaut, si <code>VAL</code> non défini, la valeur de <code>VAL</code> est à interpréter comme équivalente
            à 1 (un).</p>
        <p>Ce n'est pas écrit dans l'objet du jeton ni enregistré via des liens. La valeur relative du jeton est
            recalculée à chaque usage du jeton en fonction des paramêtres <code>DTA</code>, <code>DTC</code>,
            <code>DTD</code>, <code>IDM</code>, <code>IDR</code>, <code>IDP</code>, <code>CLB</code> et <code>CLD</code>.
        </p>
        <p>Si le jeton est désactivé, sa valeur relative est nulle.</p>
        <p>A faire... le détail des calculs de la valeur relative en fonction de chaque propriétés citées.</p>

        <h3 id="omjc">OMJC / Création</h3>
        <p>Si l'objet de référence du jeton est virtuel, il est forçément généré aléatoirement. Sinon il dépend du
            contenu de l'objet et est rendu unique grâce à la propriété <a href="#omjcpsid">SID</a>.</p>
        <p>Un jeton va disposer de plusieurs propriétés connues par leurs abréviations.</p>
        <p>Le contenu des objets des jetons va recevoir plusieurs lignes de type <code>clé:valeur</code>. Chaque ligne
            débute par trois lettre en majuscules définissant le sens sémantique (<i>clé</i>) de la ligne, suivi d’un
            deux-points ( <code>:</code> ) et de la valeur associée. La valeur est un texte en minuscule sans caractères
            spéciaux, l’espace des caractères est limité aux lettres minuscules, aux chiffres, à l’espace (sauf au début
            et à la fin), au point, à la virgule et à l’égal. La valeur est par défaut limité en taille à 1024
            caractères sauf mention contraire pour une propriété. Il ne doit pas y avoir d’espace sur une ligne, ni en
            début et fin de ligne, ni autour du deux-points. Chaque ligne est terminée par un retour chariot type UNIX.
        </p>
        <p>Chaque propriété d’un jeton que l’on retrouve sous forme <code>clé:valeur</code> va être doublé d’un lien.
            Cependant les liens pouvant être annulés, les propriétés à figer sont écrites dans le jeton. Ainsi, une
            <code>clé:valeur</code> inscrite dans le jeton est prioritaire sur un lien équivalent.</p>
        <p>Dans l'objet du jeton, les clés <a href="#omjcptyp">TYP</a> et <a href="#omjcpsid">SID</a> sont obligatoires,
            toujours au début et dans cet ordre.</p>
        <p>Le début de contenu avec <code>TYP:cryptoken</code> permet de marquer un type de contenu facile à vérifier.
        </p>
        <p>La seconde ligne avec le <a href="#omjcpsid">SID</a> permet d’avoir un contenu unique et donc une empreinte
            unique pour chaque jeton.</p>

        <h4 id="omjcl">OMJCL / Liens</h4>
        <p>Liste des liens à générer lors de la création d'un jeton.</p>
        <p>A faire...</p>

        <h4 id="omjcp">OMJCP / Propriétés</h4>
        <p></p>

        <h5 id="omjcph">OMJCPH / Héritage</h5>
        <p>Certaines propriétés sont héritées de la monnaie, si ces propriétés sont définies dans la monnaie. Ce doit
            être la monnaie déclarée en cours d'utilisation et le jeton doit dépendre de cette monnaie via un sac de
            jetons. De la même façon certaines propriétés sont héritées en second lieu du sac de jeton. Les héritages
            sont prioritaires sur les propriétés définies via l'objet et les liens.</p>

        <h5 id="omjcphct">OMJCPHCT / HCT</h5>
        <p>Définit si l'objet du jeton a un contenu. Si il n'a pas de contenu l'objet du jeton est virtuel et correspond
            à son SID, et les paramètres du jeton ne peuvent pas être forcés.</p>
        <p>Ce n'est pas écrit dans l'objet du jeton ni enregistré via des liens. Cela sert uniquement au moment de la
            création d'un jeton.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie ou du sac de jetons.</p>

        <h5 id="omjcptyp">OMJCPTYP / TYP</h5>
        <p>Le type de jeton.</p>
        <p>Toujours à la valeur <i>cryptoken</i>.</p>
        <p>Présence obligatoire en ligne 1 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie ou du sac de jetons.</p>

        <h5 id="omjcpsid">OMJCPSID / SID</h5>
        <p>Le numéro de série identifiant le jeton (<i>serial</i>).</p>
        <p>Si l'objet de référence du jeton est virtuel, l'identifiant du jeton <code>TID</code> sera le
            <code>SID</code>.</p>
        <p>Si l'objet de référence du jeton n'est pas virtuel, l'identifiant du jeton <code>TID</code> dépend du contenu
            de l'objet et est rendu unique grâce à la propriété <code>SID</code>.</p>
        <p>La valeur est de préférence aléatoire mais peut être un compteur à condition d'être unique. L’utilisation
            d’un compteur de faible valeur est fortement déconseillée.</p>
        <p>Si aléatoire, la génération pseudo aléatoire du <code>SID</code> est faite en partant d’un dérivé de la date
            avec quelques valeurs locales. Il n’y a pas de contrainte de sécurité sur cette valeur. Puis une boucle
            interne génère un bon aléa au fur et à mesure de la génération des jetons via une fonction de hash. Le tout
            ne consomme pas du tout de précieux aléa de bonne qualité.</p>
        <p>Présence obligatoire en ligne 2 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie ou du sac de jetons.</p>

        <h5 id="omjcpcap">OMJCPCAP / CAP</h5>
        <p>Liste des capacités connues du jeton.</p>
        <p>Si une capacité n'est pas présente elle ne peut être invoquée, même si elle est forcée.</p>
        <p>Le contenu de cette propriété est hérité de la monnaie.</p>
        <p>Présence obligatoire en ligne 3 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpcid">OMJCPCID / CID</h5>
        <p>Identifiant de l’objet de la monnaie (<i>currency</i>).</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence obligatoire en ligne 4 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcppid">OMJCPPID / PID</h5>
        <p>Identifiant de l’objet du sac de jetons (<i>pool</i>).</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence facultative sans ordre après la ligne 2 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Présence obligatoire en ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcptid">OMJCPTID / TID</h5>
        <p>Identifiant du jeton.</p>
        <p>Sa valeur est égale à l'identifiant de l'objet.</p>
        <p>L'objet d'un jeton ne peut en aucun cas contenir son propre identifiant <code>TID</code>.</p>

        <h5 id="omjcpfid">OMJCPFID / FID</h5>
        <p>Identifiant de l'entité ayant forgé le jeton (<i>forge</i>).</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie ou du sac de jetons.</p>

        <h5 id="omjcpbid">OMJCPBID / BID</h5>
        <p>Identifiant du bloc de forge (<i>blockchain</i>).</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie ou du sac de jetons.</p>

        <h5 id="omjcpnam">OMJCPNAM / NAM</h5>
        <p>Le nom de la monnaie. Limité à 256 caractères.</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpuni">OMJCPUNI / UNI</h5>
        <p>Le nom de l'unité de la monnaie en 3 lettres maximum. Pas de chiffre.</p>
        <p>Une monnaie peut tout à fait réutiliser un sac de jetons et des propriétés d’une autre monnaie sans qu’il y
            ai conflit dans la gestion des jetons et de leurs transactions. Les valeurs associées peuvent être copiées
            sans que cela ne pose de problème.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpval">OMJCPVAL / VAL</h5>
        <p>Indication de valeur numérique initiale du jeton dans l’unité de la monnaie qui utilise le jeton.</p>
        <p>C’est une valeur strictement numérique.</p>
        <p>Par défaut, si non présent, la valeur est à interpréter comme équivalente à 1 (un).</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpdta">OMJCPDTA / DTA</h5>
        <p>Identifiant de l’entité autorité de temps pour les limites de temps.</p>
        <p>La gestion du temps avec une autorité de temps permet de prendre en compte sérieusement les suppression
            programmées de jeton (<code>DTC</code>/<code>DTD</code>) ainsi que leur inflation/déflation automatique
            (<code>IDM</code>/<code>IDR</code>/<code>IDP</code>).</p>
        <p>L’autorité de temps peut être spécifique pour chaque jeton mais il est plus logique qu’elle soit commune à
            une monnaie ou dans certains cas à un sac de jetons.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpdtc">OMJCPDTC / DTC</h5>
        <p>Date de création du jeton.</p>
        <p>Forme texte libre limitée à 128 caractères. Doit pourvoir être interprété comme une date.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpdtd">OMJCPDTD / DTD</h5>
        <p>Date de suppression programmée du jeton.</p>
        <p> Forme texte libre limitée à 128 caractères. Doit pourvoir être interprété comme une date pour être
            fonctionel.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpcom">OMJCPCOM / COM</h5>
        <p>Commentaire texte libre limité à 4096 caractères.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie ou du sac de jetons.</p>

        <h5 id="omjcpcpr">OMJCPCPR / CPR</h5>
        <p>Licence du jeton sous forme d’une texte libre limité à 1024 caractères.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>Cette propriété ne peut pas être hérité de la monnaie ou du sac de jetons.</p>

        <h5 id="omjcpidm">OMJCPIDM / IDM</h5>
        <p>Mode de fonctionnement du mécanisme d’inflation/déflation (<i>mode</i>) du jeton.</p>
        <p>Les modes sont <i>creation</i> ou <i>transaction</i> ou <i>disabled</i>.</p>
        <p>Suivant le mode, le mécanisme tient compte du temps passé depuis la dernière transaction ou depuis l’émission
            du jeton.</p>
        <p>Le mécanisme d’inflation/déflation (<code>IDM</code>/<code>IDR</code>/<code>IDP</code>), si activé, avec un
            taux de variation inférieur à 1, donc en déflation, permet de forcer les détenteurs de jeton à les utiliser
            plutôt que de les stocker. Les jetons concernés vont donc perdre de la valeur par rapport aux nouveaux
            jetons ou par rapport à ceux qui circulent.</p>
        <p>Si activé, avec un taux de variation suppérieur à 1, donc en inflation, permet de favoriser la conservation
            des jetons et valorise les vieux jetons sur les nouveaux ou ceux qui circulent beaucoup.</p>
        <p>En ne forçant pas cette propriété dans l'objet des jetons, il est possible d'avoir un taux de variation
            fluctuant en fonction des besoins. En le positionnant forçé à <i>disabled</i> cela désactive définitivement
            ce mécanisme au niveau du jeton.</p>
        <p>Un jeton peut se déprécier avec le temps mais une entité peut demander à l’autorité émettrice de la monnaie
            un échange de jeton ancien contre un jeton plus jeune, si l’autorité émettrice le permet.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>
        <p>CF <a href="#omcpidm">C/IDM</a>.</p>

        <h5 id="omjcpidr">OMJCPIDR / IDR</h5>
        <p>Taux de variation du mécanisme d’inflation/déflation (<i>rate</i>) du jeton.</p>
        <p>Égal à 1 (un), taux constant donc pas de variation.</p>
        <p>Doit être activé par <code>IDM</code>.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpidp">OMJCPIDP / IDP</h5>
        <p>Périodicité d’application du taux de variation du mécanisme d’inflation/déflation (<i>period</i>) du jeton.
        </p>
        <p>Unité exprimée en minutes.</p>
        <p>Si à 0 (zéro), la période n'est pas utilisé, donc la variation est non effective.</p>
        <p>Doit être activé par <code>IDM</code>.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpsvc">OMJCPSVC / SVC</h5>
        <p>Le jeton fait référence à un type de service rendu (<i>service</i>).</p>
        <p>Taille limitée à 1024 caractères.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpclb">OMJCPCLB / CLB</h5>
        <p>Le jeton peut être désactivé (<i>cancelable</i>).</p>
        <p>Par défaut un jeton n’est pas désactivable. Si cette option est présente, quelque soit son contenu, cela
            active la capacité de désactivation à la demande du jeton par la propriété <code>CLD</code>.</p>
        <p>Elle n’a pas d’action sur la propriété de désactivation programmée <code>DTD</code>. Un jeton peut avoir une
            date de suppression programmée et être non désactivable avant la date de suppression. Activer la propriété
            <code>CLD</code> de façon forcée dans le contenu du jeton est faisable mais n’a pas de sens. Des jetons
            peuvent être générés désactivés et activés à posteriori.</p>
        <p>Un jeton désactivé ne peut pas faire parti d’une transaction.</p>
        <p>La taille est de un caractère maximum.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcpcld">OMJCPCLD / CLD</h5>
        <p>Le jeton est désactivé (<i>canceled</i>).</p>
        <p>Cette propriété n’est d’utilisée que si <code>CLB</code> est activé.</p>
        <p>Si cette option est présente, quelque soit son contenu, cela désactive le jeton.</p>
        <p>Un jeton désactivé ne peut pas faire parti d’une transaction.</p>
        <p>La taille est de un caractère maximum.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h5 id="omjcptrs">OMJCPTRS / TRS</h5>
        <p>Liste des méthodes de transaction supportées.</p>
        <p>Les modes sont définis dans le chapitre <a href="omjm">modes de transfert</a>. Les modes supportés sont
            écrits les uns après les autres sur une seule ligne et séparés par un caractère espace.</p>
        <p>Le contenu de cette propriété est hérité de la monnaie.</p>
        <p>Présence facultative sans ordre après la ligne 5 dans l'objet si l'objet n'est pas virtuel.</p>

        <h3 id="omjs">OMJS / Stockage</h3>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <h3 id="omjt">OMJT/ Transfert</h3>
        <p>Le jeton peut faire l'objet de deux types de transferts. Il y a la méthode de transfert de l'information
            (liens et objets) et le marquage du transfert de valeur.</p>
        <h4 id="omjti">OMJTI/ Transfert d'information</h4>
        <p>A faire...</p>

        <h4 id="omjtv">OMJTV/ Transfert de valeur</h4>
        <p>Le transfert de valeur est appelé transaction.</p>
        <p>La transaction unitaire marque l'attribution univoque et unidirectionnel d'une valeur appartenant à une
            entité vers une autre entité. Cette transaction unitaire peut être faite en contrepartie d'une autre valeur
            physique ou virtuelle, mais cette autre valeur n'est pas directement représentée dans la transaction
            unitaire traitée.</p>
        <p>Ici nous appelerons transaction soit une transaction unitaire, soit un block de plusieurs transactions
            unitaires. Les valeurs attribuées dans un block de transactions sont soit des jetons complets, soit des
            parties de jetons. Cependant une transaction unitaire ne peut traiter qu'un unique jeton ou qu'une unique
            partie d'un unique jeton. Dans un block de transactions, toutes les transactions unitaires doivent traiter
            de la même monnaie.</p>
        <p>Une contrepartie d'une autre valeur physique ou virtuelle peut au besoin être inscrite dans un jeton comme
            description. Ce mécanisme nécessite un suivi particulier qui n'est pas pris en charge ici.</p>
        <p>Dans le code, la transaction est traité comme un lien. Si le lien est suffisant, dans le mode LNS (cf <a
                href="omjcptrs">TRS</a>), alors l'attribution du jeton peut être faite sur le lien uniquement. Si le
            lien fait référence à un objet tier, celui est considéré comme un block de transaction et est lu afin d'en
            extraire toutes les transactions unitaires.</p>

        <h4 id="omjm">OMJM/ Modes de transfert</h4>

        <h5 id="omjmlns">OMJMLNS/ Mode LNS</h5>
        <p>Le code <code>LNS</code> désigne la méthode de base avec un lien (L) matérialisant une transaction et
            imposant un jeton non sécable (NS).</p>
        <p>A faire...</p>

        <h3 id="omjr">OMJR / Réservation</h3>
        <p>Les objets réservés spécifiquement pour les jetons :</p>
        <ul>
            <li>nebule/objet/monnaie/jeton</li>
        </ul>

        <h3 id="omjo">OMJO / Oubli</h3>
        <p>L'oubli vonlontaire de certains liens et objets n'est encore ni théorisé ni implémenté mais deviendra
            indispensable lorsque l'espace viendra à manquer (cf <a href="#cn">CN</a>).</p>

        <?php
    }
}



// ========================================================================================
//   407_tokenpool.php
//   020250218163802
//   99eb3afaf37305a79a00511b3ae92785cc427e8fdecf3afd0918079b4f77b30e.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe TokenPool.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant l'ID d'un sac de jetons ou 'new' ;
 * - un tableau des paramètres du nouveau sac de jetons.
 *
 * L'ID d'un sac de jetons est forcément un texte en hexadécimal.
 *
 * Si une erreur survient lors de la lecture de le sac de jetons ou lors de la création, assigne l'ID 0.
 * ------------------------------------------------------------------------------------------
 */
class TokenPool extends Currency implements nodeInterface
{
    const SESSION_SAVED_VARS = array(
        '_id',
        '_fullName',
        '_cachePropertyLink',
        '_cachePropertiesLinks',
        '_cachePropertyID',
        '_cachePropertiesID',
        '_cacheProperty',
        '_cacheProperties',
        '_cacheMarkDanger',
        '_cacheMarkWarning',
        '_cacheMarkProtected',
        '_idProtected',
        '_idUnprotected',
        '_idProtectedKey',
        '_idUnprotectedKey',
        '_markProtectedChecked',
        '_cacheCurrentEntityUnlocked',
        '_usedUpdate',
        '_isEntity',
        '_isGroup',
        '_isConversation',
        '_isCurrency',
        '_isTokenPool',
        '_isToken',
        '_isWallet',
        '_properties',
        '_propertiesInherited',
        '_propertiesForced',
        '_seed',
        '_inheritedCID',
        '_inheritedPID',
    );

    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitCurrency'))
        {
            $this->_id = '0';
            $this->_isNew = false;
            return;
        }
        if (is_a($this->_entitiesInstance, 'Nebule\Library\Node'))
            $this->_cacheCurrentEntityUnlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();

        if ($this->_id != '0')
            $this->_loadTokenPool($this->_id);
    }

    /**
     *  Chargement d'un sac de jetons existant.
     *
     * @param string $id
     */
    private function _loadTokenPool(string $id): void
    {
        // Vérifie que c'est bien un objet.
        if (!Node::checkNID($id)
            || !$this->_ioInstance->checkLinkPresent($id)
            || !$this->_configurationInstance->getOptionAsBoolean('permitCurrency')
        ) {
            $id = '0';
        }

        $this->_id = $id;
        $this->_metrologyInstance->addLog('Load token pool ' . $id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        // On ne recherche pas les paramètres si ce n'est pas un sac de jetons.
        if ($this->getIsTokenPool('myself')) {
            $this->setAID();
            $this->setFID('0');
        }

        // Vérifie le sac de jetons.
        $TYP = $this->_getParamFromObject('TYP', (int)$this->_propertiesList['tokenpool']['PoolType']['limit']);
        $SID = $this->_getParamFromObject('SID', (int)$this->_propertiesList['tokenpool']['PoolSerialID']['limit']);
        $CID = $this->_getParamFromObject('CID', (int)$this->_propertiesList['tokenpool']['PoolCurrencyID']['limit']);
        if ($TYP == ''
            || $SID == ''
            || $CID == ''
        ) {
            $this->_id = '0';
        } else {
            $this->_propertiesList['tokenpool']['PoolID']['force'] = $id;
            $this->_properties['PID'] = $id;
        }
        $this->_propertiesForced['TYP'] = true;
        $this->_propertiesForced['SID'] = true;
        $this->_propertiesForced['CID'] = true;
        $this->_propertiesForced['PID'] = true;
    }

    /**
     * Création d'un nouveau sac de jetons.
     *
     * @param array $param
     * @param bool  $protected
     * @param bool  $obfuscated
     * @return boolean
     */
    public function setNewTokenPool(array $param, bool $protected = false, bool $obfuscated = false): bool
    {
        $this->_metrologyInstance->addLog('Ask create token pool', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        if (!$this->_isNew
            || sizeof($param) == 0
            || ( get_class($this) != 'TokenPool'
                && get_class($this) != 'Nebule\Library\TokenPool'
            )
        )
            return false;

        // Vérifie que l'on puisse créer un sac de jetons.
        if ($this->_configurationInstance->getOptionAsBoolean('permitWrite')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            && $this->_configurationInstance->getOptionAsBoolean('permitCurrency')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteCurrency')
            && $this->_configurationInstance->getOptionAsBoolean('permitCreateCurrency')
            && $this->_entitiesInstance->getCurrentEntityIsUnlocked()
        ) {
            // Génère la nouveau sac de jetons.
            $this->_id = $this->_createTokenPool($param, $protected, $obfuscated);

            // Si la génération s'est mal passée.
            if ($this->_id == '0') {
                $this->_metrologyInstance->addLog('Create token pool error on generation', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
                $this->_id = '0';
                return false;
            }
        } else {
            $this->_metrologyInstance->addLog('Create token pool error not autorized', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
            $this->_id = '0';
            return false;
        }
        return true;
    }


    /**
     * Crée un sac de jetons.
     * Les paramètres force* ne sont utilisés que si PoolHaveContent est à true.
     * Pour l'instant le code commence à prendre en compte PoolHaveContent à false mais le paramètre est forçé à true tant que le code n'est pas prêt.
     * Les options pour la génération d'un sac de jetons :
     * poolHaveContent
     * poolSerialID
     * poolForgeID
     * poolCurrencyID
     * poolComment
     * poolCopyright
     * poolTokenCount
     * forcePoolForgeID
     * forcePoolCurrencyID
     * forcePoolComment
     * forcePoolCopyright
     * Retourne la chaine avec 0 si erreur.
     *
     * @param array   $param
     * @param boolean $protected
     * @param boolean $obfuscated
     * @return string
     */
    private function _createTokenPool(array $param, bool $protected = false, bool $obfuscated = false): string
    {
        // Identifiant final du sac de jetons.
        $this->_id = '0';

        // Normalise les paramètres.
        $this->_normalizeInputParam($param);

        // Force l'écriture de l'objet du sac de jetons.
        $param['PoolHaveContent'] = true;

        // Force l'écriture du serial.
        $param['ForcePoolSerialID'] = true;

        // Détermine si le sac de jetons a un numéro de série fourni.
        $sid = '';
        if (isset($param['PoolSerialID'])
            && is_string($param['PoolSerialID'])
            && ctype_xdigit($param['PoolSerialID'])
        ) {
            $sid = $this->_stringFilter($param['PoolSerialID']);
            $this->_metrologyInstance->addLog('Generate token pool asked SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        } else {
            // Génération d'un identifiant de sac de jetons unique aléatoire.
            $sid = $this->_nebuleInstance->getCryptoInstance()->getRandom(128, Crypto::RANDOM_PSEUDO);
            $param['PoolSerialID'] = $sid;
            $this->_metrologyInstance->addLog('Generate token pool rand SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        }

        // Détermine la monnaie associée.
        $instanceCurrency = $this->_nebuleInstance->getCurrentCurrencyInstance();
        if ($instanceCurrency->getID() != '0') {
            $this->_propertiesList['tokenpool']['PoolCurrencyID']['force'] = $instanceCurrency->getID();
            $param['PoolCurrencyID'] = $instanceCurrency->getID();
        } else {
            $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' - error no valid CID selected', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
            return '0';
        }

        // Détermine le forgeur.
        $this->_propertiesList['tokenpool']['PoolForgeID']['force'] = $this->_entitiesInstance->getCurrentEntityID();
        $param['PoolForgeID'] = $this->_entitiesInstance->getCurrentEntityID();


        // Détermine si le jeton doit avoir un contenu.
        if (isset($param['PoolHaveContent'])
            && $param['PoolHaveContent'] === true
        ) {
            $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' HCT:true', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

            // Le contenu final commence par l'identifiant interne du sac de jetons.
            $content = 'TYP:' . $this->_propertiesList['tokenpool']['PoolType']['force'] . "\n"; // @todo peut être intégré au reste.
            $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' TYP:' . $this->_propertiesList['tokenpool']['PoolType']['force'], Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            $content .= 'SID:' . $sid . "\n";
            $content .= 'CID:' . $param['PoolCurrencyID'] . "\n";
            $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' CID:' . $param['PoolCurrencyID'], Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');

            // Pour chaque propriété, si présente et forcée, l'écrit dans l'objet.
            foreach ($this->_propertiesList['tokenpool'] as $name => $property) {
                if ($property['key'] != 'HCT'
                    && $property['key'] != 'TYP'
                    && $property['key'] != 'SID'
                    && $property['key'] != 'CID'
                    //&& $property['key'] != 'PCN'
                    //&& $property['key'] != 'TCN'
                    && isset($property['forceable'])
                    && $property['forceable'] === true
                    && isset($param['Force' . $name])
                    && $param['Force' . $name] === true
                    && isset($param[$name])
                    && $param[$name] != ''
                    && $param[$name] != null
                ) {
                    $value = null;
                    if ($property['type'] == 'boolean') {
                        if ($param[$name] === true) {
                            $value = true;
                        } else {
                            $value = false;
                        }
                    } elseif ($property['type'] == 'number') {
                        $value = (string)$param[$name];
                    } else {
                        $value = $param[$name];
                    }

                    // Ajoute la ligne.
                    $content .= $property['key'] . ':' . $value . "\n";
                    $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' force ' . $property['key'] . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                }
            }

            // Crée l'objet avec le contenu et l'écrit.
            $this->_data = $content;
            $this->_haveData = true;
            unset($content);

            // calcul l'ID.
            $this->_id = $this->_cryptoInstance->hash($this->_data);

            // Si l'objet doit être protégé.
            if ($protected) {
                $this->setProtected($obfuscated);
            } else {
                // Sinon écrit l'objet directement.
                $this->write();
            }
        } else {
            $this->_id = $sid;
            $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' HCT:false', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        }

        // Le sac de jetons a maintenant un PID.
        $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' PID:' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');


        // Prépare la génération des liens.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $source = $this->_id;
        $argObf = $obfuscated;

        // Le lien de type.
        $action = 'l';
        $target = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_MONNAIE_SAC);
        $meta = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_TYPE);
        $this->_createLink($signer, $date, $action, $source, $target, $meta, false);

        // Crée les liens associés au sac de jetons.
        $action = 'l';

        // Pour chaque propriété, si présente et a un méta, écrit le lien.
        foreach ($this->_propertiesList['tokenpool'] as $name => $property) {
            if (isset($param[$name])
                && $param[$name] != null
                && $property['key'] != 'PCN'
                && $property['key'] != 'TCN'
            ) {
                $value = null;
                if ($property['type'] == 'boolean') {
                    if ($param[$name] === true) {
                        $value = 'true';
                    } else {
                        $value = 'false';
                    }
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                } elseif ($property['type'] == 'number') {
                    $value = (string)$param[$name];
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                } elseif ($property['type'] == 'hexadecimal') {
                    $value = $param[$name];
                    $target = $value;
                } else {
                    $value = $param[$name];
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                }

                if ($value != null) {
                    $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' add ' . $property['key'] . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash($property['key']);
                    $this->_createLink($signer, $date, $action, $source, $target, $meta, $argObf);
                    $this->_metrologyInstance->addLog('Generate token pool SID:' . $sid . ' link=' . $target . '_' . $meta, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                }
            }
        }


        // Retourne l'identifiant du sac de jetons.
        $this->_metrologyInstance->addLog('Generate token pool end SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        return $this->_id;
    }

    /**
     * Retourne la liste des jetons du sac.
     *
     * @return array:string
     */
    public function getTokenList(): array
    {
        return $this->_getItemList('PID');
    }

    /**
     * Retourne le nombre de jetons du sac.
     *
     * @return integer
     */
    public function getTokenCount(): int
    {
        return sizeof($this->_getItemList('PID'));
    }


    /**
     * Extrait la valeur relative du sac de jetons à un instant donné.
     *
     * @param $date string
     * @return float|int
     */
    public function getRelativeValue($date): float|int
    {
        // Récupère la liste des jetons.
        $items = $this->_getItemList('PID');

        $total = 0;

        foreach ($items as $item) {
            $instance = $this->_cacheInstance->newToken($item);
            if ($instance->getID() != '0') {
                $total += $instance->getRelativeValue($date);
            }
        }

        return $total;
    }



    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
    }
}



// ========================================================================================
//   408_token.php
//   020250218163901
//   e53864d9df340a84a502e3ededb184f8c7376cfa2154d6d99acdee74835710bf.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe Token.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant l'ID d'un jeton ou 'new' ;
 * - un tableau des paramètres du nouveau jeton.
 *
 * L'ID d'un jeton est forcément un texte en hexadécimal.
 *
 * Si une erreur survient lors de la lecture de le jeton ou lors de la création, assigne l'ID 0.
 * ------------------------------------------------------------------------------------------
 */
class Token extends TokenPool implements nodeInterface
{
    const SESSION_SAVED_VARS = array(
        '_id',
        '_fullName',
        '_cachePropertyLink',
        '_cachePropertiesLinks',
        '_cachePropertyID',
        '_cachePropertiesID',
        '_cacheProperty',
        '_cacheProperties',
        '_cacheMarkDanger',
        '_cacheMarkWarning',
        '_cacheMarkProtected',
        '_idProtected',
        '_idUnprotected',
        '_idProtectedKey',
        '_idUnprotectedKey',
        '_markProtectedChecked',
        '_cacheCurrentEntityUnlocked',
        '_usedUpdate',
        '_isEntity',
        '_isGroup',
        '_isConversation',
        '_isCurrency',
        '_isTokenPool',
        '_isToken',
        '_isWallet',
        '_properties',
        '_propertiesInherited',
        '_propertiesForced',
        '_seed',
        '_inheritedCID',
        '_inheritedPID',
    );

    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitCurrency'))
        {
            $this->_id = '0';
            $this->_isNew = false;
            return;
        }
        if (is_a($this->_entitiesInstance, 'Nebule\Library\Node'))
            $this->_cacheCurrentEntityUnlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();

        if ($this->_id != '0')
            $this->_loadToken($this->_id);
    }

    /**
     *  Chargement d'un jeton existant.
     *
     * @param string $id
     */
    private function _loadToken(string $id): void
    {
        // Vérifie que c'est bien un objet.
        if (!Node::checkNID($id)
            || !$this->_ioInstance->checkLinkPresent($id)
            || !$this->_configurationInstance->getOptionAsBoolean('permitCurrency')
        ) {
            $id = '0';
        }

        $this->_id = $id;
        $this->_metrologyInstance->addLog('Load token ' . $id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        // On ne recherche pas les paramètres si ce n'est pas un jeton.
        if ($this->getIsToken('myself')) {
            $this->setAID();
            $this->setFID('0');
        }

        // Vérifie le jeton.
        $TYP = $this->_getParamFromObject('TYP', (int)$this->_propertiesList['token']['TokenType']['limit']);
        $SID = $this->_getParamFromObject('SID', (int)$this->_propertiesList['token']['TokenSerialID']['limit']);
        $CID = $this->_getParamFromObject('CID', (int)$this->_propertiesList['token']['TokenCurrencyID']['limit']);
        $PID = $this->_getParamFromObject('PID', (int)$this->_propertiesList['token']['TokenPoolID']['limit']);
        if ($TYP == ''
            || $SID == ''
            || $CID == ''
            || $PID == ''
        ) {
            $this->_id = '0';
        } else {
            $this->_propertiesList['token']['TokenID']['force'] = $id;
            $this->_properties['TID'] = $id;
        }
        $this->_propertiesForced['TYP'] = true;
        $this->_propertiesForced['SID'] = true;
        $this->_propertiesForced['CID'] = true;
        $this->_propertiesForced['PID'] = true;
        $this->_propertiesForced['TID'] = true;
    }

    /**
     * Création d'un nouveau jeton.
     *
     * @param array $param
     * @param bool  $protected
     * @param bool  $obfuscated
     * @return boolean
     */
    public function setNewToken(array $param, bool $protected = false, bool $obfuscated = false): bool
    {
        $this->_metrologyInstance->addLog('Ask create token', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        if (!$this->_isNew
            || sizeof($param) == 0
            || ( get_class($this) != 'Token'
                && get_class($this) != 'Nebule\Library\Token'
            )
        )
            return false;

        // Vérifie que l'on puisse créer un jeton.
        if ($this->_configurationInstance->getOptionAsBoolean('permitWrite')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            && $this->_configurationInstance->getOptionAsBoolean('permitCurrency')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteCurrency')
            && $this->_configurationInstance->getOptionAsBoolean('permitCreateCurrency')
            && $this->_entitiesInstance->getCurrentEntityIsUnlocked()
        ) {
            // Génère la nouveau jeton.
            $this->_id = $this->_createToken($param, $protected, $obfuscated);

            // Si la génération s'est mal passée.
            if ($this->_id == '0') {
                $this->_metrologyInstance->addLog('Create token error on generation', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
                $this->_id = '0';
                return false;
            }
        } else {
            $this->_metrologyInstance->addLog('Create token error not autorized', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
            $this->_id = '0';
            return false;
        }
        return true;
    }


    /**
     * Crée un jeton.
     * Les paramètres force* ne sont utilisés que si tokenHaveContent est à true.
     * Pour l'instant le code commence à prendre en compte tokenHaveContent à false mais le paramètre est forçé à true tant que le code n'est pas prêt.
     * Retourne la chaine avec 0 si erreur.
     *
     * @param array   $param
     * @param boolean $protected
     * @param boolean $obfuscated
     * @return string
     */
    private function _createToken(array $param, bool $protected = false, bool $obfuscated = false): string
    {
        // Identifiant final du sac de jetons.
        $this->_id = '0';

        // Normalise les paramètres.
        $this->_normalizeInputParam($param);

        // Force l'écriture de l'objet du sac de jetons.
        $param['TokenHaveContent'] = true;

        // Force l'écriture du serial.
        $param['ForceTokenSerialID'] = true;

        // Détermine si le sac de jetons a un numéro de série fourni.
        $sid = '';
        if (isset($param['TokenSerialID'])
            && is_string($param['TokenSerialID'])
            && $param['TokenSerialID'] != ''
            && ctype_xdigit($param['TokenSerialID'])
        ) {
            $sid = $this->_stringFilter($param['TokenSerialID']);
            $this->_metrologyInstance->addLog('Generate token asked SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        } else {
            // Génération d'un identifiant de sac de jetons unique aléatoire.
            $sid = $this->_nebuleInstance->getCryptoInstance()->getRandom(128, Crypto::RANDOM_PSEUDO);
            $param['TokenSerialID'] = $sid;
            $this->_metrologyInstance->addLog('Generate token rand SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        }

        // Détermine la monnaie associée.
        $instanceCurrency = $this->_nebuleInstance->getCurrentCurrencyInstance();
        if ($instanceCurrency->getID() != '0') {
            $this->_propertiesList['token']['TokenCurrencyID']['force'] = $instanceCurrency->getID();
            $param['TokenCurrencyID'] = $instanceCurrency->getID();
        } else {
            $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' - error no valid CID selected', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
            return '0';
        }

        // Détermine le sac de jetons associé.
        $instancePool = $this->_nebuleInstance->getCurrentTokenPoolInstance();
        if ($instancePool->getID() != '0') {
            $this->_propertiesList['token']['TokenPoolID']['force'] = $instancePool->getID();
            $param['TokenPoolID'] = $instancePool->getID();
        } else {
            $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' - error no valid PID selected', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
            return '0';
        }

        // Détermine le forgeur.
        $this->_propertiesList['token']['TokenForgeID']['force'] = $this->_entitiesInstance->getCurrentEntityID();
        $param['TokenForgeID'] = $this->_entitiesInstance->getCurrentEntityID();


        // Détermine si le jeton doit avoir un contenu.
        if (isset($param['TokenHaveContent'])
            && $param['TokenHaveContent'] === true
        ) {
            $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' HCT:true', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

            // Le contenu final commence par l'identifiant interne du sac de jetons.
            $content = 'TYP:' . $this->_propertiesList['token']['TokenType']['force'] . "\n"; // @todo peut être intégré au reste.
            $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' TYP:' . $this->_propertiesList['token']['TokenType']['force'], Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
            $content .= 'SID:' . $sid . "\n";
            $content .= 'CID:' . $param['TokenCurrencyID'] . "\n";
            $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' CID:' . $param['TokenCurrencyID'], Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
            $content .= 'PID:' . $param['TokenPoolID'] . "\n";
            $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' PID:' . $param['TokenPoolID'], Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');

            // Pour chaque propriété, si présente et forcée, l'écrit dans l'objet.
            foreach ($this->_propertiesList['token'] as $name => $property) {
                if ($property['key'] != 'HCT'
                    && $property['key'] != 'TYP'
                    && $property['key'] != 'SID'
                    && $property['key'] != 'CID'
                    && $property['key'] != 'PID'
                    //&& $property['key'] != 'PCN'
                    //&& $property['key'] != 'TCN'
                    && isset($property['forceable'])
                    && $property['forceable'] === true
                    && isset($param['Force' . $name])
                    && $param['Force' . $name] === true
                    && isset($param[$name])
                    && $param[$name] != ''
                    && $param[$name] != null
                ) {
                    $value = null;
                    if ($property['type'] == 'boolean') {
                        if ($param[$name] === true) {
                            $value = true;
                        } else {
                            $value = false;
                        }
                    } elseif ($property['type'] == 'number') {
                        $value = (string)$param[$name];
                    } else {
                        $value = $param[$name];
                    }

                    // Ajoute la ligne.
                    $content .= $property['key'] . ':' . $value . "\n";
                    $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' force ' . $property['key'] . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                }
            }

            // Crée l'objet avec le contenu et l'écrit.
            $this->_data = $content;
            $this->_haveData = true;
            unset($content);

            // calcul l'ID.
            $this->_id = $this->_cryptoInstance->hash($this->_data);

            // Si l'objet doit être protégé.
            if ($protected) {
                $this->setProtected($obfuscated);
            } else {
                // Sinon écrit l'objet directement.
                $this->write();
            }
        } else {
            $this->_id = $sid;
            $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' HCT:false', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
        }

        // Le sac de jetons a maintenant un PID.
        $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' TID:' . $this->_id, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');


        // Prépare la génération des liens.
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $date = date(DATE_ATOM);
        $source = $this->_id;
        $argObf = $obfuscated;

        // Le lien de type.
        $action = 'l';
        $target = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_MONNAIE_JETON);
        $meta = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_TYPE);
        $this->_createLink($signer, $date, $action, $source, $target, $meta, false);

        // Crée les liens associés au sac de jetons.
        $action = 'l';

        // Pour chaque propriété, si présente et a un méta, écrit le lien.
        foreach ($this->_propertiesList['token'] as $name => $property) {
            if (isset($param[$name])
                && $param[$name] != null
                && $property['key'] != 'PCN'
                && $property['key'] != 'TCN'
            ) {
                $value = null;
                if ($property['type'] == 'boolean') {
                    if ($param[$name] === true) {
                        $value = 'true';
                    } else {
                        $value = 'false';
                    }
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                } elseif ($property['type'] == 'number') {
                    $value = (string)$param[$name];
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                } elseif ($property['type'] == 'hexadecimal') {
                    $value = $param[$name];
                    $target = $value;
                } else {
                    $value = $param[$name];
                    $object = new Node($this->_nebuleInstance, '0', $value, false, false);
                    $object->setType(References::REFERENCE_OBJECT_TEXT);
                    $target = $object->getID();
                }

                if ($value != null) {
                    $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' add ' . $property['key'] . ':' . $value, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash($property['key']);
                    $this->_createLink($signer, $date, $action, $source, $target, $meta, $argObf);
                    $this->_metrologyInstance->addLog('Generate token SID:' . $sid . ' link=' . $target . '_' . $meta, Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');
                }
            }
        }


        // Retourne l'identifiant du sac de jetons.
        $this->_metrologyInstance->addLog('Generate token end SID:' . $sid, Metrology::LOG_LEVEL_NORMAL, __FUNCTION__, '00000000');
        return $this->_id;
    }


    /**
     * Extrait la valeur relative du jeton à un instant donné.
     *
     * @param $date string
     * @return float|int
     */
    public function getRelativeValue($date = ''): float|int
    {
        // Prépare la date de traitement.
        if (is_string($date)
            && $date != ''
        ) {
            $dateRef = strtotime($date);
        } else {
            $dateRef = microtime(true);
        }

        // Extraction de la valeur d'origine du jeton.
        $result = (double)$this->getParam('VAL');

        // Vérifie si désactivable et désactivé.
        $CLB = $this->getParam('CLB');
        $CLD = $this->getParam('CLD');
        if ($CLB
            && $CLD
        ) {
            $result = 0;
        }

        // Vérifie si dans l'interval de temps prévu.
        $DTA = $this->getParam('DTA');
        $DTC = $this->getParam('DTC');
        $DTD = $this->getParam('DTD');
        if ($DTA !== null) {
            // @todo
        }

        // Si paramétré, calcul l'inflation (ou déflation) de la valeur.
        $IDM = $this->getParam('IDM');
        $IDR = $this->getParam('IDR');
        $IDP = $this->getParam('IDP');
        if ($IDM != 'disabled') {
            // @todo
        }

        return $result;
    }



    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
    }
}



// ========================================================================================
//   409_wallet.php
//   020250215163515
//   932a78b55de892e7186f2267da0c9cc73182b57d358b599ab3534b9353cedfb3.sha2.256

/**
 * ------------------------------------------------------------------------------------------
 * La classe Wallet.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant l'ID d'un jeton ou 'new' ;
 * - un tableau des paramètres du nouveau portefeuille.
 *
 * L'ID d'un portefeuille est forcément un texte en hexadécimal.
 *
 * Si une erreur survient lors de la lecture du portefeuille ou lors de la création, assigne l'ID 0.
 * ------------------------------------------------------------------------------------------
 */
class Wallet extends Entity implements nodeInterface
{
    const SESSION_SAVED_VARS = array(
        '_id',
        '_fullName',
        '_cachePropertyLink',
        '_cachePropertiesLinks',
        '_cachePropertyID',
        '_cachePropertiesID',
        '_cacheProperty',
        '_cacheProperties',
        '_cacheMarkDanger',
        '_cacheMarkWarning',
        '_cacheMarkProtected',
        '_idProtected',
        '_idUnprotected',
        '_idProtectedKey',
        '_idUnprotectedKey',
        '_markProtectedChecked',
        '_cacheCurrentEntityUnlocked',
        '_usedUpdate',
        '_isEntity',
        '_isGroup',
        '_isConversation',
        '_isCurrency',
        '_isTokenPool',
        '_isToken',
        '_isWallet',
    );

    protected function _initialisation(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitCurrency'))
        {
            $this->_id = '0';
            $this->_isNew = false;
            return;
        }
        if (is_a($this->_entitiesInstance, 'Nebule\Library\Node'))
            $this->_cacheCurrentEntityUnlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();

        if ($this->_isNew)
            $this->_createNewWallet();
        elseif ($this->_id != '0')
            $this->getIsWallet();
    }

    /**
     * Création d'un nouveau portefeuille.
     *
     * @param array $param
     * @param bool  $protected
     * @param bool  $obfuscated
     * @return void
     */
    private function _createNewWallet(array $param, bool $protected = false, bool $obfuscated = false): void
    {
        $this->_metrologyInstance->addLog('Ask create wallet', Metrology::LOG_LEVEL_DEBUG, __FUNCTION__, '00000000');

        // Vérifie que l'on puisse créer un sac de jetons.
        if ($this->_configurationInstance->getOptionAsBoolean('permitWrite')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteObject')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            && $this->_configurationInstance->getOptionAsBoolean('permitCurrency')
            && $this->_configurationInstance->getOptionAsBoolean('permitWriteCurrency')
            && $this->_entitiesInstance->getCurrentEntityIsUnlocked()
        ) {
            // Génère la nouveau sac de jetons.
            $this->_id = $this->_createWallet($param, $protected, $obfuscated);

            // Si la génération s'est mal passée.
            if ($this->_id == '0') {
                $this->_metrologyInstance->addLog('Create wallet error on generation', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
                $this->_id = '0';
                return;
            }
        } else {
            $this->_metrologyInstance->addLog('Create wallet error not autorized', Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '00000000');
            $this->_id = '0';
            return;
        }
    }


    /**
     * Crée un portefeuille.
     * Retourne la chaine avec 0 si erreur.
     *
     * @param array   $param
     * @param boolean $protected
     * @param boolean $obfuscated
     * @return string
     */
    private function _createWallet(array $param, bool $protected = false, bool $obfuscated = false): string
    {
        // Identifiant final du portefeuille.
        $this->_id = '0';

        // @todo
        return '';
    }



    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
    }
}



// ========================================================================================
//   500_link_interface.php
//   020250215163515
//   d7fe6483a599135c9ffc12de6b7daea08369dadc9013c50dca6c1773b78459be.sha2.256

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
interface blocLinkInterface
{
    public function __construct(nebule $nebuleInstance, string $blocLink, string $linkType = Cache::TYPE_LINK);

    /**
     * Get full string of the link.
     *
     * @return string
     */
    public function getRaw(): string;

    /**
     * Get list of links in the bloc of links.
     *
     * @return array:linkInterface
     */
    public function getLinks(): array;

    /**
     * Get list of signers of the bloc of links.
     *
     * @return array
     */
    public function getSignersEID(): array;

    /**
     * Get parsed content of the link.
     * array(
     *   'link'
     *   'bh'
     *   'bh/rf'
     *   'bh/rf/app'
     *   'bh/rf/typ'
     *   'bh/rv'
     *   'bh/rv/ver'
     *   'bh/rv/sub'
     *   'bl'
     *   'bl/rc'
     *   'bl/rc/mod'
     *   'bl/rc/chr'
     *   'bl/rl1'
     *   'bl/rl1/req'
     *   'bl/rl1/nid1'
     *   'bl/rl1/nid2'
     *   'bl/rl1/nid3'
     *           ...
     *   'bl/rl2'
     *       ...
     *   'bs' => $bs,
     *   'bs/rs1'
     *   'bs/rs1/eid'
     *   'bs/rs1/sig'
     *   'bs/rs2'
     *       ...
     * )
     *
     * @return array:string
     */
    public function getParsed(): array;

    /**
     * Get validity state of the link.
     * At this state, the link structure and the signs have been checked. The link is fully usable.
     * @return boolean
     */
    public function getValid(): bool;

    /**
     * Get validity state of the structure of the link.
     * At this state, the link is fully understand but signs are not necessary checked.
     * @return boolean
     */
    public function getValidStructure(): bool;

    /**
     * Get the status of the signs of the link.
     * If we have many, all signs are not necessary valid but one of them have been checked as valid.
     * @return boolean
     */
    public function getSigned(): bool;

    /**
     * Get version of the link.
     *
     * @return string
     */
    public function getVersion(): string;

    /**
     * Get date of the link.
     *
     * @return string
     */
    public function getDate(): string;

    /**
     * Add a link (RL) on new bloc of links (BL).
     *
     * @param string $rl
     * @return bool
     */
    public function addLink(string $rl): bool;

    /**
     * Sign the link.
     *
     * @param string $publicKey
     * @return boolean
     */
    public function sign(string $publicKey = '0'): bool;

    /**
     * Write the link.
     *
     * @return boolean
     */
    public function write(): bool;

    /**
     * Sign and write the link.
     *
     * @param string $publicKey
     * @return boolean
     */
    public function signWrite(string $publicKey = '0'): bool;
}

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
interface linkInterface
{
    public function __construct(nebule $nebuleInstance, string $rl, blocLinkInterface $blocLink);

    /**
     * Retourne le lien complet.
     *
     * @return string
     */
    public function getRaw(): string;

    /**
     * Get parsed content of the link.
     * array(
     *   'bl/rl'
     *   'bl/rl/req'
     *   'bl/rl/nid1'
     *   'bl/rl/nid2'
     *   'bl/rl/nid3'
     *           ...
     * )
     *
     * @return array:string
     */
    public function getParsed(): array;

    /**
     * Retourne l'état de vérification et de validité du lien.
     *
     * @return boolean
     */
    public function getValid(): bool;

    /**
     * Retourne si le lien est signé et si la signature est valide.
     * @return boolean
     */
    public function getSigned(): bool;

    public function getVersion(): string;

    public function getDate(): string;

    public function getSignersEID(): array;
}



// ========================================================================================
//   501_bloclink.php
//   020250217133332
//   36c4b4a8e6883ee9ca05136d0fac6a18ba8c4a5d418096cedaf22ab06fed8b52.sha2.256

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class BlocLink extends Functions implements blocLinkInterface
{
    const SESSION_SAVED_VARS = array(
        '_rawBlocLink',
        '_linksType',
        '_links',
        '_parsedLink',
        '_signed',
        '_checkCompleted',
        '_valid',
        '_validStructure',
        '_maxRL',
        '_maxRLUID',
        '_maxRS',
        '_lid',
    );

    const LINK_VERSION = '2:0';
    const NID_MIN_HASH_SIZE = 64;
    const NID_MAX_HASH_SIZE = 8192;
    const NID_MIN_ALGO_SIZE = 2;
    const NID_MAX_ALGO_SIZE = 12;
    const LINK_MAX_BL_SIZE = 16384;
    const LINK_MAX_BS_SIZE = 16384;
    const LINK_MAX_RL_SIZE = 4096;

    protected string $_rawBlocLink = '';
    protected string $_linksType = '';
    protected array $_links = array();
    protected array $_parsedLink = array();
    protected bool $_newLink = false;
    protected int $_newLinkCount = 0;
    protected bool $_checkCompleted = false;
    protected bool $_valid = false;
    protected bool $_validStructure = false;
    protected bool $_signed = false;
    protected int $_maxRL = 1;
    protected int $_maxRLUID = 3;
    protected int $_maxRS = 1;
    protected ?string $_lid = null;
    private string $_newBL = '';

    public function __construct(nebule $nebuleInstance, string $blocLink, string $linkType = Cache::TYPE_LINK)
    {
        parent::__construct($nebuleInstance);
        $this->setEnvironmentLibrary($nebuleInstance);

        $this->_linksType = $linkType;
        $this->_maxRL = $this->_configurationInstance->getOptionAsInteger('linkMaxRL');
        $this->_maxRLUID = $this->_configurationInstance->getOptionAsInteger('linkMaxRLUID');
        $this->_maxRS = $this->_configurationInstance->getOptionAsInteger('linkMaxRS');

        $this->_metrologyInstance->addLog(substr($blocLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $this->_metrologyInstance->addLinkRead();

        if ($blocLink == 'new')
            $this->_new();
        else
            $this->_parse($blocLink);

        $this->initialisation();
    }

    public function __toString()
    {
        return $this->_rawBlocLink;
    }

    public function __sleep()
    {
        return self::SESSION_SAVED_VARS;
    }

    public function __wakeup()
    {
        /*global $nebuleInstance;
        $this->_nebuleInstance = $nebuleInstance;
        $this->_metrologyInstance = $nebuleInstance->getMetrologyInstance();
        $this->_configurationInstance = $nebuleInstance->getConfigurationInstance();
        $this->_ioInstance = $nebuleInstance->getIoInstance();
        $this->_cryptoInstance = $nebuleInstance->getCryptoInstance();*/
    }

    protected function _initialisation(): void
    {
        foreach ($this->_links as $link)
            $link->setBlocInstance($this);
    }

    /**
     * Verify and parse links on bloc.
     * After parsing, a bloc link is valid only if structure and one signe are both valid.
     *
     * @param string $link
     * @return bool
     */
    protected function _parse(string $link): bool
    {
        $this->_metrologyInstance->addLog(substr($link, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_lid = $this->_cryptoInstance->hash($link);

        $this->_validStructure = false;
        if (strlen($link) > (self::LINK_MAX_BL_SIZE + self::LINK_MAX_BS_SIZE + 1)) return false;
        if (strlen($link) == 0) return false;

        // Extract blocs from link L : BH_BL_BS
        $bh = strtok(trim($link), '_');
        if (is_bool($bh)) return false;
        $this->_metrologyInstance->addLog('check link BH=' . $bh, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '36e5871a');
        $bl = strtok('_');
        if (is_bool($bl)) return false;
        $this->_metrologyInstance->addLog('check link BL=' . $bl, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'dc1eb20f');
        $bs = strtok('_');
        if (!$this->_newLink && is_bool($bs)) return false;
        $this->_metrologyInstance->addLog('check link BS=' . $bs, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '41e23a37');

        // Check link overflow
        if (strtok('_') !== false) return false;

        // Check BH, BL and BS.
        if (!$this->_checkBH($bh)) {
            $this->_metrologyInstance->addLog('check link BH failed ' . $link, Metrology::LOG_LEVEL_ERROR, __METHOD__, '80cbba4b');
            return false;
        }
        if (!$this->_checkBL($bl)) {
            $this->_metrologyInstance->addLog('check link BL failed ' . $link, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'c5d22fda');
            return false;
        }
        $bh_bl = $bh . '_' . $bl;
        // Do not check on new link before sign.
        if (!$this->_newLink && !$this->_checkBS($bh_bl, $bs)) {
            $this->_metrologyInstance->addLog('check link BS failed '.$link, Metrology::LOG_LEVEL_ERROR, __METHOD__, '2828e6ae');
            return false;
        }

        $this->_parsedLink['link'] = $link;
        $this->_validStructure = true;
        $this->_checkCompleted = true;
        if ($this->_signed) $this->_valid = true;
        return true;
    }

    protected function _new(): void
    {
        $this->_rawBlocLink = 'nebule:link/' . $this->_configurationInstance->getOptionAsString('defaultLinksVersion') . '_';
        $this->_newBL = '';
        $this->_newLink = true;
        $this->_newLinkCount = 0;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::getRaw()
     * @return string
     */
    public function getRaw(): string
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_rawBlocLink;
    }
    
    public function getLID(): string
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_lid;
    }

    public function getNew(): bool
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_newLink;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::getLinks()
     * @return array:linkInterface
     */
    public function getLinks(): array
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_links;
    }

    /**
     * {@inheritDoc}
     * @return array
     *@see blocLinkInterface::getSignersEID()
     */
    public function getSignersEID(): array
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $result = array();
        for ($i = 1; $i <= $this->_parsedLink['bs/count']; $i++)
            $result[] = $this->_parsedLink["bs/rs$i/eid"];

        return $result;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::getParsed()
     * @return array
     */
    public function getParsed(): array
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_parsedLink;
    }

    /**
     * Get if the link have been checked entirely.
     * @return boolean
     */
    public function getCheckCompleted(): bool
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_checkCompleted;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::getValid()
     * @return boolean
     */
    public function getValid(): bool
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_valid;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::getValidStructure()
     * @return boolean
     */
    public function getValidStructure(): bool
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_validStructure;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::getSigned()
     * @return boolean
     */
    public function getSigned(): bool
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_signed;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::getVersion()
     * @return string
     */
    public function getVersion(): string
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        /*if (!isset($this->_parsedLink['bl/rv']))
            return '';

        return $this->_parsedLink['bl/rv'];*/
        return $this->_parsedLink['bl/rv'] ?: '';
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::getDate()
     * @return string
     */
    public function getDate(): string
    {
        $this->_metrologyInstance->addLog('LID=' . $this->_lid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        //if (!isset($this->_parsedLink['bl/rc/chr']))
        //    return '';

        //return $this->_parsedLink['bl/rc/chr'];
        return $this->_parsedLink['bl/rc/chr'] ?: '';
    }



    /**
     * Check block BH on link.
     *
     * @param string $bh
     * @return bool
     */
    protected function _checkBH(string &$bh): bool
    {
        $this->_metrologyInstance->addLog(substr($bh, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($bh) > 15)
        {
            $this->_metrologyInstance->addLog('BH size overflow '.substr($bh, 0, 1000) . '+', Metrology::LOG_LEVEL_ERROR, __METHOD__, '84cf4447');
            return false;
        }

        $rf = strtok($bh, '/');
        if (is_bool($rf)) return false;
        $rv = strtok('/');
        if (is_bool($rv)) return false;

        // Check bloc overflow
        if (strtok('/') !== false) return false;

        // Check RF and RV.
        if (!$this->_checkRF($rf)) {
            $this->_metrologyInstance->addLog('check link BH/RF failed ' . $bh, Metrology::LOG_LEVEL_ERROR, __METHOD__, '3c0b5c4f');
            return false;
        }
        if (!$this->_checkRV($rv)) {
            $this->_metrologyInstance->addLog('check link BH/RV failed ' . $bh, Metrology::LOG_LEVEL_ERROR, __METHOD__, '80c5975c');
            return false;
        }

        $this->_parsedLink['bh'] = $bh;
        return true;
    }

    /**
     * Check block RF on link.
     *
     * @param string $rf
     * @return bool
     */
    protected function _checkRF(string &$rf): bool
    {
        $this->_metrologyInstance->addLog(substr($rf, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($rf) > 11) return false;

        // Check items from RF : APP:TYP
        $app = strtok($rf, ':');
        if (is_bool($app)) return false;
        if ($app != 'nebule') return false;
        $typ = strtok(':');
        if (is_bool($typ)) return false;
        if ($typ != 'link') return false;

        // Check registry overflow
        if (strtok(':') !== false) return false;

        $this->_parsedLink['bh/rf'] = $rf;
        return true;
    }

    /**
     * Check block RV on link.
     *
     * @param string $rv
     * @return bool
     */
    protected function _checkRV(string &$rv): bool
    {
        $this->_metrologyInstance->addLog(substr($rv, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($rv) > 3) return false;

        // Check items from RV : VER:SUB
        $ver = strtok($rv, ':');
        if (is_bool($ver)) return false;
        $sub = strtok(':');
        if (is_bool($sub)) return false;
        if ("$ver:$sub" != self::LINK_VERSION) return false;

        // Check registry overflow
        if (strtok(':') !== false) return false;

        $this->_parsedLink['bh/rv'] = $rv;
        return true;
    }

    /**
     * Check block BL on link.
     *
     * @param string $bl
     * @return bool
     */
    protected function _checkBL(string &$bl): bool
    {
        $this->_metrologyInstance->addLog(substr($bl, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($bl) > self::LINK_MAX_BL_SIZE)
        {
            $this->_metrologyInstance->addLog('BL size overflow '.substr($bl, 0, 1000) . '+',
                Metrology::LOG_LEVEL_ERROR, __METHOD__, '9d3f9bda');
            return false;
        }

        $rc = strtok($bl, '/');
        if (is_bool($rc)) return false;
        if (!$this->_checkRC($rc)) {
            $this->_metrologyInstance->addLog('check link BL/RC failed ' . $bl, Metrology::LOG_LEVEL_ERROR, __METHOD__, '86a58996');
            return false;
        }

        $rc = strtok($bl, '/');
        $rl = strtok('/');
        if (is_bool($rl)) return false;

        $list = array();
        $i = 0;
        while (!is_bool($rl))
        {
            $list[$i] = $rl;
            $i++;
            if ($i > $this->_maxRL)
            {
                $this->_metrologyInstance->addLog('BL overflow '.substr($bl, 0, 1000) . '+ maxRL=' . $this->_maxRL, Metrology::LOG_LEVEL_ERROR, __METHOD__, '6a777706');
                return false;
            }
            $rl = strtok('/');
        }
        foreach ($list as $i => $rl)
        {
            if (!$this->_checkRL($rl, (string)$i)) $this->_metrologyInstance->addLog('check link BL/RL failed '.$bl, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'd865ee87');
            if (!$this->_checkRL($rl, (string)($i+1))) return false;
            if ($this->_linksType == Cache::TYPE_TRANSACTION)
                $instanceRL = new Transaction($this->_nebuleInstance, $rl, $this);
            else
                $instanceRL = new LinkRegister($this->_nebuleInstance, $rl, $this); // FIXME ne fonctionne pas correctement !
            if (!$instanceRL->getValid()) return false;

            $this->_links[] = $instanceRL;
        }

        $this->_parsedLink['bl'] = $bl;
        return true;
    }

    /**
     * Check block RC on link.
     * MOD must be 0 for now.
     * CHR must begin with 0, only contain digits and no more than 15 digits (020211018195523 or 020211018, etc...).
     *
     * @param string $rc
     * @return bool
     */
    protected function _checkRC(string &$rc): bool
    {
        $this->_metrologyInstance->addLog(substr($rc, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($rc) > 27)
        {
            $this->_metrologyInstance->addLog('BL/RC size overflow '.substr($rc, 0, 1000) . '+', Metrology::LOG_LEVEL_ERROR, __METHOD__, '7282e54a');
            return false;
        }

        // Check items from RC : MOD>CHR
        $mod = strtok($rc, '>');
        if ($mod != '0') return false;
        $chr = strtok('>');
        if (is_bool($chr)) return false;
        if (strlen($chr) > 15) return false;
        if (!ctype_digit($chr)) return false;
        if ($chr[0] != '0') return false;
        // TODO faire un filtrage plus fin...

        // Check registry overflow
        if (strtok('>') !== false)
        {
            $this->_metrologyInstance->addLog('BL/RC overflow '.substr($rc, 0, 1000) . '+', Metrology::LOG_LEVEL_ERROR, __METHOD__, '84cf4447');
            return false;
        }

        $this->_parsedLink['bl/rc'] = $rc;
        $this->_parsedLink['bl/rc/mod'] = $mod;
        $this->_parsedLink['bl/rc/chr'] = $chr;
        return true;
    }

    /**
     * Check block RL on link.
     *
     * @param string $rl
     * @param string $i
     * @return bool
     */
    protected function _checkRL(string &$rl, string $i): bool
    {
        $this->_metrologyInstance->addLog(substr($rl, 0, 512) . ' / ' . $i,
            Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($rl) > BlocLink::LINK_MAX_RL_SIZE)
        {
            $this->_metrologyInstance->addLog('BL/RL size overflow '.substr($rl, 0, 1000) . '+', Metrology::LOG_LEVEL_ERROR, __METHOD__, '4835c147');
            return false;
        }

        // Extract items from RL : REQ>NID>NID>NID>NID...
        $req = strtok($rl, '>');
        if (is_bool($req)) return false;
        if (!$this->_checkREQ($req, $i)) return false;
        $this->_parsedLink["bl/rl$i/req"] = $req;

        $rl1nid = strtok('>');
        if (is_bool($rl1nid)) return false;

        $list = array();
        $j = 0;
        while (!is_bool($rl1nid))
        {
            $list[$j] = $rl1nid;
            $j++;
            if ($j > $this->_maxRLUID)
            {
                $this->_metrologyInstance->addLog('BL/RL overflow '.substr($rl, 0, 1000) . '+ maxRLUID=' . $this->_maxRLUID, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'd0c9961a');
                return false;
            }
            $rl1nid = strtok('>');
        }
        foreach ($list as $j => $nid)
        {
            if (!Node::checkNID($nid, $j > 0)) return false;
            $this->_parsedLink['bl/rl'.$i.'/nid'.$j] = $nid;
        }

        $this->_parsedLink['bl/rl'.$i] = $rl;
        return true;
    }

    /**
     * Check block REQ on link.
     *
     * @param string $req
     * @param string $i
     * @return bool
     */
    protected function _checkREQ(string &$req, string $i): bool
    {
        $this->_metrologyInstance->addLog(substr($req, 0, 512) . ' / ' . $i, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if ($req != 'l'
            && $req != 'f'
            && $req != 'u'
            && $req != 'd'
            && $req != 'e'
            && $req != 'c'
            && $req != 'k'
            && $req != 's'
            && $req != 'x'
        )
            return false;

        $this->_parsedLink["bl/rl$i/req"] = $req;
        return true;
    }

    /**
     * Check block BS on link.
     * TODO make a loop on many RS avoid attack on link signs fusion.
     *
     * @param string $bh_bl
     * @param string $bs
     * @return bool
     */
    protected function _checkBS(string &$bh_bl, string &$bs): bool
    {
        $this->_metrologyInstance->addLog(substr($bs, 0, 512),
            Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($bs) > self::LINK_MAX_BS_SIZE)
        {
            $this->_metrologyInstance->addLog('BS size overflow '.substr($bs, 0, 1000) . '+', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'efc551d7');
            return false;
        }

        $rs = strtok($bs, '/');
        if (is_bool($rs)) return false;

        $i = 0;
        while (!is_bool($rs))
        {
            $i++;
            if ($i > $this->_maxRS)
            {
                $this->_metrologyInstance->addLog('BS overflow '.substr($bs, 0, 1000) . '+', Metrology::LOG_LEVEL_ERROR, __METHOD__, '9f2e670f');
                return false;
            }
            //if (!$this->_checkRS($rs, $bh, $bl)) $this->_metrology->addLog('check link BS/RS failed '.$bs, Metrology::LOG_LEVEL_ERROR, __METHOD__, '0690f5ac');
            //if (!$this->_checkRS($rs, $bh_bl, (string)$i)) return false;
            $this->_checkRS($rs, $bh_bl, (string)$i); // Do not quit on invalid sign, just need one of them ok.

            $rs = strtok('/');
        }

        $this->_parsedLink['bs'] = $bs;
        $this->_parsedLink['bs/count'] = $i;
        return true;
    }

    /**
     * Check block RS on link.
     *
     * @param string $rs
     * @param string $bh_bl
     * @param string $i
     * @return bool
     */
    protected function _checkRS(string &$rs, string &$bh_bl, string $i): bool
    {
        $this->_metrologyInstance->addLog(substr($rs, 0, 512) . ' / ' . $i, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($rs) > 4096) return false; // TODO à revoir.

        // Extract items from RS : NID>SIG
        $nid = strtok($rs, '>');
        if (is_bool($nid))
            return false;
        $sig = strtok('>');
        if (is_bool($sig))
            return false;

        // Check registry overflow
        if (strtok('>') !== false) return false;

        // --- --- --- --- --- --- --- --- ---
        // Check content RS 1 NID 1 : hash.algo.size
        if (!Node::checkNID($nid, false)) {
            $this->_metrologyInstance->addLog('check link bs/rs1/eid failed '.$rs, Metrology::LOG_LEVEL_ERROR, __METHOD__, '6e1150f9');
            return false;
        }
        $this->_parsedLink["bs/rs$i/eid"] = $nid;

        if (!$this->_checkSIG($bh_bl, $sig, $nid, $i)) {
            $this->_metrologyInstance->addLog('check link BS/RS1/SIG failed '.$rs, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'e99ec81f');
            return false;
        }

        $this->_parsedLink["bs/rs$i"] = $rs;
        $this->_signed = true;
        return true;
    }

    /**
     * Check block SIG on link.
     *
     * @param string $bh_bl
     * @param string $sig
     * @param string $nid
     * @param string $i
     * @return boolean
     */
    protected function _checkSIG(string &$bh_bl, string &$sig, string &$nid, string $i): bool
    {
        $this->_metrologyInstance->addLog($sig . ' / ' . $nid . ' / ' . $i, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($sig) > 4096) return false; // TODO à revoir.

        // Check hash value.
        $sign = strtok($sig, '.');
        if (is_bool($sign)) return false;
        if (strlen($sign) < self::NID_MIN_HASH_SIZE) return false;
        if (strlen($sign) > self::NID_MAX_HASH_SIZE) return false;
        if (!ctype_xdigit($sign)) return false;

        // Check algo value.
        $algo = strtok('.');
        if (is_bool($algo)) return false;
        if (strlen($algo) < self::NID_MIN_ALGO_SIZE) return false;
        if (strlen($algo) > self::NID_MAX_ALGO_SIZE) return false;
        if (!ctype_alnum($algo)) return false;

        // Check size value.
        $size = strtok('.');
        if (is_bool($size)) return false;
        if (!ctype_digit($size)) return false; // Check content before!
        if ((int)$size < self::NID_MIN_HASH_SIZE) return false;
        if ((int)$size > self::NID_MAX_HASH_SIZE) return false;
        //if (strlen($sign) != (int)$size) return false; // TODO can't be checked ?

        // Check item overflow
        if (strtok('.') !== false) return false;

        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckSignOnVerify')) return true;
        if ($this->_checkObjectContent($nid)) {
            $hash = $this->_cryptoInstance->hash($bh_bl, $algo . '.' . $size);
            $publicKey = $this->_ioInstance->getObject($nid);

            if ($this->_cryptoInstance->verify($hash, $sign, $publicKey))
            {
                $this->_parsedLink["bs/rs$i/sig"] = $sig;
                return true;
            }
        }
        return false;
    }

    protected function _checkObjectContent($oid): bool
    {
        $this->_metrologyInstance->addLog($oid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (!Node::checkNID($oid, false)
            || !$this->_ioInstance->checkObjectPresent($oid)
        )
            return false;
        return true;
    }

    /**
     * Add a link (RL) on new bloc of links (BL).
     *
     * @param string $rl
     * @return bool
     */
    public function addLink(string $rl): bool
    {
        if (!$this->_newLink || $rl == '')
            return false;

        if ($this->_newLinkCount >= $this->_configurationInstance->getOptionAsInteger('linkMaxRL')) {
            $this->_metrologyInstance->addLog('can not add new link, limited by linkMaxRL', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'c7aac0dd');
            return false;
        }

        $instance = new LinkRegister($this->_nebuleInstance, $rl, $this);
        if ($instance->getValidStructure())
        {
            $this->_newBL .= '/' . $rl;
            $this->_newLinkCount++;
        }
        $this->_lid = $this->_cryptoInstance->hash($this->_rawBlocLink);

        return true;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::sign()
     * @param string $publicKey
     * @param string $date
     * @return boolean
     */
    public function sign(string $publicKey = '0', string $date = ''): bool
    {
        $this->_metrologyInstance->addLog('sign ' . substr($this->_rawBlocLink, 0, 128), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, 'b6e89674');

        if (!$this->_newLink
            || !$this->_configurationInstance->getOptionAsBoolean('permitCreateLink')
        ) {
            $this->_metrologyInstance->addLog('can not sign link, permitCreateLink=false', Metrology::LOG_LEVEL_ERROR, __METHOD__, '976483ad');
            return false;
        }

        if ($this->_newLinkCount == 0) {
            $this->_metrologyInstance->addLog('can not sign empty link', Metrology::LOG_LEVEL_ERROR, __METHOD__, '09c33dba');
            return false;
        }

        if ($date == '')
            $date = '0>0' . date('YmdHis');

        // Prepare new link to sign.
        $this->_rawBlocLink .= $date . $this->_newBL;
        $this->_parse($this->_rawBlocLink);
        $this->_newLink = false;

        if (!$this->_validStructure) {
            $this->_metrologyInstance->addLog('can not sign invalid link', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'cd989943');
            return false;
        }

        if ($publicKey == '0') {
            $publicKeyID = $this->_entitiesInstance->getCurrentEntityID();
            $publicKeyInstance = $this->_entitiesInstance->getCurrentEntityInstance();
        } elseif ($publicKey == $this->_entitiesInstance->getCurrentEntityID()) {
            $publicKeyInstance = $this->_entitiesInstance->getCurrentEntityInstance();
            $publicKeyID = $publicKey;
        } else {
            $publicKeyInstance = $this->_cacheInstance->newEntity($publicKey);
            $publicKeyID = $publicKey;
        }
        $this->_metrologyInstance->addLog('sign link for ' . $publicKeyID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'd3c9521d');

        $hashAlgo = $this->_configurationInstance->getOptionAsString('cryptoHashAlgorithm');

        $sign = $publicKeyInstance->signLink($this->_rawBlocLink, $hashAlgo);
        if ($sign !== null) {
            $bs = $publicKeyID . '>' . $sign;
            $this->_parsedLink['bs'] = $bs;
            if (!$this->_checkBS($this->_rawBlocLink, $bs))
                return false;
            $this->_rawBlocLink .= '_' . $bs;
            $this->_parsedLink['link'] = $this->_rawBlocLink;
            $this->_signed = true;
            $this->_valid = true;
            $this->_lid = $this->_cryptoInstance->hash($this->_rawBlocLink);
            return true;
        }

        return false;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::write()
     * @return boolean
     */
    public function write(): bool
    {
        $this->_metrologyInstance->addLog('write ' . substr($this->_rawBlocLink, 0, 128), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '50faf214');

        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')
            || !$this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            || !$this->_valid
            || !$this->_signed
        )
            return false;

        $this->_metrologyInstance->addAction('addlnk', $this->_rawBlocLink, $this->_valid);

        // If needed, in history.
        if ($this->_configurationInstance->getOptionAsBoolean('permitHistoryLinksSign'))
            $this->_ioInstance->setBlockLink(nebule::NEBULE_LOCAL_HISTORY_FILE, $this->_rawBlocLink);

        // If needed, in signers.
        for ($j = 0; $j > $this->_maxRS; $j++) {
            if (isset($this->_parsedLink['bs/rs'.$j.'/eid'])) {
                $this->_metrologyInstance->addLog('add link on bs/rs' . $j . '/eid' . $j, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'e8b0aea5');
                $this->_ioInstance->setBlockLink($this->_parsedLink['bs/rs' . $j . '/eid'], $this->_rawBlocLink);
            } else
                break;
        }

        for ($i = 0 ; $i < $this->_maxRL; $i++) {
            if (isset($this->_parsedLink['bl/rl' . $i . '/req'])) {
                if ($this->_parsedLink['bl/rl' . $i . '/req'] != 'c') {
                    for ($j = 0; $j < $this->_maxRLUID; $j++) {
                        if (isset($this->_parsedLink['bl/rl' . $i . '/nid' . $j])) {
                            $this->_metrologyInstance->addLog('add link on bl/rl' . $i . '/nid' . $j, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c2b1d5ff');
                            $this->_ioInstance->setBlockLink($this->_parsedLink['bl/rl' . $i . '/nid' . $j], $this->_rawBlocLink);
                        }
                    }
                } elseif ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink')) { // TODO verify
                    for ($j = 0; $j < $this->_maxRS; $j++) {
                        if (isset($this->_parsedLink['bs/rs' . $j . '/eid']))
                            $this->_ioInstance->setBlockLink($this->_parsedLink['bs/rs' . $j . '/eid'] . '-' . $this->_parsedLink['bl/rl' . $i . '/nid1'], $this->_rawBlocLink);
                        else
                            break;
                    }
                }
            } else
                break;
        }
        return true;
    }

    /**
     * {@inheritDoc}
     * @see blocLinkInterface::signWrite()
     * @param string $publicKey
     * @param string $date
     * @return boolean
     */
    public function signWrite(string $publicKey = '0', string $date = ''): bool
    {
        $this->_metrologyInstance->addLog('sign write ' . substr($this->_rawBlocLink, 0, 128), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '51a338d4');

        if ($this->sign($publicKey, $date))
            return $this->write();
        return false;
    }



    /**
     * Affiche la partie du menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#b">B / Bloc de liens</a>
            <ul>
                <li><a href="#bd">BD / Description</a></li>
                <li><a href="#bc">BC / Construction</a>
                    <ul>
                        <li><a href="#bcb">BCB / Blocs</a>
                            <ul>
                                <li><a href="#bcbh">BCBH / Bloc d'entête</a></li>
                                <li><a href="#bcbl">BCBL / Bloc de liens</a></li>
                                <li><a href="#bcbs">BCBS / Bloc de signature</a></li>
                            </ul>
                        </li>
                        <li><a href="#bcr">BCR / Registres</a>
                            <ul>
                                <li><a href="#bcrf">BCRF / Registre de forme</a></li>
                                <li><a href="#bcrv">BCRV / Registre de version</a></li>
                                <li><a href="#bcrc">BCRC / Registre de chronologie</a></li>
                                <li><a href="#bcrl">BCRL / Registre de liens</a></li>
                                <li><a href="#bcrs">BCRS / Registre de signature</a></li>
                            </ul>
                        </li>
                        <li><a href="#bce">BCE / Eléments</a>
                            <ul>
                                <li><a href="#bceapp">BCEAPP / Application</a></li>
                                <li><a href="#bcetyp">BCETYP / Type de contenu</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="#bt">BT / Transfert</a></li>
                <li><a href="#bv">BV / Vérification</a></li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h1 id="b">B / Bloc de liens</h1>
        <p>Le bloc de liens permet d'agréger un ou plusieurs registres de liens, de le rendre transferable et de le
            sécuriser. Voir <a href="#l">L</a>.</p>
        <p>On parlera par facilité de bloc de liens BL pour la partie opérationnelle contenant uniquement les registres
            de liens RL. Cependant, le bloc de liens doit être compris aussi avec le bloc d'entête BH permettant sa
            transmission et le loc de signature permettant sa sécurisation. Sa sureté de fonctionnement est gérée par sa
            structure rigide prédéfinit par le bloc d'entête.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p style="color:red;">Cette partie est périmée avec la nouvelle version de liens !</p>
        <p>Le lien est la matérialisation dans un graphe d’une relation entre deux objets pondéré par un troisième
            objet.</p>

        <h2 id="bd">BD / Description</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h2 id="bs">BS / Structure</h2>
        <p>Le bloc de liens est enregistré dans une structure avec un format définit et contraint afin de pouvoir être
            stocké et échangé de façon sûre et sécurisée.</p>
        <p>Cette structure a quatre niveaux de profondeur avec pour chaque niveau un séparateur de champs spécifique. Il
            n'y a pas de risque de confusion lors de la navigation dans les champs avec ces séparateurs spécifiques.</p>
        <p>La structure du bloc de liens :</p>
        <ul>
            <li>L : BH_BL_BS
                <ul>
                    <li>BH : RF/RV
                        <ul>
                            <li>RF : APP:TYP
                                <ul>
                                    <li>APP : nebule</li>
                                    <li>TYP : link</li>
                                </ul>
                            </li>
                            <li>RV : VERS:SUB
                                <ul>
                                    <li>VER : 2</li>
                                    <li>SUB : 0</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>BL : RC/RL/RL...
                        <ul>
                            <li>RC : MOD>CHR</li>
                            <li>RL : REQ>NID>NID>NID...
                                <ul>
                                    <li>REQ</li>
                                    <li>NID : hash.algo.size</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>BS : RS/RS...
                        <ul>
                            <li>RS : EID>SIG
                                <ul>
                                    <li>EID : hash.algo.size</li>
                                    <li>SIG : sign.algo.size</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>

        <h2 id="bc">BC / Construction</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="bcb">BCB / Blocs</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bcbh">BCBH / Bloc d'entête</h4>
        <p>Le bloc d'entête contient les registres <a href="#bcrf">RF</a> et <a href="#bcrv">RV</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bcbl">BCBL / Bloc de liens</h4>
        <p>Le bloc de liens contient les registres <a href="#bcrc">RC</a> et <a href="#bcrl">RL</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bcbs">BCBS / Bloc de signature</h4>
        <p>Le bloc d'entête contient les registres <a href="#bcrs">RS</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="bcr">BCR / Registres</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bcrf">BCRF / Registre de forme</h4>
        <p>Le registre de forme est le premier registre du <a href="#BCBH">bloc d'entête</a>.
            Il contient les éléments <a href="#bceapp">APP</a> et <a href="#bcetyp">TYP</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bcrv">BCRV / Registre de version</h4>
        <p>Le registre de version est le second et dernier registre du <a href="#BCBH">bloc d'entête</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bcrc">BCRC / Registre de chronologie</h4>
        <p>Le registre de chronologie est le premier registre du <a href="#BCBL">bloc de liens</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bcrl">BCRL / Registre de liens</h4>
        <p>Le registre de liens est le second registre et les suivants du <a href="#BCBL">bloc de liens</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bcrs">BCRS / Registre de signature</h4>
        <p>Le registre de signature est le ou les registres du <a href="#BCBL">bloc de signature</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h3 id="bce">BCE / Eléments</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="bceapp">BCEAPP / Application</h4>
        <p>L'élément application (APP) est le premier élément du <a href="#BCBH">Registre de forme</a>.</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h2 id="bt">BT / Transfert</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h2 id="bv">BV / Vérification</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php
    }
}



// ========================================================================================
//   502_link_register.php
//   020250302163941
//   66f5f970d89c901f3978766f02a171aafc9932bfedbb845d850e230adceb4646.sha2.256

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class LinkRegister extends Functions implements linkInterface
{
    const SESSION_SAVED_VARS = array(
        '_rawLink',
        '_parsedLink',
        '_parsedLinkObfuscated',
        '_signe',
        '_obfuscated',
        '_valid',
        '_validStructure',
        '_signed',
        '_permitObfuscated',
        '_maxRLUID',
    );

    protected ?BlocLink $_blocLink = null;
    protected string $_rawLink = '';
    protected array $_parsedLink = array();
    protected array $_parsedLinkObfuscated = array();
    protected string $_signe = '0';
    protected bool $_obfuscated = false;
    protected bool $_valid = false;
    protected bool $_validStructure = false;
    protected bool $_signed = false;
    protected bool $_permitObfuscated = false;
    protected int $_maxRLUID = 4;

    public function __construct(nebule $nebuleInstance, string $rl, blocLinkInterface $blocLink)
    {
        parent::__construct($nebuleInstance);
        $this->setEnvironmentLibrary($nebuleInstance);
        $this->_maxRLUID = $this->_configurationInstance->getOptionAsInteger('linkMaxRLUID'); // FIXME ne lit pas correctement la valeur.

        $this->_metrologyInstance->addLog(substr($rl, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $this->_blocLink = $blocLink;
        $this->_rawLink = $rl;
        $this->_validStructure = $this->_checkRL($rl);

        $this->initialisation();
    }

    public function __toString()
    {
        return $this->_rawLink;
    }

    public function __sleep()
    {
        return self::SESSION_SAVED_VARS;
    }

    public function __wakeup()
    {
        /*global $nebuleInstance;
        $this->_nebuleInstance = $nebuleInstance;
        $this->_metrologyInstance = $nebuleInstance->getMetrologyInstance();
        $this->_configurationInstance = $nebuleInstance->getConfigurationInstance();
        $this->_ioInstance = $nebuleInstance->getIoInstance();
        $this->_cryptoInstance = $nebuleInstance->getCryptoInstance();
        $this->_permitObfuscated = (bool)$this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink');*/
    }

    protected function _initialisation(): void
    {
        $this->_permitObfuscated = $this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink');

        $this->_obfuscated = false;
        if ($this->_permitObfuscated && $this->_parsedLink['bl/rl/req'] == 'c')
            $this->_extractObfuscated();
    }

    /**
     * Link - Check block RL on link.
     *
     * @param string $rl
     * @return bool
     */
    protected function _checkRL(string $rl): bool
    {
        $this->_metrologyInstance->addLog(substr($rl, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (strlen($rl) > BlocLink::LINK_MAX_RL_SIZE) {
            $this->_metrologyInstance->addLog('BL/RL size overflow '.substr($rl, 0, 1000) . '+', Metrology::LOG_LEVEL_ERROR, __METHOD__, '8d33e123');
            return false;
        }

        // Extract items from RL : REQ>NID>NID>NID>NID...
        $req = strtok($rl, '>');
        if (is_bool($req)) {
            $this->_metrologyInstance->addLog('invalid REQ', Metrology::LOG_LEVEL_ERROR, __METHOD__, '380638fc');
            return false;
        }
        if (!$this->_checkREQ($req))
            return false;
        $this->_parsedLink['bl/rl/req'] = $req;

        $rl1nid = strtok('>');
        if (is_bool($rl1nid)) {
            $this->_metrologyInstance->addLog('null NID1', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'f4f0eb13');
            return false;
        }

        $list = array();
        $j = 0;
        while (!is_bool($rl1nid)) {
            $list[$j] = $rl1nid;
            $j++;
            if ($j > $this->_maxRLUID) {
                $this->_metrologyInstance->addLog('BL/RL overflow ' . substr($rl, 0, 200) . '+ maxRLUID=' . $this->_maxRLUID, Metrology::LOG_LEVEL_ERROR, __METHOD__, '72920c39');
                return false;
            }
            $rl1nid = strtok('>');
        }
        foreach ($list as $j => $nid) {
            if (!Node::checkNID($nid, $j > 0)) {
                $this->_metrologyInstance->addLog('invalid NID ' . $nid, Metrology::LOG_LEVEL_ERROR, __METHOD__, '40b3486e');
                return false;
            }
            $this->_parsedLink['bl/rl/nid'.($j+1)] = $nid;
        }

        $this->_parsedLink['bl/rl'] = $rl;
        $this->_valid = true;
        return true;
    }

    /**
     * Link - Check block REQ on link.
     *
     * @param string $req
     * @return bool
     */
    protected function _checkREQ(string &$req): bool
    {
        $this->_metrologyInstance->addLog(substr($req, 0, 5), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if ($req != 'l'
            && $req != 'f'
            && $req != 'u'
            && $req != 'd'
            && $req != 'e'
            && $req != 'c'
            && $req != 'k'
            && $req != 's'
            && $req != 'x'
        ) {
            $this->_metrologyInstance->addLog('invalid REQ value', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'f0deaee8');
            return false;
        }

        return true;
    }

    /**
     * Force bloc instance if not defined.
     * Should be only use on link's instance wakeup.
     *
     * @param BlocLink $instance
     * @return void
     */
    public function setBlocInstance(BlocLink $instance): void
    {
        $this->_metrologyInstance?->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (!is_null($this->_blocLink))
            return;
        $this->_blocLink = $instance;
    }

    /**
     * {@inheritDoc}
     * @see linkInterface::getRaw()
     * @return string
     */
    public function getRaw(): string
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_rawLink;
    }

    /**
     * Retourne le bloc du lien.
     *
     * @return BlocLink
     */
    public function getBlocLink(): BlocLink
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return $this->_blocLink;
    }

    public function getParsed(): array
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_parsedLink;
    }

    public function getSignersEID(): array
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_blocLink->getSignersEID();
    }

    public function getDate(): string
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_blocLink->getDate();
    }

    /**
     * Retourne l'état de vérification et de validité du lien.
     * Un état transitoire à true existe lors de la vérification initiale du bloc de liens en cours.
     *
     * @return boolean
     */
    public function getValid(): bool
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (! $this->_validStructure)
            $this->_metrologyInstance->addLog('get valid is false', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'ecbbd1de');

        return ( $this->_blocLink->getValid() || !$this->_blocLink->getCheckCompleted() ) && $this->_valid;
    }

    /**
     * Retourne l'état de validité de la forme syntaxique du lien.
     *
     * @return boolean
     */
    public function getValidStructure(): bool
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (! $this->_validStructure)
            $this->_metrologyInstance->addLog('get valid structure is false', Metrology::LOG_LEVEL_ERROR, __METHOD__, '73233c1c');

        return $this->_validStructure;
    }

    /**
     * Retourne si le lien est signé et si la signature est valide.
     * @return boolean
     */
    public function getSigned(): bool
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (! $this->_validStructure)
            $this->_metrologyInstance->addLog('get signed is false', Metrology::LOG_LEVEL_ERROR, __METHOD__, '84c305e5');

        return $this->_blocLink->getSigned();
    }

    /**
     * Retourne si le lien est dissimulé.
     * Dans ce cas les informations retournées sont les informations du lien non dissimulé.
     *
     * @return boolean
     */
    public function getObfuscated(): bool
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_obfuscated;
    }

    /**
     * Retourne la version avec laquelle est exploité le lien.
     *
     * @return string
     */
    public function getVersion(): string
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        return $this->_blocLink->getVersion();
    }



    /**
     * Extraction de la partie dissimulée du lien.
     * Ne vérifie pas la cohérence ou la validité des champs !
     *
     * @return boolean
     */
    protected function _extractObfuscated(): bool
    {
        $this->_metrologyInstance->addLog('extract obfuscated part', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $this->_parsedLinkObfuscated = $this->_parsedLink;

        // TODO

        return false;
    }




    /**
     * Offusque le lien. Ne pas oublier de l'écrire.
     * @return boolean
     * @todo
     *
     * Le lien à dissimuler est concaténé avec un bourrage (padding) d'espace de taille aléatoire compris entre 3 et 5 fois la taille du champs source.
     *
     */
    public function setObfuscate(): bool
    {
        $this->_metrologyInstance->addLog('convert link to obfuscated', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '654de486');

        if (!$this->_obfuscated
            && $this->_valid
            && $this->_permitObfuscated
        ) {
            // @todo
        }

        return false;
    }

    /**
     * Désoffusque le lien. Ne pas oublier de l'écrire.
     * @return boolean
     * @todo
     *
     */
    public function unsetObfuscate(): bool
    {
        $this->_metrologyInstance->addLog('dis-obfuscate link', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '5e357597');

        if ($this->_obfuscated
            && $this->_valid
        ) {
            // @todo
        }

        return false;
    }

    /**
     * Extrait le lien offusqué.
     * @return boolean
     * @todo
     *
     */
    public function decrypt(): bool
    {
        $this->_metrologyInstance->addLog(substr($this->_rawLink, 0, 512), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '2c0b785a');

        if ($this->_obfuscated
            && $this->_valid
        ) {
            // @todo
        }
        return false;
    }



    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#l">L / Registre de lien</a>
            <ul>
                <li><a href="#ls">LS / Structure</a></li>
                <li><a href="#lelpo">LELPO / Liens à Propos d’un Objet</a></li>
                <li><a href="#lelco">LELCO / Liens Contenu dans un Objet</a></li>
                <li><a href="#le">LE / Entête</a></li>
                <li><a href="#lr">LR / Registre</a>
                    <ul>
                        <li><a href="#lrsi">LRSI / Le champ <code>Signature</code></a></li>
                        <li><a href="#lrusi">LRHSI / Le champ <code>HashSignataire</code></a></li>
                        <li><a href="#lrt">LRT / Le champ <code>TimeStamp</code></a></li>
                        <li><a href="#lra">LRA / Le champ <code>Action</code></a>
                            <ul>
                                <li><a href="#lral">LRAL / Action <code>l</code> – Lien entre objets</a></li>
                                <li><a href="#lraf">LRAF / Action <code>f</code> – Dérivé d’objet</a></li>
                                <li><a href="#lrau">LRAU / Action <code>u</code> – Mise à jour d’objet</a></li>
                                <li><a href="#lrad">LRAD / Action <code>d</code> – Suppression d’objet</a></li>
                                <li><a href="#lrae">LRAE / Action <code>e</code> – Équivalence d’objets</a></li>
                                <li><a href="#lrac">LRAC / Action <code>c</code> – Chiffrement de lien</a></li>
                                <li><a href="#lrak">LRAK / Action <code>k</code> – Chiffrement d’objet</a></li>
                                <li><a href="#lras">LRAS / Action <code>s</code> – Subdivision d’objet</a></li>
                                <li><a href="#lrax">LRAX / Action <code>x</code> – Suppression de lien</a></li>
                            </ul>
                        </li>
                        <li><a href="#lrhs">LRHS / Le champ <code>HashSource</code></a></li>
                        <li><a href="#lrhc">LRHC / Le champ <code>HashCible</code></a></li>
                        <li><a href="#lrhm">LRHM / Le champ <code>HashMeta</code></a></li>
                    </ul>
                </li>
                <li><a href="#l1">L1 / Lien simple</a></li>
                <li><a href="#l2">L2 / Lien double</a></li>
                <li><a href="#l3">L3 / Lien triple</a></li>
                <li><a href="#ls">LS / Stockage</a>
                    <ul>
                        <li><a href="#lsa">LSA / Arborescence</a></li>
                        <li><a href="#lsd">LSD / Dissimulation</a>
                            <ul>
                                <li><a href="#lsdrp">LSDRP / Registre public</a></li>
                                <li><a href="#lsdrd">LSDRD / Registre dissimulé</a></li>
                                <li><a href="#lsda">LSDA / Attaque sur la dissimulation</a></li>
                                <li><a href="#lsds">LSDS / Stockage et transcodage</a>
                                    <ul>
                                        <li><a href="#lsdst">LSDST / Translation de lien</a></li>
                                        <li><a href="#lsdsp">LSDSP / Protection de translation</a></li>
                                    </ul>
                                </li>
                                <li><a href="#lsdt">LSDT / Transfert et partage</a></li>
                                <li><a href="#lsdc">LSDC / Compromission</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="#lt">LT / Transfert</a></li>
                <li><a href="#lv">LV / Vérification</a></li>
                <li><a href="#lo">LO / Oubli</a></li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h1 id="l">L / Registre de lien</h1>
        <p>Le lien est la matérialisation dans un graphe d’une relation entre deux nœuds, généralement des objets.
            Le type de cette relation est définie par un troisième objet, c'est la façon dont on va interpréter
            la relation entre les deux premiers nœuds.
            La relation peut être contextualisée avec un quatrième nœud, ou plus.</p>
        <p>Dans le cas d'un lien à deux ou trois nœuds, nous sommes dans un cas similaire à un
            <a href="https://fr.wikipedia.org/wiki/Th%C3%A9orie_des_graphes">graphe</a> orienté tel qu'on
            le trouve dans une base de données de type graphe. Nous retrouvons ce principe dans le Resource
            Description Framework (<a href="https://fr.wikipedia.org/wiki/Resource_Description_Framework">RDF</a>).
            À une différence près cependant, c'est qu'ici le lien ne contient que des identifiants de nœuds et non des
            contenus.</p>
        <p>Dans le cas d'un lien avec plus de 3 nœuds, nous sommes dans un
            <a href="https://fr.wikipedia.org/wiki/Hypergraphe">hypergraphe</a> orienté. Vu l'usage qu'il est fait des
            nœuds dans les liens, nous pouvons cependant déjà considérer que nous sommes dans un hypergraphe au-delà
            de deux nœuds.</p>
        <p>Le lien est enregistré dans un registre avec un format définit et contraint afin de pouvoir être stocké et
            échangé de façon sûre et sécurisée.</p>
        <p>Le registre de lien ne porte pas son autoprotection. Il est enregistré dans un bloc de liens qui se charge de
            faire cohabiter et de protéger un ou plusieurs liens simultanément. Voir <a href="#b">B</a>.</p>

        <h2 id="ls">LS / Structure</h2>
        <p>Chaque lien est écrit dans ce que l'on appelle un registre de lien. Ce registre va comprendre plusieurs
            champs. Le premier champ est dit requête d'action. Il est suivi par les champs contenant les identifiants
            des nœuds dans l'ordre d'usage (graphe orienté).</p>
        <p>La requête d'action est obligatoire et est unique pour un registre de lien.</p>
        <p>Dans le registre, chaque champ est séparé des autres par le caractère «&nbsp;&gt;&nbsp;». Le nombre de champs
            exploitable, sans compter la requête d'action, est limité par l'option <i>linkMaxRLUID</i>. Si le nombre de
            champs du registre est supérieur à la valeur limite, le lien est déclaré invalide.</p>
        <p>La forme du registre de lien :</p>
        <p align="center"><code>REQ>NID>NID>NID>NID</code></p>

        <h5 id="lelpo">LELPO / Liens à Propos d’un Objet</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Les liens d’un objet sont consultables séquentiellement. Ils doivent être perçus comme des méta-données d’un
            objet.</p>
        <p>Les liens sont séparés soit par un caractère espace «&nbsp;», soit par un retour chariot «&nbsp;\n&nbsp;». Un
            lien est donc une suite de caractères ininterrompue, c'est-à-dire sans espace ou retour à la ligne.</p>
        <p>La taille du lien dépend de la taille de chaque champ.</p>

        <h5 id="lelco">LELCO / Liens Contenu dans un Objet</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Certains liens d’un objet peuvent être contenus dans un autre objet.</p>
        <p>Cette forme de stockage des liens permet de les transmettre et de les manipuler sous la forme d’un objet. On
            peut ainsi profiter du découpage et du chiffrement. Plusieurs liens peuvent être stockés sans être
            nécessairement en rapport avec les mêmes objets.</p>
        <p>Les liens stockés dans un objet ne peuvent pas faire référence à ce même objet.</p>
        <p>Tout ajout de lien crée implicitement un nouvel objet de mise à jour, c'est-à-dire lié par un lien de type
            u.</p>
        <p>Chaque fichier contenant des liens doit avoir un entête de version.</p>
        <p>Les objets contenants des liens ne sont pas reconnus et exploités lors de la lecture des liens. Ceux-ci
            doivent d’abord être extraits et injectés dans les liens des objets concernés. En clair, on ne peut pas s’en
            servir facilement pour de l’anonymisation.</p>

        <h2 id="le">LE / Entête</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L’entête des liens est constitué du texte <code>nebule/liens/version/1.2</code>. Il est séparé du premier
            lien soit par un caractère espace «&nbsp;», soit par un retour chariot «&nbsp;\n&nbsp;».</p>
        <p>Il doit être transmis avec les liens, en premier.</p>

        <h2 id="lr">LR / Registre</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le registre du lien décrit la syntaxe du lien :</p>
        <p style="text-align:center">
            <code>Signature_HashSignataire_TimeStamp_Action_HashSource_HashCible_HashMeta</code></p>
        <p>Ce registre a un nombre de champs fixe. Chaque champ a une place fixe dans le lien. Les champs ont une
            taille variable. Le séparateur de champs est l’underscore «&nbsp;_&nbsp;». Les champs ne peuvent contenir ni
            l’underscore «&nbsp;_&nbsp;» ni l’espace &nbsp;» &nbsp;» ni le retour chariot «&nbsp;\n&nbsp;».</p>
        <p>Tout lien qui ne respecte pas cette syntaxe est à considérer comme invalide et à supprimer. Tout lien dont la
            <code>Signature</code> est invalide est à considérer comme invalide et à supprimer. La vérification peut
            être réalisée en réassemblant les champs après nettoyage.</p>

        <h4 id="lrsi">LRSI / Le champ <code>Signature</code></h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le champ <code>Signature</code> est représenté en deux parties séparées par un point «&nbsp;.&nbsp;» . La
            première partie contient la valeur de la signature. La deuxième partie contient le nom court de la fonction
            de prise d’empreinte utilisée.</p>
        <p>La signature est calculée sur l’empreinte du lien réalisée avec la fonction de prise d’empreinte désignée
            dans la deuxième partie. L’empreinte du lien est calculée sur tout le lien sauf le champs
            <code>signature</code>, c'est-à-dire sur «&nbsp;<code>_HashSignataire_TimeStamp_Action_HashSource_HashCible_HashMeta</code>&nbsp;»
            avec le premier underscore inclus.</p>
        <p>La signature ne contient que des caractères hexadécimaux, c'est-à-dire de «&nbsp;0&nbsp;» à «&nbsp;9&nbsp;»
            et de «&nbsp;a&nbsp;» à «&nbsp;f&nbsp;» en minuscule. La fonction de prise d’empreinte est notée en
            caractères alphanumériques en minuscule.</p>

        <h5 id="lrusi">LRHSI / Le champ <code>HashSignataire</code></h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le champ <code>HashSignataire</code> désigne l’objet de l’entité qui génère le lien et le signe.</p>
        <p>Il ne contient que des caractères hexadécimaux, c'est-à-dire de «&nbsp;0&nbsp;» à «&nbsp;9&nbsp;» et de «&nbsp;a&nbsp;»
            à «&nbsp;f&nbsp;» en minuscule.</p>

        <h3 id="lrt">LRT / Le champ <code>TimeStamp</code></h3>
        <p>Le champ <code>TimeStamp</code> est une marque de temps qui donne un ordre temporel aux liens. Ce champs peut
            être une date et une heure au format <a class="external text" title="http://fr.wikipedia.org/wiki/ISO_8601"
                                                    href="http://fr.wikipedia.org/wiki/ISO_8601"
                                                    rel="nofollow">ISO8601</a> ou simplement un compteur incrémental.
        </p>

        <h3 id="lra">LRA / Le champ <code>Action</code></h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le champ <code>Action</code> détermine la façon dont le lien doit être utilisé.</p>
        <p>Quand on parle du type d’un lien, on fait référence à son champ <code>Action</code>.</p>
        <p>L’interprétation de ce champ est limité au premier caractère. Des caractères alpha-numériques supplémentaires
            sont autorisés, mais ignorés.</p>
        <p>Cette interprétation est basée sur un vocabulaire particulier. Ce vocabulaire est spécifique à <i>nebule
                v1.2</i> (et <i>nebule v1.1</i>).</p>
        <p>Le vocabulaire ne reconnaît que les 8 caractères <code>l</code>, <code>f</code>, <code>u</code>,
            <code>d</code>, <code>e</code>, <code>x</code>, <code>k</code> et <code>s</code>, en minuscule.</p>

        <h4 id="lral">LRAL / Action <code>l</code> – Lien entre objets</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Met en place une relation entre deux objets. Cette relation a un sens de mise en place et peut être pondérée
            par un objet méta.</p>
        <p>Les liens de type <code>l</code> ne devraient avoir ni <code>HashMeta</code> nul ni <code>HashCible</code>
            nul.</p>
        <p><code>l</code> comme <i>link</i>.</p>
        <p>Lors de la lecture de multiples liens <code>l</code>, on ne retient qu'un seul lien. On retient le dernier
            lien en date après filtrage social, éventuellement le dernier en date de l'entité signataire avec le plus
            fort score social.</p>

        <h4 id="lraf">LRAF / Action <code>f</code> – Dérivé d’objet</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le nouvel objet est considéré comme enfant ou parent suivant le sens du lien.</p>
        <p>Le champs <code>ObjetMeta</code> doit être vu comme le contexte du lien. Par exemple, deux objets contenants
            du texte peuvent être reliés simplement sans contexte, c'est-à-dire reliés de façon simplement hiérarchique.
            Ces deux mêmes textes peuvent être plutôt (ou en plus) reliés avec un contexte comme celui d’une discussion
            dans un blog. Dans ce deuxième cas, la relation entre les deux textes n’a pas de sens en dehors de cette
            discussion sur ce blog. Il est même probable que le blog n’affichera pas les autres textes en relations si
            ils n’ont pas un contexte appartenant à ce blog.</p>
        <p><code>f</code> comme <i>fork</i>.</p>
        <p>Lors de la lecture de multiples liens <code>f</code>, on retient une liste de liens. On peut ne retenir que
            les liens ayant un minimum de score social de leurs entités signataires.</p>

        <h4 id="lrau">LRAU / Action <code>u</code> – Mise à jour d’objet</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Mise à jour d’un objet dérivé qui remplace l’objet parent.</p>
        <p><code>u</code> comme <i>update</i>.</p>

        <h4 id="lrad">LRAD / Action <code>d</code> – Suppression d’objet</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L’objet est marqué comme à supprimer d’un ou de tous ses emplacements de stockage.</p>
        <p><code>d</code> comme <i>delete</i>.</p>
        <p>Le champs <code>HashCible</code> <span style="text-decoration: underline;">peut</span> être nuls, c'est-à-dire égal à <code>0</code>.
            Si non nul, ce champs doit contenir une entité destinataire de <i>l’ordre</i> de
            suppression. C’est utilisé pour demander à une entité relaie de supprimer un objet spécifique. Cela peut
            être utilisé pour demander à une entité en règle générale de bien vouloir supprimer l’objet, ce qui n’est
            pas forcément exécuté.</p>
        <p>Le champs <code>HashMeta</code> <span style="text-decoration: underline;">doit</span> être nuls, c'est-à-dire
            égal à <code>0</code>.</p>
        <p>Un lien de suppression sur un objet ne veut pas forcément dire qu’il a été supprimé. Même localement, l’objet
            est peut-être encore présent. Si le lien de suppression vient d’une autre entité, on ne va sûrement pas par
            défaut en tenir compte.</p>
        <p>Lorsque le lien de suppression est généré, le serveur sur lequel est généré le lien doit essayer par défaut
            de supprimer l’objet. Dans le cas d’un serveur hébergeant plusieurs entités, un objet ne sera pas supprimé
            si il est encore utilisé par une autre entité, c'est-à-dire si une entité a un lien qui le concerne et n’a
            pas de lien de suppression.</p>

        <h4 id="lrae">LRAE / Action <code>e</code> – Équivalence d’objets</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Définit des objets jugés équivalents, et donc interchangeables par exemple pour une traduction.</p>

        <h4 id="lrac">LRAC / Action <code>c</code> – Chiffrement de lien</h4>
        <p>Ce lien de dissimulation contient un lien dissimulé sans signature. Il permet d’offusquer des liens entre
            objets et donc d’anonymiser certaines actions de l’entité (cf. <a href="#ckl">CKL</a>).</p>
        <p>Le champs <code>HashSource</code> fait référence à l’entité destinataire du lien, celle qui peut le
            déchiffrer. À part le champs de l’entité signataire, c’est le seul champs qui fait référence à un objet.</p>
        <p>Le champs <code>HashCible</code> ne contient pas la référence d’un objet, mais le lien chiffré et encodé en
            hexadécimal. Le chiffrement est de type symétrique avec la clé de session. Le lien offusqué n’a pas grand
            intérêt en lui-même, c’est le lien déchiffré qui en a.</p>
        <p>Le champs <code>HashMeta</code> ne contient pas la référence d’un objet, mais la clé de chiffrement du lien,
            dite clé de session. Cette clé est chiffrée (asymétrique) pour l’entité destinataire et encodée en
            hexadécimal. Chaque entité destinataires d'un lien de dissimulé doit disposer d'un lien de dissimulation
            qui lui est propre.</p>
        <p>Lors du traitement des liens, si une entité est déverrouillée, les liens offusqués pour cette entité doivent
            être déchiffrés et utilisés en remplacement des liens offusqués originels. Les liens offusqués doivent être
            vérifiés avant déchiffrement. Les liens déchiffrés doivent être vérifiés avant exploitation.</p>
        <p>Les liens de dissimulations posent un problème pour être efficacement utilisés par les entités émeteurs et
            destinataires. Pour résoudre ce problème sans risquer de révéler les identifiants des objets utilisés dans
            un lien dissimulé, les liens de dissimulation sont attachés à des objets virtuels translatés depuis les
            identifiants des objets originaux (cf <a href="#ld">LD</a>).</p>
        <p>L'option <code>permitObfuscatedLink</code> permet de désactiver la dissimulation (offuscation) des liens des
            objets. Dans ce cas le lien de type <code>c</code> est rejeté comme invalide avec le code erreur 43.</p>

        <h4 id="lrak">LRAK / Action <code>k</code> – Chiffrement d’objet</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Désigne la version chiffrée de l’objet (cf. <a href="#cko">CKO</a>).</p>
        <p>L'option <code>permitProtectedObject</code> permet de désactiver la protection (chiffrement) des objets. Dans
            ce cas le lien de type <code>k</code> est rejeté comme invalide avec le code erreur 42.</p>

        <h4 id="lras">LRAS / Action <code>s</code> – Subdivision d’objet</h4>
        <p>Désigne un fragment de l’objet.</p>
        <p>Ce champ nécessite un objet méta qui précise intervalle de contenu de l’objet d’origine. Le contenu de
            l’objet méta doit être de la forme <code>x-y</code> avec :</p>
        <ul>
            <li><code>x</code> et <code>y</code> exprimé en octet sans zéro et sans unité ;</li>
            <li><code>x</code> strictement supérieur à zéro ;</li>
            <li><code>y</code> strictement inférieur ou égal à la taille de l’objet (lien vers
                <i>nebule/objet/taille</i>) ;
            </li>
            <li><code>x</code> inférieur à <code>y</code> ;</li>
            <li>sans espace, tabulation ou retour chariot.</li>
        </ul>

        <h4 id="lrax">LRAX / Action <code>x</code> – Suppression de lien</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Supprime un ou plusieurs liens précédemment mis en place.</p>
        <p>Les liens concernés par la suppression sont les liens antérieurs de type <code>l</code>, <code>f</code>,
            <code>u</code>, <code>d</code>, <code>e</code>, <code>k</code> et <code>s</code>. Ils sont repérés par les 3
            derniers champs, c’est à dire sur <code>HashSource_HashCible_HashMeta</code>. Les champs nuls sont
            strictement pris en compte.</p>
        <p>Le champ <code>TimeStamp</code> permet de déterminer l’antériorité du lien et donc de déterminer sa
            suppression ou pas.</p>
        <p>C’est la seule action sur les liens et non sur les objets.</p>

        <h4 id="lrhs">LRHS / Le champ <code>HashSource</code></h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le champ <code>HashSource</code> désigne l’objet source du lien.</p>
        <p>Le champ <code>signataire</code> ne contient que des caractères hexadécimaux, c’est à dire de «&nbsp;0&nbsp;»
            à «&nbsp;9&nbsp;» et de «&nbsp;a&nbsp;» à «&nbsp;f&nbsp;» en minuscule.</p>

        <h4 id="lrhc">LRHC / Le champ <code>HashCible</code></h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le champ <code>HashCible</code> désigne l’objet destination du lien.</p>
        <p>Le champ <code>signataire</code> ne contient que des caractères hexadécimaux, c’est à dire de «&nbsp;0&nbsp;»
            à «&nbsp;9&nbsp;» et de «&nbsp;a&nbsp;» à «&nbsp;f&nbsp;» en minuscule.</p>
        <p>Il peut être nuls, c’est à dire représentés par la valeur «&nbsp;0&nbsp;» sur un seul caractère.</p>

        <h4 id="lrhm">LRHM / Le champ <code>HashMeta</code></h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le champ <code>HashMeta</code> désigne l’objet contenant une caractérisation du lien entre l’objet source et
            l’objet destination.</p>
        <p>Le champ <code>signataire</code> ne contient que des caractères hexadécimaux, c’est à dire de «&nbsp;0&nbsp;»
            à «&nbsp;9&nbsp;» et de «&nbsp;a&nbsp;» à «&nbsp;f&nbsp;» en minuscule.</p>
        <p>Il peut être nuls, c’est à dire représentés par la valeur «&nbsp;0&nbsp;» sur un seul caractère.</p>

        <h2 id="l1">L1 / Lien simple</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le registre du lien simple a ses champs <code>HashCible</code> et <code>HashMeta</code> égaux à «&nbsp;0&nbsp;».
        </p>
        <p>Il ressemble à :</p>
        <p class="pcenter"><code>Signature_HashSignataire_TimeStamp_Action_HashSource_0_0</code></p>

        <h2 id="l2">L2 / Lien double</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le registre du lien double a son champ <code>HashMeta</code> égal à «&nbsp;0&nbsp;».</p>
        <p>Il ressemble à :</p>
        <p class="pcenter"><code>Signature_HashSignataire_TimeStamp_Action_HashSource_HashCible_0</code></p>

        <h2 id="l3">L3 / Lien triple</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le registre du lien triple est complètement utilisé.</p>
        <p>Il ressemble à :</p>
        <p class="pcenter"><code>Signature_HashSignataire_TimeStamp_Action_HashSource_HashCible_HashMeta</code></p>

        <h2 id="ls">LS / Stockage</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Tous les liens sont stockés dans un même emplacement ou sont visible comme étant dans un même emplacement.
            Cet emplacement ne contient pas les contenus des objets (cf <a href="#oos">OOS</a>).</p>
        <p>Le lien dissimulé est stocké dans le même emplacement mais dispose de fichiers de stockages différents du
            fait de la spécificité (cf <a href="#lsds">LSDS</a>).</p>

        <h3 id="lsa">LSA / Arborescence</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Sur un système de fichiers, tous les liens sont stockés dans des fichiers contenus dans le dossier <code>pub/l/</code>
            (<code>l</code> comme lien).</p>
        <p>A faire...</p>

        <h3 id="lsd">LSD / Dissimulation</h3>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le lien de dissimulation, de type <code>c</code>, contient un lien dissimulé sans signature (cf <a
                    href="#lrac">LRAC</a>). Il permet d’offusquer des liens entre objets et donc d’anonymiser certaines
            actions de l’entité (cf <a href="#ckl">CKL</a>).</p>

        <h5 id="lsdrp">LSDRP / Registre public</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le registre du lien de dissimulation, public par nature, est conforme au registre des autres liens (cf <a
                    href="#lr">LR</a>). Si ce lien ne respectait pas cette structure il serait automatiquement ignoré ou
            rejeté. Son stockage et sa transmission ont cependant quelques particularités.</p>
        <p>Les champs <code>Signature</code> (cf <a href="#lrsi">LRSI</a>) et <code>HashSignataire</code> (cf <a
                    href="#lrhsi">LRHSI</a>) du registre sont conformes aux autres liens. Ils assurent la protection du
            lien. Le champs signataire fait office d'émeteur du lien dissimulé.</p>
        <p>Le champs <code>TimeStamp</code> (cf <a href="#lrt">LRT</a>) du registre est conformes aux autres liens. Il a
            cependant une valeur non significative et sourtout pas liée au <code>TimeStamp</code> du lien dissimulé.</p>
        <p>Le champs <code>Action</code> (cf <a href="#lrt">LRT</a>) du registre est de type <code>c</code> (cf <a
                    href="#lra">LRA</a> et <a href="#lrac">LRAC</a>).</p>
        <p>Le champs <code>HashSource</code> fait référence à l’entité destinataire du lien, celle qui peut le
            déchiffrer. A part le champs de l’entité signataire, c’est le seul champs qui fait référence à un objet.</p>
        <p>Le champs <code>HashCible</code> ne contient pas la référence d’un objet mais le lien chiffré et encodé en
            hexadécimal. Le chiffrement est de type symétrique avec la clé de session. Le lien offusqué n’a pas grand
            intérêt en lui même, c’est le lien déchiffré qui en a.</p>
        <p>Le champs <code>HashMeta</code> ne contient pas la référence d’un objet mais la clé de chiffrement du lien,
            dite clé de session. Cette clé est chiffrée (asymétrique) pour l’entité destinataire et encodée en
            hexadécimal. Chaque entités destinataires d'un lien de dissimulé doit disposer d'un lien de dissimulation
            qui lui est propre.</p>
        <p>Le registre du lien de dissimulation :</p>
        <ul>
            <li>Signature du lien</li>
            <li>Identifiant du signataire</li>
            <li>Horodatage non significatif</li>
            <li>action : <code>c</code></li>
            <li>source : hash(destinataire)</li>
            <li>cible : Lien dissimulé chiffré</li>
            <li>méta : clé de déchiffrement du lien, chiffrée pour le destinataire</li>
        </ul>

        <h5 id="lsdrd">LSDRD / Registre dissimulé</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le registre du lien dissimulé est la partie utile du lien qui est protégée dans le lien de dissimulation.</p>
        <p>L'extraction du lien dissimulé se fait depuis le lien de dissimulation :</p>
        <ol>
            <li>L'entité destinataire vérifie que son identifiant est bien celui présenté par le champs
                <code>HashSource</code>.
            </li>
            <li>Le champs <code>HashMeta</code> est déchiffré (asymétrique) avec la clé privée de l'entité destinataire
                pour obtenir la clé de session.
            </li>
            <li>Le champs <code>HashCible</code> est déchiffré (symétrique) avec la clé de session pour obtenir le lien
                dissimulé.
            </li>
            <li>Le lien dissimulé obtenu ne contient pas les champs <code>Signature</code> et
                <code>HashSignataire</code> mais on peut garder ceux du lien de dissimulation 'pour affichage'.
            </li>
        </ol>
        <p>A faire...</p>
        <p>Le registre du lien dissimulé :</p>
        <ul>
            <li>Horodatage significatif</li>
            <li>action : tout sauf <code>c</code></li>
            <li>source : hash(objet source)</li>
            <li>cible : hash(objet cible)</li>
            <li>méta : hash(objet méta)</li>
        </ul>

        <h4 id="lsda">LSDA / Attaque sur la dissimulation</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Le fait qu’une entité synchronise des liens dissimulés que d’autres entités partagent et les range dans des
            fichiers transcodés peut révéler l’ID de l’objet transcodé. Et par tâtonnement on peut retourner ainsi le
            transcodage de tous les objets.</p>
        <p>Il suffit qu’une entité attaquante génère un lien dissimulé à destination d’une entité attaquée concernant un
            objet en particulier. L’entité attaquée va alors ranger le lien dissimulé dans le fichier transcodé.
            L’entité attaquante peut alors rechercher quel fichier transcodé contient sont lien dissimulé et en déduire
            que ce fichier transcodé correspond à l’objet.</p>
        <p>En plus, si le lien dissimulé n’a aucune action valable, il ne sera pas exploité, donc pas détecté par
            l’entité attaquée.</p>
        <p>La solution implémentée pour palier à ce problème c'est la méthode dite de translation des liens
            dissimulés.</p>

        <h4 id="lsds">LSDS / Stockage et transcodage</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Les liens dissimulés sont camouflés dans des liens de dissimulation, ils ne sont donc plus utilisables pour
            assurer le transfert entre entités et le tri dans les fichiers de stockage des liens.</p>
        <p>De plus, les liens de dissimulations ne doivent pas être stockés directement dans des fichiers de stockage
            des liens directement rattachés aux objets concernés, comme les autres liens, sous peine de dévoiler assez
            rapidement les identifiants des objets utilisés... et donc assez facilement le lien dissimulé correspondant.
            Cela poserait en plus un problème lors du nettoyage des liens parce qu'il faut avoir accès aux liens
            dissimulés pour correctement les ranger.</p>
        <p>Le nommage des fichiers contenant ces liens doit aussi être différent des entités signataires et
            destinataires des liens, et ce nommage peut par facilité faire référence simultanément à ces deux entités.
            Ainsi ces fichiers sont stockés dans le dossier des liens. Cette organisation et cette séparation des liens
            dans des fichiers clairement distincts répond au besoin d'utilisation. Et lors du nettoyage des liens, le
            traitement peut être différencié par rapport à la structure du nom des fichiers.</p>

        <h5 id="lsdst">LSDST / Translation de lien</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>La répartition des liens de dissimulation dans des fichiers attachés à l'entité émettrice et l'entité
            destinataire ne permet pas une exmploitation efficace et rapide des liens dissimulés. Il faut trouver un
            moyen d'associer les liens de dissimulations aux objets concernés par les liens dissimulés sans révéler
            publiquement ce lien. Une translation va permettre de camoufler cette association.</p>
        <p>La translation des liens dissimulés signifie la dissimulation par translation des identifiants des objets
            auxquels s'appliquent des liens dissimulés moyennant une clé de translation. Cette translation doit
            permettre de préserver la dissociation entre l'identifiant d'un objet et l'identifiant 'virtuel' auquel sont
            attachés les liens dissimulés.</p>
        <p>Le système de translation est basé sur une clé unique de translation par entité. Cette translation doit être
            une fonction à sens unique, donc à base de prise d’empreinte (hash). Elle doit maintenir la non association
            entre identifiants virtuels et réels des objets, y compris lorsqu’une ou plusieurs translations sont
            connues. Enfin, la translation doit être dépendante de l’entité qui les utilise, c’est à dire qu’une même
            clé peut être commune à plusieurs entités sans donner les mêmes translations.</p>
        <p>A faire...</p>

        <h5 id="lsdsp">LSDSP / Protection de translation</h5>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="lsdt">LSDT / Transfert et partage</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h4 id="lsdc">LSDC / Compromission</h4>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h2 id="lt">LT / Transfert</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <h2 id="lv">LV / Vérification</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>La signature d’un lien doit être vérifiée lors de la fin de la réception du lien. La signature d’un lien
            devrait être vérifiée avant chaque utilisation de ce lien. Un lien avec une signature invalide doit être
            supprimé. Lors de la suppression d’un lien, les autres liens de cet objet ne sont pas supprimés et l'objet
            n'est pas supprimé. La vérification de la validité des objets est complètement indépendante de celle des
            liens, et inversement (cf <a href="#cl">CL</a> et <a href="#oov">OOV</a>).</p>
        <p>Toute modification de l’un des champs du lien entraîne l’invalidation de tout le lien.</p>

        <h2 id="lo">LO / Oubli</h2>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>L'oubli vonlontaire de certains liens et objets n'est encore ni théorisé ni implémenté mais deviendra
            indispensable lorsque l'espace viendra à manquer (cf <a href="#cn">CN</a>).</p>

        <?php
    }
}



// ========================================================================================
//   503_transaction.php
//   020250218162750
//   1bcbff822c30900e54d5e2a5b5dbbebb201a0a7a6306acc5dafeaee008fb246e.sha2.256
use DateTime;

/**
 * ------------------------------------------------------------------------------------------
 * La classe Transaction.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 * Attend à la création :
 * - l'instance nebule utilisé ;
 * - un texte contenant le lien ;
 * - un texte contenant la version du lien.
 *
 * Le nombre de champs du lien doit être de 7 exactement.
 * Le champs signature peut être vide ou à 0 si c'est pour un nouveau lien à signer.
 * La signature doit être explicitement demandée par l'appelle de sign() après la création du lien.
 *
 * Un lien peut être valide si sa structure est correcte, et peut être signé si la signature est valide.
 *
 * Une transaction est un lien entre une monnaie, un jeton et un objet contenant la description de la transaction.
 * La description de la transaction peut en fait contenir plusieurs transactions élémentaires.
 * ------------------------------------------------------------------------------------------
 */
class Transaction extends LinkRegister implements linkInterface
{
    /**
     * Booléen si le lien est une transaction ET qu'elle est valide.
     *
     * @var boolean
     */
    protected bool $_isTransaction = false;

    /**
     * ID de l'objet contenant les transactions.
     * Reste à null en mode LNS.
     *
     * @var string
     */
    protected string $_transactionsObjectID = '';

    /**
     * Mode de transaction, si valide dans la monnaie.
     *
     * @var string
     */
    protected string $_transactionsMode = '';

    /**
     * Date des transactions.
     *
     * @var ?DateTime
     */
    protected ?DateTime $_transactionsTimestamp = null;

    /**
     * Table des transactions unitaires.
     *
     * Les transactions unitaires sont incrémentées à partir de 0.
     * Chaque transaction unitaire est un sous-tableau :
     * - CID
     * - D : horodatage
     * - S : ID détenteur
     * - D : ID destinataire
     * - TID
     * - R : ratio du jeton utilisé, de 0 à 1, 1 = tout
     * - TRS : mode de transaction
     *
     * @var array
     */
    protected array $_transactionsArray = array();

    /**
     * Liste des variables à enregistrer dans la session php lors de la mise en sommeil de l'instance.
     *
     * @var array:string
     */
    const SESSION_SAVED_VARS = array(
        '_rawLink',
        '_parsedLink',
        '_parsedLinkObfuscated',
        '_signe',
        '_date',
        '_action',
        '_obfuscated',
        '_valid',
        '_validStructure',
        '_signed',
        '_permitObfuscated',
        '_maxRLUID',
        '_isTransaction',
    );

    /**
     * Initialisation post-constructeur.
     *
     * @return void
     */
    protected function _initialisation(): void
    {
        $this->_extractByMode_disabled();
    }

    /**
     * Tri par mode de transaction détecté.
     *
     * @return void
     */
    private function _extractByMode_disabled(): void
    {
        // Si transaction en mode LNS.
        $hashLNS = $this->_cryptoInstance->hash(References::REFERENCE_NEBULE_OBJET_MONNAIE_TRANSACTION);
        if ($this->_hashMeta == $hashLNS) {
            $this->_extractModeLNS_disabled();
        } else {
            $this->_isTransaction = false;
        }
    }

    /**
     * Extrait une transaction en mode LNS.
     *
     * Une transaction en mode LNS est marquée par un lien :
     * - hashsign : signataire et entité source disposant du jeton.
     * - date : date de la prise en compte de la transaction.
     * - action : type f.
     * - hashsource : ID du jeton.
     * - hashtarget : ID du destinataire.
     * - hashmeta : hash de 'nebule/objet/monnaie/transaction', marque que c'est une transaction.
     * Elle est repérée par rapport au champs méta.
     * Il faut vérifier que la source est un jeton et en extraire la monnaie affairante.
     * Il faut vérifier que la destination est une entité ou un dérivé.
     *
     * @return void
     */
    private function _extractModeLNS_disabled(): void
    {
        return;
    /*    $this->_transactionsMode = 'LNS';

        // Vérifie si l'objet source est un jeton.
        $instanceSource = $this->_nebuleInstance->newToken($this->_hashSource);
        $instanceTarget = $this->_nebuleInstance->newWallet($this->_hashTarget);
        if ($instanceSource->getID() != '0'
            && $instanceSource->getIsToken('all') // @todo modifier le filtre social.
            && $instanceSource->getID() != '0'
            && $instanceSource->getIsWallet('all') // @todo modifier le filtre social.
        ) {
            // Extrait la monnaie.
            $CID = $instanceSource->getParam('CID');
            $instanceCID = $this->_nebuleInstance->newCurrency($CID);
            $modesCID = ' ' . $instanceCID->getParam('TRS') . ' ';

            // Vérifie que le mode LNS est présent dans les modes supportés par la monnaie
            if ($modesCID != '  '
                && strpos($modesCID, ' LNS ') !== false
            ) {
                $this->_transactionsArray[0]['CID'] = $CID;
                $this->_transactionsArray[0]['D'] = $this->_date;
                $this->_transactionsArray[0]['S'] = $this->_hashSigner;
                $this->_transactionsArray[0]['T'] = $this->_hashTarget;
                $this->_transactionsArray[0]['TID'] = $this->_hashSource;
                $this->_transactionsArray[0]['R'] = '1';
                $this->_transactionsArray[0]['TRS'] = 'LNS';
                $this->_isTransaction = true;
            } else {
                $this->_isTransaction = false;
            }
        } else {
            $this->_isTransaction = false;
        }*/
    }

    /**
     * Retourne si le lien est bien une transaction.
     *
     * @return boolean
     */
    public function getIsTransaction(): bool
    {
        return $this->_isTransaction;
    }

    /**
     * Retourne l'ID de l'objet des transactions.
     * Retourne null en mode LNS
     *
     * @return string
     */
    public function getTransactionsObjetID(): string
    {
        return $this->_transactionsObjectID;
    }

    /**
     * Retourne la marque de temps des transactions.
     * Retourne null en mode LNS
     *
     * @return string
     */
    public function getTransactionsTimestamp(): string
    {
        return (string)$this->_transactionsTimestamp;
    }

    /**
     * Retourne la liste des transactions unitaires.
     * Retourne null en mode LNS
     *
     * @return array
     */
    public function getTransactionsArray(): array
    {
        return $this->_transactionsArray;
    }



    /**
     * Affiche la partie menu de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
    }

    /**
     * Affiche la partie texte de la documentation.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
    }
}



// ========================================================================================
//   700_display_interface.php
//   020250222114128
//   8528242c40dbf975c1bb84e915f4cd45fc4ab74e0207e0e5d45e938414d890fa.sha2.256

/**
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
interface DisplayInterface
{
    public function __construct(Applications $applicationInstance);
    public function getHTML(): string;
    public function display(): void;
    public static function displayCSS(): void;
}

abstract class DisplayItem implements DisplayInterface
{
    public const SIZE_SMALL = 'small';
    public const SIZE_LARGE = 'large';
    public const SIZE_TINY = 'tiny';
    public const SIZE_MEDIUM = 'medium';
    public const SIZE_FULL = 'full';
    public const RATIO_SQUARE = 'square';
    public const RATIO_SHORT = 'short';
    public const RATIO_LONG = 'long';

    protected ?nebule $_nebuleInstance = null;
    protected ?Configuration $_configurationInstance = null;
    protected ?Rescue $_rescueInstance = null;
    protected ?Metrology $_metrologyInstance = null;
    protected ?Cache $_cacheInstance = null;
    protected ?Entities $_entitiesInstance = null;
    protected ?Applications $_applicationInstance = null;
    protected ?Translates $_translateInstance = null;
    protected ?Displays $_displayInstance = null;
    protected bool $_unlocked = false;
    protected string $_social = '';
    protected string $_sizeCSS = '';
    protected string $_ratioCSS = '';

    public function __construct(Applications $applicationInstance) // Should not be overridden by children classes.
    {
        $this->_applicationInstance = $applicationInstance;
        $this->_nebuleInstance = $applicationInstance->getNebuleInstance();
        $this->_configurationInstance = $applicationInstance->getNebuleInstance()->getConfigurationInstance();
        $this->_rescueInstance = $this->_nebuleInstance->getRescueInstance();
        $this->_metrologyInstance = $this->_nebuleInstance->getMetrologyInstance();
        $this->_cacheInstance = $this->_nebuleInstance->getCacheInstance();
        $this->_entitiesInstance = $this->_nebuleInstance->getEntitiesInstance();
        $this->_displayInstance = $applicationInstance->getDisplayInstance();
        $this->_translateInstance = $this->_applicationInstance->getTranslateInstance();
        $this->_unlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();
        $this->_metrologyInstance->addLog('init instance ' . get_class($this),
            Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'f631657');
        $this->_init();
    }
    protected function _init(): void { $this->setSocial('authority'); } // Should be overridden by children classes.

    public static function displayCSS(): void {} // Must be overridden by children classes.

    public function getHTML(): string { // Must be overridden by children classes.
        $this->_metrologyInstance->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return '';
    }

    public function display(): void { // Should not be overridden by children classes.
        $this->_metrologyInstance->addLog('display HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        echo $this->getHTML();
    }

    public function setSocial(string $social = 'authority'): void // Should not be overridden by children classes.
    {
        $this->_metrologyInstance->addLog('set social ' . $social, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        foreach ($this->_nebuleInstance->getSocialInstance()->getSocialNames() as $s) {
            if ($social == $s) {
                $this->_social = $social;
                break;
            }
        }
        if ($this->_social == '')
            $this->_social = 'authority';
    }

    public function setSize(string $size = ''): void
    {
        $this->_metrologyInstance->addLog('set size ' . $size, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        switch (strtolower($size)) {
            case DisplayItem::SIZE_TINY:
                $this->_sizeCSS = 'Tiny';
                break;
            case DisplayItem::SIZE_SMALL:
                $this->_sizeCSS = 'Small';
                break;
            case DisplayItem::SIZE_LARGE:
                $this->_sizeCSS = 'Large';
                break;
            case DisplayItem::SIZE_FULL:
                $this->_sizeCSS = 'Full';
                break;
            default:
                $this->_sizeCSS = 'Medium';
                break;
        }
    }

    public function setRatio(string $ratio = ''): void
    {
        $this->_metrologyInstance->addLog('Set ratio ' . $ratio, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        switch (strtolower($ratio)) {
            case DisplayItem::RATIO_SQUARE:
                $this->_ratioCSS = 'Square';
                break;
            case DisplayItem::RATIO_LONG:
                $this->_ratioCSS = 'Long';
                break;
            default:
                $this->_ratioCSS = 'Short';
                break;
        }
    }
}

abstract class DisplayItemCSS extends DisplayItem
{
    protected string $_classCSS = '';
    protected string $_idCSS = '';
    protected string $_styleCSS = '';

    public function setClassCSS(string $class = ''): void
    {
        $this->_metrologyInstance->addLog('set class CSS ' . $class, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_classCSS = trim((string)filter_var($class, FILTER_SANITIZE_STRING));
    }

    public function setIdCSS(string $id = ''): void
    {
        $this->_metrologyInstance->addLog('set id CSS ' . $id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_idCSS = trim((string)filter_var($id, FILTER_SANITIZE_STRING));
    }

    public function setStyleCSS(string $style = ''): void
    {
        $this->_metrologyInstance->addLog('set style CSS ' . $style, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_styleCSS = ' style="'
            . trim((string)filter_var($style, FILTER_SANITIZE_STRING))
            . ';"';
    }
}

abstract class DisplayItemIconable extends DisplayItemCSS
{
    protected ?Node $_icon = null;
    protected bool $_iconUpdate = true;
    protected string $_iconText = '';

    public function setIconRID(string $rid, bool $update = true): void {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $nid = $this->_cacheInstance->newNode($rid);
        if ($this->_nebuleInstance->getIsRID($nid))
            $oid = $nid->getReferencedObjectInstance(References::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE, 'authority');
        else
            $oid = $nid;
        $this->setIcon($oid, $update);
    }

    public function setIcon(?Node $oid, bool $update = true): void {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($oid === null)
            $this->_icon = null;
        elseif ($oid->getID() != '0'
            && is_a($oid, 'Nebule\Library\Node')
            && $oid->checkPresent()
        )
            $this->_icon = $oid;

        $this->_iconUpdate = $update;
    }

    public function setIconText(String $text): void {
        $this->_iconText = $this->_translateInstance->getTranslate($text);
    }

    protected function _getNidIconHTML(?Node $nid, ?Node $icon = null): string {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($nid === null
            || $icon === null
            || !$icon->checkPresent()
        )
            $icon = $this->_getNidDefaultIcon($nid);

        $iconOid = $this->_getIconUpdate($icon);

        if ($this->_nebuleInstance->getIoInstance()->checkObjectPresent($iconOid))
            return nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $iconOid;
        return '?' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '=' . $iconOid;
    }

    protected function _getNidDefaultIcon(?Node $rid): Node
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (is_a($rid, 'Nebule\Library\Node'))
            $oid = $rid::DEFAULT_ICON_RID;
        else
            $oid = $this->_displayInstance->getImageByReference($this->_cacheInstance->newNode(Node::DEFAULT_ICON_RID))->getID();
        return $this->_cacheInstance->newNode($oid);
    }

    protected function _getIconUpdate(?Node $nid): string
    {
        $this->_metrologyInstance->addLog('track functions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_iconUpdate) {
            $updateIcon = $nid->getUpdateNID(true, false, $this->_social);
            if ($updateIcon == '')
                $updateIcon = $nid->getID();
            if ($this->_nebuleInstance->getIsRID($nid))
                $updateIcon = Displays::DEFAULT_ICON_LO;
            return $updateIcon;
        }
        else
            return $nid->getID();
    }

    protected function _getImageHTML(Node $oid, string $alt = '', string $class = '', string $id = '', string $args = ''): string
    {
        if ($oid->getID() == '0')
            return '';

        $result = '<img src="/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid->getID() . '"';

        if ($alt == '')
            $alt = $oid->getID();
        else
            $alt = $this->_translateInstance->getTranslate($alt);
        $result .= ' alt="' . $alt . '" title="' . $alt . '"';

        if ($class != '')
            $result .= ' class="' . $class . '"';

        if ($id != '')
            $result .= ' id="' . $id . '"';

        if ($args != '')
            $result .= ' ' . $args;

        $result .= ' />';
        return $result;
    }
}

abstract class DisplayItemIconMessage extends DisplayItemIconable
{
    public const TYPE_MESSAGE = 'message';
    public const TYPE_INFORMATION = 'information';
    public const TYPE_OK = 'ok';
    public const TYPE_WARN = 'warn';
    public const TYPE_ERROR = 'error';
    public const TYPE_PLAY = 'play';
    public const TYPE_BACK = 'back';
    public const ICON_INFORMATION_RID = '69636f6e20696e666f726d6174696f6e000000000000000000000000000000000000.none.272';
    public const ICON_OK_RID = '69636f6e206f6b000000000000000000000000000000000000000000000000000000.none.272';
    public const ICON_WARN_RID = '69636f6e207761726e696e6700000000000000000000000000000000000000000000.none.272';
    public const ICON_ERROR_RID = '69636f6e206572726f72000000000000000000000000000000000000000000000000.none.272';
    public const ICON_PLAY_RID = '73745872cd2b46a40992470eaa6dd1e5ca1face3c38a1da7650d4040d82193b9021d.none.272';
    public const ICON_BACK_RID = '8ade584d3aa420335a7af82da4438654b891985777cc05bf6cbe86ebe328e31f1cc4.none.272';

    protected string $_message = '';
    protected string $_link = '';
    protected string $_type = '';

    public function setMessage(string $message,
                               string $arg1 = '',
                               string $arg2 = '',
                               string $arg3 = '',
                               string $arg4 = '',
                               string $arg5 = ''): void
    {
        $this->_metrologyInstance->addLog('set message ' . $message, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_message = sprintf($this->_translateInstance->getTranslate($message), $arg1, $arg2, $arg3, $arg4, $arg5);
    }

    public function setBrutMessage(string $message,
                               string $arg1 = '',
                               string $arg2 = '',
                               string $arg3 = '',
                               string $arg4 = '',
                               string $arg5 = ''): void
    {
        $this->_metrologyInstance->addLog('set brut message ' . $message, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_message = sprintf($message, $arg1, $arg2, $arg3, $arg4, $arg5);
    }

    public function setLink(string $link): void
    {
        $this->_link = trim((string)filter_var($link, FILTER_SANITIZE_URL));
    }

    public function setType(string $type): void
    {
        $this->_metrologyInstance->addLog('set type ' . $type, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        switch (strtolower($type)) {
            case self::TYPE_OK:
                $this->_type = 'Ok';
                $this->_iconText = '::::OK';
                $icon = self::ICON_OK_RID;
                break;
            case self::TYPE_WARN:
                $this->_type = 'Warn';
                $this->_iconText = '::::WARN';
                $icon = self::ICON_WARN_RID;
                break;
            case self::TYPE_ERROR:
                $this->_type = 'Error';
                $this->_iconText = '::::ERROR';
                $icon = self::ICON_ERROR_RID;
                break;
            case self::TYPE_MESSAGE:
                $this->_type = 'Message';
                $this->_iconText = '::::INFORMATION';
                $icon = self::ICON_INFORMATION_RID;
                break;
            case self::TYPE_PLAY:
                $this->_type = 'Go';
                $this->_iconText = '::::GO';
                $icon = self::ICON_PLAY_RID;
                break;
            case self::TYPE_BACK:
                $this->_type = 'Back';
                $this->_iconText = '::::BACK';
                $icon = self::ICON_BACK_RID;
                break;
            default:
                $this->_type = 'Information';
                $this->_iconText = '::::INFORMATION';
                $icon = self::ICON_INFORMATION_RID;
                break;
        }
        $rid = $this->_cacheInstance->newNode($icon);
        $this->_icon = $rid->getReferencedObjectInstance(References::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE);
    }
}

abstract class DisplayItemIconMessageSizeable extends DisplayItemIconMessage
{
    protected string $_sizeCSS = '';
    protected string $_ratioCSS = '';

    public function setSize(string $size = ''): void
    {
        $this->_metrologyInstance->addLog('set size ' . $size, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        switch (strtolower($size)) {
            case self::SIZE_TINY:
                $this->_sizeCSS = 'Tiny';
                break;
            case self::SIZE_SMALL:
                $this->_sizeCSS = 'Small';
                break;
            case self::SIZE_LARGE:
                $this->_sizeCSS = 'Large';
                break;
            case self::SIZE_FULL:
                $this->_sizeCSS = 'Full';
                break;
            default:
                $this->_sizeCSS = 'Medium';
                break;
        }
    }

    public function setRatio(string $ratio = ''): void
    {
        $this->_metrologyInstance->addLog('Set ratio ' . $ratio, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        switch (strtolower($ratio)) {
            case self::RATIO_SQUARE:
                $this->_ratioCSS = 'Square';
                break;
            case self::RATIO_LONG:
                $this->_ratioCSS = 'Long';
                break;
            default:
                $this->_ratioCSS = 'Short';
                break;
        }
    }
}



// ========================================================================================
//   701_display.php
//   020250227163020
//   e2197bb0b7aa281b9d677b52cb7ece1fd13476a169b17aeb42f52d3cf2b789f3.sha2.256
use const Nebule\Bootstrap\BOOTSTRAP_NAME;

/**
 * Classe Displays
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
abstract class Displays extends Functions
{
    /* ---------- ---------- ---------- ---------- ----------
	 * Constantes.
	 *
	 * Leur modification change profondément le comportement de l'application.
	 *
	 * Si déclarées 'const' ou 'static' elles ne sont pas remplacée dans les classes enfants
	 *   lorsque l'on appelle des fonctions de la classe parente non écrite dans la classe enfant.
	 */
    const DEFAULT_APPLICATION_LOGO = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAARoElEQVR42u2dbbCcZX2Hrz1JMBSUAoEECCiVkLAEEgKkSBAwgFgGwZFb6NBOSVJn0H5peXXqSwVrdQZF6Cd0RiQ4kiH415ZpOlUECpKABBLewkIAayFAAgRCGxBylJx+2KdDwHCS7Ov9PHtdMzt8IGf32f/ev+v+388riIiIiIiIiIiIiIhINalZgvKTUtoTmFy89gUmAXsDewC7F69dgV2AnYGdgLFb/P4jwO+BYeAN4HVgI/AqsAF4BXgRWAc8DzwLrImIV6y+ApDehHx/4LDiVQemAR8G9uzzpr0M/Bp4HGgAjwCPRMQafzUFIK2F/XDgOGB28TrkXf9kJMPfbmvb9BiwvHgtjYiH/XUVgLwz7GOBU4GTgZOKGT7noLcrhkeA24BbgVsi4neOAgUwaKE/ETgTOB04aMDL8RSwBLg5Iu5wdCiAKgb+j4BzgXOKmV7em1uBG4FFEfGG5VAAZQ39B4AFwHnAzAq19L1cMjwA/BC4NiI2WhoFUIbg/zXwOeAoQ99RGdwPfDcirrUsCiC30M8BLgQ+beh7IoOfAFdFxDLLogD6FfoacBFwCc2Tbgx972XwInAF8J2IGLEsCqAXwd8fuByY72yfVVdwHfBVT0BSAN0K/mzgm8Bcq5E1twN/HxHLLYUC6ETw5wJXAYc725eqK3gYuCAibrckCqCV4J8IXEPznHuDX14RPA583pOMFMD2Bn9msZ6cafArJYIHgfkR8aAlUQBbC/5EYCHwCYNf
aRH8DJgXES9YEhiyBJBS+mea17qfqhgrP9mdCqxLKV1tSQZ8oKeU/qJo98c5FAaSYWBBRNygAAYr+PvRvALNdb7LghrNaw4+GRHPuQSofvgvp3lLqxl2QXbAxX9nAs+mlC6zA6hu8A+meSOKyY57GYVngZMi4gk7gOqE/zJgNbCf41u2wX7A6kHpBmoVD/6ewDJgquNaWmA1cGyV7348VOHwnw2sBw52HEuLHAy8XIwlBVCi8N8ALMY9/NJ+hzwCLC7GlEuAzIM/geYhHXf0STdYA8yKiPV2APmF/3jgJdzRJ91jMvBSMdYUQEbh/wJwpy2/9GhJcGdK6VKXAHmE/ybgM45N6QM/joizFUB/gl8DHuKdT9IR6TUPAzPLek/CWknDvxvNY7R72/JLnxkBXgCmRsT/KoDuh38y8AQw3vBLRhJ4E5hStguKhkoW/jrwjOGXDCfS8cCalNIhCqA74T8SeLTMSxepvAQAGimlWQqgs+E/huajoTzMJ7lLYARYkVL6U/cBdC789xh+Kdk+gRpwTETcqwDaa/ud+aXMEjgqIlYogB0Pf71Y8xt+KbsE6hHxmALY/vBPprm3H8MvFZAAwAER8awC2Hb4P0DzxIr3GX6pkAQ2ARNzO1loKLPw12ie4Wf4pUrUijG9uhjjCuA9eACYaPilohKYWIxxBbCV2X8xzVt1G36psgRmpJRuzGWDxmQS/i8Af+v4kAFher1e/22j0bg7ByP1O/zH07yZh8igcXxE3DWwAiju4fcSHuuXweP/x/yEiHh5UPcBrDD8MsD7A0aA
lf3ciL4JoLjN8gGGXwZcAgeklH7Urw0Y06fwnwNc7u8vAsDh9Xr9sUaj8Wjl9wEUj+tab+sv0v/9Af1YAtxt+EW2uj9gWaWXAMUTV88y/CJblcCEer1Oo9G4s5cf2qvwT6F5M08RGZ0pEfFU1ZYAt/H2pZEi8t77A26v1BKgaP3PyKH1r9VcfViLrOtRA3br1VKg1oPwT6b5VNVsmDBhAuvXr3fEA6eddhrjx48f+DoMDw+zZMmS3DZrcrefMzC2B1/i38hsr/+JJ57I0qVLWbdu3cAP/HHjxjFu3Dj77pHsVqcjRXa6eovxru4DSCmdC8wks73+b731FieccAKTJk2yBZBsVyTAEUWGyikAYCEZ7/hTApJ7Y1JkqHwCSCldDYwj82P+SkAy7wLGpZSuKpUAUkoTKdENPpSAZM7fFZkqTQdwHSU75q8EJPOlwA9KIYCU0gzgzyjh6b5KQDJeCpxWZCv7DqB0s78SkEHtAjoqgOL+fkdQ8ot9lIBk2gXMKjKWbQfwPSpyvr8SkEy7gO9mKYCU0seAaVToUl8lIBl2AYeklE7MsQO4igpe7acEJMMu4OqsBJBSmk2Fn+qjBCSzLmBGkblsOoBvUvFr/ZWAZNYFfCMLAaSU9gfmMgC3+VICklEXcFJxqX3fO4DLBqnySkAy4vK+CqB41vmCQau6EpBMWNBXAQAXDmrllYDkQErpon4K4FIG+EafSkD6zAhwSV8EkFL6CLA3A36PfyUgfaQGTEwpHdOPDuBCvM23EpAcuoAL+yGAhE/4UQKSQxfwmZ4KIKU0
37orAcmHlNK8XnYAn7P9VwKS1TLg8z0RQEppV2C27b8SkKyWAbNTSrv0ogNYYL2VgGTJgl4IYJ7tvxKQLJcB87oqgJTSeCpwyy8lIBVdBswqMtq1DuBc66wEJGvO7aYA/tz2XwlI1suAs7spgFNs/5WAZL0MOLUrAujkjQiVgBKQ7rEjtw7fkQ7gDEurBKQUnNkNAXzSuioBKQWnd1QAKaWxwEHWVQlIKTg4pTSmkx3AKdZUCUip+HgnBXCy9VQCUirmdlIAJ1lPJSCl4uROCmCG9VQCUipmdkQAKaVDraUSkPKRUjqsEx3AcZZSCUgpmdMJARyD5/8rASkbI0V22xbAUXj+vxKQslEDju6EAKZbSyUgpaTelgBSSvtZQyUg5SWltG87HYCH/5SAlJsZ7QjAQ4BKQMrN9HYEUMcjAEpAysrItvYDbEsA0/AIgBKQslIDprYjgCnWUAlIqZnSjgD2tH5KQErNhJYEkFLa3dopASk/KaU/bqUDOMDSKQGpBB9sRQCTrZsSkEowuRUBeBagEpBqsG8rApho3ZSAVIKJrQhgb+umBKT0jIyW5dEE4CFAJSDlpzZalkcTgIcBlYBUg91bEcBu1k0JSCVo6TyA91s3JSCVYNdWBLCLdVMCUgl2aUUA462bEpBKsHMrAtjJuikBqQQ7tSKAcdZNCUglGNuKAIasW7UlsNdeezE05M88AAwZcvkD5syZw1133WUhNMNW2Wx5qs3IyAjr16/njjvusBjVZnMrAviddRsMXnjhBSVQbX7figCGrZsSkEow3IoA3rRu
SkAqwRutCOB166YEpBK83ooANlo3JSCV4LVWBPA/1k0JSCV4tRUBbLBuSkAJVIINrQjgZesmSqD0jIyW5dEE8KK1EyVQemqjZXk0AayzdqIEKsG6VgTwvHUTJVAJ1rYigGetmyiBSrCmFQE8Y91ECVSCZ3ZYABHhYUBRAhUgIlo6DwBgveUTJVBqXhrtf25LAE9aP1ECpeapdgSwmuaJBCJKoHyMAI+3I4AGzRMJRJRA+agVGW5ZAKusoSiBUrOqHQE8ZP1ECZSah1oWQER4NqAogRITEWvb6QBcBogSKC+Nbf2D7RHAfXgkQJRA2RgBlndCAL/CIwGiBMpGrchu2wJYZi1FCZSSZW0LICIetY6iBMpHRKxqWwAFD1pOUQKl4oHt+UfbK4BbracogVJxWycFcLv1FCUwuAK4xXqKEigVt3RMABHxFvCENRUlUApWR8TmTnYAAEusqyiBUrDdWd0RAdxsXUUJlIJ/7bgAIuKX1lWUQP5ExNJudAAAP8frAkQJ5MoI8LMd+YMdFcBivC5AlECu1IqMdk0Ai6yxKIGsWdQ1AUTEJmCFywBRAlm2//dHxHA3OwCAhS4DRAlk2f4v3NE/akUAP7DWogSy5LquCyAifgvc6zJAlEBW7f+vimx2vQMAuMZlgCiBrNr/a1r5w5YEEBHXW3NRAvkQET/smQAKfuwyQJRAFu3/Ta3+cTsCuNJlgCiBLNr/K3sugIi4F1hnFyBKoK+z/9qIWN5zARRcYRcgSqCvs/+32nmDtgQQEVc5DEUJ9I92MzjUgW241mEoSqAv
fL/dN+iEAL7qEBQl0Bcu67sAIuI54Be4M1CUQK8YAW4pstf3DgDgS7gzUJRAr6gBX+zEG3VEABFxH80nkdgFiBLo/uy/MiJWZCOAggvsAkQJ9GT2v6BTb9YxAUTEnUDDLkCUQFdn/0Ynb9A71OENPN8uQJRAV2f/8zv5hh0VQHE74pV2AaIEujL7r9iRW373owMAmG8XIEqgK7P/vE6/accFEBEPA/9uFyBKoKOz/5KIWJW9AAoW2AWIEujo7L+gG2/cFQFExIvAdxxuogQ6wpUR8VJpBFBI4CJgk0sBUQJttf6bIuLibn3AUJe/wDyXAqIE2mr9z+vmB3RVABFxI3C/XYDkLoExY8bkOPvfFxGLu/khY3vwRc4EnsupssPDw45865B7J1ArstP1D+k6KaWvAF/Loqq1GiMjNiTWI/tafCUivl4JARQSeBrY330CItts/Z+JiA/14sOGevjF5hp+ke2alOf26sN6tuej0WhsqNfrm4GP+RuLjNr639xL2/SUlFIDmGY3IPIHrf9jEXFoLz90qA9fdE4Rfvc8ibwd/lqRDSotgIjYACQ7AJF3dOJnRcSrvf7gvpz90Gg0HqvX638CzPC3F+H6iPhmv8zTN1JK/w0cYDcgA9z6Px0RB/ZrA4b6XIAjtyiEyKCFf8sMDJ4AIuJl4KO4U1AGL/w14KMR8Uo/N6TvV0A0Go019Xr9NeBUx4UMCDXg4m5f6FMKARQSuKder08FDnNsyACwqJvX+O+oibIhpbQSOMLxIRXmgYiYlVMrQmYSeA7YB48MSPXW/Wsj
Yr+cNmoow0JNA97EnYJSrfC/CUzNbcOyE0BEbAQOAjYrAalI+EeAD0fEawpg+yTwPFDHw4NS/vDXgGkRsTbHDRzKtXIR8QQwUwlIycM/MyKezHUjh3KuYEQ8BMxWAlLS8B9djOFsKcWe9pTS0cDyLQorUobw35/7xpYmTCmlmcADSkBKEP4jIuLBMmxwqYKUUpoKNIrtVgKSW/g3A4dGxOqybHTpQpRS2gf4NTBeCUhG4X8DmFIcwSoNQ2WrdHE4ZW9greNOMgn/88DEsoW/lB3Au7oBrx2QfpPVuf2V7wDe1Q3MAhZtYWKRXs36ADeUOfyQyeXA7dBoNH66xf0EPEIgvQh/DbgoIi4p+5epTFhSSscCS6v2vSTLmf+4iLi7Cl+oUkFJKe0BrAA+5FiVLvAb4Mji1vYogHxFsBA4zyWBdLDlXxgR86v25SobjpTSp4GfKAHpQPjPioifVvELVjoYKaXdgWXAIY5laYEGMKcfT+xRAJ0VwZeAr9sNyA7M+l+OiH+q+pcdmDCklA4E/hP4oGNcRuFpYG5E/NcgfNmBmw1TSl8G/tFuQAZ11h9oARQS2Be4GThKERh84D7gU2U8l18BtCeCc4DrgfeZhYFkE/BXEXHToBbAma8pgiuAS+wGBmrW/1ZEXDroxXCwvy2BCcC1wBmKoNLBvxn4bESstyQO8q2JYDqwkOZjmxVBdYK/AjgvIh61JApge0QwB/gecKgiKHXwHwXOj4hllkQBtCKC44GrgFmKoFTBXwlcEBG/tCQKoBMiOBL4BvBxq5E1Pwe+GBEr
LYUC6IYI9gG+Bnz2XTOO9G+2B/g+8A+5PoJLAVRTBhcAFwP7KoK+BH8tcEVEXG1JFEA/RXA0cBFwjl1BT2b7xcC3y/DkHQUweDL4S+BvgI8og46G/m7gmoj4kWVRAGUQwc7AAmA+zXMKlMGOh34FcB1wbUS8aWkUQFllsBNwbrFE+IQVGZX/AG4CFkXEsOVQAFUUwnHAp4DTgakDXo7VwBLgXzxZRwEMogyGgFOAucDJNE84okJLhnd/h5XArcDtwC8iYrOjQAHIO6UwneZOxGOB2UB9G6HKMejQvKfecpo78O6JiFX+ugpAWpPCJGAGMJ3m9QlTgGnAhD5v2nrgceBJmufdrwIeioh1/moKQHojh/cDBwL70zwpaRLNJyjvAexevHYFdqF585Odildti9l7uHhtAl4HNgKvAhuAV4AXgXU0n4S7BvhNRGy0+iIiIiIiIiIiIiIiIjnyf9eV8VcbpfPFAAAAAElFTkSuQmCC";
    const DEFAULT_APPLICATION_LOGO_DARK = "data:image/png;base64,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";
    const DEFAULT_APPLICATION_LOGO_LIGHT = "data:image/png;base64,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";
    const DEFAULT_APPLICATION_LOGO_LINK = 'a=1';
    const DEFAULT_BOOTSTRAP_LOGO = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAADkElEQVRo3u2ZT0hUQRzHP9sGgoEh0T8kL8/Ag+tBsUNdCpmKjA7VQdzKwg6pdIoOnkQKPHgUtUOGSrt0qIUORTGIXepgZAc9eJCFMgmUEj0IQotdlJ03b1779u2IK/k7vTfvN/P7zm9+8/v3YI/+d4oEZxUHaaaBCZJyw4cjQgvn+MwLuWIZgKijg9tEgTl6SJggiAhxuqkCMowwKKesARDPiSuvRgiK+C1KyBu2AOj7XWSaKJUcphRYY4nvZIhxxM0mI9sFICAFAbBvp2/BbgAg2sIuHmRmNOcigzwKvb0rztH0mwKMUJSQ4pLhwxTjTDLLAqtAGRVUc4pG6gy8b7kq10MBECW846w2uMYAY3LGZ0YNt+ikVBv+wEV/CP8C8Maz+z565XKOIyuni4e6FmRT3gDEIO2a2u/LTwGN7zT92nEMyY68jFC0aaaXpEl+C2p76XnnGVXElKEG50f6a04NaD4/S09ke4hLOMQ94wdXjIi4It4X44SkjIf0AwlajB/qs5FSdUTmU5qiNbQfaMUckjsMGhAH+WW0iDNBTc/HHD8ahjMc2kpZshpoNorvK0Q8yE/0GU2/2XsEDQbGNXoLjja9rBlGG7wAJpjzsA3kcjsBdLDMgGdwjgkvgCQ9HghjViLumEd8D0mzH7jGS9X+Zb2dmC++KH5xkQdqRunOB1KMK2/j1rIOdaVpd0LrAiA3XDdh0hoAdaWoO5/WM6JK5XnWGoBZHwkGAIeV5wVrABZ8JBgAqMnEqjUAqz4SijErVr1WmTUpZT4SDACWlOcKawAqfCQYAHxXnqutAaj2kaADEBEyyuspawDUlTIi4gNARIi78rhGawDUlWLEVQhRrb4/obAed16lFy1EghpXgnuAWn4702m
PBlq09gLALSv711epojubK2YBxD3ioVOUF7z/cjo9g1Wc8wJ4bZhdSlfB++/ylGoAn4svKZUrjBjX6Bf7Q4vfT7/xw0i2jaf6gUEjcx2joRUwaizYXZIUpad/OiepNbDHnGO52gw+pdkdn9JsIGd1LNp4qhWnrfJPXsof1cqyu3I4j+o4/dU56qoUYlx2ZtLzgU0vxXmtPH+82xoURdCi2fEmlU+rJj/ybc0EBmC4EcHJx/LzBLDXrN5eChto3lOi/bBY58L2AUho7bvr8pXBUtzFPSSsHYG8QT3DmxnzHDdJGdlS3NxscWQYpj7IH6Mi+G23R3v0FwbfFx3mQ2ZaAAAAAElFTkSuQmCC';
    const DEFAULT_BOOTSTRAP_LOGO_LINK = 'a=1';
    const DEFAULT_DISPLAY_COMMAND_MODE = 'mod';
    const DEFAULT_DISPLAY_COMMAND_VIEW = 'view';
    const DEFAULT_NEXT_COMMAND = 'next';
    const DEFAULT_INLINE_COMMAND = 'i';
    const DEFAULT_CSS_COMMAND = 'css';
    const DEFAULT_INLINE_CONTENT_COMMAND = 'incontent';
    const DEFAULT_DISPLAY_MODE = 'none';
    const DEFAULT_DISPLAY_VIEW = 'none';
    const REFERENCE_DEFAULT_LOGO = '5dd45288e66bcdd560a287697655c58a410fa76d564badc1f28fc328209f49881b92.none.272';

    // Les icônes.
    // Icône transparente.
    const DEFAULT_ICON_ALPHA_COLOR = '87b260416aa0f50736d3ca51bcb6aae3eff373bf471d5662883b8b6797e73e85.sha2.256';
    // Icônes des liens.
    const DEFAULT_ICON_LC = 'e60a32f1430b2dc6660dcd7da13fed39885451c3069e6db0daba3708f69b8b6e.sha2.256';
    const DEFAULT_ICON_LD = '232fd0ece47c1ff450927d0153886e9eec64fcf9e16ed396825c33564954f409.sha2.256';
    const DEFAULT_ICON_LE = '700ce9b827d9170303c01541eeba364b2616fabeaf6a9998868753c8feffe3dd.sha2.256';
    const DEFAULT_ICON_LF = '06cac4acb887cff2c7ba6653f865d800276a4e9d493a3be4e1b05d107f5ecbaf.sha2.256';
    const DEFAULT_ICON_LK = '6d1d397afbc0d2f6866acd1a30ac88abce6a6c4c2d495179504c2dcb09d707c1.sha2.256';
    const DEFAULT_ICON_LL = '42e46987d36e7ae291fafc889d6ff2718db4ab277bf433491606a4c63dbc32d9.sha2.256';
    const DEFAULT_ICON_LO = '26d3b259b94862aecac064628ec02a38e30e9da9b262a7307453046e242cc9ee.sha2.256';
    const DEFAULT_ICON_LS = 'f6ae2aefb4249267c51ecf9e02c9aefd7f9312e1d22f793d35972d55ee1fb85a.sha2.256';
    const DEFAULT_ICON_LU = '7e9726b5aec1b2ab45c70f882f56ea0687c27d0739022e907c50feb87dfaf37d.sha2.256';
    const DEFAULT_ICON_LX = '72e8483f1e76c9c5ddc61fe014f0eb8a97a20fec5d3f1004085157cff6776f81.sha2.256';
    // Icônes de signalisation.
    const DEFAULT_ICON_IOK = '5931cd5d9d77d3f923cd69d306dfbb869723d1b132f0a64916e78b1bb6adb5e2.sha2.256';
    const DEFAULT_ICON_IWARN = 'bca818062c4548d7957b949707c5160a3606c83027c1e855fa6d189768b60a47.sha2.256';
    const DEFAULT_ICON_IERR = '25a0ea1b1d88d7a659ff0fa3d1b70d0cf7ae788023f897da845b1ce8d1cc7e00.sha2.256';
    const DEFAULT_ICON_IINFO = '77c14d86041ded85f77b1cc3395c55ffe8f9c5eb1bda9dc6dfc650eeecb86980.sha2.256';
    const DEFAULT_ICON_IBACK = '63e0cd9b3a77b16023549bfc5b0b872399074c932d4b40b80a67128767d8a11c.sha2.256';
    const DEFAULT_ICON_IPLAY = 'a64a346dbd155baccb3d702f23a094c24a626727c859e54ca421755e5621a20a.sha2.256';
    const DEFAULT_ICON_IMLOG = 'd7f68db0a1d0977fb8e521fd038b18cd601946aa0e26071ff8c02c160549633b.sha2.256';
    const DEFAULT_ICON_IMODIFY = '8481a8f5b0172db714caa5ea98a924ff40672e66e563b9b628bbf4c5044cfdad.sha2.256';
    const DEFAULT_ICON_IDOWNLOAD = '3cd50162b66b62d582110858a6167794d7afc7f83a918aa4f2339f00b66ac620.sha2.256';
    const DEFAULT_ICON_HELP = '1543e2549dc52d2972a5b444a4d935360a97c125b72c6946ae9dc980077b8b7d.sha2.256';
    const DEFAULT_ICON_FLUSH = '3fd49fd8e5e86d65f3c6983d12a585467a6304e0e8b137609a8592937aab0dd7.sha2.256';
    // Icônes des synchronisations.
    const DEFAULT_ICON_SYNOBJ = '5fc6d664c592591eedea906e493a94ba916ce0a4e2eaed9f0a53d664f5c98eae.sha2.256';
    const DEFAULT_ICON_SYNLNK = '94c3308da0169f91c875fbd802334ec42883b978248e82bebf3e52f3cc80b4cf.sha2.256';
    const DEFAULT_ICON_SYNENT = '468f2e420371343c58dcdb49c4db9f00b81cce029a5ee1de627b9486994ee199.sha2.256';
    // Icônes des ajouts.
    const DEFAULT_ICON_ADD = 'da27aba584a1058642780169fea2fa9e072d22d1df515a84f5310608b1f31266.sha2.256';
    const DEFAULT_ICON_ADDOBJ = '37be5ba2a53e9835dbb0ff67a0ece1cc349c311660e4779680ee2daa4ac45636.sha2.256';
    const DEFAULT_ICON_ADDLNK = '4be77eff5da4ca093f43af7c71371431b30195aee0587d92e4c012923efc7b8a.sha2.256';
    const DEFAULT_ICON_ADDENT = 'cba3712128bbdd5243af372884eb647595103bb4c1f1b4d2e2bf62f0eba3d6e6.sha2.256';
    // Icônes des groupes.
    const DEFAULT_ICON_GRPENT = 'e0dcd8716dbca0ef984dec7bee459bb64c4c03bbc659d23c09c4681358e15b2c.sha2.256';
    const DEFAULT_ICON_GRPOBJ = '0390b7edb0dc9d36b9674c8eb045a75a7380844325be7e3b9557c031785bc6a2.sha2.256';
    const DEFAULT_ICON_GRPENTADD = '672bc011bd1a59857603bbe68ad63511b2d47030b7d1d2987e796d796f2928ab.sha2.256';
    const DEFAULT_ICON_GRPOBJADD = '819babe3072d50f126a90c982722568a7ce2ddd2b294235f40679f9d220e8a0a.sha2.256';
    // Icônes des conversations.
    const DEFAULT_ICON_CVT = '836e7786bbfc0f360d9c85908920b6dcaee34d46ca8e9c1de3a8462d95388b49.sha2.256';
    const DEFAULT_ICON_CVTENT = 'fdc7745129235ee0952a3276a862c0f36c070005f677889543ce8120c79c5e76.sha2.256';
    const DEFAULT_ICON_CVTOBJ = '77a2eaeedd706b8d62c6e7f39f4f42d4dcf3d78d2145bcd0e6d9d7b4d6852e8f.sha2.256';
    const DEFAULT_ICON_CVTENTADD = '9a7ff374f5de2b18975f2965339fb5b25915d1e64a5034354ca1607deaade057.sha2.256';
    const DEFAULT_ICON_CVTOBJADD = 'ff3fb6c1cfee8d9199e298afcf9e283c5db1b91696dc2677e110a026991aeea6.sha2.256';
    // Icônes des entités.
    const DEFAULT_ICON_USER = '94d672f309fcf437f0fa305337bdc89fbb01e13cff8d6668557e4afdacaea1e0.sha2.256';
    const DEFAULT_ICON_ENT = '94d5243e2b48bb89e91f2906bdd7f9006b1632203e831ff09615ad2ccaf20a60.sha2.256';
    const DEFAULT_ICON_OBJECT = '26d3b259b94862aecac064628ec02a38e30e9da9b262a7307453046e242cc9ee.sha2.256';
    const DEFAULT_ICON_ENTITY_LOCK = 'de62640d07ac4cb2f50169fa361e062ed3595be1e973c55eb3ef623ed5661947.sha2.256';
    const DEFAULT_ICON_KEY = '1c6db1c9b3b52a9b68d19c936d08697b42595bec2f0adf16e8d9223df3a4e7c5.sha2.256';
    // Icônes des listes.
    const DEFAULT_ICON_LSTOBJ = 'cc2a24b13d8e03a5de238a79a8adda1a9744507b8870d59448a23b8c8eeb5588.sha2.256';
    const DEFAULT_ICON_LSTLNK = '06cac4acb887cff2c7ba6653f865d800276a4e9d493a3be4e1b05d107f5ecbaf.sha2.256';
    const DEFAULT_ICON_LSTENT = '3edf52669e7284e4cefbdbb00a8b015460271765e97a0d6ce6496b11fe530ce1.sha2.256';
    // Icônes diverses.
    const DEFAULT_ICON_WORLD = '3638230cde600865159d5b5f7993d8a3310deb35aa1f6f8f57429b16472e03d6.sha2.256';
    const DEFAULT_ICON_TIME = '108033240730a0b19e96c82d85802f53c348e446441525696744f7102070b0ed.sha2.256';
    const DEFAULT_ICON_APPLICATION = 'a061cad04be7fb725d13c13df5c581f52783acea7d605546b808bddcc0c16d2c.sha2.256';

    const REFERENCE_ICON_KEY = 'ebde500081ce0916fb54efc3a900472be9fadee2dfcf988e3b5b721ebf00d687f655.none.272';
    // Références des icônes des liens.
    const REFERENCE_ICON_LINK_LC = '6e6562756c652f6c69656e2f6c630000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_LINK_LD = '6e6562756c652f6c69656e2f6c640000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_LINK_LE = '6e6562756c652f6c69656e2f6c650000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_LINK_LF = '6e6562756c652f6c69656e2f6c660000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_LINK_LK = '6e6562756c652f6c69656e2f6c6b0000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_LINK_LL = '6e6562756c652f6c69656e2f6c6c0000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_LINK_LS = '6e6562756c652f6c69656e2f6c730000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_LINK_LU = '6e6562756c652f6c69656e2f6c750000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_LINK_LX = '6e6562756c652f6c69656e2f6c780000000000000000000000000000000000000000.none.272';

    // Références des icônes des émotions.
    const REFERENCE_ICON_EMOTION_JOIE0 = '6f6a6569656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000000000.none.272';
    const REFERENCE_ICON_EMOTION_CONFIANCE0 = '6f63666e6169636e65656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000.none.272';
    const REFERENCE_ICON_EMOTION_PEUR0 = '65707275656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000000000.none.272';
    const REFERENCE_ICON_EMOTION_SURPRISE0 = '7573707269726573656e7562656c6f2f6a627465652f6f6d69746e6f0a2f00000000.none.272';
    const REFERENCE_ICON_EMOTION_TRISTESSE0 = '727473696574737365656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000.none.272';
    const REFERENCE_ICON_EMOTION_DEGOUT0 = '65646f677475656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000000000.none.272';
    const REFERENCE_ICON_EMOTION_COLERE0 = '6f63656c6572656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000000000.none.272';
    const REFERENCE_ICON_EMOTION_INTERET0 = '6e696574657274656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000.none.272';
    const REFERENCE_ICON_EMOTION_JOIE1 = '6f6a6569656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000000001.none.272';
    const REFERENCE_ICON_EMOTION_CONFIANCE1 = '6f63666e6169636e65656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000001.none.272';
    const REFERENCE_ICON_EMOTION_PEUR1 = '65707275656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000000000001.none.272';
    const REFERENCE_ICON_EMOTION_SURPRISE1 = '7573707269726573656e7562656c6f2f6a627465652f6f6d69746e6f0a2f00000001.none.272';
    const REFERENCE_ICON_EMOTION_TRISTESSE1 = '727473696574737365656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000001.none.272';
    const REFERENCE_ICON_EMOTION_DEGOUT1 = '65646f677475656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000000001.none.272';
    const REFERENCE_ICON_EMOTION_COLERE1 = '6f63656c6572656e7562656c6f2f6a627465652f6f6d69746e6f0a2f000000000001.none.272';
    const REFERENCE_ICON_EMOTION_INTERET1 = '6e696574657274656e7562656c6f2f6a627465652f6f6d69746e6f0a2f0000000001.none.272';

    const REFERENCE_ICON_INFO_INFO = '69636f6e20696e666f726d6174696f6e000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_INFO_OK = '69636f6e206f6b000000000000000000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_INFO_WARN = '69636f6e207761726e696e6700000000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_INFO_ERROR = '69636f6e206572726f72000000000000000000000000000000000000000000000000.none.272';
    const REFERENCE_ICON_INFO_PLAY = '73745872cd2b46a40992470eaa6dd1e5ca1face3c38a1da7650d4040d82193b9021d.none.272';
    const REFERENCE_ICON_INFO_BACK = '8ade584d3aa420335a7af82da4438654b891985777cc05bf6cbe86ebe328e31f1cc4.none.272';
    const REFERENCE_ICON_INFO_QUERY = '16e9a40a7f705f9c3871d13ce78b9f016f6166c2214b293e5a38964502a5ff9a05bb.none.272';



    /**
     * Liste des objets nécessaires au bon fonctionnement de l'application.
     * Vide par défaut, est remplacé par l'application.
     *
     * @var array:string
     */
    protected array $_neededObjectsList = array();

    /**
     * Liste des objets nécessaires au bon fonctionnement.
     * Ici, ce sont tous les objets communs aux applications.
     *
     * @var array
     */
    protected array $_commonNeededObjectsList = array(
        self::DEFAULT_ICON_ALPHA_COLOR,
        self::DEFAULT_ICON_LC,
        self::DEFAULT_ICON_LD,
        self::DEFAULT_ICON_LE,
        self::DEFAULT_ICON_LF,
        self::DEFAULT_ICON_LK,
        self::DEFAULT_ICON_LL,
        self::DEFAULT_ICON_LO,
        self::DEFAULT_ICON_LS,
        self::DEFAULT_ICON_LU,
        self::DEFAULT_ICON_LX,
        self::DEFAULT_ICON_IOK,
        self::DEFAULT_ICON_IWARN,
        self::DEFAULT_ICON_IERR,
        self::DEFAULT_ICON_IINFO,
    );


    protected bool $_unlocked = false;
    protected string $_urlLinkObjectPrefix = '';
    protected string $_urlLinkGroupPrefix = '';
    protected string $_urlLinkConversationPrefix = '';
    protected string $_urlLinkEntityPrefix = '';
    protected string $_urlLinkCurrencyPrefix = '';
    protected string $_urlLinkTokenPoolPrefix = '';
    protected string $_urlLinkTokenPrefix = '';
    protected string $_urlLinkTransactionPrefix = '';
    protected string $_urlLinkWalletPrefix = '';
    protected string $_currentDisplayLanguage = '';
    protected ?Translates $_currentDisplayLanguageInstance = null;
    protected array $_displayLanguageList = array();
    protected array $_displayLanguageInstanceList = array();



    public function __destruct() { return true; }
    public function __toString(): string { return 'Display'; }
    public function __sleep() { return array(); } // TODO do not cache



    protected function _initialisation(): void
    {
        $this->_metrologyInstance->addLog('initialisation display', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '46fcbf07');
        $this->_unlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();

        $this->_initUrlLinks();

        $this->_findLogoApplication();
        $this->_findLogoApplicationLink();
        $this->_findLogoApplicationName();
        $this->_findCurrentDisplayMode();
        $this->_findCurrentModule();
        $this->_findCurrentDisplayView();
        $this->_findInlineContentID();
        $this->_findCurrentApplication();

        // Si en mode téléchargement d'objet ou de lien, pas de traduction.
        if ($this->_translateInstance !== null) {
            $this->_currentDisplayLanguage = $this->_translateInstance->getCurrentLanguage();
            $this->_currentDisplayLanguageInstance = $this->_translateInstance->getCurrentLanguageInstance();
            $this->_displayLanguageList = $this->_translateInstance->getLanguageList();
            $this->_displayLanguageInstanceList = $this->_translateInstance->getLanguageModuleInstanceList();
        }
    }

    protected function _initUrlLinks(): void
    {
        global $applicationName; // FIXME

        $this->setUrlLinkObjectPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
        $this->setUrlLinkGroupPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
        $this->setUrlLinkConversationPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
        $this->setUrlLinkEntityPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
        $this->setUrlLinkCurrencyPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
        $this->setUrlLinkTokenPoolPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
        $this->setUrlLinkTokenPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
        $this->setUrlLinkTransactionPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
        $this->setUrlLinkWalletPrefix('?'
            . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $applicationName
            . '&' . self::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . References::COMMAND_SELECT_OBJECT
            . '&' . References::COMMAND_SELECT_OBJECT . '=');
    }



    public function getNeededObjectsList(): array
    {
        return $this->_neededObjectsList;
    }


    protected string $_currentApplicationIID = '';

    protected function _findCurrentApplication(): void
    {
        global $bootstrapApplicationIID;

        $this->_currentApplicationIID = $bootstrapApplicationIID;
    }

    public function getCurrentApplicationIID(): string
    {
        return $this->_currentApplicationIID;
    }

    protected string $_currentDisplayMode = '';
    protected array $_listDisplayModes = array();

    /**
     * Cherche le mode d'affichage en cours.
     *
     * La recherche du mode se fait en lisant le mode demandé dans l'URL,
     *   puis en le comparant aux modes listés ou aux modes supportés par les modules présents.
     *
     * Seul le mode concerné sera traité et affiché.
     *
     * Si la liste des modes est vide et si les modules ne sont pas activés, on quitte.
     * Si les modules sont activés, mais que la liste des modules est vide, on quitte.
     *
     * @return void
     */
    protected function _findCurrentDisplayMode(): void
    {
        global $applicationName; // FIXME encore utile ?

        // Prepare the right application's class to use, '\Nebule\Application\*\Display' and not '\Nebule\Library\Displays'.
        $displayClass = $this->_applicationInstance->getNamespace() . '\\Display';

        // If we don't use modules, list of modes must not be empty.
        if (! $this->_applicationInstance::USE_MODULES && sizeof($this->_listDisplayModes) == 0) {
            $this->_metrologyInstance->addLog('search mode, no module and no mode', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'ddcc0850');
            return;
        }

        // If we use modules, extract name of modes from modules.
        if ($this->_applicationInstance::USE_MODULES) {
            // Extract list of modules, must not be empty.
            $listModules = $this->_applicationInstance->getModulesListInstances();
            if (sizeof($listModules) == 0)
                return;
            // Extract names of commands on these modules.
            $this->_listDisplayModes = array(0 => $displayClass::DEFAULT_DISPLAY_MODE);
            foreach ($listModules as $module) {
                if ($module::MODULE_COMMAND_NAME != ''
                    && strtolower($module::MODULE_TYPE) == 'application'
                ) {
                    $mode = $module::MODULE_COMMAND_NAME;
                    $this->_listDisplayModes[] = $mode;
                }
            }
        }

        // Find mode to display by reading GET or ask cache or keep default mode..
        $modeARG = filter_input(INPUT_GET, self::DEFAULT_DISPLAY_COMMAND_MODE, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW);
        $okModeARG = false;
        foreach ($this->_listDisplayModes as $name) {
            if ($modeARG == $name)
                $okModeARG = true;
        }
        if ($okModeARG) {
            $this->_metrologyInstance->addLog('ask mode : ' . $modeARG, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '43714573');
            $this->_currentDisplayMode = $modeARG;
        } else {
            $cache = $this->_sessionInstance->getSessionStore($applicationName . 'DisplayMode');
            if ($cache !== false
                && $cache != '')
                $this->_currentDisplayMode = $cache;
            else
                $this->_currentDisplayMode = $displayClass::DEFAULT_DISPLAY_MODE;
        }

        // Verify mode
        $okMode = false;
        foreach ($this->_listDisplayModes as $name) {
            if ($modeARG == $name)
                $okMode = true;
        }
        if (! $okMode)
            $this->_currentDisplayMode = $displayClass::DEFAULT_DISPLAY_MODE;

        $this->_sessionInstance->setSessionStore($applicationName . 'DisplayMode', $this->_currentDisplayMode);
        $this->_metrologyInstance->addLog('current mode : ' . $this->_currentDisplayMode, Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'bda64a7b');
    }

    /**
     * Retourne le mode d'affichage en cours.
     *
     * @return string
     */
    public function getCurrentDisplayMode(): string
    {
        return $this->_currentDisplayMode;
    }

    protected ?Modules $_currentModuleInstance = null;

    /**
     * @return void
     */
    protected function _findCurrentModule(): void
    {
        // Récupère l'instance du module en cours.
        if ($this->_applicationInstance::USE_MODULES) {
            foreach ($this->_applicationInstance->getModulesListInstances() as $module) {
                if ($module::MODULE_COMMAND_NAME == $this->_currentDisplayMode && strtolower($module::MODULE_TYPE) == 'application') {
                    $this->_metrologyInstance->addLog('find current module name : ' . $module::MODULE_COMMAND_NAME, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '7cd85d87');
                    $this->_currentModuleInstance = $this->_applicationInstance->getModulesListInstances()['\\' . $module->getClassName()];
                }
            }
        }
    }

    /**
     * Retourne le mode d'affichage en cours.
     *
     * @return Modules
     */
    public function getCurrentModuleInstance(): Modules
    {
        return $this->_currentModuleInstance;
    }

    protected string $_currentDisplayView = '';
    protected array $_listDisplayViews = array();

    /**
     * Recherche la vue en cours.
     *
     * La recherche de la vue se fait en lisant la vue demandée dans l'URL,
     *   puis en la comparant aux vues supportées par le mode en cours
     *   ou par la liste des vues si le mode n'est pas géré.
     *
     * Les vues des autres modes ne sont pas prises en comptes.
     * Seul le mode concerné sera traité et affiché.
     *
     * Si la liste des vues est vide et si les modules ne sont pas activés, on quitte.
     * Si les modules sont activés, mais que la liste des modules est vide, on quitte.
     *
     * @return void
     */
    protected function _findCurrentDisplayView(): void
    {
        global $applicationName;

        if (!$this->_applicationInstance::USE_MODULES && sizeof($this->_listDisplayModes) == 0) {
            $this->_metrologyInstance->addLog('search view, no module and no mode', Metrology::LOG_LEVEL_ERROR, __METHOD__, '82b83c17');
            return;
        }

        if ($this->_applicationInstance::USE_MODULES && sizeof($this->_applicationInstance->getModulesListInstances()) == 0) {
            $this->_metrologyInstance->addLog('search view, module but no mode', Metrology::LOG_LEVEL_ERROR, __METHOD__, '21dc60cc');
            return;
        }

        // Lit et nettoie le contenu de la variable GET.
        $arg_view = filter_input(INPUT_GET, Displays::DEFAULT_DISPLAY_COMMAND_VIEW, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW);

        $list_views_names = array();

        // Si activé, extrait les modes.
        if ($this->_applicationInstance::USE_MODULES && is_a($this->_currentModuleInstance, '\Nebule\Library\Modules')) {
            $this->_metrologyInstance->addLog('search view on ' . $this->_currentModuleInstance::MODULE_NAME, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '0acf655b');
            // Lit les vues déclarées.
            $list_views_names = $this->_currentModuleInstance::MODULE_REGISTERED_VIEWS;
            // Si demande la vue par défaut.
            if ($arg_view == 'default')
                $arg_view = $this->_currentModuleInstance::MODULE_DEFAULT_VIEW;
        } else {
            foreach ($this->_listDisplayViews as $view)
                $list_views_names[$view] = $view;
        }

        // Recherche une vue connue.
        $ok_view = false;
        foreach ($list_views_names as $name) {
            if ($arg_view == $name)
                $ok_view = true;
        }
        if ($arg_view == 'menu')
            $ok_view = true;

        if ($ok_view) // Si la vue est connue.
        {
            // Ecrit la vue dans la variable.
            $this->_currentDisplayView = $arg_view;
            // Ecrit la vue dans la session.
            $this->_sessionInstance->setSessionStore($applicationName . 'DisplayView', $arg_view);
        } else {
            $cache = $this->_sessionInstance->getSessionStore($applicationName . 'DisplayView');
            // S'il existe une variable de session pour la vue, la lit.
            if ($cache !== false
                && $cache != ''
            )
                $this->_currentDisplayView = $cache;
            else // Sinon active la vue par defaut.
            {
                // Si activé, extrait les modes.
                if ($this->_applicationInstance::USE_MODULES && is_a($this->_currentModuleInstance, 'Nebule\Library\Modules'))
                    $this->_currentDisplayView = $this->_currentModuleInstance::MODULE_DEFAULT_VIEW;
                else
                    $this->_currentDisplayView = self::DEFAULT_DISPLAY_VIEW;
                // Ecrit dans le cache.
                $this->_sessionInstance->setSessionStore($applicationName . 'DisplayView', $this->_currentDisplayView);
            }
            unset($cache);
        }
        $this->_metrologyInstance->addLog('current view : ' . $this->_currentDisplayView, Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'f5231ed0');

        unset($arg_view, $list_views_names, $ok_view);
    }

    /**
     * Retourne la vue en cours.
     *
     * @return string
     */
    public function getCurrentDisplayView(): string
    {
        return $this->_currentDisplayView;
    }


    /**
     * Recherche l'ID de contenu online à afficher.
     */
    protected function _findInlineContentID(): void
    {
        $arg_id = trim(' ' . filter_input(INPUT_GET, self::DEFAULT_INLINE_CONTENT_COMMAND, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        if ($arg_id != '')
            $this->_inlineContentID = $arg_id;

        $this->_metrologyInstance->addLog('find sub display : ' . $this->_inlineContentID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '046d378a');
    }

    protected $_inlineContentID = '';

    protected $_inlineContentIndex = array();

    protected $_inlineContentOptions = array();

    /**
     * Retourne l'ID html à traiter.
     *
     * @return string
     */
    public function getInlineContentID(): string
    {
        return $this->_inlineContentID;
    }

    /**
     * Enregistre un ID de contenu html à remplacer.
     * La variable 'options' permet de passer des paramètres supplémentaires.
     *
     * @param string $id
     * @param string $options
     * @return boolean
     */
    public function registerInlineContentID(string $id, string $options = ''): bool
    {
        if ($id == ''
            || $id == '0'
        )
            return false;

        $this->_inlineContentIndex[$id] = $id;
        $this->_inlineContentOptions[$id] = $options;

        $this->_metrologyInstance->addLog('register sub display : ' . $id, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'e3c2b608');
        ?>

        <div class="inlinecontent" id="<?php echo $id; ?>">
            <p class="inlinecontentwait"><?php echo $this->_translateInstance->getTranslate('::progress'); ?></p>
        </div>
        <?php
        return true;
    }

    /**
     * Affiche le nécessaire pour le contenu html à remplacer.
     *
     * @return boolean
     */
    protected function _displayInlineContentID(): bool
    {
        if (sizeof($this->_inlineContentIndex) == 0)
            return true;

        echo "<script language=\"javascript\" type=\"text/javascript\">\n<!--\n";
        $url = '?' . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_currentDisplayMode
            . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_currentDisplayView;
        foreach ($this->_inlineContentIndex as $id) {
            $option = '';
            if (isset($this->_inlineContentOptions[$id])
                && $this->_inlineContentOptions[$id] != ''
            )
                $option = '&' . $this->_inlineContentOptions[$id];
            echo "setTimeout(replaceInlineContentFromURL('" . $id . "', '" . $url
                . '&' . self::DEFAULT_INLINE_COMMAND . '&' . self::DEFAULT_INLINE_CONTENT_COMMAND . '=' . $id
                . $option . "'), 20);\n";
        }
        echo "//-->\n</script>\n";

        // Vide la liste
        $this->_inlineContentIndex = array();
        $this->_inlineContentOptions = array();

        return true;
    }


    /**
     * Affichage du style CSS commun.
     */
    public function commonCSS(): void
    {
        ?>

        <style>
            /* CSS reset. http://meyerweb.com/eric/tools/css/reset/ v2.0 20110126. Public domain */
            * {
                margin: 0;
                padding: 0;
            }

            html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre,
            a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp,
            small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li,
            fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td,
            article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup,
            menu, nav, output, ruby, section, summary, time, mark, audio, video {
                border: 0;
                font-size: 100%;
                font: inherit;
                vertical-align: baseline;
            }

            article, aside, details, figure, figcaption, footer, header, hgroup, menu, nav, section {
                display: block;
            }

            body {
                line-height: 1;
            }

            ol, ul {
                list-style: none;
            }

            blockquote, q {
                quotes: none;
            }

            blockquote:before, blockquote:after, q:before, q:after {
                content: '';
                content: none;
            }

            table {
                border-collapse: collapse;
                border-spacing: 0;
            }

            /* Balises communes. */
            html {
                height: 100%;
                width: 100%;
            }

            body {
                color: #ababab;
                font-family: monospace;
                background: #454545;
                height: 100%;
                width: 100%;
                min-height: 480px;
                min-width: 640px;
            }

            img, embed, canvas, video, audio, picture {
                max-width: 100%;
                height: auto;
            }

            img {
                border: 0;
                vertical-align: middle;
            }

            a:link, a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #ababab;
            }

            a:hover, a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #ffffff;
            }

            input {
                background: #ffffff;
                color: #000000;
                margin: 0;
                margin-top: 5px;
                border: 0;
                box-shadow: none;
                padding: 5px;
                background-origin: border-box;
            }

            input[type=submit] {
                font-weight: bold;
            }

            input[type=password], input[type=text], input[type=email] {
                /*padding: 6px;*/
            }

            /* Le bloc d'entête */
            .layout-header {
                position: fixed;
                top: 0;
                width: 100%;
                text-align: center;
            }

            .layout-header {
                height: 68px;
                background: #ababab;
                border-bottom-style: solid;
                border-bottom-color: #c8c8c8;
                border-bottom-width: 1px;
            }

            .header-left {
                height: 64px;
                width: 64px;
                margin: 2px;
                float: left;
            }

            .header-left img {
                height: 64px;
                width: 64px;
            }

            .header-right {
                height: 64px;
                width: 64px;
                margin: 2px;
                float: right;
            }

            .header-right img {
                height: 64px;
                width: 64px;
            }

            .header-center {
                height: 100%;
                display: inline-flex;
            }

            .header-center p {
                margin: auto 3px 3px 3px;
                overflow: hidden;
                white-space: nowrap;
                color: #454545;
                text-align: center;
            }

            /* Le bloc de bas de page */
            .layout-footer {
                position: fixed;
                bottom: 0;
                width: 100%;
                text-align: center;
            }

            .layout-footer {
                height: 68px;
                background: #ababab;
                border-top-style: solid;
                border-top-color: #c8c8c8;
                border-top-width: 1px;
            }

            .footer-center p {
                margin: 3px;
                overflow: hidden;
                white-space: nowrap;
                color: #454545;
                text-align: center;
            }

            .footer-center a:link, .footer-center a:visited {
                font-weight: normal;
                text-decoration: none;
                color: #454545;
            }

            .footer-center a:hover, .footer-center a:active {
                font-weight: normal;
                text-decoration: underline;
                color: #ffffff;
            }

            /* Le menu des applications, caché par défaut. */
            .layout-menu-applications {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.33);
                display: none;
                z-index: 100;
            }

            .menu-applications {
                position: fixed;
                top: 79px;
                left: 0;
                padding: 3px;
                padding-bottom: 2px;
                padding-right: 2px;
                width: 100%;
                color: #ffffff;
                background: rgba(0, 0, 0, 0.66);
            }

            .menu-applications img {
                height: 64px;
                width: 64px;
            }

            .menu-applications a:link, .menu-applications a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #ffffff;
            }

            .menu-applications a:hover, .menu-applications a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #ffffff;
            }

            .menu-applications-logo {
                margin: 5px;
            }

            .menu-applications-logo img {
                height: 64px;
                width: 64px;
            }

            .menu-applications-one {
                margin: 2px;
                margin-bottom: 3px;
                margin-right: 3px;
                padding: 5px;
                float: left;
                background: rgba(0, 0, 0, 0.7);
                width: 186px;
                min-height: 64px;
            }

            .menu-applications-icon {
                float: left;
                margin-right: 5px;
            }

            .menu-applications-title p {
                font-size: 1.1em;
                font-weight: bold;
            }

            .menu-applications-text p {
                font-size: 0.8em;
            }

            .menu-applications-sign {
                position: fixed;
                bottom: 10px;
                right: 7px;
                text-align: right;
                color: #ffffff;
            }

            .menu-applications-sign img {
                height: 32px;
                width: 32px;
            }

            .menu-applications-sign a:link, .menu-applications-sign a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #ffffff;
            }

            .menu-applications-sign a:hover, .menu-applications-sign a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #ffffff;
            }

            /* Le corps de la page qui contient le contenu. Permet le centrage vertical universel */
            .layout-main {
                width: 100%;
                height: 100%;
                display: flex;
            }

            /* Le centre de la page avec le contenu utile. Centrage vertical */
            .layout-content {
                margin: auto;
                padding: 84px 0 84px 0;
            }

            /* Les affichages de parties seules comme un message */
            .layoutAloneItem {
                width: 100%;
            }

            .aloneItemContent {
                margin: auto;
                text-align: center;
                font-size: 0;
                min-height: 34px;
                padding: 0 5px 5px 0;
                background: none;
            }

            .aloneTextItemContent {
                margin: auto;
                text-align: justify;
                font-size: 1rem;
                min-height: 34px;
                padding: 5px;
                background: rgba(255, 255, 255, 0.5);
                color: #000000;
            }

            .aloneTextItemContent a {
                color: #000000;
            }

            .content {
                margin: 0;
                text-align: left;
            }

            .error {
                background: #ffa0a0;
                background-origin: border-box;
                font-family: monospace;
                font-size: 1.2em;
                color: #ff0000;
                text-align: left;
            }

            .error p {
                padding: 5px;
            }

            .error img {
                height: 32px;
                width: 32px;
            }

            .error a:link, .error a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #ef0000;
            }

            .error a:hover, .error a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #ffffff;
            }

            .warning {
                background: #ffe080;
                background-origin: border-box;
                font-family: monospace;
                font-size: 1.2em;
                color: #ff8000;
                text-align: left;
            }

            .warning p {
                padding: 5px;
            }

            .warning img {
                height: 32px;
                width: 32px;
            }

            .warning a:link, .warning a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #ef7000;
            }

            .warning a:hover, .warning a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #ffffff;
            }

            .message {
                background: #103020;
                background-origin: border-box;
                font-family: monospace;
                font-size: 1.2em;
                color: #ffffff;
                text-align: left;
            }

            .message p {
                padding: 5px;
            }

            .message img {
                height: 32px;
                width: 32px;
            }

            .information {
                background: rgba(0, 0, 0, 0.6);
                background-origin: border-box;
                text-align: left;
            }

            .information p {
                padding: 5px;
                color: #ffffff;
            }

            .information img {
                height: 32px;
                width: 32px;
            }

            .textTitle {
                background: rgba(255, 255, 255, 0.6);
                background-origin: border-box;
                text-align: center;
                color: #000000;
                clear: both;
                padding: 5px;
                min-height: 65px;
            }

            .textTitle img {
                height: 64px;
                width: 64px;
            }

            .textTitle h1 {
                font-size: 1.5em;
                color: #000000;
                font-weight: bold;
                text-align: center;
                padding: 8px;
                background: rgba(255, 255, 255, 0);
            }

            .textTitle2 {
                background: rgba(255, 255, 255, 0.4);
                background-origin: border-box;
                text-align: center;
                color: #000000;
                clear: both;
                padding: 5px;
                min-height: 65px;
            }

            .textTitle2 img {
                height: 64px;
                width: 64px;
            }

            .textTitle2 h2 {
                font-size: 1.4em;
                color: #000000;
                font-weight: bold;
                text-align: center;
                padding: 5px;
                background: rgba(255, 255, 255, 0);
                font-family: monospace;
            }

            .text {
                padding: 10px;
                padding-top: 20px;
                padding-bottom: 40px;
                background: rgba(255, 255, 255, 0.5);
                background-origin: border-box;
                color: #000000;
            }

            .text p {
                margin-bottom: 20px;
                clear: both;
                text-align: justify;
            }

            .textSmall {
                padding: 5px;
                padding-bottom: 15px;
                background: rgba(255, 255, 255, 0.5);
                background-origin: border-box;
                color: #000000;
            }

            .textSmall p {
                margin: 0;
                clear: both;
                text-align: justify;
            }

            .textnobg {
                padding: 10px;
                padding-top: 20px;
                padding-bottom: 40px;
                color: #000000;
                clear: both;
            }

            .textnobg p {
                margin-bottom: 20px;
                text-align: justify;
            }

            .textcontentfull {
                padding: 5px;
                padding-top: 20px;
                padding-bottom: 40px;
                background: rgba(255, 255, 255, 0.5);
                background-origin: border-box;
                color: #000000;
            }

            .textcontentfull pre {
                background: rgba(255, 255, 255, 0.7);
                background-origin: border-box;
                margin: 0;
                padding: 5px;
                clear: both;
            }

            .textcontentfull img, .textcontentfull video, .textcontentfull audio, .textcontentfull picture {
                max-width: 100%;
                height: auto;
                margin: 0;
                padding: 0;
                clear: both;
            }

            .textcontenthalf {
                padding: 5px;
                background: rgba(255, 255, 255, 0.5);
                background-origin: border-box;
                color: #000000;
            }

            .textcontenthalf pre {
                background: rgba(255, 255, 255, 0.7);
                background-origin: border-box;
                margin: 0;
                padding: 5px;
                clear: both;
            }

            .textcontenthalf img, .textcontenthalf video, .textcontenthalf audio, .textcontenthalf picture {
                max-width: 50%;
                height: auto;
                margin: 0;
                padding: 0;
                clear: both;
            }

            .textcenter {
                padding: 20px;
                padding-bottom: 40px;
                background: rgba(255, 255, 255, 0.5);
                background-origin: border-box;
                text-align: center;
                color: #000000;
            }

            .textcenter p {
                margin-bottom: 20px;
                clear: both;
            }

            .sequence {
                height: 110px;
                clear: both;
            }

            .bootstrapErrorDiv {
                margin: 0px;
                padding: 5px;
                background: #454545;
            }

            .bootstrapErrorDiv p {
                color: #ababab;
            }

            /* Le pied de page pour le traitement des actions, avant l'affichage du centre de la page. */
            .flowaction {
                position: fixed;
                bottom: 0;
                width: 100%;
                margin: 0px;
                background: rgba(34, 34, 34, 0.8);
            }

            .flowaction p {
                color: #ffffff;
            }

            /* Les insersions en ligne. */
            .inlinecontent {
                width: 100%;
            }

            .inlinecontentwait {
                width: 206px;
                text-align: center;
                margin: 5px;
                padding: 5px;
                min-height: 24px;
                background: rgba(0, 0, 0, 0.5);
                color: #ffffff;
            }

            .inlinecontentnext {
                width: 206px;
                text-align: center;
                margin: 5px;
                padding: 5px;
                min-height: 24px;
                background: rgba(0, 0, 0, 0.5);
                color: #ffffff;
            }

            /* Les images */
            .iconegrossepuce {
                height: 64px;
                width: 64px;
            }

            .iconemoyenpuce {
                height: 32px;
                width: 32px;
            }

            .iconepuce {
                height: 16px;
                width: 16px;
            }

            .iconInlineDisplay {
                height: 16px;
                width: 16px;
            }

            /* L'insertion de boutons de fonctionnalités liées aux modules, dans le corps de la page. */
            .textAction {
                padding: 3px;
                min-height: 34px;
                background: rgba(255, 255, 255, 0.12);
                color: #000000;
            }

            .textAction a:link, .textAction a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #000000;
            }

            .textAction a:hover, .textAction a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #000000;
            }

            .oneAction {
                margin: 2px;
                padding: 5px;
                float: left;
                background: rgba(255, 255, 255, 0.7);
                width: 206px;
                min-height: 64px;
            }

            .oneActionItem {
                margin: 2px;
                padding: 5px;
                float: left;
                background: rgba(255, 255, 255, 0.4);
                width: 350px;
                min-height: 64px;
            }

            .oneActionItem-top {
                min-height: 64px;
            }

            .oneAction-icon {
                float: left;
                margin-right: 5px;
            }

            .oneAction-icon img {
                height: 64px;
                width: 64px;
            }

            .oneAction-modname p {
                font-size: 0.6em;
                font-style: italic;
            }

            .oneAction-entityname p {
                font-size: 0.8em;
                margin-bottom: 5px;
            }

            .oneAction-title p {
                font-size: 1.1em;
                font-weight: bold;
            }

            .oneAction-text p {
                font-size: 0.8em;
            }

            .oneAction-actions {
                clear: both;
            }

            .oneAction-actions p {
                background: rgba(255, 255, 255, 0.33);
                margin-top: 5px;
            }

            .oneAction-ok {
                clear: both;
            }

            .oneAction-ok p {
                background: #80ff80;
                margin-top: 5px;
            }

            .oneAction-warn {
                clear: both;
            }

            .oneAction-warn p {
                background: #ffe080;
                margin-top: 5px;
            }

            .oneAction-error {
                clear: both;
            }

            .oneAction-error p {
                background: #ffa0a0;
                margin-top: 5px;
            }

            .oneAction-close {
                height: 1px;
                clear: both;
            }

            #oneAction-bg-warn {
                background: #ffe080;
            }

            .inlineemotions {
                padding: 5px;
                background: rgba(255, 255, 255, 0.3);
                background-origin: border-box;
                text-align: center;
                font-size: 0.8em;
                color: #000000;
            }

            .inlineemotions img {
                height: 24px;
                width: 24px;
                margin-left: 5px;
            }

            /* Pour les bulles d'aide. */
            .infobulle {
                position: absolute;
                left: 0;
                visibility: hidden;
                padding: 5px;
                color: #ffffff;
                background: rgba(0, 0, 0, 0.8);
                width: 50%;
                text-align: justify;
            }

            /* Les champs forçés. */
            .forcedinput {
                background: #ffffff;
                color: #808080;
                margin: 0;
                border: 0;
                box-shadow: none;
                padding: 2px;
                padding-left: 5px;
                padding-right: 5px;
                font-size: 1rem;
            }
        </style>
        <?php
        DisplayTitle::displayCSS();
        DisplayInformation::displayCSS();
        DisplayObject::displayCSS();
        DisplayLink::displayCSS();
        DisplayBlockLink::displayCSS();
        DisplaySecurity::displayCSS();
        DisplayList::displayCSS();
        DisplayMenu::displayCSS();
        DisplayColor::displayCSS();
        DisplayIcon::displayCSS();
        DisplayIconApplication::displayCSS();
        DisplayContent::displayCSS();
        DisplayNotify::displayCSS();
        DisplayQuery::displayCSS();
    }

    /**
     * Affichage du style CSS de l'application.
     */
    public function displayCSS(): void
    {
        // This function must be overloaded by applications.
    }


    /**
     * Affichage des scripts JS communs.
     * Si l'option permitJavaScript est à false, cette partie est désactivée.
     *
     * @return void
     */
    public function commonScripts(): void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitJavaScript')) {
            return;
        }
        ?>

        <script language="javascript" type="text/javascript">
            <!--
            function replaceInlineContent(id, content) {
                document.getElementById(id).innerHTML = content;
            }

            function replaceInlineContentFromURL(id, url) {
                var req = false;
                // For Safari, Firefox, and other non-MS browsers
                if (window.XMLHttpRequest) {
                    try {
                        req = new XMLHttpRequest();
                    } catch (e) {
                        req = false;
                    }
                } else if (window.ActiveXObject) {
                    // For Internet Explorer on Windows
                    try {
                        req = new ActiveXObject("Msxml2.XMLHTTP");
                    } catch (e) {
                        try {
                            req = new ActiveXObject("Microsoft.XMLHTTP");
                        } catch (e) {
                            req = false;
                        }
                    }
                }
                var element = document.getElementById(id);
                if (!element) {
                    return;
                }
                if (req) {
                    // Synchronous request, wait till we have it all
                    req.open('GET', url, false);
                    req.send(null);
                    element.innerHTML = req.responseText;
                } else {
                    element.innerHTML = "ERROR: your browser does not support XMLHTTPRequest objects!";
                }
            }

            function replaceNextContentFromURL(id, url) {
                replaceInlineContent(id, '<p class="inlinecontentwait">...</p>');
                var req = false;
                // For Safari, Firefox, and other non-MS browsers
                if (window.XMLHttpRequest) {
                    try {
                        req = new XMLHttpRequest();
                    } catch (e) {
                        req = false;
                    }
                } else if (window.ActiveXObject) {
                    // For Internet Explorer on Windows
                    try {
                        req = new ActiveXObject("Msxml2.XMLHTTP");
                    } catch (e) {
                        try {
                            req = new ActiveXObject("Microsoft.XMLHTTP");
                        } catch (e) {
                            req = false;
                        }
                    }
                }
                var element = document.getElementById(id);
                if (!element) {
                    return;
                }
                if (req) {
                    // Synchronous request, wait till we have it all
                    req.open('GET', url, false);
                    req.send(null);
                    element.innerHTML = req.responseText;
                } else {
                    element.innerHTML = "ERROR: your browser does not support XMLHTTPRequest objects!";
                }
            }

            var i = false;
            var j = true;

            function GetId(id) {
                return document.getElementById(id);
            }

            function move(e) {
                if (i && j) {
                    if (navigator.appName !== "Microsoft Internet Explorer") {
                        GetId("curseur").style.left = e.pageX - 720 + "px";
                        GetId("curseur").style.top = e.pageY + 10 + "px";
                    } else {
                        if (document.documentElement.clientWidth > 0) {
                            GetId("curseur").style.left = event.x + document.documentElement.scrollLeft - 720 + "px";
                            GetId("curseur").style.top = 10 + event.y + document.documentElement.scrollTop + "px";
                        } else {
                            GetId("curseur").style.left = event.x + document.body.scrollLeft - 710 + "px";
                            GetId("curseur").style.top = 10 + event.y + document.body.scrollTop + "px";
                        }
                    }
                    j = false;
                }
            }

            function montre(text) {
                if (i === false) {
                    GetId("curseur").style.visibility = "visible";
                    GetId("curseur").innerHTML = text;
                    i = true;
                }
            }

            function cache() {
                if (i === true) {
                    GetId("curseur").style.visibility = "hidden";
                    i = false;
                    j = true;
                }
            }

            document.onmouseover = move;

            ico_lock_off = new Image(64, 64);
            ico_lock_off.src = "/<?php    $objet = $this->_cacheInstance->newNode(self::DEFAULT_ICON_ENTITY_LOCK);
                $newobj = $objet->getUpdateNID(true, false);
                echo nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $newobj; ?>";
            ico_lock_on = new Image(64, 64);
            ico_lock_on.src = "/<?php    $objet = $this->_cacheInstance->newNode(self::DEFAULT_ICON_ENT);
                $newobj = $objet->getUpdateNID(true, false);
                echo nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $newobj; ?>";

            function hiLite(imgDocID, imgObjName, comment) {
                document.images[imgDocID].src = eval(imgObjName + ".src");
                window.status = comment;
                return true;
            }

            function display_menu(menuid) {
                var test = document.getElementById(menuid).style.display;
                if (test === "block") {
                    document.getElementById(menuid).style.display = "none";
                } else {
                    document.getElementById(menuid).style.display = "block";
                }
            }

            function display_show_block(menuid) {
                document.getElementById(menuid).style.display = "block";
            }

            function display_hide(menuid) {
                document.getElementById(menuid).style.display = "none";
            }

            //-->
        </script>
        <?php
    }

    /**
     * Display JS scripts.
     */
    protected function _displayScripts(): void
    {
        $this->commonScripts();

        // Ajout de la partie script JS du module en cours d'utilisation, si présent.
        foreach ($this->_applicationInstance->getModulesListInstances() as $module) {
            if ($module::MODULE_COMMAND_NAME == $this->_currentDisplayMode) {
                $module->headerScript();
                echo "\n";
            }
        }
    }

    /**
     * Prepare links depending on modules loaded.
     */
    protected function _configureLinks(): void
    {
        if (!$this->_applicationInstance::USE_MODULES)
            return;

        $namespace = '\\' . __NAMESPACE__ . '\\';

        // Prefix objects.
        if ($this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded($namespace . 'ModuleObjects')
            || $this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded('\\Nebule\\Modules\\ModuleObjects')
        ) {
            $this->setUrlLinkObjectPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_OBJECT . '=');
        } else {
            $this->setUrlLinkObjectPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
        }

        // Prefix for entities.
        if ($this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded($namespace . 'ModuleEntities')
            || $this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded('\\Nebule\\Modules\\ModuleEntities')
        ) {
            $this->setUrlLinkEntityPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleEntities')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleEntities')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_ENTITY . '=');
        } else {
            $this->setUrlLinkEntityPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
        }
        
        // Prefix for groups.
        if ($this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded($namespace . 'ModuleGroups')
            || $this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded('\\Nebule\\Modules\\ModuleGroups')
        ) {
            $this->setUrlLinkGroupPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleGroups')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleGroups')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_GROUP . '=');
        } elseif ($this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded($namespace . 'Nebule\\Modules\\ModuleObjects')) {
            $this->setUrlLinkGroupPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_OBJECT . '=');
        } else {
            $this->setUrlLinkGroupPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
        }

        // Prefix pour les conversations.
        if ($this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded($namespace . 'ModuleMessenger')
            || $this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded('\\Nebule\\Modules\\ModuleMessenger')
        ) {
            $this->setUrlLinkConversationPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule('Nebule\\Modules\\ModuleMessenger')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule('Nebule\\Modules\\ModuleMessenger')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_CONVERSATION . '=');
        } elseif ($this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded($namespace . 'Nebule\\Modules\\ModuleObjects')) {
            $this->setUrlLinkConversationPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_OBJECT . '=');
        } else {
            $this->setUrlLinkConversationPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
        }

        // Prefix currencies. FIXME
        /*if ($this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded('ModuleQantion')
            || $this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded('\\Nebule\\Modules\\ModuleQantion')
        ) {
            $this->setUrlLinkCurrencyPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_REGISTERED_VIEWS[3]
                . '&' . References::COMMAND_SELECT_CURRENCY . '=');
            $this->setUrlLinkTokenPoolPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_REGISTERED_VIEWS[8]
                . '&' . References::COMMAND_SELECT_TOKENPOOL . '=');
            $this->setUrlLinkTokenPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_REGISTERED_VIEWS[13]
                . '&' . References::COMMAND_SELECT_TOKEN . '=');
            $this->setUrlLinkTransactionPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_REGISTERED_VIEWS[19]
                . '&' . References::COMMAND_SELECT_TRANSACTION . '=');
            $this->setUrlLinkWalletPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule('ModuleQantion')::MODULE_REGISTERED_VIEWS[23]
                . '&' . References::COMMAND_SELECT_WALLET . '=');
        } elseif ($this->_applicationInstance->getApplicationModulesInstance()->getIsModuleLoaded($namespace . 'Nebule\\Modules\\ModuleObjects')) {
            $this->setUrlLinkCurrencyPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_OBJECT . '=');
            $this->setUrlLinkTokenPoolPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_OBJECT . '=');
            $this->setUrlLinkTokenPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_OBJECT . '=');
            $this->setUrlLinkTransactionPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_OBJECT . '=');
            $this->setUrlLinkWalletPrefix('?'
                . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_COMMAND_NAME
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getModule($namespace . 'ModuleObjects')::MODULE_DEFAULT_VIEW
                . '&' . References::COMMAND_SELECT_OBJECT . '=');
        } else {
            $this->setUrlLinkCurrencyPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
            $this->setUrlLinkTokenPoolPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
            $this->setUrlLinkTokenPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
            $this->setUrlLinkTransactionPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
            $this->setUrlLinkWalletPrefix('?' . \Nebule\Library\References::COMMAND_SWITCH_APPLICATION . '=4'
                . '&' . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . '=');
        }*/
    }

    /**
     * Code on apps before display.
     */
    protected function _preDisplay(): void
    {
        // Nothing to do. This function must be rewritten on apps if needed.
    }

    /**
     * Display page inline or not.
     */
    public function display(): void
    {
        $this->_configureLinks();
        $this->_preDisplay();

        if (filter_has_var(INPUT_GET, self::DEFAULT_INLINE_COMMAND))
            $this->_displayInline();
        //elseif (filter_has_var(INPUT_GET, self::DEFAULT_CSS_COMMAND))
        //    $this->commonCSS(); TODO
        else
            $this->_displayFull();
    }

    /**
     * Display full page.
     */
    /*protected function _displayFull(): void
    {
        global $applicationVersion,
               $applicationLicence,
               $applicationWebsite,
               $applicationName,
               $applicationSurname,
               $applicationAuthor;
        ?>
        <!DOCTYPE html>
        <html lang="">
        <head>
            <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
            <title><?php echo $applicationName; ?></title>
            <link rel="icon" type="image/png" href="favicon.png"/>
            <meta name="keywords" content="<?php echo $applicationSurname; ?>"/>
            <meta name="description" content="<?php echo $applicationName; ?>"/>
            <meta name="author" content="<?php echo $applicationAuthor . ' - ' . $applicationWebsite; ?>"/>
            <meta name="licence" content="<?php echo $applicationLicence; ?>"/>
            <?php $this->commonCSS(); ?>
            <style type="text/css">
                #logo img {
                    height: 256px;
                    width: 256px;
                }
            </style>
        </head>
        <body>
        <div class="layout-header">
            <div class="header-left">
                <a href="/?<?php echo Displays::DEFAULT_BOOTSTRAP_LOGO_LINK; ?>">
                    <img title="App switch" alt="[]" src="<?php echo Displays::DEFAULT_APPLICATION_LOGO; ?>"/>
                </a>
            </div>
            <div class="header-right">
                &nbsp;
            </div>
            <div class="header-center">
                <p>
                    <?php
                    $name = $this->_entitiesInstance->getServerEntityInstance()->getFullName();
                    if ($name != $this->_entitiesInstance->getServerEntityID())
                        echo $name;
                    else
                        echo '/';
                    echo '<br />' . $this->_entitiesInstance->getServerEntityID();
                    ?>
                </p>
            </div>
        </div>
        <div class="layout-footer">
            <div class="footer-center">
                <p>
                    <?php echo $applicationName; ?><br/>
                    <?php echo $applicationVersion; ?><br/>
                    (c) <?php echo $applicationLicence . ' ' . $applicationAuthor; ?> - <a
                        href="http://<?php echo $applicationWebsite; ?>" target="_blank"
                        style="text-decoration:none;"><?php echo $applicationWebsite; ?></a>
                </p>
            </div>
        </div>
        <div class="layout-main">
            <div class="layout-content">
                <img alt="nebule" id="logo" src="<?php echo static::DEFAULT_APPLICATION_LOGO_LIGHT; ?>"/>
            </div>
        </div>
        </body>
        </html>
        <?php
    }*/
    /**
     * Display full page.
     */
    protected function _displayFull(): void
    {
        $this->_metrologyInstance->addLog('Display full', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'c3cdf3de');
        ?>
        <!DOCTYPE html>
        <html lang="<?php echo $this->_currentDisplayLanguage; ?>">
        <head>
            <meta charset="utf-8"/>
            <title><?php echo $this->_applicationInstance::APPLICATION_NAME . ' - ' . $this->_entitiesInstance->getCurrentEntityInstance()->getFullName('all'); ?></title>
            <link rel="icon" type="image/png" href="favicon.png"/>
            <meta name="keywords" content="<?php echo $this->_applicationInstance::APPLICATION_SURNAME; ?>"/>
            <meta name="description" content="<?php echo $this->_applicationInstance::APPLICATION_NAME . ' - ';
            echo $this->_translateInstance->getTranslate('::::HtmlHeadDescription'); ?>"/>
            <meta name="author" content="<?php echo $this->_applicationInstance::APPLICATION_AUTHOR . ' - ' . $this->_applicationInstance::APPLICATION_WEBSITE; ?>"/>
            <meta name="licence" content="<?php echo $this->_applicationInstance::APPLICATION_LICENCE; ?>"/>
            <?php
            $this->_metrologyInstance->addLog('Display css', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '7fcf1976');
            $this->commonCSS();
            $this->displayCSS();

            $this->_metrologyInstance->addLog('Display vbs', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'ecbd188e');
            $this->_displayScripts();
            ?>

        </head>
        <body>
        <?php
        $this->_metrologyInstance->addLog('Display actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'fac72c30');
        $this->_displayActions();

        $this->_metrologyInstance->addLog('Display header', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '5d4eb6f0');
        $this->_displayHeader();

        $this->_metrologyInstance->addLog('Display menu apps', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '89f37a59');
        $this->_displayMenuApplications();
        ?>

        <div class="layout-main">
            <div class="layout-content">
                <div id="curseur" class="infobulle"></div>
                <div class="content">
                    <?php
                    $this->_metrologyInstance->addLog('Display checks', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '28feadb6');
                    $this->displaySecurityAlert('small', false);

                    $this->_metrologyInstance->addLog('Display content', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '58d043ab');
                    $this->_displayModuleContent();

                    $this->_metrologyInstance->addLog('Display metrology', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000'); // Log
                    $this->_displayMetrology();
                    ?>

                </div>
            </div>
        </div>
        <?php
        $this->_metrologyInstance->addLog('Display footer', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'b1d7feb6');
        $this->_displayFooter();
    }

    /**
     * Display inline page.
     *
     * Can be overwritten by apps.
     */
    protected function _displayInline(): void
    {
        $this->_metrologyInstance->addLog('display inline', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'bfcdcd6d');

        foreach ($this->_applicationInstance->getModulesListInstances() as $module) {
            if ($module::MODULE_COMMAND_NAME == $this->_currentDisplayMode) {
                $this->_metrologyInstance->addLog('display inline to module ' . $module::MODULE_COMMAND_NAME, Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'f74be2e8');
                $module->displayModuleInline();
                echo "\n";
            }
        }
    }

    protected function _displayActions(): void
    {
        ?>

        <div class="layout-footer footer<?php if ($this->_entitiesInstance->getCurrentEntityIsUnlocked()) {
            echo 'Unlock';
        } ?>">
            <p>
                <?php
                $this->_actionInstance->getDisplayActions();
                ?>

            </p>
        </div>
        <?php
    }

    protected string $_logoApplication = '';
    protected function _findLogoApplication(): void
    {
        $this->_logoApplication = $this->_displayInstance::DEFAULT_APPLICATION_LOGO;
        // @todo
    }

    protected string $_logoApplicationLink = '';
    protected function _findLogoApplicationLink(): void
    {
        $this->_logoApplicationLink = $this->_displayInstance::DEFAULT_APPLICATION_LOGO_LINK;
        // @todo
    }

    protected string $_logoApplicationName = '';
    protected function _findLogoApplicationName(): void
    {
        $this->_logoApplicationName = $this->_applicationInstance::APPLICATION_NAME;
        // @todo
    }


    /**
     * Display information on top.
     * On left the current entity.
     * On right security checks, empty if all OK.
     */
    protected function _displayHeader(): void
    {
        ?>

        <div class="layout-header header<?php if ($this->_entitiesInstance->getCurrentEntityIsUnlocked()) {
            echo 'Unlock';
        } ?>">
            <div class="header-left">
                <?php
                if ($this->_configurationInstance->getOptionAsBoolean('permitJavaScript')) {
                    ?>
                    <img src="<?php echo $this->_logoApplication; ?>" alt="[W]"
                         title="<?php echo $this->_translateInstance->getTranslate('::menu'); ?>"
                         onclick="display_menu('layout-menu-applications');"/>
                    <?php
                } else {
                    ?>
                    <a href="?<?php echo Displays::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->getCurrentDisplayMode() . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW; ?>=menu">
                        <img src="<?php echo $this->_logoApplication; ?>" alt="[W]"
                             title="<?php echo $this->_translateInstance->getTranslate('::menu'); ?>"/>
                    </a>
                    <?php
                }
                ?>
            </div>
            <?php
            $this->_displayCurentEntityOnHeader(false);
            ?>

            <div class="header-right">
                <?php $this->_displayHeaderRight(); ?>

            </div>

            <div class="header-center">
                <?php $this->_displayHeaderCenter(); ?>

            </div>
        </div>
        <?php
    }

    protected function _displayHeaderRight(): void {}
    protected function _displayHeaderCenter(): void {}

    protected function _displayMenuApplications(): void
    {
        $linkApplicationWebsite = $this->_applicationInstance::APPLICATION_WEBSITE;
        if (strpos($this->_applicationInstance::APPLICATION_WEBSITE, '://') === false)
            $linkApplicationWebsite = 'http://' . $this->_applicationInstance::APPLICATION_WEBSITE;
        ?>

        <div class="layout-menu-applications" id="layout-menu-applications">
            <div class="menu-applications-sign">
                <img alt="<?php echo $this->_applicationInstance::APPLICATION_NAME; ?>" src="<?php echo $this->_logoApplication; ?>"/><br/>
                <?php echo $this->_applicationInstance::APPLICATION_NAME; ?><br/><br/>
                mode=<?php echo $this->_currentDisplayMode; ?><br/>
                view=<?php echo $this->_currentDisplayView; ?><br/><br/>
                (c) <?php echo $this->_applicationInstance::APPLICATION_LICENCE . ' ' . $this->_applicationInstance::APPLICATION_AUTHOR; ?><br/>
                <?php echo $this->_translateInstance->getTranslate(':::version') . ' : ' . $this->_applicationInstance::APPLICATION_VERSION; ?><br/>
                <a href="<?php echo $linkApplicationWebsite; ?>" target="_blank"><?php echo $this->_applicationInstance::APPLICATION_WEBSITE; ?></a>
            </div>
            <div class="menu-applications-logo">
                <img src="<?php echo $this->_logoApplication; ?>" alt="[W]"
                     title="<?php echo $this->_translateInstance->getTranslate('::menu'); ?>"
                     onclick="display_menu('layout-menu-applications');"/>
            </div>
            <div class="menu-applications">
                <?php
                $this->_displayInternalMenuApplications();
                ?>

            </div>
        </div>
        <?php
    }

    /**
     * Affiche le menu des applications.
     */
    protected function _displayInternalMenuApplications(): void
    {
        $modules = $this->_applicationInstance->getApplicationModulesInstance()->getModulesListInstances();
        $list = array();
        $j = 0;
        $currentModuleName = 'noModuleFind-';

        // Affiche le lien du menu seul (sans JS).
        if ($this->_currentDisplayView != 'menu') {
            $list[$j]['icon'] = '8fffa9e30ca4e02f3b07f8447a4a23faaaf27bc5731b1e303e08c8ece79953a179b1.none.272';
            $list[$j]['title'] = $this->_translateInstance->getTranslate('::menu');
            $list[$j]['htlink'] = '?' . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_currentDisplayMode
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=menu';
            $list[$j]['desc'] = $this->_translateInstance->getTranslate('::menuDesc');
            $list[$j]['ref'] = $this->_applicationInstance::APPLICATION_NAME;
            $list[$j]['class'] = 'menuListContentActionModules';
            $j++;
        }

        // Appelle les actions du module concerné par le mode d'affichage.
        foreach ($modules as $module) {
            if ($module::MODULE_COMMAND_NAME == $this->_currentDisplayMode)
                continue;
            $moduleName = $module->getTranslate($module::MODULE_MENU_NAME);
            $currentModuleName = $module::MODULE_MENU_NAME;

            // Liste les points d'ancrages à afficher.
            $appHookList = $module->getHookList('selfMenu');
            if (sizeof($appHookList) != 0) {
                foreach ($appHookList as $appHook) {
                    if ($appHook['name'] != '') {
                        $icon = $appHook['icon'];
                        if ($icon == '')
                            $icon = $module::MODULE_LOGO;
                        if ($icon == '')
                            $icon = self::DEFAULT_ICON_IMLOG;
                        $desc = $module->getTranslate($appHook['desc']);
                        if ($desc == '')
                            $desc = '&nbsp;';

                        $list[$j]['icon'] = $icon;
                        $list[$j]['title'] = $module->getTranslate($appHook['name']);
                        $list[$j]['htlink'] = $appHook['link'];
                        $list[$j]['desc'] = $desc;
                        $list[$j]['ref'] = $moduleName;
                        $list[$j]['class'] = 'menuListContentActionHooks';
                        $j++;
                    }
                }
            }
        }

        // Appelle les actions d'autres modules pour le module concerné par le mode d'affichage.
        foreach ($modules as $module) {
            if ($module::MODULE_COMMAND_NAME == $this->_currentDisplayMode)
                continue;
            // Extrait le nom du module.
            $moduleName = $module->getTranslate($module::MODULE_MENU_NAME);

            // Liste les points d'ancrages à afficher.
            $appHookList = $module->getHookList($currentModuleName . 'SelfMenu');
            if (sizeof($appHookList) != 0) {
                foreach ($appHookList as $appHook) {
                    if ($appHook['name'] != '') {
                        $icon = $appHook['icon'];
                        if ($icon == '')
                            $icon = $module::MODULE_LOGO;
                        if ($icon == '')
                            $icon = self::DEFAULT_ICON_IMLOG;
                        $desc = $module->getTranslate($appHook['desc']);
                        if ($desc == '')
                            $desc = '&nbsp;';

                        $list[$j]['icon'] = $icon;
                        $list[$j]['title'] = $module->getTranslate($appHook['name']);
                        $list[$j]['htlink'] = $appHook['link'];
                        $list[$j]['desc'] = $desc;
                        $list[$j]['ref'] = $moduleName;
                        $list[$j]['class'] = 'menuListContentActionHooks';
                        $j++;
                    }
                }
            }
        }

        // Appelle les actions d'autres modules pour le mode d'affichage.
        foreach ($modules as $module) {
            if ($module::MODULE_COMMAND_NAME != $this->_currentDisplayMode) {
                // Extrait le nom du module.
                $moduleName = $module->getTranslate($module::MODULE_MENU_NAME);

                // Liste les points d'ancrages à afficher.
                $appHookList = $module->getHookList('menu');
                if (sizeof($appHookList) != 0) {
                    foreach ($appHookList as $appHook) {
                        if ($appHook['name'] != '') {
                            $icon = $appHook['icon'];
                            if ($icon == '')
                                $icon = $module::MODULE_LOGO;
                            if ($icon == '')
                                $icon = self::DEFAULT_ICON_IMLOG;
                            $desc = $module->getTranslate($appHook['desc']);
                            if ($desc == '')
                                $desc = '&nbsp;';

                            $list[$j]['icon'] = $icon;
                            $list[$j]['title'] = $module->getTranslate($appHook['name']);
                            $list[$j]['htlink'] = $appHook['link'];
                            $list[$j]['desc'] = $desc;
                            $list[$j]['ref'] = $moduleName;
                            $list[$j]['class'] = 'menuListContentActionHooks';
                            $j++;
                        }
                    }
                }
            }
        }

        // Appelle la liste des modules.
        foreach ($modules as $module) {
            // Extrait le nom du module.
            $moduleName = $module->getTranslate($module::MODULE_NAME);

            // Liste les options à afficher.
            $appTitleList = $module::MODULE_APP_TITLE_LIST;
            if (sizeof($appTitleList) != 0) {
                $appIconList = $module::MODULE_APP_ICON_LIST;
                $appDescList = $module::MODULE_APP_DESC_LIST;
                $appViewList = $module::MODULE_APP_VIEW_LIST;
                for ($i = 0; $i < sizeof($appTitleList); $i++) {
                    $icon = $appIconList[$i];
                    if ($icon == '')
                        $icon = $module::MODULE_LOGO;
                    if ($icon == '')
                        $icon = self::DEFAULT_ICON_LSTOBJ;

                    $desc = $module->getTranslate($appDescList[$i]);
                    if ($desc == '')
                        $desc = '&nbsp;';

                    $list[$j]['icon'] = $icon;
                    $list[$j]['title'] = $module->getTranslate($appTitleList[$i]);
                    $list[$j]['htlink'] = '?' . self::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $module::MODULE_COMMAND_NAME
                        . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $appViewList[$i];
                    $list[$j]['desc'] = $desc;
                    $list[$j]['ref'] = $moduleName;
                    $list[$j]['class'] = 'menuListContentActionModules';
                    $j++;
                }
            }
        }

        // Add application 1
        $list[$j]['icon'] = Displays::REFERENCE_DEFAULT_LOGO;
        $list[$j]['title'] = BOOTSTRAP_NAME;
        $list[$j]['htlink'] = '?' . Displays::DEFAULT_BOOTSTRAP_LOGO_LINK;
        $list[$j]['desc'] = $this->_translateInstance->getTranslate('::appSwitch');
        $list[$j]['ref'] = 'nebule';
        $list[$j]['class'] = 'menuListContentActionModules';

        echo $this->getDisplayMenuList($list, 'Medium');
    }

    protected function _displayModuleContent(): void
    {
        if ($this->_currentDisplayView == 'menu') {
            $this->_displayInternalMenuApplications();
        } else {
            $ok = false;
            foreach ($this->_applicationInstance->getModulesListInstances() as $module) {
                if ($module !== null && $module::MODULE_COMMAND_NAME == $this->_currentDisplayMode) {
                    $this->_metrologyInstance->addLog('call module ' . $module::MODULE_COMMAND_NAME . ' display content', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '253cd7cf');
                    try {
                        $module->displayModule();
                        $ok = true;
                    } catch (\Exception $e) {
                        $this->_metrologyInstance->addLog('error display module content ' . $module::MODULE_COMMAND_NAME .' ('  . $e->getCode() . ') : ' . $e->getFile()
                            . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                            . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __FUNCTION__, 'fa838cce');
                    }
                }
            }
            if (! $ok)
                $this->_displayErrorModuleContent();
        }
        $this->_displayInlineContentID();
    }

    private function _displayErrorModuleContent(): void
    {
        $instance = new DisplayInformation($this->_applicationInstance);
        $instance->setMessage('::progress');
        $instance->setType(DisplayItemIconMessage::TYPE_ERROR);
        $instance->setRatio(DisplayItem::RATIO_SHORT);
        $instance->setSize(DisplayItem::SIZE_MEDIUM);
        $instance->display();
    }

    private function _displayMetrology(): void
    {
        /*if ($this->_configurationInstance->getOptionUntyped('sylabeDisplayMetrology')) {
            ?>

            <?php $this->displayDivTextTitle_DEPRECATED(self::DEFAULT_ICON_IMLOG, 'Métrologie', 'Mesures quantitatives et temporelles.') ?>
            <div class="text">
                <p>
                    <?php
                    echo 'Lib nebule : ';
                    echo $this->_translateInstance->getTranslate('%01.0f liens lus,', (string)$this->_metrologyInstance->getLinkRead());
                    echo ' ';
                    echo $this->_translateInstance->getTranslate('%01.0f liens vérifiés,', (string)$this->_metrologyInstance->getLinkVerify());
                    echo ' ';
                    echo $this->_translateInstance->getTranslate('%01.0f objets lus.', (string)$this->_metrologyInstance->getObjectRead());
                    echo ' ';
                    echo $this->_translateInstance->getTranslate('%01.0f objets vérifiés.', (string)$this->_metrologyInstance->getObjectVerify());
                    echo "<br />\n";
                    $this->_metrologyInstance->addTime();
                    $sylabeTimeList = $this->_metrologyInstance->getTimeArray();
                    $sylabe_time_total = 0;
                    foreach ($sylabeTimeList as $time) {
                        $sylabe_time_total = $sylabe_time_total + $time;
                    }
                    echo $this->_translateInstance->getTranslate('Le serveur à pris %01.4fs pour calculer la page.', $sylabe_time_total);
                    echo ' (';
                    foreach ($sylabeTimeList as $time) {
                        echo sprintf(" %1.4fs", $time);
                    }
                    echo " )\n";
                    ?>

                </p>
            </div>
            <?php
        }*/
    }

    // Affiche la fin de page.
    protected function _displayFooter(): void
    {
        ?>

        </body>
        </html>
        <?php
    }



    public function setUrlLinkObjectPrefix(string $htlink): void
    {
        $this->_urlLinkObjectPrefix = $htlink;
    }

    public function setUrlLinkGroupPrefix(string $htlink): void
    {
        $this->_urlLinkGroupPrefix = $htlink;
    }

    public function setUrlLinkConversationPrefix(string $htlink): void
    {
        $this->_urlLinkConversationPrefix = $htlink;
    }

    public function setUrlLinkEntityPrefix(string $htlink): void
    {
        $this->_urlLinkEntityPrefix = $htlink;
    }

    public function setUrlLinkCurrencyPrefix(string $htlink): void
    {
        $this->_urlLinkCurrencyPrefix = $htlink;
    }

    public function setUrlLinkTokenPoolPrefix(string $htlink): void
    {
        $this->_urlLinkTokenPoolPrefix = $htlink;
    }

    public function setUrlLinkTokenPrefix(string $htlink): void
    {
        $this->_urlLinkTokenPrefix = $htlink;
    }

    public function setUrlLinkTransactionPrefix(string $htlink): void
    {
        $this->_urlLinkTransactionPrefix = $htlink;
    }

    public function setUrlLinkWalletPrefix(string $htlink): void
    {
        $this->_urlLinkWalletPrefix = $htlink;
    }










    /* --------------------------------------------------------------------------------
	 *  Affichage des messages.
	 * -------------------------------------------------------------------------------- */
    /**
     * Affiche un message d'information pré-formaté.
     * Use DisplayNotify()
     *
     * @param string $text
     * @param string $arg1
     * @return void
     */
    public function displayMessageInformation_DEPRECATED(string $text, string $arg1 = ''): void
    {
        $instance = new DisplayNotify($this->_applicationInstance);
        $instance->setMessage($text, $arg1);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->display();
    }

    /**
     * Affiche un message de validation pré-formaté.
     * Use DisplayNotify()
     *
     * @param string $text
     * @param string $arg1
     * @return void
     */
    public function displayMessageOk_DEPRECATED(string $text, string $arg1 = ''): void
    {
        $instance = new DisplayNotify($this->_applicationInstance);
        $instance->setMessage($text, $arg1);
        $instance->setType(DisplayItemIconMessage::TYPE_OK);
        $instance->display();
    }

    /**
     * Affiche un message d'avertissement pré-formaté.
     * Use DisplayNotify()
     *
     * @param string $text
     * @param string $arg1
     * @return void
     */
    public function displayMessageWarning_DEPRECATED(string $text, string $arg1 = ''): void
    {
        $instance = new DisplayNotify($this->_applicationInstance);
        $instance->setMessage($text, $arg1);
        $instance->setType(DisplayItemIconMessage::TYPE_WARN);
        $instance->display();
    }

    /**
     * Affiche un message d'erreur pré-formaté.
     * Use DisplayNotify()
     *
     * @param string $text
     * @param string $arg1
     * @return void
     */
    public function displayMessageError_DEPRECATED(string $text, string $arg1 = ''): void
    {
        $instance = new DisplayNotify($this->_applicationInstance);
        $instance->setMessage($text, $arg1);
        $instance->setType(DisplayItemIconMessage::TYPE_ERROR);
        $instance->display();
    }



    /* --------------------------------------------------------------------------------
	 *  Affichage des contenus.
	 * -------------------------------------------------------------------------------- */
    /**
     * Prépare à afficher le contenu d'un objet suivant son type.
     *
     * @param Node   $object
     * @param string $size [full|half|small]
     * @param bool   $permitWarnProtected
     * @return string
     */
    public function convertObjectContentSized(Node $object, string $size = 'half', bool $permitWarnProtected = true): string
    {
        $result = '';
        $unlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();
        if ($size != 'full'
            && $size != 'half'
            && $size != 'small'
        )
            $size = 'half';

        // Détermine si c'est un groupe.
        $isGroup = $object->getIsGroup('all');

        // Détermine si c'est une conversation.
        $isConversation = $object->getIsConversation('all');

        // Détermine si c'est une entité.
        $type = $object->getType('all');
        $objHead = $object->readOneLineAsText(Entity::ENTITY_MAX_SIZE);
        $isEntity = ($type == References::REFERENCE_OBJECT_ENTITY
            && strpos($objHead, References::REFERENCE_ENTITY_HEADER) !== false
        );

        // Affiche l'objet suivant son type.
        if ($isEntity) {
            if ($object->checkPresent()) {
                if ($size = 'half' || $size = 'full') {
                    if (!is_a($object, 'Nebule\Library\Entity')) {
                        $object = $this->_cacheInstance->newEntity($object->getID());
                    }

                    $result = '<div class="text">' . "\n\t<p>"
                        . sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                            $this->convertInlineObjectColorIcon($object) . ' ' . '<b>' . $object->getID() . "</b>\n")
                        . "\t</p>\n";

                    if ($size = 'full') {
                        // Liste des localisations.
                        $localisations = $object->getLocalisationsID();
                        if (sizeof($localisations) > 0) {
                            $result .= '<table border="0"><tr><td><td>' . $this->_translateInstance->getTranslate('::EntityLocalisation') . " :</td><td>\n";
                            foreach ($localisations as $localisation) {
                                $locObject = $this->_cacheInstance->newNode($localisation);
                                $result .= "\t " . $this->convertInlineObjectColorIcon($localisation) . ' '
                                    . $this->convertHypertextLink(
                                        $locObject->readOneLineAsText(),
                                        $locObject->readOneLineAsText()
                                    ) . "<br />\n";
                            }
                            $result .= "</td></tr></table>\n";
                            unset($localisations, $localisation, $locObject);
                        }
                    }
                    $result .= "</div>\n";
                }
            } else {
                $notify = new DisplayNotify($this->_applicationInstance);
                $notify->setMessage('::::display:content:errorNotAvailable');
                $notify->setType(DisplayItemIconMessage::TYPE_ERROR);
                $result .= $notify->getHTML();
            }
        } elseif ($isGroup) {
            if (!is_a($object, 'Group'))
                $object = $this->_cacheInstance->newGroup($object->getID());
            $isClosed = $object->getMarkClosed();

            $result = '<div class="text">' . "\n\t<p>"
                . sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                    $this->convertInlineObjectColorIcon($object) . ' ' . '<b>' . $object->getID() . "</b>\n");
            if ($isClosed)
                $result .= "<br />\n" . $this->_translateInstance->getTranslate('::GroupeFerme') . ".\n";
            else
                $result .= "<br />\n" . $this->_translateInstance->getTranslate('::GroupeOuvert') . ".\n";
            $result .= "\t</p>\n</div>\n";

            unset($isOpened, $isClosed);
        } elseif ($isConversation) {
            if (!is_a($object, 'Conversation'))
                $object = $this->_cacheInstance->newConversation($object->getID());
            $isClosed = $object->getMarkClosed();

            $result = '<div class="text">' . "\n\t<p>"
                . sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                    $this->convertInlineObjectColorIcon($object) . ' ' . '<b>' . $object->getID() . "</b>\n");
            if ($isClosed)
                $result .= "<br />\n" . $this->_translateInstance->getTranslate('::ConversationFermee') . ".\n";
            else
                $result .= "<br />\n" . $this->_translateInstance->getTranslate('::ConversationOuverte') . ".\n";
            $result .= "\t</p>\n</div>\n";

            unset($isClosed);
        } else
            $result = $this->convertAsObjectContentSized($object, $size, $permitWarnProtected);

        return $result;
    }

    /**
     * Prépare à afficher le contenu d'un objet suivant son type. Version full.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return string
     */
    public function convertObjectContentFull(Node $object, bool $permitWarnProtected = true): string
    {
        return $this->convertObjectContentSized($object, 'full', $permitWarnProtected);
    }

    /**
     * Afficher le contenu d'un objet suivant son type. Version full.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return void
     */
    public function displayObjectContentFull(Node $object, bool $permitWarnProtected = true): void
    {
        echo $this->convertObjectContentSized($object, 'full', $permitWarnProtected);
    }

    /**
     * Prépare à afficher le contenu d'un objet suivant son type. Version half.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return string
     */
    public function convertObjectContentHalf(Node $object, bool $permitWarnProtected = true): string
    {
        return $this->convertObjectContentSized($object, 'half', $permitWarnProtected);
    }

    /**
     * Afficher le contenu d'un objet suivant son type. Version half.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return void
     */
    public function displayObjectContentHalf(Node $object, bool $permitWarnProtected = true): void
    {
        echo $this->convertObjectContentSized($object, 'half', $permitWarnProtected);
    }

    /**
     * Prépare à afficher le contenu d'un objet suivant son type. Version small.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return string
     */
    public function convertObjectContentSmall(Node $object, bool $permitWarnProtected = true): string
    {
        return $this->convertObjectContentSized($object, 'small', $permitWarnProtected);
    }

    /**
     * Afficher le contenu d'un objet suivant son type. Version small.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return void
     */
    public function displayObjectContentSmall(Node $object, bool $permitWarnProtected = true): void
    {
        echo $this->convertObjectContentSized($object, 'small', $permitWarnProtected);
    }


    /**
     * Prépare à afficher le contenu d'un objet comme objet pur.
     * Affiche un objet sans tenir compte de son type nebule (Entity|Group|Conversation).
     * Mais affiche l'objet en fonction de son type mime déclaré.
     *
     * @param Node   $object
     * @param string $size [full|half|small]
     * @param bool   $permitWarnProtected
     * @return string
     */
    public function convertAsObjectContentSized(Node $object, string $size = 'half', bool $permitWarnProtected = true): string
    {
        $result = '';
        $unlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();
        if ($size != 'full'
            && $size != 'half'
            && $size != 'small'
        )
            $size = 'half';

        $nid = $object->getID();

        // Vérifie s'il est protégé
        $protected = $object->getMarkProtected();

        // Extrait les propriétés de l'objet.
        $name = $object->getFullName('all');
        $typemime = $object->getType('all');
        $danger = $object->getMarkDanger();
        $warning = $object->getMarkWarning();
        $ispresent = $object->checkPresent();
        $type = $this->_translateInstance->getTranslate($typemime);

        // Affichage du contenu.
        if ($danger) {

            $notify = new DisplayNotify($this->_applicationInstance);
            $notify->setMessage('::::display:content:errorBan');
            $notify->setType(DisplayItemIconMessage::TYPE_ERROR);
            $result .= $notify->getHTML();
        } elseif ($protected
            && $nid == $object->getProtectedID()
        ) {
            $notify = new DisplayNotify($this->_applicationInstance);
            $notify->setMessage('::::display:content:warningObjectProctected');
            $notify->setType(DisplayItemIconMessage::TYPE_WARN);
            $result .= $notify->getHTML();
            $unprotectedObject = $this->_cacheInstance->newNode($object->getUnprotectedID());
            $unprotectedName = $unprotectedObject->getFullName('all');
            $unprotectedTypemime = $unprotectedObject->getType('all');
            $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($unprotectedObject);
            $result .= '<div class="textAction">' . "\n";
            $result .= ' <div class="oneActionItem" id="selfEntity">' . "\n";
            $result .= '  <div class="oneActionItem-top">' . "\n";
            $result .= '   <div class="oneAction-icon">' . $this->convertObjectColorIcon($unprotectedObject) . "</div>\n";
            $result .= '   <div class="oneAction-title"><p>' . $this->convertHypertextLink($unprotectedName, $htlink) . "</p></div>\n";
            $result .= '   <div class="oneAction-text"><p>' . $this->_translateInstance->getTranslate($unprotectedTypemime) . "</p></div>\n";
            $result .= "  </div>\n";
            $result .= " </div>\n";
            $result .= ' <div class="oneAction-close"></div>' . "\n";
            $result .= "</div>\n";
            unset($unprotectedObject, $unprotectedName, $unprotectedTypemime, $htlink);
        } elseif ($ispresent) {
            if ($warning) {
                $notify = new DisplayNotify($this->_applicationInstance);
                $notify->setMessage('::::display:content:warningTaggedWarning');
                $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                $result .= $notify->getHTML();
            }
            if ($protected
                && $unlocked
                && $permitWarnProtected
            ) {
                $notify = new DisplayNotify($this->_applicationInstance);
                $notify->setMessage('::::display:content:warningObjectProctected');
                $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                $result .= $notify->getHTML();
            }
            $divOpen = "<div class=\"textcontent" . $size . "\">\n\t";
            $divClose = "\n</div>\n";
            switch ($typemime) {
                case References::REFERENCE_OBJECT_PNG :
                case References::REFERENCE_OBJECT_JPEG :
                    $content = $object->getContent(0);
                    if ($content != null)
                        $result = $result . $divOpen . '<img src="?o=' . $nid
                            . '" alt="Image ' . $nid . '">' . $divClose;
                    else {
                        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckObjectHash')) {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:warningTooBig');
                            $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                            $result .= $notify->getHTML();
                        } else {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:errorNotDisplayable');
                            $notify->setType(DisplayItemIconMessage::TYPE_ERROR);
                            $result .= $notify->getHTML();
                        }
                    }
                    break;
                case References::REFERENCE_OBJECT_TEXT :
                    $content = htmlspecialchars($object->getContent(0));
                    if ($content != null)
                        $result = $result . $divOpen . '<p>' . $content . '</p>' . $divClose;
                    else {
                        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckObjectHash')) {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:warningTooBig');
                            $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                            $result .= $notify->getHTML();
                        } else {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:errorNotDisplayable');
                            $notify->setType(DisplayItemIconMessage::TYPE_ERROR);
                            $result .= $notify->getHTML();
                        }
                    }
                    unset($content);
                    break;
                case References::REFERENCE_OBJECT_ENTITY :
                case References::REFERENCE_OBJECT_HTML :
                case References::REFERENCE_OBJECT_CSS :
                case References::REFERENCE_OBJECT_APP_PHP :
                case References::REFERENCE_OBJECT_PHP :
                    $content = htmlspecialchars($object->getContent(0));
                    if ($content != null)
                        $result = $result . $divOpen . '<pre>' . $content . '</pre>' . $divClose;
                    else {
                        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckObjectHash')) {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:warningTooBig');
                            $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                            $result .= $notify->getHTML();
                        } else {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:errorNotDisplayable');
                            $notify->setType(DisplayItemIconMessage::TYPE_ERROR);
                            $result .= $notify->getHTML();
                        }
                    }
                    unset($content);
                    break;
                case References::REFERENCE_OBJECT_MP3 :
                    $content = $object->getContent(0);
                    if ($content != null)
                        $result = $result . $divOpen . '<br /><audio controls><source src="?o=' . $nid . '" type="audio/mp3" />' . $this->_translateInstance->getTranslate(':::warn_NoAudioTagSupport') . '</audio><br />' . $divClose;
                    else {
                        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckObjectHash')) {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:warningTooBig');
                            $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                            $result .= $notify->getHTML();
                        }
                        else {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:errorNotAvailable');
                            $notify->setType(DisplayItemIconMessage::TYPE_ERROR);
                            $result .= $notify->getHTML();
                        }
                    }
                    break;
                case References::REFERENCE_OBJECT_OGG :
                    $content = $object->getContent(0);
                    if ($content != null)
                        $result = $result . $divOpen . '<br /><audio controls><source src="?o=' . $nid . '" type="audio/ogg" />' . $this->_translateInstance->getTranslate(':::warn_NoAudioTagSupport') . '</audio><br />' . $divClose;
                    else {
                        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckObjectHash')) {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:warningTooBig');
                            $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                            $result .= $notify->getHTML();
                        } else {
                            $notify = new DisplayNotify($this->_applicationInstance);
                            $notify->setMessage('::::display:content:errorNotDisplayable');
                            $notify->setType(DisplayItemIconMessage::TYPE_ERROR);
                            $result .= $notify->getHTML();
                        }
                    }
                    break;
                case References::REFERENCE_OBJECT_CRYPT_RSA :
                    $notify = new DisplayNotify($this->_applicationInstance);
                    $notify->setMessage('::::display:content:warningObjectProctected');
                    $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                    $result .= $notify->getHTML();
                    break;
                default :
                    $notify = new DisplayNotify($this->_applicationInstance);
                    $notify->setMessage('::::display:content:errorNotDisplayable');
                    $notify->setType(DisplayItemIconMessage::TYPE_WARN);
                    $result .= $notify->getHTML();
                    break;
            }
        } else {
            $notify = new DisplayNotify($this->_applicationInstance);
            $notify->setMessage('::::display:content:errorNotAvailable');
            $notify->setType(DisplayItemIconMessage::TYPE_ERROR);
            $result .= $notify->getHTML();
        }

        return $result;
    }

    /**
     * Prépare à afficher le contenu d'un objet comme objet pur. Version full.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return string
     */
    public function convertAsObjectContentFull(Node $object, bool $permitWarnProtected = true): string
    {
        return $this->convertAsObjectContentSized($object, 'full', $permitWarnProtected);
    }

    /**
     * Afficher le contenu d'un objet comme objet pur. Version full.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return void
     */
    public function displayAsObjectContentFull(Node $object, bool $permitWarnProtected = true): void
    {
        echo $this->convertAsObjectContentSized($object, 'full', $permitWarnProtected);
    }

    /**
     * Prépare à afficher le contenu d'un objet comme objet pur. Version half.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return string
     */
    public function convertAsObjectContentHalf(Node $object, bool $permitWarnProtected = true): string
    {
        return $this->convertAsObjectContentSized($object, 'half', $permitWarnProtected);
    }

    /**
     * Afficher le contenu d'un objet comme objet pur. Version half.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return void
     */
    public function displayAsObjectContentHalf(Node $object, bool $permitWarnProtected = true): void
    {
        echo $this->convertAsObjectContentSized($object, 'half', $permitWarnProtected);
    }

    /**
     * Prépare à afficher le contenu d'un objet comme objet pur. Version small.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return string
     */
    public function convertAsObjectContentSmall(Node $object, bool $permitWarnProtected = true): string
    {
        return $this->convertAsObjectContentSized($object, 'small', $permitWarnProtected);
    }

    /**
     * Afficher le contenu d'un objet comme objet pur. Version small.
     *
     * @param Node $object
     * @param bool $permitWarnProtected
     * @return void
     */
    public function displayAsObjectContentSmall(Node $object, bool $permitWarnProtected = true): void
    {
        echo $this->convertAsObjectContentSized($object, 'small', $permitWarnProtected);
    }

    /**
     * Prépare à afficher un objet comme image avec éventuellement un texte et un identifiant CSS.
     *
     * @param Node   $oid
     * @param string $alt
     * @param string $class
     * @param string $id
     * @param string $args
     * @return string
     */
    public function convertImage(Node $oid, string $alt = '', string $class = '', string $id = '', string $args = ''): string
    {
        if ($oid->getID() == '0')
            return '';

        $result = '<img src="/' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $oid->getID() . '"';

        if ($alt == '')
            $alt = $oid->getID();
        $alt = $this->_translateInstance->getTranslate($alt);
        $result .= ' alt="' . $alt . '" title="' . $alt . '"';

        if ($class != '')
            $result .= ' class="' . $class . '"';

        if ($id != '')
            $result .= ' id="' . $id . '"';

        if ($args != '')
            $result .= ' ' . $args;

        $result .= ' />';
        return $result;
    }

    /**
     * Prépare à afficher un objet comme image avec éventuellement un texte et un identifiant CSS.
     *
     * @param Node $oid
     * @return string
     */
    public function convertImageURL(Node $oid): string
    {
        if ($oid->getID() == '0')
            return '';

        $obj = $oid->getID();
        return nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $obj;
    }

    /**
     * Affiche un objet comme image avec éventuellement un texte et un identifiant CSS.
     *
     * @param Node   $object
     * @param string $alt
     * @param string $class
     * @param string $id
     * @param string $args
     * @return void
     */
    public function displayImage(Node $object, string $alt = '', string $class = '', string $id = '', string $args = ''): void
    {
        echo $this->convertImage($object, $alt, $class, $id, $args);
    }

    /**
     * Prépare à l'affichage d'un objet comme image avec éventuellement un texte et un identifiant CSS.
     * Une recherche préalable est faite pour trouver la mise à jour la plus récente de l'objet.
     * Si l'objet commence par 'data:' c'est une image encodée en base64.
     * Retourne dans ce cas un affichage d'image.
     *
     * @param Node   $oid
     * @param string $alt
     * @param string $class
     * @param string $id
     * @param string $args
     * @return string
     */
    public function convertUpdateImage(Node $oid, string $alt = '', string $class = '', string $id = '', string $args = ''): string
    {
        $nid = $oid->getID();

        if ($nid == '0')
            return '';

        if ($this->_nebuleInstance->getIsRID($oid))
            $oid = $oid->getReferencedObjectInstance(References::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE, 'authority');

        $uid = $this->_getImageUpdate($oid);

        if ($uid == $nid)
            $newObjectInstance = $oid;
        else
            $newObjectInstance = $this->_cacheInstance->newNode($uid);

        return $this->convertImage($newObjectInstance, $alt, $class, $id, $args);
    }

    /**
     * Affiche un objet comme image avec éventuellement un texte et un identifiant CSS.
     * Une recherche préalable est faite pour trouver la mise à jour la plus récente de l'objet.
     *
     * @param Node   $oid
     * @param string $alt
     * @param string $class
     * @param string $id
     * @param string $args
     * @return void
     */
    public function displayUpdateImage(Node $oid, string $alt = '', string $class = '', string $id = '', string $args = ''): void
    {
        echo $this->convertUpdateImage($oid, $alt, $class, $id, $args);
    }

    /**
     * Prépare à un objet comme image avec éventuellement un texte et un identifiant CSS.
     * L'objet est un objet virtuel qui permet juste d'adresser l'image attendu.
     *
     * @param Node   $oid
     * @param string $alt
     * @param string $class
     * @param string $id
     * @param string $args
     * @return string
     * TODO
     */
    public function convertReferenceImage(Node $oid, string $alt = '', string $class = '', string $id = '', string $args = ''): string
    {
        if ($oid->getID() == '0')
            return '';

        $uid = $this->getImageByReference($oid);

        if ($uid->getID() == $oid->getID())
            $newObjectInstance = $oid;
        else
            $newObjectInstance = $this->_cacheInstance->newNode($uid->getID());

        return $this->convertImage($newObjectInstance, $alt, $class, $id, $args);
    }

    /**
     * Affiche un objet comme image avec éventuellement un texte et un identifiant CSS.
     * L'objet est un objet virtuel qui permet juste d'adresser l'image attendue.
     *
     * @param Node   $oid
     * @param string $alt
     * @param string $class
     * @param string $id
     * @param string $args
     * @return void
     */
    public function displayReferenceImage(Node $oid, string $alt = '', string $class = '', string $id = '', string $args = ''): void
    {
        echo $this->convertReferenceImage($oid, $alt, $class, $id, $args);
    }



    /* --------------------------------------------------------------------------------
	 *  Fonctions internes.
	 * -------------------------------------------------------------------------------- */
    /**
     * Get automatically truncated name of object or entity.
     *  If 0, cut to the default displayNameSize option value.
     *
     * @param string $name
     * @param int    $maxsize
     * @return string
     */
    public function truncateName(string $name, int $maxsize = 0): string
    {
        return $this->_truncateName($name, $maxsize);
    }

    /**
     * Get automatically truncated name of object or entity.
     *  If 0, cut to the default displayNameSize option value.
     *
     * @param string $name
     * @param int    $maxsize
     * @return string
     */
    private function _truncateName(string $name, int $maxsize = 0): string
    {
        if ($maxsize == 0 || $maxsize > $this->_configurationInstance->getOptionUntyped('displayNameSize'))
            $maxsize = $this->_configurationInstance->getOptionUntyped('displayNameSize');
        if ($maxsize < 4)
            $maxsize = 4;
        if (strlen($name) > $maxsize)
            $name = substr($name, 0, ($maxsize - 3)) . '...';
        return $name;
    }

    /**
     * Prépare un lien par défaut pour un objet ou un groupe ou une conversation ou une entité si aucun lien hypertexte n'est donné.
     *
     * @param Node   $object
     * @param string $htlink
     * @return string
     */
    public function prepareDefaultObjectOrGroupOrEntityHtlink(Node $object, string $htlink = ''): string
    {
        return $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
    }

    /**
     * Prépare un lien par défaut pour un objet ou un groupe ou une conversation ou une entité si aucun lien hypertexte n'est donné.
     *
     * @param Node   $object
     * @param string $htlink
     * @return string
     */
    private function _prepareDefaultObjectOrGroupOrEntityHtlink(Node $object, string $htlink = ''): string
    {
        if ($htlink != '')
            return $htlink;
        if (is_a($object, 'Nebule\Library\Entity')) // TODO switch !
            return $this->_urlLinkEntityPrefix . $object->getID();
        elseif (is_a($object, 'Nebule\Library\Conversation'))
            return $this->_urlLinkConversationPrefix . $object->getID();
        elseif (is_a($object, 'Nebule\Library\Group'))
            return $this->_urlLinkGroupPrefix . $object->getID();
        elseif (is_a($object, 'Nebule\Library\Wallet'))
            return $this->_urlLinkWalletPrefix . $object->getID();
        elseif (is_a($object, 'Nebule\Library\Transaction'))
            return $this->_urlLinkTransactionPrefix . $object->getID();
        elseif (is_a($object, 'Nebule\Library\Token'))
            return $this->_urlLinkTokenPrefix . $object->getID();
        elseif (is_a($object, 'Nebule\Library\TokenPool'))
            return $this->_urlLinkTokenPoolPrefix . $object->getID();
        elseif (is_a($object, 'Nebule\Library\Currency'))
            return $this->_urlLinkCurrencyPrefix . $object->getID();
        return $this->_urlLinkObjectPrefix . $object->getID();
    }



    /* --------------------------------------------------------------------------------
	 *  Affichage des liens hypertextes.
	 * -------------------------------------------------------------------------------- */
    /**
     * ???
     * @param string $htlink
     * @return string
     * TODO
     */
    public function convertHypertextShortLink(string $htlink): string
    {
        if ($htlink == '')
            return '';
        return $htlink;
    }

    /**
     * Convertit un texte et un lien web en un lien préformaté HTML.
     *
     * @param string $text
     * @param string $htlink
     * @param string $color
     * @param string $class
     * @param string $id
     * @return string
     */
    public function convertHypertextLink(string $text, string $htlink, string $color = '', string $class = '', string $id = ''): string
    {
        if ($text == '')
            return '';

        if ($htlink == '')
            return $text;

        if ($color != '')
            $color = ' style="background:' . $color . ';"';

        if ($class != '')
            $class = ' class="' . $class . '"';

        if ($id != '')
            $id = ' id="' . $id . '"';

        $text = $this->_translateInstance->getTranslate($text);
        return '<a href="' . $htlink . '"' . $color . $class . $id . '>' . $text . '</a>';
    }

    /**
     * Affiche un texte et un lien web en un lien préformaté HTML.
     *
     * @param string $text
     * @param string $htlink
     * @param string $color
     * @param string $class
     * @param string $id
     * @return void
     */
    public function displayHypertextLink(string $text, string $htlink, string $color = '', string $class = '', string $id = ''): void
    {
        echo $this->convertHypertextLink($text, $htlink, $color, $class, $id);
    }

    /**
     * Convertit une date standard en une date facile à lire.
     *
     * @param string $date
     * @return string
     */
    public function convertDate(string $date): string
    {
        if (substr($date, 10, 1) == 'T')
            $ret = substr($date, 8, 2) . '/' . substr($date, 5, 2) . '/' . substr($date, 0, 4) . ' ' . substr($date, 11, 2) . 'h' . substr($date, 14, 2) . "'<sub>" . substr($date, 17, 2) . "''</sub>";
        elseif (substr($date, 4, 1) == '-')
            $ret = substr($date, 8, 2) . '/' . substr($date, 5, 2) . '/' . substr($date, 0, 4);
        else
            $ret = substr($date, 6, 2) . '/' . substr($date, 4, 2) . '/' . substr($date, 0, 4) . ' ' . substr($date, 8, 2) . 'h' . substr($date, 10, 2) . "'<sub>" . substr($date, 12, 2) . "''</sub>";
        return $ret;
    }

    /**
     * Affiche une date standard en une date facile à lire.
     *
     * @param string $date
     * @return void
     */
    public function displayDate(string $date): void
    {
        echo $this->convertDate($date);
    }



    /* --------------------------------------------------------------------------------
	 *  Affichage des objets.
	 * -------------------------------------------------------------------------------- */
    /**
     * Tableau de cache des mises à jour d'icônes déjà recherchées.
     *
     * @var array
     */
    private array $_cacheIconUpdate = array();

    public function getImageUpdate($object, bool $useBuffer = true): string
    {
        return $this->_getImageUpdate($object, $useBuffer);
    }

    /**
     * Recherche la mise à jour de l'objet d'une image.
     *
     * Fait une mise en cache du résultat.
     *
     * @param string|Node $object
     * @param boolean $useBuffer
     * @return string
     */
    private function _getImageUpdate($object, bool $useBuffer = true): string
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer'))
            $useBuffer = false;

        // Récupère une instance de l'objet.
        if (!is_a($object, 'Nebule\Library\Node'))
            $object = $this->_cacheInstance->newNode($object);

        if ($object->getID() == '0')
            return '';

        // Si présent dans le cache, utilise la valeur stockée.
        if ($useBuffer
            && isset($this->_cacheIconUpdate[$object->getID()])
        )
            return $this->_cacheIconUpdate[$object->getID()];

        $update = $object->getUpdateNID(true, false);

        // Mémorise le résultat.
        if ($useBuffer)
            $this->_cacheIconUpdate[$object->getID()] = $update;

        return $update;
    }

    private array $_cacheIconByReference = array();

    /**
     * Recherche par référence une image.
     * Fait une mise en cache du résultat.
     *
     * @param Node    $rid
     * @param boolean $useBuffer
     * @return Node
     */
    public function getImageByReference(Node $rid, bool $useBuffer = true): Node
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitSessionBuffer'))
            $useBuffer = false;

        if ($rid->getID() == '0')
            return $rid;

        if ($useBuffer && isset($this->_cacheIconByReference[$rid->getID()]))
            return new Node($this->_nebuleInstance, $this->_cacheIconByReference[$rid->getID()]);

        $uid = $rid->getReferencedOrSelfNID(References::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE, 'myself');
        if ($uid == $rid->getID())
            $uid = $rid->getReferencedOrSelfNID(References::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE, 'authority');
        if ($uid == $rid->getID())
            $uid = $rid->getReferencedOrSelfNID(References::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE, 'all'); // FIXME peut-être trop...

        if ($useBuffer)
            $this->_cacheIconByReference[$rid->getID()] = $uid;

        return new Node($this->_nebuleInstance, $uid);
    }

    /**
     * Prépare l'image de l'icône sans lien hypertexte ni encapsulation html img.
     * Cette fonction est dédiée aux icônes de l'interface dont les objets sont par défaut disponible.
     * Mais les mises à jour de ces objets ne le sont pas forcément.
     *
     * @param string $icon
     * @return string
     */
    public function prepareIcon(string $icon): string
    {
        $updateIcon = $this->_getImageUpdate($icon);
        if ($updateIcon == $icon)
            return nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '/' . $icon;
        return '?' . nebule::NEBULE_LOCAL_OBJECTS_FOLDER . '=' . $updateIcon;
    }

    /**
     * Affiche l'image d'une icône sans lien hypertexte et avec encapsulation html img.
     *
     * @param string $icon
     * @param string $title
     * @param string $class
     * @return void
     */
    public function displayIcon(string $icon, string $title = '', string $class = ''): void
    {
        echo $this->convertIcon($icon, $title, $class);
    }

    /**
     * Prépare l'image d'une icône sans lien hypertexte et avec encapsulation html img.
     *
     * @param string $icon
     * @param string $title
     * @param string $class
     * @return string
     */
    public function convertIcon(string $icon, string $title = '', string $class = ''): string
    {
        $image = $this->prepareIcon($icon);
        if ($title != '')
            $title = 'title="' . $title . '" ';
        if ($class != '')
            $class = 'class="' . $class . '" ';
        return '<img ' . $title . 'alt="[]" src="' . $image . '" ' . $class . '/>';
    }

    /**
     * Prépare l'image de l'icône pour un objet sans lien hypertexte.
     * Use DisplayIcon()
     *
     * @param Node   $nid
     * @param string $icon
     * @param string $class
     * @return string
     */
    private function _prepareObjectIcon_DEPRECATED(Node $nid, string $icon, string $class = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('prepare object icon ' . $nid->getID(), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $iconInstance = $this->_nebuleInstance->getCacheInstance()->newNode($icon);
        $instance = new DisplayIcon($this->_applicationInstance);
        $instance->setNID($nid);
        $instance->setIcon($iconInstance);
        $instance->setClassCSS($class);
        return $instance->getHTML();
    }

    public function prepareObjectColor(Node $nid, string $class = '', string $title = ''): string
    {
        return $this->_prepareObjectColor_DEPRECATED($nid, $class, $title);
    }

    /**
     * Prépare l'image du carré de couleur de l'objet ou de l'entité sans lien hypertexte.
     * Use DisplayColor()
     *
     * @param Node   $nid
     * @param string $class
     * @param string $title
     * @return string
     */
    private function _prepareObjectColor_DEPRECATED(Node $nid, string $class = '', string $title = ''): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('prepare object color ' . $nid->getID(), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $instance = new DisplayColor($this->_applicationInstance);
        $instance->setNID($nid);
        $instance->setName($title);
        $instance->setClassCSS($class);
        return $instance->getHTML();
    }

    public function prepareObjectFace(Node $nid, string $class = ''): string
    {
        return $this->_prepareObjectFace($nid, $class);
    }

    /**
     * Prépare l'image de l'objet ou de l'entité sans lien hypertexte.
     *
     * @param Node   $nid
     * @param string $class
     * @return string
     */
    private function _prepareObjectFace(Node $nid, string $class = ''): string
    {
        $color = $nid->getPrimaryColor();
        $title = $nid->getFullName('all');
        if (is_a($nid, 'Nebule\Library\Entity')) {
            $faceID = $nid->getFaceID(64);
            if ($faceID != '0')
                $image = '?o=' . $faceID;
            else
                $image = 'o/' . $this->_getImageUpdate(self::DEFAULT_ICON_USER);
            unset($faceID);
        } elseif (is_a($nid, 'Nebule\Library\Conversation'))
            $image = 'o/' . $this->_getImageUpdate(self::DEFAULT_ICON_CVTOBJ);
        elseif (is_a($nid, 'Nebule\Library\Group'))
            $image = 'o/' . $this->_getImageUpdate(self::DEFAULT_ICON_GRPOBJ);
        else
            $image = 'o/' . $this->_getImageUpdate(self::DEFAULT_ICON_LO);
        if ($class != '')
            $class = 'class="' . $class . '" ';
        return '<img title="' . $title . '" style="background:#' . $color . ';" alt="[]" src="' . $image . '" ' . $class . '/>';
    }



    /**
     * Retourne la représentation html de l'objet en fonction des paramètres passés.
     * Les paramètres d'activation de contenus :
     * - enableDisplayColor : Affiche le carré de couleur.
     *     Par défaut true : affiche le carré de couleur.
     *     enableDisplayIconApp doit être à false.
     *     Boolean
     * - enableDisplayIcon : Affiche le carré avec l'image attaché à l'objet ou l'icône de son type sur la couleur de l'objet en fond.
     *     Par défaut true : affiche le carré de l'image/icône.
     *     enableDisplayIconApp doit être à false.
     *     Boolean
     * - enableDisplayIconApp : Affiche le carré de couleur avec le nom long et court d'une application.
     *     Par défaut true : affiche le carré de couleur avec le nom.
     *     Boolean
     * - enableDisplayRefs : Affiche le(s) référence(s) de l'objet (signataire du lien).
     *     enableDisplayName doit être à true.
     *     Par défaut false : n'affiche pas la référence.
     *     Boolean
     * - enableDisplayName : Affiche le nom de l'objet.
     *     Par défaut true : affiche le nom.
     *     Boolean
     * - enableDisplayID : Affiche l'ID de l'objet.
     *     Par défaut false : n'affiche pas l'ID.
     *     Boolean
     * - enableDisplayFlags : Affiche les icônes d'état de l'objet (protection...).
     *     enableDisplayName doit être à true.
     *     Par défaut false : n'affiche pas les icônes d'état.
     *     Boolean
     * - enableDisplayFlagEmotions : Affiche les icônes des émotions de l'objet sans les compteurs.
     *     enableDisplayFlags et l'option displayEmotions doivent être à true.
     *     Par défaut false : n'affiche pas les icônes.
     *     Boolean
     * - enableDisplayFlagProtection : Affiche l'icône de protection de l'objet.
     *     enableDisplayFlags doit être à true.
     *     L'option permitProtectedObject doit être à true.
     *     Par défaut false : n'affiche pas l'icône.
     *     Boolean
     * - enableDisplayFlagObfuscate : Affiche l'icône de dissimulation de l'objet.
     *     enableDisplayFlags doit être à true.
     *     L'option permitObfuscatedLink doit être à true.
     *     Par défaut false : n'affiche pas l'icône.
     *     Boolean
     * - enableDisplayFlagUnlocked : Affiche l'icône de déverrouillage de l'entité.
     *     enableDisplayFlags doit être à true.
     *     Par défaut false : n'affiche pas l'icône.
     *     Boolean
     * - enableDisplayFlagActivated : Affiche l'icône d'activation de l'objet.
     *     enableDisplayFlags doit être à true.
     *     Par défaut false : n'affiche pas l'icône.
     *     Boolean
     * - enableDisplayFlagState : Affiche l'icône d'état de l'objet.
     *     enableDisplayFlags doit être à true.
     *     Par défaut false : n'affiche pas l'icône.
     *     Boolean
     * - enableDisplayStatus : Affiche le status de l'objet (indicatif).
     *     Par défaut false : n'affiche pas le status.
     *     Boolean
     * - enableDisplayContent : Affiche le contenu de l'objet si possible.
     *     Par défaut false : n'affiche pas le contenu.
     *     Boolean
     * - enableDisplayLink2Object : Affiche le lien HTML vers l'objet :
     *     Sur le nom de l'objet.
     *     Sur le carré de couleur et sur l'image/icône de l'objet, ou si le menu des actions est activé le menu remplace le lien HTML.
     *     Par défaut true : affiche le lien ou le menu.
     *     Boolean
     * - enableDisplayObjectActions : Affiche le menu des actions liées à l'objet.
     *     Sinon le lien de l'objet est utilisé à la place.
     *     enableDisplayLink2Object doit être à true.
     *     Par défaut true : affiche le menu.
     *     Boolean
     * - enableDisplayLink2Refs : Affiche le lien HTML vers le(s) référence(s) de l'objet.
     *     enableDisplayRefs doit être à true.
     *     Par défaut true : affiche le lien.
     *     Boolean
     * - enableDisplaySelfHook : Affiche les actions principales de l'objet utilisé.
     *     enableDisplayObjectActions doit être à true.
     *     Par défaut true : affiche les actions.
     *     Boolean
     * - enableDisplayTypeHook : Affiche les actions secondaires de l'objet par rapport à son type.
     *     enableDisplayObjectActions doit être à true.
     *     Par défaut true si enableDisplayJS : affiche les actions.
     *     Par défaut false si pas enableDisplayJS : n'affiche pas les actions.
     *     Boolean
     * - enableDisplayJS : Utilise le Java Script pour le menu des actions.
     *     Si false, le menu n'est pas caché et son contenu s'affiche sous la barre de titre de l'objet.
     *     Par défaut true : utilise le Java Script.
     *     Boolean
     * Les paramètres de définition de contenus :
     * - social : Détermine le niveau social de tri des liens.
     *     Par défaut vide : utilise le niveau social par défaut.
     *     String
     * - objectType : Détermine le type d'objet pour le traitement.
     *     Par défaut null : le type est extrait en fonction du niveau social.
     *     String
     * - objectName : Détermine le nom de l'objet ou un texte de remplacement.
     *     enableDisplayName doit être à true.
     *     Par défaut null : le nom complet est extrait en fonction du niveau social.
     *     Si enableDisplayIconApp à true, le nom simple est extrait en fonction du niveau social.
     *     String
     * - objectAppShortName : Détermine le nom de l'objet ou un texte de remplacement.
     *     enableDisplayIconApp doit être à true.
     *     Par défaut null : le nom court (prénom) est extrait en fonction du niveau social.
     *     String
     * - objectIcon : Détermine l'image de l'objet.
     *     enableDisplayIcon doit être à true.
     *     Le fond est de la couleur de l'objet.
     *     Par défaut null : l'image est une icône représentant le type d'objet.
     *     String
     * - objectRefs : Détermine la liste des références de l'objet affiché, ou autres entités.
     *     Si c'est un text, affiche juste le texte après un filtre.
     *     Par défaut vide.
     *     Array of string|Object ou string
     * - link2Object : Détermine le lien HTML vers l'objet.
     *     Par défaut vide : le lien est préparé vers l'objet en fonction de son type.
     *     String
     * - flagProtection : Détermine l'icône de protection de l'objet.
     *     enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
     *     Par défaut false : icône éteinte.
     *     Boolean
     * - flagProtectionIcon : Détermine l'icône de protection de l'objet.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
     *     Par défaut vide : icône de lien de chiffrement LK.
     *     String
     * - flagProtectionText : Détermine l'icône de protection de l'objet.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
     *     Par défaut vide : Texte standard traduit.
     *     String
     * - flagProtectionLink : Détermine le lien HTML de l'icône de protection de l'objet.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
     *     Par défaut vide.
     *     String
     * - flagObfuscate : Détermine l'icône de dissimulation de l'objet.
     *     enableDisplayFlags et enableDisplayFlagObfuscate doivent être à true.
     *     Par défaut false : icône éteinte.
     *     Boolean
     * - flagObfuscateIcon : Détermine l'icône de dissimulation de l'objet.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagObfuscate doivent être à true.
     *     Par défaut vide : icône de lien de dissimulation LC.
     *     String
     * - flagObfuscateText : Détermine l'icône de dissimulation de l'objet.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagObfuscate doivent être à true.
     *     Par défaut vide : Texte standard traduit.
     *     String
     * - flagObfuscateLink : Détermine le lien HTML de l'icône de dissimulation de l'objet.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
     *     Par défaut vide.
     *     String
     * - flagUnlocked : Détermine l'icône de déverrouillage de l'entité.
     *     enableDisplayFlags et enableDisplayFlagUnlocked doivent être à true.
     *     Par défaut dépend de l'état de l'entité.
     *     Si pas une entité, par défaut false : icône éteinte.
     *     Boolean
     * - flagUnlockedIcon : Détermine l'icône de déverrouillage de l'entité.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagUnlocked doivent être à true.
     *     Par défaut vide : icône de lien de chiffrement LK.
     *     String
     * - flagUnlockedText : Détermine l'icône de déverrouillage de l'entité.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagUnlocked doivent être à true.
     *     Par défaut vide : Texte standard traduit.
     *     String
     * - flagUnlockedLink : Détermine le lien HTML de l'icône de déverrouillage de l'entité.
     *     Permet de détourner le bouton de son usage primaire.
     *     enableDisplayFlags et enableDisplayFlagUnlocked doivent être à true.
     *     Par défaut vide.
     *     String
     * - flagActivated : Détermine l'icône d'activation de l'objet.
     *     enableDisplayFlags et enableDisplayFlagActivateded doivent être à true.
     *     Par défaut false : icône rouge en croix.
     *     Si à true, icône verte validée.
     *     Boolean
     * - flagActivatedDesc : Détermine le texte de description de l'activation de l'objet.
     *     enableDisplayFlags et enableDisplayFlagActivated doivent être à true.
     *     Par défaut vide : calcul la description de l'état de l'objet.
     *     Le texte de ces état est traduit.
     *     Par défaut est calculé par rapport à flagActivated :
     *       - false : ':::display:content:NotActived'
     *       - true  : ':::display:content:Actived'
     *     String
     * - flagState : Détermine l'icône de l'état de l'objet.
     *     enableDisplayFlags et enableDisplayFlagState doivent être à true.
     *     Par défaut vide : calcul l'état de l'objet.
     *     Les états possibles sont :
     *       - e : l'objet est taggé 'banni' ;
     *       - w : l'objet est taggé 'warning' ;
     *       - n : l'objet n'est pas présent ;
     *       - o : OK tout va bien.
     *     String
     * - flagStateDesc : Détermine le texte de description de l'état de l'objet.
     *     enableDisplayFlags et enableDisplayFlagState doivent être à true.
     *     Par défaut vide : calcul la description de l'état de l'objet.
     *     Le texte de ces état est traduit.
     *     Par défaut est calculé par rapport à flagState :
     *       - e : '::::display:content:errorBan'
     *       - w : '::::display:content:warningTaggedWarning'
     *       - n : '::::display:content:errorNotAvailable'
     *       - o : '::::display:content:OK'
     *     String
     * - flagMessage : Détermine un message à afficher au niveau des flags dépliés.
     *     enableDisplayFlags doit être à true.
     *     N'apparait pas comme icône simple.
     *     Par défaut vide : pas de message.
     *     String
     * - flagTargetObject : Détermine un objet 'cible' (ou pas) à afficher au niveau des flags dépliés.
     *     enableDisplayFlags doit être à true.
     *     N'apparait pas comme icône simple. L'objet est affiché sous forme tiny.
     *     Par défaut vide : pas d'objet.
     *     String (hex)
     * - status : Détermine le status de l'objet.
     *     Par défaut vide : pas de status.
     *     String
     * - displaySize : Détermine la taille de l'affichage de l'élément complet.
     *     Tailles disponibles :
     *     - tiny : très petite taille correspondant à un carré de base de 16 pixels de large.
     *         Certains éléments ne sont pas affichés.
     *     - small : petite taille correspondant à un carré de base de 32 pixels de large.
     *     - medium : taille moyenne correspondant à un carré de base de 64 pixels de large par défaut.
     *     - large : grande taille correspondant à un carré de base de 128 pixels de large par défaut.
     *     - full : très grande taille correspondant à un carré de base de 256 pixels de large par défaut.
     *     Par défaut medium : taille moyenne.
     *     String
     * - displayRatio : Détermine la forme de l'affichage par son ratio dans la mesure du possible si pas d'affichage du contenu de l'objet.
     *     Ratios disponibles :
     *     - square : forme carrée de 2x2 displaySize.
     *     - short : forme plate courte de 6x1 displaySize.
     *     - long : forme plate longue de toute largeure disponible.
     *     Par défaut short : forme plate courte.
     *     String
     * - selfHookList : Détermine la liste des point d'encrage à utiliser pour les actions sur l'objet utilisé.
     *     Par défaut vide : est préparé en fonction de selfHookName.
     *     Array
     * - selfHookName : Détermine le nom du point d'encrage à utiliser pour les actions sur l'objet utilisé.
     *     Par défaut vide : est préparé en fonction du type d'objet :
     *     - objet : selfMenuObject
     *     - entité : selfMenuEntity
     *     - groupe : selfMenuGroup
     *     - conversation : selfMenuConversation
     *     String
     * - typeHookName : Détermine le nom du point d'encrage à utiliser pour les actions sur l'objet par rapport à son type.
     *     Par défaut vide : est préparé en fonction du type d'objet :
     *     - objet : typeMenuObject
     *     - entité : typeMenuEntity
     *     - groupe : typeMenuGroup
     *     - conversation : typeMenuConversation
     *     String
     * Exemple de table de paramètres avec les valeurs par défaut :
     * $param = array(
     * 'enableDisplayColor' => true,
     * 'enableDisplayIcon' => true,
     * 'enableDisplayIconApp' => false,
     * 'enableDisplayRefs' => false,
     * 'enableDisplayName' => true,
     * 'enableDisplayID' => false,
     * 'enableDisplayFlags' => false,
     * 'enableDisplayFlagEmotions' => true,
     * 'enableDisplayFlagProtection' => false,
     * 'enableDisplayFlagObfuscate' => false,
     * 'enableDisplayFlagUnlocked' => false,
     * 'enableDisplayFlagActivated' => false,
     * 'enableDisplayFlagState' => false,
     * 'enableDisplayStatus' => false,
     * 'enableDisplayContent' => false,
     * 'enableDisplayLink2Object' => true,
     * 'enableDisplayObjectActions' => true,
     * 'enableDisplayLink2Refs' => true,
     * 'enableDisplaySelfHook' => true,
     * 'enableDisplayTypeHook' => true,
     * 'enableDisplayJS' => true,
     * 'social' => '',
     * 'objectType' => null,
     * 'objectName' => null,
     * 'objectAppShortName' => null,
     * 'objectIcon' => null,
     * 'objectRefs' => array(),
     * 'link2Object' => '',
     * 'flagProtection' => false,
     * 'flagProtectionIcon' => '',
     * 'flagProtectionText' => '',
     * 'flagProtectionLink' => '',
     * 'flagObfuscate' => false,
     * 'flagObfuscateIcon' => '',
     * 'flagObfuscateText' => '',
     * 'flagObfuscateLink' => '',
     * 'flagUnlocked' => false,
     * 'flagUnlockedIcon' => '',
     * 'flagUnlockedText' => '',
     * 'flagUnlockedLink' => '',
     * 'flagActivated' => false,
     * 'flagActivatedDesc' => '',
     * 'flagState' => '',
     * 'flagStateDesc' => '',
     * 'flagMessage' => '',
     * 'flagTargetObject' => '',
     * 'status' => '',
     * 'displaySize' => 'medium',
     * 'displayRatio' => 'short',
     * 'selfHookList' => array(),
     * 'selfHookName' => '',
     * 'typeHookName' => '',
     * );
     *
     * Use DisplayObject()
     *
     * @param Node|null $nid
     * @param array     $param
     * @return string
     */
    public function getDisplayObject_DEPRECATED(?Node $nid, array $param): string
    {
        $instance = new DisplayObject($this->_applicationInstance);
        $instance->setNID($nid);
        if (isset($param['enableDisplayColor']))
            $instance->setEnableColor($param['enableDisplayColor']);
        if (isset($param['enableDisplayIconApp']))
            $instance->setEnableIconApp($param['enableDisplayIconApp']);
        if (isset($param['enableDisplayRefs']))
            $instance->setEnableRefs($param['enableDisplayRefs']);
        if (isset($param['enableDisplayName']))
            $instance->setEnableName($param['enableDisplayName']);
        if (isset($param['enableDisplayID']))
            $instance->setEnableNID($param['enableDisplayID']);
        if (isset($param['enableDisplayFlags']))
            $instance->setEnableFlags($param['enableDisplayFlags']);
        if (isset($param['enableDisplayFlagEmotions']))
            $instance->setEnableFlagEmotions($param['enableDisplayFlagEmotions']);
        if (isset($param['enableDisplayFlagProtection']))
            $instance->setEnableFlagProtection($param['enableDisplayFlagProtection']);
        if (isset($param['enableDisplayFlagObfuscate']))
            $instance->setEnableFlagObfuscate($param['enableDisplayFlagObfuscate']);
        if (isset($param['enableDisplayFlagUnlocked']))
            $instance->setEnableFlagUnlocked($param['enableDisplayFlagUnlocked']);
        if (isset($param['enableDisplayFlagActivated']))
            $instance->setEnableFlagActivated($param['enableDisplayFlagActivated']);
        if (isset($param['enableDisplayFlagState']))
            $instance->setEnableFlagState($param['enableDisplayFlagState']);
        if (isset($param['enableDisplayStatus']))
            $instance->setEnableStatus($param['enableDisplayStatus']);
        if (isset($param['enableDisplayContent']))
            $instance->setEnableContent($param['enableDisplayContent']);
        if (isset($param['enableDisplayLink2Object']))
            $instance->setEnableLink($param['enableDisplayLink2Object']);
        if (isset($param['enableDisplayObjectActions']))
            $instance->setEnableActions($param['enableDisplayObjectActions']);
        if (isset($param['enableDisplayLink2Refs']))
            $instance->setEnableLink2Refs($param['enableDisplayLink2Refs']);
        if (isset($param['enableDisplaySelfHook']))
            $instance->setEnableSelfHook($param['enableDisplaySelfHook']);
        if (isset($param['enableDisplayTypeHook']))
            $instance->setEnableTypeHook($param['enableDisplayTypeHook']);
        if (isset($param['enableDisplayJS']))
            $instance->setEnableJS($param['enableDisplayJS']);
        if (isset($param['social']))
            $instance->setSocial($param['social']);
        if (isset($param['objectType']))
            $instance->setType($param['objectType']);
        if (isset($param['objectName']))
            $instance->setName($param['objectName']);
        if (isset($param['objectAppShortName']))
            $instance->setAppShortName($param['objectAppShortName']);
        if (isset($param['icon']))
            $instance->setIcon($param['icon']);
        if (isset($param['enableDisplayIcon']))
            $instance->setEnableIcon($param['enableDisplayIcon']);
        else
            $instance->setEnableIcon(false);
        if (isset($param['objectRefs']))
            $instance->setRefs($param['objectRefs']);
        if (isset($param['link2Object']))
            $instance->setLink($param['link2Object']);
        if (isset($param['flagProtection']))
            $instance->setFlagProtection($param['flagProtection']);
        if (isset($param['flagProtectionIcon']))
            $instance->setFlagProtectionIcon($param['flagProtectionIcon']);
        if (isset($param['flagProtectionText']))
            $instance->setFlagProtectionText($param['flagProtectionText']);
        if (isset($param['flagProtectionLink']))
            $instance->setFlagProtectionLink($param['flagProtectionLink']);
        if (isset($param['flagObfuscate']))
            $instance->setFlagObfuscate($param['flagObfuscate']);
        if (isset($param['flagObfuscateIcon']))
            $instance->setFlagObfuscateIcon($param['flagObfuscateIcon']);
        if (isset($param['flagObfuscateText']))
            $instance->setFlagObfuscateText($param['flagObfuscateText']);
        if (isset($param['flagObfuscateLink']))
            $instance->setFlagObfuscateLink($param['flagObfuscateLink']);
        if (isset($param['flagUnlocked']))
            $instance->setFlagUnlocked($param['flagUnlocked']);
        if (isset($param['flagUnlockedIcon']))
            $instance->setFlagUnlockedIcon($param['flagUnlockedIcon']);
        if (isset($param['flagUnlockedText']))
            $instance->setFlagUnlockedText($param['flagUnlockedText']);
        if (isset($param['flagUnlockedLink']))
            $instance->setFlagUnlockedLink($param['flagUnlockedLink']);
        if (isset($param['flagActivated']))
            $instance->setActivated($param['flagActivated']);
        if (isset($param['flagActivatedDesc']))
            $instance->setActivatedText($param['flagActivatedDesc']);
        if (isset($param['flagState']))
            $instance->setFlagState($param['flagState']);
        if (isset($param['flagStateDesc']))
            $instance->setFlagStateText($param['flagStateDesc']);
        if (isset($param['flagMessage']))
            $instance->setFlagMessage($param['flagMessage']);
        if (isset($param['flagTargetObject']))
            $instance->setFlagTargetObject($param['flagTargetObject']);
        if (isset($param['status']))
            $instance->setStatus($param['status']);
        if (isset($param['displaySize']))
            $instance->setSize($param['displaySize']);
        if (isset($param['displayRatio']))
            $instance->setRatio($param['displayRatio']);
        if (isset($param['selfHookList']))
            $instance->setSelfHookList($param['selfHookList']);
        if (isset($param['selfHookName']))
            $instance->setSelfHookName($param['selfHookName']);
        if (isset($param['typeHookName']))
            $instance->setTypeHookName($param['typeHookName']);
        return $instance->getHTML();
    }

    /**
     * Pour les fonctions getDisplayObject() et getDisplayMessage().
     * Prépare la liste des références (signataires).
     *
     * Si l'entrée est un texte, retourne le texte (à afficher).
     *
     * @param array $list
     * @return string
     */
    private function _getDisplayObjectRefs(array $list): string
    {
        $result = '';

        if (sizeof($list) == 0)
            return '';

        $size = sizeof($list);
        $count = 0;

        foreach ($list as $object) {
            $object = $this->getTypedInstanceFromNID($object);
            $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object);
            $color = $this->_prepareObjectColor_DEPRECATED($object);
            $icon = '';
            if ($size < 11)
                $icon = $this->_prepareObjectFace($object);
            $name = '';
            if ($size < 3)
                $name = $this->_truncateName($object->getFullName('all'), 0);
            $result .= $this->convertHypertextLink($color . $icon . $name, $htlink);
            if ($size < 11)
                $result .= ' ';

            $count++;
            if ($count > 30) {
                $result .= '+';
                break;
            }
        }

        return $result;
    }

    /**
     * Pour la fonction getDisplayObject().
     * Prépare les icônes des indicateurs (flags).
     *
     * @param boolean $on
     * @param string  $image
     * @param string  $descOff
     * @param string  $descOn
     * @return string
     */
    private function _getDisplayObjectFlag(bool $on, string $image, string $descOff, string $descOn): string
    {
        $result = '';

        $image = $this->prepareIcon($image);
        if ($on)
            $desc = $this->_translateInstance->getTranslate($descOn);
        else
            $desc = $this->_translateInstance->getTranslate($descOff);
        $result .= '<img title="' . $desc . '" ';
        if ($on)
            $result .= 'class="objectFlagOn" ';
        $result .= 'alt="[C]" src="' . $image . '" />';

        return $result;
    }

    /**
     * Pour les fonctions getDisplayObject() et getDisplayMessage().
     * Prépare les icônes des émotions avec ou sans les compteurs ($counts).
     *
     * @param Node    $object
     * @param boolean $counts
     * @return string
     */
    private function _getDisplayObjectFlagEmotions(Node $object, bool $counts = false): string
    {
        // Vérifie si les émotions doivent être affichées.
        if (!$this->_configurationInstance->getOptionUntyped('displayEmotions'))
            return '';
        $result = '';

        $listEmotions = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET,
        );
        $listEmotions0 = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE => Displays::REFERENCE_ICON_EMOTION_JOIE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE => Displays::REFERENCE_ICON_EMOTION_CONFIANCE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR => Displays::REFERENCE_ICON_EMOTION_PEUR0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE => Displays::REFERENCE_ICON_EMOTION_SURPRISE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE => Displays::REFERENCE_ICON_EMOTION_TRISTESSE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT => Displays::REFERENCE_ICON_EMOTION_DEGOUT0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE => Displays::REFERENCE_ICON_EMOTION_COLERE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET => Displays::REFERENCE_ICON_EMOTION_INTERET0,
        );
        $listEmotions1 = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE => Displays::REFERENCE_ICON_EMOTION_JOIE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE => Displays::REFERENCE_ICON_EMOTION_CONFIANCE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR => Displays::REFERENCE_ICON_EMOTION_PEUR1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE => Displays::REFERENCE_ICON_EMOTION_SURPRISE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE => Displays::REFERENCE_ICON_EMOTION_TRISTESSE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT => Displays::REFERENCE_ICON_EMOTION_DEGOUT1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE => Displays::REFERENCE_ICON_EMOTION_COLERE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET => Displays::REFERENCE_ICON_EMOTION_INTERET1,
        );

        foreach ($listEmotions as $emotion) {
            // Génère la base du lien html pour revenir au bon endroit en toute situation.
            $httpLink = '?' . Displays::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getDisplayInstance()->getCurrentDisplayMode()
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getDisplayInstance()->getCurrentDisplayView()
                . '&' . References::COMMAND_SELECT_OBJECT . '=' . $object->getID()
                . '&' . References::COMMAND_SELECT_ENTITY . '=' . $this->_applicationInstance->getCurrentEntityID()
                . '&' . References::COMMAND_SELECT_GROUP . '=' . $this->_nebuleInstance->getCurrentGroupID()
                . '&' . References::COMMAND_SELECT_CONVERSATION . '=' . $this->_nebuleInstance->getCurrentConversationID();

            // Préparation du lien.
            $source = $object->getID();
            $target = $this->_nebuleInstance->getCryptoInstance()->hash($emotion);
            $meta = $this->_entitiesInstance->getCurrentEntityID();

            // Détermine si l'émotion a été marqué par l'entité en cours.
            if ($object->getMarkEmotion($emotion, 'myself')) {
                $action = 'x';
                $rid = $this->_cacheInstance->newNode($listEmotions1[$emotion]);
            } else {
                $action = 'f';
                $rid = $this->_cacheInstance->newNode($listEmotions0[$emotion]);
            }
            $link = $action . '_' . $source . '_' . $target . '_' . $meta;
            $httpLink .= '&' . Actions::DEFAULT_COMMAND_ACTION_SIGN_LINK1 . '=' . $link . $this->_nebuleInstance->getTicketingInstance()->getActionTicketValue();
            $icon = $this->convertReferenceImage($rid, $emotion, 'iconInlineDisplay');

            // Si connecté, l'icône est active.
            if ($this->_unlocked
                && $this->_configurationInstance->getOptionAsBoolean('permitWrite')
                && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            )
                $result .= $this->convertHypertextLink($icon, $httpLink);
            else
                $result .= $icon;

            // Détermine le nombre d'entités qui ont marqué cette émotion.
            if ($counts) {
                $count = $object->getMarkEmotionSize($emotion, 'all');
                if ($count > 0)
                    $result .= $count . ' ';
            }
        }

        return $result;
    }

    /**
     * Retourne la représentation html du message d'une conversation en fonction des paramètres passés.
     * Les paramètres d'activation de contenus :
     * - enableDisplayColor : Affiche le carré de couleur.
     *     Par défaut true : affiche le carré de couleur.
     *     Boolean
     * - enableDisplayIcon : Affiche le carré avec l'image du type message sur la couleur de l'objet en fond.
     *     Par défaut true : affiche le carré de l'image/icône.
     *     Boolean
     * Les paramètres de définition de contenus :
     * - social : Détermine le niveau social de tri des liens.
     *     Par défaut vide : utilise le niveau social par défaut.
     *     String
     *
     * @param LinkRegister $link
     * @param array $param
     * @return string
     */
    public function getDisplayMessage(LinkRegister $link, array $param): string
    {
        $result = '';

        // Prépare l'objet.
        $messageInstance = $this->getTypedInstanceFromNID($link->getParsed()['bl/rl/nid2']);
        $signerInstance = $this->getTypedInstanceFromNID($link->getSignersEID()[0]); // FIXME [0] correction sauvage !

        // Prépare les paramètres d'activation de contenus.
        if (!isset($param['enableDisplayColor'])
            || $param['enableDisplayColor'] !== false
        )
            $param['enableDisplayColor'] = true; // Par défaut à true.

        if (!isset($param['enableDisplayIcon'])
            || $param['enableDisplayIcon'] !== false
        )
            $param['enableDisplayIcon'] = true; // Par défaut à true.

        if (!isset($param['enableDisplayRefs'])
            || $param['enableDisplayRefs'] !== false
        )
            $param['enableDisplayRefs'] = true; // Par défaut à true.

        if (!isset($param['objectRefs'])
            || sizeof($param['objectRefs']) == 0
        )
            $param['objectRefs'] = array($signerInstance);

        if (!isset($param['enableDisplayFlagProtection'])
            || $param['enableDisplayFlagProtection'] !== true
            || !$this->_configurationInstance->getOptionAsBoolean('permitProtectedObject')
        )
            $param['enableDisplayFlagProtection'] = false; // Par défaut à false.

        if (!isset($param['enableDisplayFlagObfuscate'])
            || $param['enableDisplayFlagObfuscate'] !== true
            || !$this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink')
        )
            $param['enableDisplayFlagObfuscate'] = false; // Par défaut à false.

        if (!isset($param['enableDisplayFlagState'])
            || $param['enableDisplayFlagState'] !== false
        )
            $param['enableDisplayFlagState'] = true; // Par défaut à true.


        if ($param['enableDisplayFlagProtection']) {
            if (!isset($param['flagProtection'])
                || !is_bool($param['flagProtection'])
            )
                $param['flagProtection'] = $messageInstance->getMarkProtected();

            if (!isset($param['flagProtectionIcon'])
                || $param['flagProtectionIcon'] == ''
                || !Node::checkNID($param['flagProtectionIcon'])
                || !$this->_ioInstance->checkLinkPresent($param['flagProtectionIcon'])
            )
                $param['flagProtectionIcon'] = self::DEFAULT_ICON_LK;
            if (isset($param['flagProtectionText']))
                $param['flagProtectionText'] = trim((string)filter_var($param['flagProtectionText'], FILTER_SANITIZE_STRING));
            if (!isset($param['flagProtectionText'])
                || trim($param['flagProtectionText']) == ''
            ) {
                if ($param['flagProtection'])
                    $param['flagProtectionText'] = '::::display:object:flag:protected';
                else
                    $param['flagProtectionText'] = '::::display:object:flag:unprotected';
            }
            if (isset($param['flagProtectionLink']))
                $param['flagProtectionLink'] = trim((string)filter_var($param['flagProtectionLink'], FILTER_SANITIZE_URL));
            if (!isset($param['flagProtectionLink'])
                || trim($param['flagProtectionLink']) == ''
            )
                $param['flagProtectionLink'] = null;
        }


        if ($param['enableDisplayFlagObfuscate']) {
            if (!isset($param['flagObfuscate'])
                || !is_bool($param['flagObfuscate'])
            )
                $param['flagObfuscate'] = $link->getObfuscated();

            if (!isset($param['flagObfuscateIcon'])
                || $param['flagObfuscateIcon'] == ''
                || !Node::checkNID($param['flagObfuscateIcon'])
                || !$this->_ioInstance->checkLinkPresent($param['flagObfuscateIcon'])
            )
                $param['flagObfuscateIcon'] = self::DEFAULT_ICON_LC;
            if (isset($param['flagObfuscateText'])) {
                $param['flagObfuscateText'] = trim((string)filter_var($param['flagObfuscateText'], FILTER_SANITIZE_STRING));
            }
            if (!isset($param['flagObfuscateText'])
                || trim($param['flagObfuscateText']) == ''
            ) {
                if ($param['flagObfuscate'])
                    $param['flagObfuscateText'] = '::::display:object:flag:obfuscated';
                else
                    $param['flagObfuscateText'] = '::::display:object:flag:unobfuscated';
            }
            if (isset($param['flagObfuscateLink']))
                $param['flagObfuscateLink'] = trim((string)filter_var($param['flagObfuscateLink'], FILTER_SANITIZE_URL));
            if (!isset($param['flagObfuscateLink'])
                || trim($param['flagObfuscateLink']) == ''
            )
                $param['flagObfuscateLink'] = null;
        } else
            $param['flagObfuscate'] = false;


        $sizeCSS = 'Medium';
        if (!isset($param['displaySize'])) {
            $param['displaySize'] = 'medium';
            $sizeCSS = 'Medium';
        } else {
            switch ($param['displaySize']) {
                case 'tiny':
                    $sizeCSS = 'Tiny';
                    break;
                case 'small':
                    $sizeCSS = 'Small';
                    break;
                case 'large':
                    $sizeCSS = 'Large';
                    break;
                case 'full':
                    $sizeCSS = 'Full';
                    break;
                default:
                    $param['displaySize'] = 'medium';
                    $sizeCSS = 'Medium';
                    break;
            }
        }

        $ratioCSS = 'short';
        if (!isset($param['displayRatio'])) {
            $param['displayRatio'] = 'short';
            $ratioCSS = 'Short';
        } else {
            switch ($param['displayRatio']) {
                case 'long':
                    $ratioCSS = 'Long';
                    break;
                default:
                    $param['displayRatio'] = 'short';
                    $ratioCSS = 'Short';
                    break;
            }
        }

        // Assemble les contenus.
        $divDisplayOpen = '<div class="layoutMessage">' . "\n";
        $divDisplayOpen .= ' <div class="messageDisplay messageDisplay' . $sizeCSS . ' messageDisplay' . $sizeCSS . $ratioCSS . '">' . "\n";
        $divDisplayClose = ' </div>' . "\n";
        $divDisplayClose .= '</div>' . "\n";

        $divHeaderOpen = '';
        $divHeaderClose = '';
        $headerContent = '';

        $divObjectOpen = '';
        $divObjectClose = '';
        $objectContent = '';
        $divObjectFlagsOpen = '';
        $divObjectFlagsClose = '';
        $objectFlagsContent = '';

        $divFooterOpen = '';
        $divFooterClose = '';
        $footerContent = '';
        $divHeaderFlagsOpen = '';
        $divHeaderFlagsClose = '';
        $headerFlagsContent = '';
        $divHeaderDateOpen = '';
        $divHeaderDateClose = '';
        $headerDateContent = '';

        $divFooterFlagsOpen = '';
        $divFooterFlagsClose = '';
        $footerFlagsContent = '';
        $divFooterEmotsOpen = '';
        $divFooterEmotsClose = '';
        $footerEmotsContent = '';
        $divFooterEntityOpen = '';
        $divFooterEntityClose = '';
        $footerEntityContent = '';

        // Si taille petite (1).
        if ($param['displaySize'] == 'small') {
            $divFooterOpen = ' <div class="messageFooter messageFooter' . $sizeCSS . '">' . "\n";
            $divFooterClose = ' </div>' . "\n";
            $divFooterFlagsOpen = '  <div class="messageFooterFlags">';
            $divFooterFlagsClose = '</div>' . "\n";
            $divFooterEntityOpen = '  <div class="messageFooterEntity">';
            $divFooterEntityClose = '</div>' . "\n";

            // Ajoute le bandeau bas du message.
            $footerFlagsContent .= $this->_getDisplayMessageFlags($messageInstance, $link, $param, 'Footer');

            // Prépare l'entité.
            $footerEntityContent .= $this->_getDisplayObjectRefs($param['objectRefs']);

            // Assemble la partie footer.
            $footerContent .= $divFooterFlagsOpen . $footerFlagsContent . $divFooterFlagsClose;
            $footerContent .= $divFooterEntityOpen . $footerEntityContent . $divFooterEntityClose;
        } // Si taille moyenne (2).
        elseif ($param['displaySize'] == 'medium') {
            $divHeaderOpen = ' <div class="messageHeader messageHeader' . $sizeCSS . '">' . "\n";
            $divHeaderClose = ' </div>' . "\n";
            $divHeaderFlagsOpen = '  <div class="messageHeaderFlags">';
            $divHeaderFlagsClose = '</div>' . "\n";
            $divHeaderDateOpen = '  <div class="messageHeaderDate">';
            $divHeaderDateClose = '</div>' . "\n";
            $divFooterOpen = ' <div class="messageFooter messageFooter' . $sizeCSS . '">' . "\n";
            $divFooterClose = ' </div>' . "\n";
            $divFooterEmotsOpen = '  <div class="messageFooterEmots">';
            $divFooterEmotsClose = '</div>' . "\n";
            $divFooterEntityOpen = '  <div class="messageFooterEntity">';
            $divFooterEntityClose = '</div>' . "\n";

            // Ajoute le bandeau haut du message.
            $headerFlagsContent .= $this->_getDisplayMessageFlags($messageInstance, $link, $param, 'Footer');

            // Prépare la date.
            $headerDateContent = $this->convertDate($link->getDate());

            // Ajoute le bandeau bas du message.
            $footerEmotsContent .= $this->_getDisplayObjectFlagEmotions($messageInstance, false);

            // Prépare l'entité.
            $footerEntityContent .= $this->_getDisplayObjectRefs($param['objectRefs']);

            // Assemble la partie header.
            $headerContent .= $divHeaderFlagsOpen . $headerFlagsContent . $divHeaderFlagsClose;
            $headerContent .= $divHeaderDateOpen . $headerDateContent . $divHeaderDateClose;

            // Assemble la partie footer.
            $footerContent .= $divFooterEmotsOpen . $footerEmotsContent . $divFooterEmotsClose;
            $footerContent .= $divFooterEntityOpen . $footerEntityContent . $divFooterEntityClose;
        } // Si taille grande (3).
        elseif ($param['displaySize'] == 'large') // TODO pas utilisé...
        {
            // Prépare le titre de l'objet message.
            $paramObject = array(
                'enableDisplayColor' => true,
                'enableDisplayIcon' => true,
                'enableDisplayIconApp' => false,
                'enableDisplayRefs' => true,
                'enableDisplayName' => true,
                'enableDisplayID' => false,
                'enableDisplayFlags' => false,
                'enableDisplayFlagEmotions' => $param['enableDisplayFlagEmotions'],
                'enableDisplayFlagProtection' => $this->_configurationInstance->getOptionAsBoolean('permitProtectedObject'),
                'enableDisplayFlagObfuscate' => $this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'),
                'enableDisplayFlagUnlocked' => false,
                'enableDisplayFlagActivated' => false,
                'enableDisplayFlagState' => false,
                'enableDisplayStatus' => false,
                'enableDisplayContent' => false,
                'enableDisplayLink2Object' => true,
                'enableDisplayObjectActions' => true,
                'enableDisplayLink2Refs' => true,
                'enableDisplaySelfHook' => true,
                'enableDisplayTypeHook' => true,
                'enableDisplayJS' => true,
                'social' => '',
                'objectType' => null,
                'objectName' => $param['name'],
                'objectAppShortName' => null,
                'objectIcon' => $param['objectIcon'],
                'objectRefs' => array($param['signer']),
                'link2Object' => '',
                'flagProtection' => false,
                'flagProtectionIcon' => '',
                'flagProtectionText' => '',
                'flagProtectionLink' => '',
                'flagObfuscate' => false,
                'flagObfuscateIcon' => '',
                'flagObfuscateText' => '',
                'flagObfuscateLink' => '',
                'flagUnlocked' => false,
                'flagUnlockedIcon' => '',
                'flagUnlockedText' => '',
                'flagUnlockedLink' => '',
                'flagActivated' => false,
                'flagActivatedDesc' => '',
                'flagState' => '',
                'flagStateDesc' => '',
                'flagMessage' => '',
                'flagTargetObject' => '',
                'status' => '',
                'displaySize' => 'medium',
                'displayRatio' => 'short',
                'selfHookList' => array(),
                'selfHookName' => '',
                'typeHookName' => '',
            );
        }
        // Sinon rien.

        // Affiche le contenu, si pas protégé et présent.
        if ($messageInstance->getMarkProtected()
            && !$this->_unlocked
        ) {
            $paramInfo = array(
                'displaySize' => 'small',
                'enableDisplayIcon' => true,
                'displayRatio' => $param['displayRatio'],
                'informationType' => 'warn',
            );
            $objectContent = $this->getDisplayInformation_DEPRECATED('::::display:content:ObjectProctected', $paramInfo);
        } else
            $objectContent = $this->getDisplayObjectContent($messageInstance, $param['displaySize'], $param['displayRatio'], false);

        // Prépare le résultat à afficher.
        $result = $divDisplayOpen;
        $result .= $divHeaderOpen . $headerContent . $divHeaderClose;
        $result .= $divObjectOpen . $objectContent . $divObjectClose;
        $result .= $divFooterOpen . $footerContent . $divFooterClose;
        $result .= $divDisplayClose;

        return $result;
    }

    /**
     * Pour la fonction getDisplayMessage().
     * Prépare les icônes des drapeaux.
     *
     * @param Node         $messageInstance
     * @param LinkRegister $link
     * @param array        $param
     * @param string       $cssCode
     * @return string
     */
    private function _getDisplayMessageFlags(Node $messageInstance, LinkRegister $link, array $param, string $cssCode): string
    {
        $result = '<span class="message' . $cssCode . 'FlagsObj">';
        // Ajoute le lien.
        if (isset($param['link2Object'])
            && $param['link2Object'] != null
        )
            $result .= '<a href="' . $param['link2Object'] . '">';
        else
            $result .= '<a href="' . $this->_prepareDefaultObjectOrGroupOrEntityHtlink($messageInstance) . '">';

        // Ajoute la couleur de l'objet.
        if (isset($param['enableDisplayColor']))
            $result .= $this->_prepareObjectColor_DEPRECATED($messageInstance);

        // Ajoute l'image de l'objet.
        if (isset($param['enableDisplayIcon']))
            $result .= $this->_prepareObjectIcon_DEPRECATED($messageInstance, self::DEFAULT_ICON_CVTOBJ);
        $result .= '</a></span>';

        // Prépare les flags.
        if ($param['enableDisplayFlags']) {
            $result .= '<span class="message' . $cssCode . 'FlagsPrt">';

            if ($param['enableDisplayFlagState']) {
                if (!isset($param['flagState'])
                    || strlen(trim($param['flagState'])) == 0
                ) {
                    if ($link->getValid())
                        $param['flagState'] = 'o';
                    else
                        $param['flagState'] = 'e';
                }

                if ($param['flagState'] == 'o') {
                    $result .= $this->_getDisplayObjectFlag(
                        false,
                        self::DEFAULT_ICON_IOK,
                        '::::display:link:OK',
                        '');
                } else {
                    $result .= $this->_getDisplayObjectFlag(
                        false,
                        self::DEFAULT_ICON_IERR,
                        '::::display:link:errorInvalid',
                        '');
                }
            }

            if ($param['enableDisplayFlagProtection']) {
                if ($param['flagProtectionLink'] != '')
                    $result .= '<a href="' . $param['flagProtectionLink'] . '">';
                $result .= $this->_getDisplayObjectFlag(
                    $param['flagProtection'],
                    $param['flagProtectionIcon'],
                    $param['flagProtectionText'],
                    $param['flagProtectionText']);
                if ($param['flagProtectionLink'] != '')
                    $result .= '</a>';
            }
            if ($param['enableDisplayFlagObfuscate']) {
                if ($param['flagObfuscateLink'] != '')
                    $result .= '<a href="' . $param['flagObfuscateLink'] . '">';
                $result .= $this->_getDisplayObjectFlag(
                    $param['flagObfuscate'],
                    $param['flagObfuscateIcon'],
                    $param['flagObfuscateText'],
                    $param['flagObfuscateText']);
                if ($param['flagObfuscateLink'] != '')
                    $result .= '</a>';
            }
            $result .= '</span>' . "\n";
        }

        return $result;
    }

    public function getDisplayObjectHookList(string $selfHookName, string $typeHookName, Node $object,
                                             bool $enableDisplayJS, string $size, array $appHookList = array()): string
    {
        return $this->_getDisplayObjectHookList($selfHookName, $typeHookName, $object, $enableDisplayJS, $size, $appHookList);
    }

    /**
     * Pour la fonction getDisplayObject().
     * Prépare les actions définies par un point d'ancrage pour un objet.
     * Le point d'ancrage permet aux modules d'ajouter des actions.
     *
     * @param string  $selfHookName
     * @param string  $typeHookName
     * @param Node    $object
     * @param boolean $enableDisplayJS
     * @param string  $size
     * @param array   $appHookList
     * @return string
     */
    private function _getDisplayObjectHookList(string $selfHookName, string $typeHookName, Node $object,
                                               bool $enableDisplayJS, string $size, array $appHookList = array()): string
    {
        $result = '';
        $dispHookList = array();
        $dispHookListT = array();
        $modules = $this->_applicationInstance->getModulesListInstances();

        $iconNoJS = 'NoJS';
        if ($enableDisplayJS)
            $iconNoJS = '';

        // Ajoute les actions demandées spécifiquement et individuellement.
        $i = 0;
        if (sizeof($appHookList) != 0) {
            foreach ($appHookList as $appHook) {
                if ($appHook['name'] != '') {
                    $dispHookList[$i]['moduleName'] = '&nbsp;';
                    $dispHookList[$i]['name'] = $this->_translateInstance->getTranslate($appHook['name']);
                    $dispHookList[$i]['icon'] = $appHook['icon'];
                    if ($dispHookList[$i]['icon'] == '')
                        $dispHookList[$i]['icon'] = self::DEFAULT_ICON_LSTOBJ;
                    $dispHookList[$i]['desc'] = $this->_translateInstance->getTranslate($appHook['desc']);
                    $dispHookList[$i]['link'] = $appHook['link'];
                    if (isset($appHook['css'])
                        && $appHook['css'] != ''
                    )
                        $dispHookList[$i]['cssid'] = 'id="' . $appHook['css'] . '"';
                    else
                        $dispHookList[$i]['cssid'] = 'id="' . $selfHookName . '"';
                    $dispHookList[$i]['hookType'] = 'Self';
                    $i++;
                }
            }
        }

        // Ajoute les actions spécifiques à l'objet pour le module en cours.
        foreach ($modules as $module) {
            if ($module::MODULE_COMMAND_NAME == $this->_currentDisplayMode) {
                // Liste les points d'ancrages à afficher.
                if (str_starts_with($module::MODULE_INTERFACE, '1')
                    || str_starts_with($module::MODULE_INTERFACE, '2')
                )
                    $appHookList = $module->getHookList($selfHookName);
                else
                    $appHookList = $module->getHookList($selfHookName, $object);

                if (sizeof($appHookList) != 0) {
                    foreach ($appHookList as $appHook) {
                        if ($appHook['name'] != '') {
                            $dispHookList[$i]['moduleName'] = $this->_translateInstance->getTranslate($module::MODULE_NAME);
                            $dispHookList[$i]['name'] = $this->_translateInstance->getTranslate($appHook['name']);
                            $dispHookList[$i]['icon'] = $appHook['icon'];
                            if ($dispHookList[$i]['icon'] == '')
                                $dispHookList[$i]['icon'] = self::DEFAULT_ICON_LSTOBJ;
                            $dispHookList[$i]['desc'] = $this->_translateInstance->getTranslate($appHook['desc']);
                            $dispHookList[$i]['link'] = $appHook['link'];
                            if (isset($appHook['css'])
                                && $appHook['css'] != ''
                            )
                                $dispHookList[$i]['cssid'] = 'id="' . $appHook['css'] . '"';
                            else
                                $dispHookList[$i]['cssid'] = 'id="' . $selfHookName . $i . '"';
                            $dispHookList[$i]['hookType'] = 'Self';
                            $i++;
                        }
                    }
                }
            }
        }

        // Ajoute les actions spécifiques à l'objet pour tout sauf le module en cours.
        foreach ($modules as $module) {
            if ($module::MODULE_COMMAND_NAME != $this->_currentDisplayMode) {
                // Liste les points d'encrages à afficher.
                if (str_starts_with($module::MODULE_INTERFACE, '1')
                    || str_starts_with($module::MODULE_INTERFACE, '2')
                )
                    $appHookList = $module->getHookList($selfHookName);
                else
                    $appHookList = $module->getHookList($selfHookName, $object);

                if (sizeof($appHookList) != 0) {
                    foreach ($appHookList as $appHook) {
                        if ($appHook['name'] != '') {
                            $dispHookList[$i]['moduleName'] = $this->_translateInstance->getTranslate($module::MODULE_NAME);
                            $dispHookList[$i]['name'] = $this->_translateInstance->getTranslate($appHook['name']);
                            $dispHookList[$i]['icon'] = $appHook['icon'];
                            if ($dispHookList[$i]['icon'] == '')
                                $dispHookList[$i]['icon'] = self::DEFAULT_ICON_LSTOBJ;
                            $dispHookList[$i]['desc'] = $this->_translateInstance->getTranslate($appHook['desc']);
                            $dispHookList[$i]['link'] = $appHook['link'];
                            if (isset($appHook['css'])
                                && $appHook['css'] != ''
                            )
                                $dispHookList[$i]['cssid'] = 'id="' . $appHook['css'] . '"';
                            else
                                $dispHookList[$i]['cssid'] = 'id="' . $selfHookName . $i . '"';
                            $dispHookList[$i]['hookType'] = 'Self';
                            $i++;
                        }
                    }
                }
            }
        }

        // Ajoute les actions spécifiques au type d'objet.
        $i = 0;
        foreach ($modules as $module) {
            // Liste les points d'encrages à afficher.
            if ($module::MODULE_INTERFACE == '3.0')
                $appHookList = $module->getHookList($typeHookName, $object);
            else
                $appHookList = $module->getHookList($typeHookName);
            if (sizeof($appHookList) != 0) {
                foreach ($appHookList as $appHook) {
                    if ($appHook['name'] != '') {
                        $dispHookListT[$i]['moduleName'] = $this->_translateInstance->getTranslate($module::MODULE_NAME);
                        $dispHookListT[$i]['name'] = $this->_translateInstance->getTranslate($appHook['name']);
                        $dispHookListT[$i]['icon'] = $appHook['icon'];
                        if ($dispHookListT[$i]['icon'] == '')
                            $dispHookListT[$i]['icon'] = self::DEFAULT_ICON_LSTOBJ;
                        $dispHookListT[$i]['desc'] = $this->_translateInstance->getTranslate($appHook['desc']);
                        $dispHookListT[$i]['link'] = $appHook['link'];
                        if (isset($appHook['css'])
                            && $appHook['css'] != ''
                        )
                            $dispHookListT[$i]['cssid'] = 'id="' . $appHook['css'] . '"';
                        else
                            $dispHookListT[$i]['cssid'] = 'id="' . $typeHookName . $i . '"';
                        $dispHookListT[$i]['hookType'] = 'Type';
                        $i++;
                    }
                }
            }
        }
        unset($modules, $module, $appHookList, $appHook);

        // Affiche les points d'encrages.
        if (sizeof($dispHookList) != 0) {
            foreach ($dispHookList as $dispHook) {
                /*	$result .= ' <a href="'.$dispHook['link'].'">'."\n";
				$result .= '  <div class="objectMenuContentAction'.$iconNoJS.' objectMenuContentAction'.$size.' objectMenuContentAction'.$dispHook['hookType'].'" '.$dispHook['cssid'].'>'."\n";
				$result .= '   <div class="objectMenuContentAction-icon'.$iconNoJS.'">';
				$result .= $this->convertUpdateImage($dispHook['icon'], $dispHook['name']);
				$result .= '</div>'."\n";
				$result .= '   <div class="objectMenuContentAction-modname">';
				$result .= '<p>'.$dispHook['moduleName'].'</p>';
				$result .= '</div>'."\n";
				$result .= '   <div class="objectMenuContentAction-title">';
				$result .= '<p>'.$dispHook['name'].'</p>';
				$result .= '</div>'."\n";
				$result .= '   <div class="objectMenuContentAction-text">';
				if ( $enableDisplayJS )
				{
					$result .= '<p>'.$dispHook['desc'].'&nbsp;</p>';
				}
				$result .= '</div>'."\n";
				$result .= '  </div>'."\n";
				$result .= ' </a>'."\n"; */

                $result .= $this->_getDisplayHookAction($dispHook, $enableDisplayJS, $size);
            }
        }
        unset($dispHookList, $dispHook);

        // Affiche les points d'encrages.
        if (sizeof($dispHookListT) != 0) {
            foreach ($dispHookListT as $dispHook) {
                /*	$result .= ' <a href="'.$dispHook['link'].'">'."\n";
				$result .= '  <div class="objectMenuContentAction'.$iconNoJS.' objectMenuContentAction'.$size.' objectMenuContentAction'.$dispHook['hookType'].'" '.$dispHook['cssid'].'>'."\n";
				$result .= '   <div class="objectMenuContentAction-icon'.$iconNoJS.'">';
				$result .= $this->convertUpdateImage($dispHook['icon'], $dispHook['name']);
				$result .= '</div>'."\n";
				$result .= '   <div class="objectMenuContentAction-modname">';
				$result .= '<p>'.$dispHook['moduleName'].'</p>';
				$result .= '</div>'."\n";
				$result .= '   <div class="objectMenuContentAction-title">';
				$result .= '<p>'.$dispHook['name'].'</p>';
				$result .= '</div>'."\n";
				$result .= '   <div class="objectMenuContentAction-text">';
				if ( $enableDisplayJS )
				{
					$result .= '<p>'.$dispHook['desc'].'&nbsp;</p>';
				}
				$result .= '</div>'."\n";
				$result .= '  </div>'."\n";
				$result .= ' </a>'."\n"; */

                $result .= $this->_getDisplayHookAction($dispHook, $enableDisplayJS, $size);
            }
        }
        unset($dispHookListT, $dispHook);

        return $result;
    }

    /**
     * Affiche un bouton des actions définies par un point d'ancrage pour un objet.
     *
     * @param array  $dispHook
     * @param bool   $enableDisplayJS
     * @param string $size
     * @return string
     */
    public function getDisplayHookAction(array $dispHook, bool $enableDisplayJS, string $size): string
    {
        return $this->_getDisplayHookAction($dispHook, $enableDisplayJS, $size);
    }

    /**
     * Affiche un bouton des actions définies par un point d'ancrage pour un objet.
     * Le point d'ancrage permet aux modules d'ajouter des actions.
     * Fonction interne.
     * Pour la fonction _getDisplayObjectHookList
     *
     * @param array  $dispHook
     * @param bool   $enableDisplayJS
     * @param string $size
     * @return string
     */
    private function _getDisplayHookAction(array $dispHook, bool $enableDisplayJS, string $size): string
    {
        $result = '';

        $iconNoJS = 'NoJS';
        if ($enableDisplayJS)
            $iconNoJS = '';

        // Verifications
        if (!isset($dispHook['link']))
            $dispHook['link'] = '';
        if (!isset($dispHook['hookType']))
            $dispHook['hookType'] = '';
        if (!isset($dispHook['icon']))
            $dispHook['icon'] = Node::DEFAULT_ICON_RID;
        if (!isset($dispHook['name']))
            $dispHook['name'] = '';
        if (!isset($dispHook['moduleName']))
            $dispHook['moduleName'] = '';
        if (!isset($dispHook['desc']))
            $dispHook['desc'] = '';

        if (!is_a($dispHook['icon'], 'Nebule\Library\Node'))
            $dispHook['icon'] = $this->_cacheInstance->newNode($dispHook['icon']);

        if ($dispHook['link'] != '')
            $result .= ' <a href="' . $dispHook['link'] . '">' . "\n";
        $result .= '  <div class="objectMenuContentAction' . $iconNoJS . ' objectMenuContentAction' . $size . ' objectMenuContentAction' . $dispHook['hookType'] . '" ' . $dispHook['link'] . '>' . "\n";
        $result .= '   <div class="objectMenuContentAction-icon' . $iconNoJS . '">';
        $result .= $this->convertUpdateImage($dispHook['icon'], $dispHook['name']);
        $result .= '</div>' . "\n";
        $result .= '   <div class="objectMenuContentAction-modname">';
        $result .= '<p>' . $dispHook['moduleName'] . '</p>';
        $result .= '</div>' . "\n";
        $result .= '   <div class="objectMenuContentAction-title">';
        $result .= '<p>' . $dispHook['name'] . '</p>';
        $result .= '</div>' . "\n";
        $result .= '   <div class="objectMenuContentAction-text">';
        if ($enableDisplayJS
            && $dispHook['desc'] != ''
        )
            $result .= '<p>' . $dispHook['desc'] . '&nbsp;</p>';
        $result .= '</div>' . "\n";
        $result .= '  </div>' . "\n";
        if ($dispHook['link'] != '')
            $result .= ' </a>' . "\n";

        return $result;
    }



    /**
     * Prépare à afficher le contenu d'un objet suivant sont type.
     *
     * @param string|Node $object
     * @param string      $sizeCSS  [tiny|small|medium|large|full]
     * @param string      $ratioCSS [short|long]
     * @param bool        $permitWarnProtected
     * @return string
     */
    public function getDisplayObjectContent($object, string $sizeCSS = 'medium', string $ratioCSS = '', bool $permitWarnProtected = true): string
    {




        $result = '';

        if ($sizeCSS != 'full'
            && $sizeCSS != 'large'
            && $sizeCSS != 'medium'
            && $sizeCSS != 'small'
            && $sizeCSS != 'tiny'
        )
            $sizeCSS = 'medium';

        if ($ratioCSS != 'short'
            && $ratioCSS != 'long'
        )
            $ratioCSS = 'short';

        // Vérifie que c'est un objet.
        if (!is_a($object, 'Nebule\Library\Node')
            && !is_a($object, 'Nebule\Library\Group')
            && !is_a($object, 'Nebule\Library\Entity')
            && !is_a($object, 'Nebule\Library\Conversation')
            && !is_a($object, 'Nebule\Library\Currency')
            && !is_a($object, 'Nebule\Library\TokenPool')
            && !is_a($object, 'Nebule\Library\Token')
            && !is_a($object, 'Nebule\Library\Transaction')
            && !is_a($object, 'Nebule\Library\Wallet')
        ) {
            $object = $this->_cacheInstance->newNode($object);
            $id = $object->getID();
            if ($object->getType('all') == References::REFERENCE_OBJECT_ENTITY
                && strpos($object->readOneLineAsText(Entity::ENTITY_MAX_SIZE), References::REFERENCE_ENTITY_HEADER) !== false
            )
                $object = $this->_cacheInstance->newEntity($id);
            elseif ($object->getIsGroup('all'))
                $object = $this->_cacheInstance->newGroup($id);
            elseif ($object->getIsConversation('all'))
                $object = $this->_cacheInstance->newConversation($id);
        }

        $type = $object->getType('all');

        $result .= '<div class="objectContent">' . "\n";

        // Affiche l'objet suivant son type.
        if (is_a($object, 'Nebule\Library\Entity')) {
            if ($object->checkPresent()) {
                if ($sizeCSS = 'medium' || $sizeCSS = 'full') {
                    $result .= '<div class="objectContentEntity">' . "\n<p>";
                    $result .= sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                        $this->convertInlineObjectColorIcon($object) . ' ' . '<b>' . $object->getID() . "</b>\n");
                    $result .= "</p>\n";

                    if ($sizeCSS = 'full') {
                        // Liste des localisations.
                        $localisations = $object->getLocalisationsID();
                        if (sizeof($localisations) > 0) {
                            $result .= '<table border="0"><tr><td><td>' . $this->_translateInstance->getTranslate('::EntityLocalisation') . " :</td><td>\n";
                            foreach ($localisations as $localisation) {
                                $locObject = $this->_cacheInstance->newNode($localisation);
                                $result .= "\t " . $this->convertInlineObjectColorIcon($localisation) . ' '
                                    . $this->convertHypertextLink(
                                        $locObject->readOneLineAsText(),
                                        $locObject->readOneLineAsText()
                                    ) . "<br />\n";
                            }
                            $result .= "</td></tr></table>\n";
                            unset($localisations, $localisation, $locObject);
                        }
                    }
                    $result .= "</div>\n";
                }
            } else {
                $notify = new DisplayNotify($this->_applicationInstance);
                $notify->setMessage('::::display:content:errorNotAvailable');
                $notify->setType(DisplayNotify::TYPE_ERROR);
                $result .= $notify->getHTML();
            }
        } elseif (is_a($object, 'Nebule\Library\Group')) {
            $result .= '<div class="objectContentGroup">' . "\n\t<p>"
                . sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                    $this->convertInlineObjectColorIcon($object) . ' ' . '<b>' . $object->getID() . "</b>\n");
            if ($object->getMarkClosed())
                $result .= "<br />\n" . $this->_translateInstance->getTranslate('::GroupeFerme') . ".\n";
            else
                $result .= "<br />\n" . $this->_translateInstance->getTranslate('::GroupeOuvert') . ".\n";
            $result .= "\t</p>\n</div>\n";
        } elseif (is_a($object, 'Nebule\Library\Conversation')) {
            $result .= '<div class="objectContentConversation">' . "\n\t<p>"
                . sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                    $this->convertInlineObjectColorIcon($object) . ' ' . '<b>' . $object->getID() . "</b>\n");
            if ($object->getMarkClosed())
                $result .= "<br />\n" . $this->_translateInstance->getTranslate('::ConversationFermee') . ".\n";
            else
                $result .= "<br />\n" . $this->_translateInstance->getTranslate('::ConversationOuverte') . ".\n";
            $result .= "\t</p>\n</div>\n";
        } else
            $result .= $this->getDisplayAsObjectContent($object, $sizeCSS, $ratioCSS, $permitWarnProtected);

        $result .= "</div>\n";

        return $result;
    }

    /**
     * Prépare à afficher le contenu d'un objet comme objet pur.
     * Affiche un objet sans tenir compte de son type nebule (Entity|Group|Conversation).
     * Mais affiche l'objet en fonction de son type mime déclaré.
     *
     * @param string|Node $object
     * @param string      $sizeCSS  [tiny|small|medium|large|full]
     * @param string      $ratioCSS [short|long]
     * @param bool        $permitWarnProtected
     * @return string
     */
    public function getDisplayAsObjectContent($object, string $sizeCSS = 'medium', string $ratioCSS = '', bool $permitWarnProtected = true): string
    {
        $result = '';

        if ($sizeCSS != 'full'
            && $sizeCSS != 'large'
            && $sizeCSS != 'medium'
            && $sizeCSS != 'small'
            && $sizeCSS != 'tiny'
        )
            $sizeCSS = 'medium';

        if ($ratioCSS != 'short'
            && $ratioCSS != 'long'
        )
            $ratioCSS = 'short';

        // Vérifie que c'est un objet.
        if (!is_a($object, 'Nebule\Library\Node')
            && !is_a($object, 'Nebule\Library\Group')
            && !is_a($object, 'Nebule\Library\Entity')
            && !is_a($object, 'Nebule\Library\Conversation')
        )
            $object = $this->_cacheInstance->newNode($object);
        $id = $object->getID();

        // Vérifie si il est protégé
        $protected = $object->getMarkProtected();

        // Extrait les propriétés de l'objet.
        $name = $object->getFullName('all');
        $typemime = $object->getType('all');
        $danger = $object->getMarkDanger();
        $warning = $object->getMarkWarning();
        $ispresent = $object->checkPresent();
        $type = $this->_translateInstance->getTranslate($typemime);

        $param = array(
            'enableDisplayIcon' => true,
            'displaySize' => $sizeCSS,
            'displayRatio' => $ratioCSS,
            'informationType' => 'error',
        );

        // Affichage du contenu.
        if ($danger) {
            $param['informationType'] = 'error';
            $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorBan', $param);
            $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotAvailable', $param);
        } elseif ($protected
            && !$this->_unlocked
        ) {
            $param['informationType'] = 'warn';
            $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:ObjectProctected', $param);
            $result .= "<br />\n";
            $param['informationType'] = 'error';
            $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotAvailable', $param);
        } elseif ($ispresent) {
            if ($warning) {
                $param['informationType'] = 'warn';
                $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:warningTaggedWarning', $param);
            }
            if ($protected
                && $this->_unlocked
                && $permitWarnProtected
            ) {
                $param['informationType'] = 'warn';
                $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:warningObjectProctected', $param);
            }

            switch ($typemime) {
                case References::REFERENCE_OBJECT_PNG :
                case References::REFERENCE_OBJECT_JPEG :
                    $content = $object->getContent(0);
                    if ($content != null) {
                        $result .= '<div class="objectContentObject objectContentImage"><img src="?o=' . $id
                            . '" alt="Image ' . $id . '"></div>' . "\n";
                    } else {
                        $param['informationType'] = 'error';
                        $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotDisplayable', $param);
                    }
                    break;
                case References::REFERENCE_OBJECT_TEXT :
                    $content = htmlspecialchars($object->getContent(0));
                    if ($content != null) {
                        $result .= '<div class="objectContentObject objectContentText"><p>' . $content . '</p></div>' . "\n";
                    } else {
                        $param['informationType'] = 'error';
                        $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotDisplayable', $param);
                    }
                    unset($content);
                    break;
                case References::REFERENCE_OBJECT_ENTITY :
                case References::REFERENCE_OBJECT_HTML :
                case References::REFERENCE_OBJECT_CSS :
                case References::REFERENCE_OBJECT_APP_PHP :
                case References::REFERENCE_OBJECT_PHP :
                case References::REFERENCE_NEBULE_OBJET_MONNAIE :
                case References::REFERENCE_NEBULE_OBJET_MONNAIE_SAC :
                case References::REFERENCE_NEBULE_OBJET_MONNAIE_JETON :
                    $content = htmlspecialchars($object->getContent(0));
                    if ($content != null)
                        $result .= '<div class="objectContentObject objectContentCode"><pre>' . $content . '</pre></div>' . "\n";
                    else {
                        $param['informationType'] = 'error';
                        $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotDisplayable', $param);
                    }
                    unset($content);
                    break;
                case References::REFERENCE_OBJECT_MP3 :
                    $content = $object->getContent(0);
                    if ($content != null)
                        $result .= '<div class="objectContentObject objectContentAudio"><audio controls><source src="?o=' . $id . '" type="audio/mp3" />' . $this->_translateInstance->getTranslate(':::warn_NoAudioTagSupport') . '</audio></div>' . "\n";
                    else {
                        $param['informationType'] = 'error';
                        $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotDisplayable', $param);
                    }
                    break;
                case References::REFERENCE_OBJECT_OGG :
                    $content = $object->getContent(0);
                    if ($content != null)
                        $result .= '<div class="objectContentObject objectContentAudio"><audio controls><source src="?o=' . $id . '" type="audio/ogg" />' . $this->_translateInstance->getTranslate(':::warn_NoAudioTagSupport') . '</audio></div>' . "\n";
                    else {
                        $param['informationType'] = 'error';
                        $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotDisplayable', $param);
                    }
                    break;
                case References::REFERENCE_OBJECT_CRYPT_RSA :
                    $param['informationType'] = 'warn';
                    $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:ObjectProctected', $param);
                    break;
                default :
                    $param['informationType'] = 'error';
                    $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotDisplayable', $param);
                    break;
            }
        } else {
            $param['informationType'] = 'error';
            $result .= $this->getDisplayInformation_DEPRECATED('::::display:content:errorNotAvailable', $param);
        }

        // Recherche si l'objet a une mise à jour.
        $instance = $this->_applicationInstance->getCurrentObjectInstance();
        $UpdateID = $instance->getUpdateNID(false, false);
        if ($instance->getID() != $UpdateID) {
            $param['informationType'] = 'information';
            $param2 = array(
                'enableDisplayColor' => true,
                'enableDisplayIcon' => true,
                'enableDisplayName' => true,
                'enableDisplayLink2Object' => true,
                'enableDisplayObjectActions' => false,
                'displaySize' => 'tiny',
                'enableDisplayContent' => false, // Doit impérativement être à false pour éviter une boucle de la mort.
            );
            $result .= "</div>\n";
            $result .= '<div class="objectContent">' . "\n";
            $result .= $this->getDisplayInformation_DEPRECATED(
                $this->_applicationInstance->getTranslate()->getTranslate('::::display:content:ObjectHaveUpdate')
                . '<br />' . $this->getDisplayObject_DEPRECATED($UpdateID, $param2),
                $param
            );
        }
        unset($instance, $UpdateID, $param, $param2);

        return $result;
    }


    /**
     * Affiche une liste d'objets avec leurs paramètres propres ou des messages imbriqués.
     * Se base sur la fonction getDisplayObject() pour l'affichage des objets.
     * Se base sur la fonction getDisplayInformation() pour l'affichage des messages.
     * Si 'information' est défini et que les paramètres contiennent 'informationType',
     *   alors on affiche un message et non un objet.
     * Si 'object' n'est défini pour aucun des éléments du tableau,
     *   alors affiche un message générique pour dire que la liste est vide.
     *   Sauf si on demande explicitement de ne pas afficher le message.
     *
     * @param array   $list
     * @param string  $size
     * @param boolean $displayNoObject
     * @return string
     */
    public function getDisplayObjectsList_DEPRECATED(array $list, string $size = 'medium', bool $displayNoObject = false): string
    {
        $result = '<div class="layoutObjectsList">' . "\n";
        $result .= '<div class="objectsListContent">' . "\n";

        // Prépare le message si pas d'objet à afficher.
        $noObject = true;
        foreach ($list as $item) {
            if (isset($item['object'])
                || isset($item['information'])
                || isset($item['link'])
            )
                $noObject = false;
        }
        if ($noObject
            && !$displayNoObject
        ) {
            $param = array(
                'enableDisplayIcon' => true,
                'informationType' => 'information',
            );
            $result .= $this->getDisplayInformation_DEPRECATED('::EmptyList', $param);
        }

        foreach ($list as $item) {
            $param = $item['param'];
            $param['displaySize'] = $size;

            if (isset($param['icon']) && (is_string($param['icon'])))
                $param['icon'] = $this->_cacheInstance->newNode($param['icon']);

            // Détermine si c'est un objet ou un message à afficher.
            if (isset($item['object'])
                && (is_a($item['object'], 'Nebule\Library\Node')
                    || $item['object'] != ''
                )
            )
                $result .= $this->getDisplayObject_DEPRECATED($item['object'], $param);
            elseif (isset($param['informationType'])
                && isset($item['information'])
                && $param['informationType'] != ''
                && $item['information'] != ''
            )
                $result .= $this->getDisplayInformation_DEPRECATED($item['information'], $param);
            elseif (isset($item['link'])
                && is_a($item['link'], 'Nebule\Library\LinkRegister')
            )
                $result .= $this->getDisplayMessage($item['link'], $param);
            // Sinon n'affiche rien.
        }
        unset($param, $item);

        $result .= '</div>' . "\n";
        $result .= '</div>' . "\n";

        return $result;
    }


    /**
     * Affiche un menu constitué d'une liste d'entrées avec icône, titre et lien html.
     * Peut éventuellement afficher une description par entrée.
     * La liste $list est un tableau de listes, chacunes contenant :
     * - icon : la référence de l'îcone, obligatoire ;
     * - title : le titre de l'entrée, obligatoire ;
     * - htlink : le lien HTML, obligatoire ;
     * - desc : la description sous le titre, facultatif ;
     * - ref : un texte de référence au-dessus du titre, facultatif ;
     * - class : un texte qui référence une classe CSS, facultatif.
     * La taille peut être :
     * - Small
     * - Medium
     * - Large
     * Par défaut la taille est Medium.
     *
     * @param array  $list
     * @param string $size
     * @return string
     */
    public function getDisplayMenuList(array $list, string $size = 'Medium'): string
    {
        $result = '';

        if (sizeof($list) == 0)
            return '';

        foreach ($list as $i => $item) {
            if (!isset($item['icon']) || $item['icon'] == ''
                || !isset($item['title']) || $item['title'] == ''
                || !isset($item['htlink']) || $item['htlink'] == ''
            )
                unset($list[$i]);
            if (!isset($item['class']) || $item['class'] == '')
                $list[$i]['class'] = 'menuListContentActionHooks';
            if (!isset($item['ref']) || $item['ref'] == '')
                $list[$i]['ref'] = '&nbsp;';
            if (!isset($item['desc']) || $item['desc'] == '')
                $list[$i]['desc'] = '&nbsp;';
        }

        if (sizeof($list) == 0)
            return '';

        if ($size != 'Small' && $size != 'Medium' && $size != 'Large')
            $size = 'Medium';

        $result .= '<div class="layoutMenuList">' . "\n";
        $result .= '<div class="menuListContent">' . "\n";

        foreach ($list as $item) {
            $result .= '<div class="menuListContentActionDiv">' . "\n";
            $result .= '<a href="' . $item['htlink'] . '">' . "\n";

            $result .= ' <div class="menuListContentAction menuListContentAction' . $size . ' ' . $item['class'] . '">' . "\n";
            $result .= '  <div class="menuListContentAction-icon">';
            if (is_a($item['icon'], 'Nebule\Library\Node'))
                $icon = $item['icon'];
            else
                $icon = $this->_cacheInstance->newNode((string)$item['icon']);
            $result .= $this->convertUpdateImage($icon, $item['title']);
            $result .= '</div>' . "\n";

            $result .= '  <div class="menuListContentAction-content">' . "\n";
            $result .= '   <p class="menuListContentAction-ref">' . $item['ref'] . '</p>' . "\n";
            $result .= '   <p class="menuListContentAction-title">' . $item['title'] . '</p>' . "\n";
            $result .= '   <p class="menuListContentAction-desc">' . $item['desc'] . '</p>' . "\n";

            $result .= "  </div>\n";
            $result .= " </div></a>\n";
            $result .= "</div>\n";
        }

        $result .= '</div>' . "\n";
        $result .= '</div>' . "\n";

        return $result;
    }

    /**
     * Affiche la liste de menu en fonction d'un point d'ancrage.
     * Utilise la fonction getDisplayMenuList().
     * Le point d'ancrage $hook est un texte qui sert de référence.
     * Les modules sont interrogés pour avoir les entrées correspondantes à cette référence.
     * La taille peut être :
     * - Small
     * - Medium
     * - Large
     * Par défaut la taille est Medium.
     * Lors de la consultation des points d'ancrage, il est possible de passer un objet à utiliser.
     *
     * @param string    $hook
     * @param string    $size
     * @param Node|null $nid
     * @return string
     */
    public function getDisplayHookMenuList(string $hook, string $size = 'Medium', ?Node $nid = null): string
    {
        $list = array();
        $i = 0;
        $module = null;

        $modules = $this->_applicationInstance->getModulesListInstances();
        foreach ($modules as $module) {
            // Liste les points d'ancrages à afficher.
            $appHookList = $module->getHookList($hook, $nid);
            $appHook = null;
            foreach ($appHookList as $appHook) {
                if ($appHook['name'] != '') {
                    $list[$i]['ref'] = $module->getTraduction($module::MODULE_NAME);
                    $list[$i]['title'] = $module->getTraduction($appHook['name']);
                    $list[$i]['icon'] = $appHook['icon'];
                    if ($list[$i]['icon'] == '')
                        $list[$i]['icon'] = self::DEFAULT_ICON_LSTOBJ;
                    $list[$i]['desc'] = $module->getTraduction($appHook['desc']);
                    $list[$i]['htlink'] = $appHook['link'];
                    if (isset($appHook['css'])
                        && $appHook['css'] != ''
                    )
                        $list[$i]['class'] = $appHook['css'];
                    else
                        $list[$i]['class'] = $hook;
                    $i++;
                }
            }
            unset($appHookList, $appHook);
        }
        unset($modules, $module);

        // Affiche la liste.
        return $this->getDisplayMenuList($list, $size);
    }



    /**
     * Affiche un message d'information avec un style en fonction du type de message.
     * Le message peut contenir 5 arguments remplacés dans le texte après la traduction.
     * Dans le texte, chaque chaine %s est remplacée successivement avec les arguments à concurence de 5.
     * Le style CSS est hérité de celui utilisé pour la fonction getDisplayObject() et adapté.
     * Les paramètres d'activation de contenus :
     * - enableDisplayIcon : Affiche le carré avec l'image attaché à l'objet ou l'icône de son type.
     *     Par défaut true : affiche le carré de l'image/icône.
     *     Boolean
     * - enableDisplayAlone : Affiche le message dans une position identique à un titre. C'est utilisé pour un message isolé.
     *     Par défaut false : n'affiche pas en isolé.
     *     Boolean
     * Les paramètres de définition de contenus :
     * - informationType : Détermine le type de message.
     *     Les types disponibles :
     *     - message : affichage d'un message simple en blanc sur fond noir transparent.
     *     - ok : affichage d'un message de validation en blanc sur fond vert.
     *     - warn : affichage d'un message d'avertissement en jaune gras sur fond orange clair.
     *     - error : affichage d'un message d'erreur en rouge gras sur fond rose clair.
     *     - info : affichage d'un message simple en noir sur fond blanc transparent (style d'affichage des objets).
     *     - go : affichage d'un message pour valider une action.
     *     - back : affichage d'un message de retour arrière.
     *     Par défaut info.
     *     String
     * - informationTypeName : Détermine le nom du type de message à afficher.
     *     Par défaut vide.
     *     String
     * - displaySize : Détermine la taille de l'affichage de l'élément complet.
     *     Tailles disponibles :
     *     - tiny : très petite taille correspondant à un carré de base de 16 pixels de large.
     *         Certains éléments ne sont pas affichés.
     *     - small : petite taille correspondant à un carré de base de 32 pixels de large.
     *     - medium : taille moyenne correspondant à un carré de base de 64 pixels de large par défaut.
     *     - large : grande taille correspondant à un carré de base de 128 pixels de large par défaut.
     *     - full : très grande taille correspondant à un carré de base de 256 pixels de large par défaut.
     *     Par défaut medium : taille moyenne.
     *     String
     * - displayRatio : Détermine la forme de l'affichage par son ratio dans la mesure du possible si pas d'affichage du contenu de l'objet.
     *     Ratios disponibles :
     *     - square : forme carrée de 2x2 displaySize.
     *     - short : forme plate courte de 6x1 displaySize.
     *     - long : forme plate longue de toute largeure disponible.
     *     Par défaut short : forme plate courte.
     *     String
     * - icon : Détermine l'icône à utiliser.
     *     Si vide, l'icône est sélectionnée automatiquement en fonction du type de message.
     *     Par défaut vide : l'icône est sélectionnée automatiquement.
     *     enableDisplayIcon doit être à true.
     *     String
     * - htlink : Détermine le lien HTML à utiliser.
     *     Si non présent, pas de lien HTML.
     * Exemple de table de paramètres avec les valeurs par défaut :
     * $param = array(
     * 'enableDisplayIcon' => true,
     * 'enableDisplayAlone' => false,
     * 'informationType' => 'information',
     * 'informationTypeName' => '',
     * 'displaySize' => 'medium',
     * 'displayRatio' => 'short',
     * 'icon' => '',
     * 'htlink' => '',
     * );
     *
     * Use DisplayInformation()
     *
     * @param string $message
     * @param array  $param
     * @param string $arg1
     * @param string $arg2
     * @param string $arg3
     * @param string $arg4
     * @param string $arg5
     * @return string
     */
    public function getDisplayInformation_DEPRECATED(string $message, array $param, string $arg1 = '', string $arg2 = '',
                                                     string $arg3 = '', string $arg4 = '', string $arg5 = ''): string
    {
        $instance = new DisplayInformation($this->_applicationInstance);
        $instance->setMessage($message, $arg1, $arg2, $arg3, $arg4, $arg5);
        if (isset($param['enableDisplayAlone']))
            $instance->setDisplayAlone($param['enableDisplayAlone']);
        if (isset($param['informationType']))
            $instance->setType($param['informationType']);
        if (isset($param['informationTypeName']))
            $instance->setIconText($param['informationTypeName']);
        if (isset($param['displaySize']))
            $instance->setSize($param['displaySize']);
        if (isset($param['displayRatio']))
            $instance->setRatio($param['displayRatio']);
        if (isset($param['icon']))
            if (is_string($param['icon']))
                $param['icon'] = $this->_cacheInstance->newNode($param['icon']);
            $instance->setIcon($param['icon']);
        if (isset($param['htlink']))
            $instance->setLink($param['htlink']);
        if (isset($param['enableDisplayIcon']) && $param['enableDisplayIcon'] === false)
            $instance->setIcon(null);
        return $instance->getHTML();
    }



    /**
     * Retourne la représentation html du lien en fonction des paramètres passés.
     * Les paramètres de définition de contenus :
     * - displaySize : Détermine la taille de l'affichage de l'élément complet.
     *     Tailles disponibles :
     *     - small : très petite taille correspondant à un carré de base de 16 pixels de large.
     *         Certains éléments ne sont pas affichés.
     *     - medium : taille moyenne correspondant à un carré de base de 32 pixels de large par défaut.
     *     - large : grande taille correspondant à un carré de base de 64 pixels de large par défaut.
     *     Par défaut small : taille petite.
     *     String
     * Exemple de table de paramètres avec les valeurs par défaut :
     * $param = array(
     * 'displaySize' => 'small',
     * );
     *
     * @param LinkRegister|string $link
     * @param array               $param
     * @return string
     */
    public function getDisplayLink($link, array $param): string
    {
        /**
         * Résultat à retourner pour affichage.
         */
        $result = '';

        /**
         * Instance du lien à afficher.
         */
        $instance = null;

        // Prépare le lien.
        if (is_a($link, 'Nebule\Library\LinkRegister'))
            $instance = $link;
        elseif (is_string($link))
            $instance = $this->_cacheInstance->newBlockLink($link);

        // Teste la validité du lien.
        if ($instance == null
            || !is_a($instance, 'Nebule\Library\LinkRegister')
        )
            return '';

        $sizeCSS = 'Medium';
        if (!isset($param['displaySize'])) {
            $param['displaySize'] = 'medium';
            $sizeCSS = 'Medium';
        } else {
            switch ($param['displaySize']) {
                case 'small':
                    $sizeCSS = 'Small';
                    break;
                case 'large':
                    $sizeCSS = 'Large';
                    break;
                default:
                    $param['displaySize'] = 'medium';
                    $sizeCSS = 'Medium';
                    break;
            }
        }

        $divDisplayOpen = '<span class="layoutLink">' . "\n";
        $divDisplayClose = '</span>' . "\n";
        $divLinkOpen = ' <span class="linkDisplay linkDisplay' . $sizeCSS . ' ">' . "\n";
        $divLinkClose = ' </span>' . "\n";

        $contantDisplayIcon = '';
        $contantDisplayValid = '';
        $contantDisplaySigner = '';
        $contantDisplayDate = '';
        $contantDisplayAction = '';
        $contantDisplaySource = '';
        $contantDisplayTarget = '';
        $contantDisplayMeta = '';

        if ($instance->getValid()
        ) {
            if ($instance->getSigned()) {
                $contantDisplayValid .= '<img title="OK" ';
                $contantDisplayValid .= 'alt="[O]" src="o/' . $this->getImageByReference($this->_cacheInstance->newNode(DisplayItemIconMessage::ICON_OK_RID))->getID() . '" ';
                $contantDisplayValid .= '/>';
            } else {
                $contantDisplayValid .= '<img title="ERROR" ';
                $contantDisplayValid .= 'alt="[E]" src="o/' . $this->getImageByReference($this->_cacheInstance->newNode(DisplayItemIconMessage::ICON_ERROR_RID))->getID() . '" ';
                $contantDisplayValid .= '/>';
            }

            foreach ($instance->getSignersEID() as $signer)
            {
                $object = $this->_cacheInstance->newNode($signer);
                $contantDisplaySigner .= '<img title="' . $object->getFullName();
                $contantDisplaySigner .= '" style="background:#' . $object->getPrimaryColor();
                $contantDisplaySigner .= ';" alt="[]" src="o/' . self::DEFAULT_ICON_ALPHA_COLOR . '" />';
            }

            $contantDisplayDate = '';

            $icon = self::REFERENCE_ICON_LINK_LL;
            switch ($instance->getParsed()['bl/rl/req']) {
                case 'f':
                    $icon = self::REFERENCE_ICON_LINK_LF;
                    break;
                case 'u':
                    $icon = self::REFERENCE_ICON_LINK_LU;
                    break;
                case 'd':
                    $icon = self::REFERENCE_ICON_LINK_LD;
                    break;
                case 'e':
                    $icon = self::REFERENCE_ICON_LINK_LE;
                    break;
                case 'c':
                    $icon = self::REFERENCE_ICON_LINK_LC;
                    break;
                case 'k':
                    $icon = self::REFERENCE_ICON_LINK_LK;
                    break;
                case 's':
                    $icon = self::REFERENCE_ICON_LINK_LS;
                    break;
                case 'x':
                    $icon = self::REFERENCE_ICON_LINK_LX;
                    break;
            }
            $contantDisplayAction .= '<img title="Action ' . $instance->getParsed()['bl/rl/req'] . '" ';
            $contantDisplayAction .= 'alt="[' . $instance->getParsed()['bl/rl/req'] . ']" ';
            $contantDisplayAction .= 'src="o/' . $this->getImageByReference($this->_cacheInstance->newNode($icon))->getID() . '" />';

            $object = $this->_cacheInstance->newNode($instance->getParsed()['bl/rl/nid1']);
            $contantDisplaySource .= '<img title="' . $object->getFullName();
            $contantDisplaySource .= '" style="background:#' . $object->getPrimaryColor();
            $contantDisplaySource .= ';" alt="[]" src="o/' . self::DEFAULT_ICON_ALPHA_COLOR . '" />';

            $object = $this->_cacheInstance->newNode($instance->getParsed()['bl/rl/nid2']);
            $contantDisplayTarget .= '<img title="' . $object->getFullName();
            $contantDisplayTarget .= '" style="background:#' . $object->getPrimaryColor();
            $contantDisplayTarget .= ';" alt="[]" src="o/' . self::DEFAULT_ICON_ALPHA_COLOR . '" />';

            $object = $this->_cacheInstance->newNode($instance->getParsed()['bl/rl/nid3']);
            $contantDisplayMeta .= '<img title="' . $object->getFullName();
            $contantDisplayMeta .= '" style="background:#' . $object->getPrimaryColor();
            $contantDisplayMeta .= ';" alt="[]" src="o/' . self::DEFAULT_ICON_ALPHA_COLOR . '" />';
        } else {
            $contantDisplayIcon .= '<img title="ERROR" ';
            $contantDisplayIcon .= 'alt="[E]" src="o/' . $this->getImageByReference($this->_cacheInstance->newNode(self::REFERENCE_ICON_LINK_LL))->getID() . '" ';
            $contantDisplayIcon .= '/>';

            $contantDisplayValid .= '<img title="ERROR" ';
            $contantDisplayValid .= 'alt="[E]" src="o/' . $this->getImageByReference($this->_cacheInstance->newNode(DisplayItemIconMessage::ICON_ERROR_RID))->getID() . '" ';
            $contantDisplayValid .= '/>';
        }

        $result .= $divDisplayOpen;
        $result .= $divLinkOpen;
        $result .= $contantDisplayIcon;
        $result .= $contantDisplayValid;
        $result .= $contantDisplaySigner;
        $result .= $contantDisplayDate;
        $result .= $contantDisplayAction;
        $result .= $contantDisplaySource;
        $result .= $contantDisplayTarget;
        $result .= $contantDisplayMeta . "\n";
        $result .= $divLinkClose;
        $result .= $divDisplayClose;

        return $result;
    }


    /**
     * Affiche l'image du carré de couleur de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return void
     */
    public function displayObjectColor(Node $object, string $htlink = ''): void
    {
        echo $this->convertObjectColor($object, $htlink);
    }

    /**
     * Prépare l'image du carré de couleur de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return string
     */
    public function convertObjectColor(Node $object, string $htlink = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        $image = $this->_prepareObjectColor_DEPRECATED($object, 'iconNormalDisplay');
        return $this->convertHypertextLink($image, $htlink);
    }

    /**
     * Affiche l'image du carré de couleur de l'objet ou de l'entité, mais pas de lien vers l'objet.
     *
     * @param Node $object
     * @return void
     */
    public function displayInlineObjectColorNolink(Node $object): void
    {
        echo $this->convertInlineObjectColorNolink($object);
    }

    /**
     * Prépare l'image du carré de couleur de l'objet ou de l'entité, mais pas de lien vers l'objet.
     *
     * @param Node $object
     * @return string
     */
    public function convertInlineObjectColorNolink(Node $object): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        return $this->_prepareObjectColor_DEPRECATED($object, 'iconInlineDisplay');
    }

    /**
     * Affiche l'image de l'icône de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @param string $icon
     * @return void
     */
    public function displayObjectIcon(Node $object, string $htlink = '', string $icon = ''): void
    {
        echo $this->convertObjectIcon($object, $htlink, $icon);
    }

    /**
     * Prépare l'image de l'icône de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @param string $icon
     * @return string
     */
    public function convertObjectIcon(Node $object, string $htlink = '', string $icon = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        if ($icon != '')
            $icon = $this->_prepareObjectIcon_DEPRECATED($object, $icon, 'iconNormalDisplay');
        else
            $icon = $this->_prepareObjectFace($object, 'iconNormalDisplay');
        return $this->convertHypertextLink($icon, $htlink);
    }

    /**
     * Affiche l'image du carré de couleur et l'icône de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @param string $icon
     * @return void
     */
    public function displayObjectColorIcon(Node $object, string $htlink = '', string $icon = ''): void
    {
        echo $this->convertObjectColorIcon($object, $htlink, $icon);
    }

    /**
     * Prépare l'image du carré de couleur et l'icône de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @param string $icon
     * @return string
     */
    public function convertObjectColorIcon(Node $object, string $htlink = '', string $icon = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        $color = $this->_prepareObjectColor_DEPRECATED($object, 'iconNormalDisplay');
        if ($icon != '')
            $icon = $this->_prepareObjectIcon_DEPRECATED($object, $icon, 'iconNormalDisplay');
        else
            $icon = $this->_prepareObjectFace($object, 'iconNormalDisplay');
        return $this->convertHypertextLink($color . $icon, $htlink);
    }

    /**
     * Prépare en version inserré au texte l'image du carré de couleur de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return string
     */
    public function prepareInlineObjectColor(Node $object, string $htlink = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        $color = $this->_prepareObjectColor_DEPRECATED($object, 'iconInlineDisplay');
        return $this->convertHypertextLink($color, $htlink);
    }

    /**
     * Affiche en version inserré au texte l'image de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return void
     */
    public function displayInlineObjectColor(Node $object, string $htlink = ''): void
    {
        echo $this->convertInlineObjectColor($object, $htlink);
    }

    /**
     * Prépare en version inserré au texte l'image de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return string
     */
    public function convertInlineObjectColor(Node $object, string $htlink = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        $color = $this->_prepareObjectColor_DEPRECATED($object, 'iconInlineDisplay');
        return $this->convertHypertextLink($color, $htlink);
    }

    /**
     * Affiche en version inserré au texte l'image de l'objet ou de l'entité et le nom ou un texte, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $text
     * @param string $htlink
     * @return void
     */
    public function displayInlineObjectColorText(Node $object, string $text = '', string $htlink = ''): void
    {
        echo $this->convertInlineObjectColorText($object, $text, $htlink);
    }

    /**
     * Prépare en version inserré au texte l'image de l'objet ou de l'entité et le nom ou un texte, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $text
     * @param string $htlink
     * @return string
     */
    public function convertInlineObjectColorText(Node $object, string $text = '', string $htlink = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        if ($text == '')
            $text = $object->getFullName('all');
        $text = $this->_truncateName($text, 0);
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        $color = $this->_prepareObjectColor_DEPRECATED($object, 'iconInlineDisplay');
        return $this->convertHypertextLink($color . $text, $htlink);
    }

    /**
     * Affiche en version inserré au texte l'image de l'objet ou de l'entité et le nom, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return void
     */
    public function displayInlineObjectColorName(Node $object, string $htlink = ''): void
    {
        echo $this->convertInlineObjectColorName($object, $htlink);
    }

    /**
     * Prépare en version inserré au texte l'image de l'objet ou de l'entité et le nom, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return string
     */
    public function convertInlineObjectColorName(Node $object, string $htlink = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        $name = $this->_truncateName($object->getFullName('all'), 0);
        $color = $this->_prepareObjectColor_DEPRECATED($object, 'iconInlineDisplay');
        return $this->convertHypertextLink($color . $name, $htlink);
    }

    /**
     * Affiche en version inserré au texte l'icône couleur, l'image et un texte ou le nom de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return void
     */
    public function displayInlineObjectColorIcon(Node $object, string $htlink = ''): void
    {
        echo $this->convertInlineObjectColorIcon($object, $htlink);
    }

    /**
     * @param Node   $object
     * @param string $htlink
     * @return string
     */
    public function convertInlineObjectColorIcon(Node $object, string $htlink = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        $color = $this->_prepareObjectColor_DEPRECATED($object, 'iconInlineDisplay');
        $icon = $this->_prepareObjectFace($object, 'iconInlineDisplay');
        return $this->convertHypertextLink($color . $icon, $htlink);
    }

    /**
     * Affiche en version inserré au texte l'icône couleur, l'image et un texte ou le nom de l'objet ou de l'entité, lien vers l'objet.
     *
     * @param Node   $object
     * @param string $htlink
     * @return void
     */
    public function displayInlineObjectColorIconName(Node $object, string $htlink = ''): void
    {
        echo $this->convertInlineObjectColorIconName($object, $htlink);
    }

    /**
     * @param Node   $object
     * @param string $htlink
     * @return string
     */
    public function convertInlineObjectColorIconName(Node $object, string $htlink = ''): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $htlink = $this->_prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        $name = $this->_truncateName($object->getFullName('all'), 0);
        $color = $this->_prepareObjectColor_DEPRECATED($object, 'iconInlineDisplay');
        $icon = $this->_prepareObjectFace($object, 'iconInlineDisplay');
        return $this->convertHypertextLink($color . $icon . $name, $htlink);
    }

    /**
     * Affiche en version inserré au texte l'icône couleur, l'image et un texte ou le nom de l'objet ou de l'entité, mais pas de lien vers l'objet.
     *
     * @param Node $object
     * @return void
     */
    public function displayInlineObjectColorIconNameNolink(Node $object): void
    {
        echo $this->convertInlineObjectColorIconNameNolink($object);
    }

    /**
     * Prépare en version inserré au texte l'icône couleur, l'image et un texte ou le nom de l'objet ou de l'entité, mais pas de lien vers l'objet.
     *
     * @param Node $object
     * @return string
     */
    public function convertInlineObjectColorIconNameNolink(Node $object): string
    {
        $object = $this->getTypedInstanceFromNID($object->getID());
        $name = $this->_truncateName($object->getFullName('all'), 0);
        $color = $this->_prepareObjectColor_DEPRECATED($object, 'iconInlineDisplay');
        $icon = $this->_prepareObjectFace($object, 'iconInlineDisplay');
        return $color . $icon . $name;
    }


    /* --------------------------------------------------------------------------------
	 *  Affichage des liens.
	 * -------------------------------------------------------------------------------- */
    public function displayInlineLinkFace(string $link): void
    {
        echo $this->convertInlineLinkFace($link);
    }

    public function convertInlineLinkFace($link): string
    {
        if ($link == '')
            return '';
        if (!is_a($link, 'Nebule\Library\LinkRegister'))
            $link = $this->_cacheInstance->newBlockLink($link);
        if (!$link->getValid())
            return '';

        switch ($link->getParsed()['bl/rl/req']) {
            case 'f':
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LF);
                $iconUpdate = $this->convertUpdateImage($icon, 'f', 'iconInlineDisplay');
                break;
            case 'u':
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LU);
                $iconUpdate = $this->convertUpdateImage($icon, 'u', 'iconInlineDisplay');
                break;
            case 'd':
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LD);
                $iconUpdate = $this->convertUpdateImage($icon, 'd', 'iconInlineDisplay');
                break;
            case 'e':
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LE);
                $iconUpdate = $this->convertUpdateImage($icon, 'e', 'iconInlineDisplay');
                break;
            case 'c':
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LC);
                $iconUpdate = $this->convertUpdateImage($icon, 'c', 'iconInlineDisplay');
                break;
            case 'k':
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LK);
                $iconUpdate = $this->convertUpdateImage($icon, 'k', 'iconInlineDisplay');
                break;
            case 's':
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LS);
                $iconUpdate = $this->convertUpdateImage($icon, 's', 'iconInlineDisplay');
                break;
            case 'x':
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LX);
                $iconUpdate = $this->convertUpdateImage($icon, 'x', 'iconInlineDisplay');
                break;
            default :
                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LL);
                $iconUpdate = $this->convertUpdateImage($icon, 'l', 'iconInlineDisplay');
                break;
        }

        $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_IMLOG);
        $colorDate = $this->convertUpdateImage($icon, $link->getDate(), 'iconInlineDisplay'); // FIXME

        // Prépare le contenu à afficher.
        $return = '';
        foreach ($link->getSignersEID() as $signer)
            $return .= $this->convertInlineObjectColor($this->_cacheInstance->newEntity($signer));
        $return .= $colorDate;
        $return .= $iconUpdate;
        $return .= $this->convertInlineObjectColor($link->getParsed()['bl/rl/nid1']);
        $return .= $this->convertInlineObjectColor($link->getParsed()['bl/rl/nid2']);
        $return .= $this->convertInlineObjectColor($link->getParsed()['bl/rl/nid3']);

        return $return;
    }

    public function displayInlineIconFace(string $iconName): void
    {
        echo $this->convertInlineIconFace($iconName);
    }

    public function convertInlineIconFace(string $iconName): string
    {
        if (Node::checkNID($iconName) && $this->_nebuleInstance->getIoInstance()->checkLinkPresent($iconName))
            $iconID = $iconName;
        elseif (defined('self::' . $iconName))
            $iconID = constant('self::' . $iconName);
        else
            $iconID = self::DEFAULT_ICON_LO;

        $instance = $this->_cacheInstance->newNode($iconID);
        if ($instance->getID() == '0')
            return '';

        return $this->convertUpdateImage($instance, $this->_translateInstance->getTranslate($instance->getName('all')), 'iconInlineDisplay');
    }

    public function displayInlineInfoFace(): void
    {
        echo $this->convertInlineInfoFace();
    }

    public function convertInlineInfoFace(): string
    {
        $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_IINFO);
        return $this->convertUpdateImage($icon, $this->_translateInstance->getTranslate('::::INFO'), 'iconInlineDisplay');
    }

    public function displayInlineOKFace(): void
    {
        echo $this->convertInlineOKFace();
    }

    public function convertInlineOKFace(): string
    {
        $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_IOK);
        return $this->convertUpdateImage($icon, $this->_translateInstance->getTranslate('::::OK'), 'iconInlineDisplay');
    }

    public function displayInlineWarningFace(): void
    {
        echo $this->convertInlineWarningFace();
    }

    public function convertInlineWarningFace(): string
    {
        $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_IWARN);
        return $this->convertUpdateImage($icon, $this->_translateInstance->getTranslate('::::WARN'), 'iconInlineDisplay');
    }

    public function displayInlineErrorFace(): void
    {
        echo $this->convertInlineErrorFace();
    }

    public function convertInlineErrorFace(): string
    {
        $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_IERR);
        return $this->convertUpdateImage($icon, $this->_translateInstance->getTranslate('::::ERROR'), 'iconInlineDisplay');
    }

    public function displayInlineLastAction(): void
    {
        /*$array = $this->_metrologyInstance->getLastAction();
        if (sizeof($array) == 0)
            return;
        switch ($array['type']) {
            case 'addlnk' :
                $this->displayInlineIconFace('DEFAULT_ICON_ADDLNK');
                if ($array['result'])
                    $this->displayInlineOKFace();
                else
                    $this->displayInlineErrorFace();
                $this->displayInlineLinkFace($array['action']);
                break;
            case 'addobj' :
                $this->displayInlineIconFace('DEFAULT_ICON_ADDOBJ');
                if ($array['result'])
                    $this->displayInlineOKFace();
                else
                    $this->displayInlineErrorFace();
                $instance = $this->_cacheInstance->newNode($array['action']);
                $this->displayInlineObjectColor($instance);
                break;
            case 'delobj' :
                $this->displayInlineIconFace('DEFAULT_ICON_LD');
                if ($array['result'])
                    $this->displayInlineOKFace();
                else
                    $this->displayInlineErrorFace();
                $instance = $this->_cacheInstance->newNode($array['action']);
                $this->displayInlineObjectColor($instance);
                break;
            case 'addent' :
                $this->displayInlineIconFace('DEFAULT_ICON_ADDENT');
                if ($array['result'])
                    $this->displayInlineOKFace();
                else
                    $this->displayInlineErrorFace();
                $this->displayInlineObjectColorIcon($array['action']);
                break;
        }
        echo "\n";
        unset($array);*/
    }

    public function displayInlineAllActions(): void
    {
        /*$count = 0;
        while (true) {
            $array = $this->_metrologyInstance->getFirstAction();
            if (sizeof($array) == 0 || $count > Metrology::DEFAULT_ACTION_STATE_SIZE)
                break;
            if ($count > 0)
                echo "- \n";
            switch ($array['type']) {
                case 'addlnk' :
                    $this->displayInlineIconFace('DEFAULT_ICON_ADDLNK');
                    if ($array['result'])
                        $this->displayInlineOKFace();
                    else
                        $this->displayInlineErrorFace();
                    $this->displayInlineLinkFace($array['action']);
                    $count++;
                    break;
                case 'addobj' :
                    $this->displayInlineIconFace('DEFAULT_ICON_ADDOBJ');
                    if ($array['result'])
                        $this->displayInlineOKFace();
                    else
                        $this->displayInlineErrorFace();
                    $this->displayInlineObjectColor($array['action']);
                    $count++;
                    break;
                case 'delobj' :
                    $this->displayInlineIconFace('DEFAULT_ICON_LD');
                    if ($array['result'])
                        $this->displayInlineOKFace();
                    else
                        $this->displayInlineErrorFace();
                    $this->displayInlineObjectColor($array['action']);
                    $count++;
                    break;
                case 'addent' :
                    $this->displayInlineIconFace('DEFAULT_ICON_ADDENT');
                    if ($array['result'])
                        $this->displayInlineOKFace();
                    else
                        $this->displayInlineErrorFace();
                    $this->displayInlineObjectColorIcon($array['action']);
                    $count++;
                    break;
                default :
                    $count = 1;
            }
            echo "&nbsp;";
        }
        unset($array);
        flush();*/
    }


    /**
     * Affiche en version inserré au texte les icônes des émotions de l'objet.
     *
     * @param string $object
     * @return void
     */
    public function displayInlineEmotions(string $object): void
    {
        echo $this->convertInlineEmotions($object);
    }

    /**
     * Prépare l'affichage en version inserré au texte les icônes des émotions de l'objet.
     *
     * @param string $object
     * @return string
     */
    public function convertInlineEmotions(string $object): string
    {
        // Vérifie si les émotions doivent être affichées.
        if (!$this->_configurationInstance->getOptionUntyped('displayEmotions'))
            return '';

        $object = $this->getTypedInstanceFromNID($object);

        // Ouverture de la DIV.
        $result = "\n<div class=\"inlineemotions\">\n\t<p>\n\t\t";

        $listEmotions = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET,
        );
        $listEmotions0 = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE => Displays::REFERENCE_ICON_EMOTION_JOIE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE => Displays::REFERENCE_ICON_EMOTION_CONFIANCE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR => Displays::REFERENCE_ICON_EMOTION_PEUR0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE => Displays::REFERENCE_ICON_EMOTION_SURPRISE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE => Displays::REFERENCE_ICON_EMOTION_TRISTESSE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT => Displays::REFERENCE_ICON_EMOTION_DEGOUT0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE => Displays::REFERENCE_ICON_EMOTION_COLERE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET => Displays::REFERENCE_ICON_EMOTION_INTERET0,
        );
        $listEmotions1 = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE => Displays::REFERENCE_ICON_EMOTION_JOIE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE => Displays::REFERENCE_ICON_EMOTION_CONFIANCE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR => Displays::REFERENCE_ICON_EMOTION_PEUR1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE => Displays::REFERENCE_ICON_EMOTION_SURPRISE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE => Displays::REFERENCE_ICON_EMOTION_TRISTESSE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT => Displays::REFERENCE_ICON_EMOTION_DEGOUT1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE => Displays::REFERENCE_ICON_EMOTION_COLERE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET => Displays::REFERENCE_ICON_EMOTION_INTERET1,
        );

        foreach ($listEmotions as $emotion) {
            // Génère la base du lien html pour revenir au bon endroit en toute situation.
            $htlink = '?' . Displays::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getDisplayInstance()->getCurrentDisplayMode()
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getDisplayInstance()->getCurrentDisplayView()
                . '&' . References::COMMAND_SELECT_OBJECT . '=' . $object->getID()
                . '&' . References::COMMAND_SELECT_ENTITY . '=' . $this->_applicationInstance->getCurrentEntityID()
                . '&' . References::COMMAND_SELECT_GROUP . '=' . $this->_nebuleInstance->getCurrentGroupID()
                . '&' . References::COMMAND_SELECT_CONVERSATION . '=' . $this->_nebuleInstance->getCurrentConversationID();

            // Préparation du lien.
            $source = $object->getID();
            $target = $this->_nebuleInstance->getCryptoInstance()->hash($emotion);
            $meta = $this->_entitiesInstance->getCurrentEntityID();

            // Détermine si l'émotion a été marqué par l'entité en cours.
            if ($object->getMarkEmotion($emotion, 'myself')) {
                // Création du lien.
                $action = 'x';
                $link = $action . '_' . $source . '_' . $target . '_' . $meta;
                $htlink .= '&' . Actions::DEFAULT_COMMAND_ACTION_SIGN_LINK1 . '=' . $link . $this->_nebuleInstance->getTicketingInstance()->getActionTicketValue();

                // Préparation de l'icône de l'émotion.
                $icon = $this->convertReferenceImage($listEmotions1[$emotion], $emotion, 'iconInlineDisplay');
            } else {
                // Création du lien.
                $action = 'f';
                $link = $action . '_' . $source . '_' . $target . '_' . $meta;
                $htlink .= '&' . Actions::DEFAULT_COMMAND_ACTION_SIGN_LINK1 . '=' . $link . $this->_nebuleInstance->getTicketingInstance()->getActionTicketValue();

                // Préparation de l'icône de l'émotion.
                $icon = $this->convertReferenceImage($listEmotions0[$emotion], $emotion, 'iconInlineDisplay');
            }

            // Si connecté, l'icône est active.
            if ($this->_unlocked
                && $this->_configurationInstance->getOptionAsBoolean('permitWrite')
                && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            )
                $result .= $this->convertHypertextLink($icon, $htlink);
            else
                $result .= $icon;

            // Détermine le nombre d'entités qui ont marqué cette émotion.
            $count = $object->getMarkEmotionSize($emotion, 'all');
            if ($count > 0)
                $result .= $count . ' ';
        }

        // Fermeture de la DIV.
        $result .= "\n\t</p>\n</div>\n";

        return $result;
    }


    /**
     * Affiche le bouton pour continuer l'affichage lorsque la liste est longue.
     *
     * @param string $ref
     * @param string $url
     * @param string $text
     * @return boolean
     */
    public function displayButtonNextObject(string $ref, string $url, string $text): bool
    {
        if ($ref == '')
            return false;
        if ($url == '')
            return false;
        if ($text == '')
            return false;

        echo "<div class=\"inlinecontent\" id=\"$ref\">\n";
        echo "<p class=\"inlinecontentnext\" onclick=\"replaceNextContentFromURL('$ref', '$url')\">$text</p>\n";

        return true;
    }


    /**
     * Affiche des entrées.
     *
     * @param array $list
     * @return void
     */
    public function displayItemList(array $list): void
    {
        if (sizeof($list) == 0)
            return;
        ?>

        <div class="textAction">
            <?php
            foreach ($list as $item) {
                // Affichage.
                if (is_a($item['object'], 'Nebule\Library\Node'))
                    $this->_displayArboItem($item);
            }
            unset($name, $icon, $desc, $link);
            ?>

            <div class="oneAction-close"></div>
        </div>
        <?php
    }

    /**
     * Affiche un élément de l'arborescence.
     *
     * @param array $item
     * @return void
     */
    private function _displayArboItem(array $item): void
    {
        if (sizeof($item) == 0)
            return;
        if (!is_a($item['object'], 'Nebule\Library\Node')
            && !is_a($item['object'], 'Nebule\Library\Entity')
            && !is_a($item['object'], 'Nebule\Library\Group')
            && !is_a($item['object'], 'Nebule\Library\Conversation')
            && !is_a($item['object'], 'Nebule\Library\Currency')
            && !is_a($item['object'], 'Nebule\Library\TokenPool')
            && !is_a($item['object'], 'Nebule\Library\Token')
            && !is_a($item['object'], 'Nebule\Library\Transaction')
            && !is_a($item['object'], 'Nebule\Library\Wallet')
        )
            return;

        // Extraction.
        $object = $item['object'];

        $entity = null;
        $entityID = '0';
        if (is_a($item['entity'], 'Nebule\Library\Entity')) {
            $entity = $item['entity'];
            $entityID = $entity->getID();
        } elseif (Node::checkNID($item['entity'], false, false)) {
            $entity = $this->_cacheInstance->newEntity($item['entity']);
            $entityID = $entity->getID();
        }

        $htlink = '';
        if (isset($item['link']))
            $htlink = $item['link'];

        $desc = '';
        if (isset($item['desc']))
            $desc = $this->_translateInstance->getTranslate($item['desc']);

        $icon = '';
        if (isset($item['icon']))
            $icon = $item['icon'];

        $type = $object->getType('all');
        // Extrait un nom d'objet à afficher de façon correcte.
        $entityName = '';
        if ($entityID != '0')
            $entityName = $entity->getFullName('all');

        if ($object->getIsEntity('all'))
            $name = $object->getFullName('all');
        else
            $name = $object->getName('all');
        $namesize = 21;
        $shortname = $name;

        // Normalise la variable si vide.
        $htlink = $this->prepareDefaultObjectOrGroupOrEntityHtlink($object, $htlink);
        ?>

        <div class="oneActionItem" id="<?php
        if ($entityID == $this->_applicationInstance->getCurrentEntityID())
            echo 'selfEntity';
        else
            echo 'otherEntity';
        ?>">
            <div class="oneActionItem-top">
                <div class="oneAction-icon">
                    <?php $this->displayObjectColorIcon($object, $htlink, $icon); ?>
                </div>
                <?php
                if ($entityName != '') {
                    ?>

                    <div class="oneAction-entityname">
                        <p><?php $this->_applicationInstance->getDisplayInstance()->displayInlineObjectColorIconName($entityID); ?></p>
                    </div>
                    <?php
                }
                ?>

                <div class="oneAction-title">
                    <p><?php $this->displayHypertextLink($shortname, $htlink); ?></p>
                </div>
                <?php
                if (isset($item['desc'])
                    && strlen($item['desc']) != 0
                ) {
                    ?>

                    <div class="oneAction-text">
                        <p><?php echo $desc; ?></p>
                    </div>
                    <?php
                }
                ?>

            </div>
            <?php
            if ($object->getMarkWarning()
                || $object->getMarkDanger()
                || $object->getMarkProtected()
                || (isset($item['actions'])
                    && sizeof($item['actions']) != 0
                )
            ) {
                ?>

                <div class="oneActionItem-bottom">
                    <?php
                    if ($object->getMarkWarning()) {
                        ?>

                        <div class="oneAction-warn">
                            <p><?php
                                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_IWARN);
                                $this->displayUpdateImage(
                                    $icon,
                                    '::::display:content:warningTaggedWarning',
                                    'iconInlineDisplay');
                                echo ' ';
                                echo $this->_translateInstance->getTranslate('::::display:content:warningTaggedWarning'); ?></p>
                        </div>
                        <?php
                    }
                    if ($object->getMarkDanger()) {
                        ?>

                        <div class="oneAction-error">
                            <p><?php
                                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_IERR);
                                $this->displayUpdateImage(
                                    $icon,
                                    '::::display:content:errorBan',
                                    'iconInlineDisplay');
                                echo ' ';
                                echo $this->_translateInstance->getTranslate('::::display:content:errorBan'); ?></p>
                        </div>
                        <?php
                    }
                    if ($object->getMarkProtected()) {
                        ?>

                        <div class="oneAction-ok">
                            <p><?php
                                $icon = $this->_cacheInstance->newNode(self::DEFAULT_ICON_LK);
                                $this->displayUpdateImage(
                                    $icon,
                                    '::::display:content:ObjectProctected',
                                    'iconInlineDisplay');
                                echo ' ';
                                echo $this->_translateInstance->getTranslate('::::display:content:ObjectProctected'); ?></p>
                        </div>
                        <?php
                    }
                    if (isset($item['actions'])
                        && sizeof($item['actions']) != 0
                    ) {
                        ?>

                        <div class="oneAction-actions">
                            <?php
                            foreach ($item['actions'] as $action) {
                                if (is_a($action['icon'], 'Nebule\Library\Node'))
                                    $icon = $action['icon'];
                                else
                                    $icon = $this->_cacheInstance->newNode($action['icon']);
                                $actionIcon = $this->convertUpdateImage($icon, $action['name'], 'iconInlineDisplay');
                                $actionName = $this->_translateInstance->getTranslate($action['name']);
                                echo '<p>' . $actionIcon . ' ' . $this->convertHypertextLink($actionName, $action['link']) . "</p>\n";
                                unset($actionIcon, $actionName);
                            }
                            ?>
                        </div>
                        <?php
                    }
                    ?>
                </div>
                <?php
            }
            ?>

        </div>
        <?php
        unset($object, $entityName, $name, $shortname, $icon, $desc);
    }


    /**
     * Show security warning.
     * $size = tiny|small|medium|large|full
     *
     * @param string $size
     * @param bool   $displayOk
     * @return string
     */
    public function displaySecurityAlert(string $size, bool $displayOk = false): string
    {
        $error = 'ok';
        $param = array(
            'enableDisplayAlone' => true,
            'enableDisplayIcon' => true,
            'informationType' => 'warn',
            'displayRatio' => 'short',
            'displaySize' => $size,
        );
        if ($this->_rescueInstance->getModeRescue()) {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED('::::RESCUE', $param);
            $error = 'wr';
        }
        if ($this->_applicationInstance->getCheckSecurityCryptoHash() == 'WARN') {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityCryptoHashMessage(), $param);
            $error = 'wr';
        }
        if ($this->_applicationInstance->getCheckSecurityCryptoHash() == 'ERROR') {
            $param['informationType'] = 'error';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityCryptoHashMessage(), $param);
            $error = 'er';
        }
        if ($this->_applicationInstance->getCheckSecurityCryptoSym() == 'WARN') {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityCryptoSymMessage(), $param);
            $error = 'wr';
        }
        if ($this->_applicationInstance->getCheckSecurityCryptoSym() == 'ERROR') {
            $param['informationType'] = 'error';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityCryptoSymMessage(), $param);
            $error = 'er';
        }
        if ($this->_applicationInstance->getCheckSecurityCryptoAsym() == 'WARN') {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityCryptoAsymMessage(), $param);
            $error = 'wr';
        }
        if ($this->_applicationInstance->getCheckSecurityCryptoAsym() == 'ERROR') {
            $param['informationType'] = 'error';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityCryptoAsymMessage(), $param);
            $error = 'er';
        }
        if ($this->_applicationInstance->getCheckSecurityBootstrap() == 'ERROR') {
            $param['informationType'] = 'error';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityBootstrapMessage(), $param);
            $error = 'er';
        }
        if ($this->_applicationInstance->getCheckSecurityBootstrap() == 'WARN') {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityBootstrapMessage(), $param);
            $error = 'wr';
        }
        if ($this->_applicationInstance->getCheckSecuritySign() == 'WARN') {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecuritySignMessage(), $param);
            $error = 'wr';
        }
        if ($this->_applicationInstance->getCheckSecuritySign() == 'ERROR') {
            $param['informationType'] = 'error';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecuritySignMessage(), $param);
            $error = 'er';
        }
        if ($this->_applicationInstance->getCheckSecurityURL() == 'WARN') {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED($this->_applicationInstance->getCheckSecurityURLMessage(), $param);
            $error = 'wr';
        }
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')) {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED('::::warn_ServNotPermitWrite', $param);
            $error = 'wr';
        }
        if ($this->_nebuleInstance->getCacheInstance()->getFlushCache()) {
            $param['informationType'] = 'warn';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED('::::warn_flushSessionAndCache', $param);
            $error = 'wr';
        }
        if ( $displayOk && $error == 'ok')
        {
            $param['informationType'] = 'ok';
            echo $this->_applicationInstance->getDisplayInstance()->getDisplayInformation_DEPRECATED('::::SecurityChecks', $param);
        }
        return $error;
    }

    protected function _displayCurentEntityOnHeader(bool $enableLink = true): void
    {
        $instance = new DisplayObject($this->_applicationInstance);
        $instance->setNID($this->_entitiesInstance->getCurrentEntityInstance());
        $instance->setEnableColor(true);
        $instance->setEnableIcon(true);
        $instance->setEnableName(true);
        $instance->setEnableRefs(false);
        $instance->setEnableNID(false);
        $instance->setEnableFlags(true);
        $instance->setEnableFlagProtection(false);
        $instance->setEnableFlagObfuscate(false);
        $instance->setEnableFlagUnlocked(true);
        $instance->setEnableFlagState(true);
        $instance->setEnableFlagEmotions(false);
        $instance->setEnableStatus(false);
        $instance->setEnableContent(false);
        $instance->setEnableActions(false);
        $instance->setEnableJS(false);
        $instance->setEnableLink($enableLink);
        $instance->setSize(DisplayItem::SIZE_MEDIUM);
        $instance->setRatio(DisplayItem::RATIO_SHORT);
        $instance->setFlagUnlocked($this->_entitiesInstance->getCurrentEntityIsUnlocked());
        $instance->display();
    }

    static public function docDispTitle(int $level, string $id, string $title): void {
        if ($level > 7
            || $level < 1
            || $id == ''
            || $title == ''
        ) {
            echo "\n<br /><br /><i>Invalid title!</i><br /><br />";
            return;
        }
        $dId=strtolower($id);
        $uId=strtoupper($id);

        echo "<h$level id=\"$dId\"></h$level><p>--<br /><br /><br /></p><h$level>$uId / $title</h$level>\n";
    }

    /**
     * Affiche dans les barres de titres l'icône d'aide contextuelle.
     * @param string $help
     */
    protected function _displayDivOnlineHelp_DEPRECATED(string $help): void
    {
        // Si authorisé à afficher l'aide.
        if ($this->_configurationInstance->getOptionUntyped('sylabeDisplayOnlineHelp')) {
            // Prépare le texte à afficher dans la bulle.
            $txt = $this->_applicationInstance->getTranslate()->getTranslate($help);
            $txt = str_replace('&', '&amp;', $txt);
            $txt = str_replace('"', '&quot;', $txt);
            $txt = str_replace("'", '&acute;', $txt);
            //$txt = str_replace('<','&lt;',$txt);
            $txt = str_replace("\n", ' ', $txt);
            // Prépare l'extension de lien.
            $linkext = 'onmouseover="montre(\'<b>' . $this->_applicationInstance->getTranslate()->getTranslate('Aide') . ' :</b><br />' . $txt . '\');" onmouseout="cache();"';
            unset($txt);
            // Affiche la bulle et le texte.
            ?>

            <div style="float:right;">
                <?php
                $image = $this->prepareIcon(self::DEFAULT_ICON_HELP);
                ?>

                <img alt="[]" src="<?php echo $image; ?>" class="iconNormalDisplay"
                     id="curseur" <?php echo $linkext; ?> />
            </div>
            <?php
            unset($linkext, $image);
        }
    }

    /**
     * Affiche le titre pour un paragraphe de texte. Par défaut, affiche le titre H1.
     *
     * @param Node $icon
     * @param string $title
     * @param string $desc
     * @param string $help
     * @return void
     */
    public function displayDivTextTitle_DEPRECATED(Node $icon, string $title = '', string $desc = '', string $help = ''): void
    {
        $this->displayDivTextTitleH1_DEPRECATED($icon, $title, $desc, $help);
    }

    /**
     * Affiche le titre H1 pour un paragraphe de texte.
     *
     * @param Node $icon
     * @param string $title
     * @param string $desc
     * @param string $help
     * @return void
     */
    public function displayDivTextTitleH1_DEPRECATED(Node $icon, string $title = '', string $desc = '', string $help = ''): void
    {
        ?>

        <div class="textTitle">
            <?php
            if ($title != '') {
                $title = $this->_applicationInstance->getTranslate()->getTranslate($title);
            }

            if ($desc == '') {
                $desc = '-';
            } else {
                $desc = $this->_applicationInstance->getTranslate()->getTranslate($desc);
            }

            $this->_displayDivOnlineHelp_DEPRECATED($help);
            ?>

            <div style="float:left;">
                <?php $this->displayUpdateImage($icon, $title, 'iconegrandepuce'); ?>

            </div>
            <h1 class="divHeaderH1"><?php echo $title; ?></h1>
            <p class="hideOnSmallMedia"><?php echo $desc; ?></p>
        </div>
        <?php

    }

    /**
     * Affiche le titre H2 pour un paragraphe de texte.
     *
     * @param Node $icon
     * @param string $title
     * @param string $desc
     * @param string $help
     * @return void
     */
    public function displayDivTextTitleH2_DEPRECATED(Node $icon, string $title = '', string $desc = '', string $help = ''): void
    {
        ?>

        <div class="textTitle2">
            <?php
            if ($title != '') {
                $title = $this->_applicationInstance->getTranslate()->getTranslate($title);
            }

            if ($desc == '') {
                $desc = '-';
            } else {
                $desc = $this->_applicationInstance->getTranslate()->getTranslate($desc);
            }

            $this->_displayDivOnlineHelp_DEPRECATED($help);
            ?>

            <div style="float:left;">
                <?php $this->displayUpdateImage($icon, $title, 'iconegrandepuce'); ?>

            </div>
            <h2 class="divHeaderH2"><?php echo $title; ?></h2>
            <p class="hideOnSmallMedia"><?php echo $desc; ?></p>
        </div>
        <?php

    }
}



// ========================================================================================
//   702_display_title.php
//   020250217145335
//   10954bd638af33593b3680f15960d23407b00f5b74fe804c5f70dabe6cfc4860.sha2.256

/**
 * Classe DisplayTitle
 *       ---
 * Display or prepare a title message to the interface with the user.
 *       ---
 * Example:
 *  $instance = new DisplayTitle($this->_applicationInstance);
 *  $instance->setTitle('Title', 'arg1', 'arg2', 'arg3', 'arg4', 'arg5');
 *  $icon = $this->_cacheInstance->newNode(Displays::DEFAULT_ICON_IOK);
 *  $instance->setIcon($icon);
 *  $instance->setEnableEntity(false);
 *  $instance->display();
 *       ---
 * Usage:
 *  FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayTitle extends DisplayItemIconable implements DisplayInterface
{
    private string $_title = '';
    private bool $_displayEntity = false;

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_title == '')
            return '';

        $result = '<div class="layoutTitle">' . "\n";
        $result .= ' <div class="titleContent">' . "\n";
        $result .= '  <div class="titleContentDiv">' . "\n";
        $this->_getIconHTML($result);
        $this->_getTitleHTML($result);
        $result .= "  </div>\n";
        $this->_getEntityHTML($result);
        $result .= " </div>\n";
        $result .= "</div>\n";

        return $result;
    }

    private function _getIconHTML(&$result): void
    {
        if ($this->_icon === null || $this->_icon->getID() == '0')
            return;

        $result .= '<div class="titleContentIcon">';
        $result .= $this->_displayInstance->convertUpdateImage($this->_icon, $this->_title);
        $result .= '</div>' . "\n";
    }

    private function _getTitleHTML(&$result): void
    {
        $result .= '<h1>' . $this->_title . "</h1>\n";
    }

    private function _getEntityHTML(&$result): void
    {
        if ($this->_applicationInstance->getCurrentEntityID() != $this->_entitiesInstance->getCurrentEntityID()
            || $this->_configurationInstance->getOptionUntyped('forceDisplayEntityOnTitle')
            || $this->_displayEntity
        ) {
            $result .= '<div class="titleContentEntity">';

            // TODO rewrite this...
            $instance = new DisplayObject($this->_applicationInstance);
            $instance->setNID($this->_applicationInstance->getCurrentEntityInstance());
            $instance->setEnableColor(true);
            $instance->setEnableIcon(true);
            $instance->setEnableRefs(false);
            $instance->setEnableName(true);
            $instance->setEnableNID(false);
            $instance->setEnableFlags(false);
            $instance->setEnableStatus(false);
            $instance->setEnableContent(false);
            $instance->setSize(DisplayItem::SIZE_SMALL);
            $instance->setRatio(DisplayItem::RATIO_SHORT);
            $instance->setEnableJS(false);
            $instance->setEnableActions(false);
            $result .= $instance->getHTML();

            $result .= '</div>' . "\n";
        }
    }

    public function setTitle(string $title,
                             string $arg1 = '',
                             string $arg2 = '',
                             string $arg3 = '',
                             string $arg4 = '',
                             string $arg5 = ''): void
    {
        $this->_title = sprintf($this->_translateInstance->getTranslate($title), $arg1, $arg2, $arg3, $arg4, $arg5);
    }

    public function setEnableEntity(bool $enable): void
    {
        $this->_displayEntity = $enable;
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS for DisplayTitle(). */
            .layoutTitle {
                margin-bottom: 10px;
                margin-top: 32px;
                width: 100%;
                height: 32px;
                text-align: center;
            }

            .titleContent {
                margin: auto;
                text-align: center;
            }

            .titleContentDiv {
                display: inline-block;
                background: #333333;
                height: 32px;
                width: 384px;
            }

            .titleContentEntity {
                display: inline-block;
            }

            .titleContentEntity .layoutObject {
                margin: -11px 0 0 0;
            }

            .titleContentIcon {
                float: left;
            }

            .titleContentIcon img {
                height: 32px;
                width: 32px;
                margin-right: 5px;
            }

            .titleContent h1 {
                font-size: 1.2rem;
                font-weight: bold;
                color: #ababab;
                overflow: hidden;
                white-space: nowrap;
                margin-top: 5px;
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   703_display_information.php
//   020250215163515
//   e19db34ca3e7d24b111727b2121051a31383d4c3cb06997b633d3afce111964d.sha2.256

/**
 * Classe DisplayInformation
 *     ---
 * Display or prepare a message to the interface with the user.
 *     ---
 * Example:
 *  $instance = new DisplayInformation($this->_applicationInstance);
 *  $instance->setMessage('Message to user', 'arg1', 'arg2', 'arg3', 'arg4', 'arg5');
 *  $instance->setDisplayAlone(true);
 *  $instance->setType(DisplayInformation::TYPE_MESSAGE);
 *  $instance->setIconText('Alternative text on icon');
 *  $instance->setSize(self::SIZE_MEDIUM);
 *  $instance->setRatio(self::RATIO_SHORT);
 *  $icon = $this->_cacheInstance->newNode(Displays::DEFAULT_ICON_IOK);
 *  $instance->setIcon($icon);
 *  $instance->setLink('https://nebule.org');
 *  $instance->display();
 *     ---
 * Usage:
 *   - setMessage : Define message to display. If empty, nothing will be displayed.
 *       If empty, nothing displayed.
 *       Default: empty.
 *       String
 *   - setDisplayAlone : Affiche le message dans une position identique à un titre. C'est utilisé pour un message isolé.
 *       Default: true
 *       Boolean
 *   - setType : Détermine le type de message.
 *       Les types disponibles :
 *       - DisplayInformation::TYPE_MESSAGE : affichage d'un message simple en blanc sur fond noir transparent.
 *       - DisplayInformation::TYPE_OK : affichage d'un message de validation en blanc sur fond vert.
 *       - DisplayInformation::TYPE_WARN : affichage d'un message d'avertissement en jaune gras sur fond orange clair.
 *       - DisplayInformation::TYPE_ERROR : affichage d'un message d'erreur en rouge gras sur fond rose clair.
 *       - DisplayInformation::TYPE_INFORMATION : affichage d'un message simple en noir sur fond blanc transparent (style d'affichage des objets).
 *       - DisplayInformation::TYPE_GO : affichage d'un message pour valider une action.
 *       - DisplayInformation::TYPE_BACK : affichage d'un message de retour arrière.
 *       Default: DisplayInformation::TYPE_INFORMATION
 *       String
 *   - setIconText : Détermine le nom du type de message à afficher.
 *       If empty, no alternate text displayed.
 *       Default: empty.
 *       String
 *   - setSize : Détermine la taille de l'affichage de l'élément complet.
 *       Tailles disponibles :
 *       - DisplayInformation::SIZE_TINY : très petite taille correspondant à un carré de base de 16 pixels de large.
 *           Certains éléments ne sont pas affichés.
 *       - DisplayInformation::SIZE_SMALL : petite taille correspondant à un carré de base de 32 pixels de large.
 *       - DisplayInformation::SIZE_MEDIUM : taille moyenne correspondant à un carré de base de 64 pixels de large par défaut.
 *       - DisplayInformation::SIZE_LARGE : grande taille correspondant à un carré de base de 128 pixels de large par défaut.
 *       - DisplayInformation::SIZE_FULL : très grande taille correspondant à un carré de base de 256 pixels de large par défaut.
 *       Default: self::SIZE_MEDIUM
 *       String
 *   - setRatio : Détermine la forme de l'affichage par son ratio dans la mesure du possible si pas d'affichage du contenu de l'objet.
 *       Ratios disponibles :
 *       - DisplayInformation::RATIO_SQUARE : forme carrée de 2x2 displaySize.
 *       - DisplayInformation::RATIO_SHORT : forme plate courte de 6x1 displaySize.
 *       - DisplayInformation::RATIO_LONG : forme plate longue de toute largeur disponible.
 *       Default: DisplayInformation::RATIO_SHORT
 *       String
 *   - setIcon : Détermine l'icône à utiliser.
 *       Si null, l'icône est sélectionnée automatiquement en fonction du type de message.
 *       Default: null
 *       Node/null
 *   - setLink : Détermine le lien HTML à utiliser.
 *       If empty, no link displayed.
 *       Default: empty.
 *   - getHTML : Get HTML code to use.
 *   - display : Display HTML code.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayInformation extends DisplayItemIconMessageSizeable implements DisplayInterface
{
    private bool $_displayAlone = false;

    protected function _init(): void
    {
        $this->setType(self::TYPE_INFORMATION);
        $this->setSize();
        $this->setRatio();
    }

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_message == '')
            return '';

        $result = $this->_getAloneStartHTML()
            . $this->_getLinkStartHTML();
        if ($this->_sizeCSS == self::SIZE_TINY)
            $result .= $this->_getTinyHTML();
        else
            $result .= $this->_getNotTinyHTML();
        $result .= $this->_getLinkEndHTML()
            . $this->_getAloneEndHTML()
            . "\n";

        return $result;
    }

    private function _getAloneStartHTML(): string
    {
        if ($this->_displayAlone)
            return '<div class="layoutAloneItem"><div class="aloneItemContent">';
        return '';
    }

    private function _getAloneEndHTML(): string
    {
        if ($this->_displayAlone)
            return '</div></div>';
        return '';
    }

    private function _getLinkStartHTML(): string
    {
        if ($this->_link != '')
            return '<a href="' . $this->_link . '">';
        return '';
    }

    private function _getLinkEndHTML(): string
    {
        if ($this->_link != '')
            return '</a>';
        return '';
    }

    private function _getTinyHTML(): string
    {
        $result = '';
        if ($this->_icon !== null)
            $result .= '<span style="font-size:1em" class="objectTitleIconsInline">' . $this->_getImageHTML($this->_icon, $this->_iconText) . '</span>';
        $result .= $this->_message;
        return $result;
    }

    private function _getNotTinyHTML(): string
    {
        $padding = 0;
        $result = '<div class="layoutObject layoutInformation">';
        $result .= '<div class="objectTitle objectDisplay' . $this->_sizeCSS . $this->_ratioCSS . ' informationDisplay informationDisplay' . $this->_sizeCSS . ' informationDisplay' . $this->_type . '">';
        $result .= '<div class="objectTitleIcons informationTitleIcons informationTitleIcons' . $this->_type . '">';
        if ($this->_icon !== null) {
            $result .= $this->_getImageHTML($this->_icon, $this->_iconText);
            $padding = 1;
        }
        $result .= '</div>';
        $result .= '<div class="objectTitleText' . $padding . ' informationTitleText informationTitle' . $this->_sizeCSS . 'Text">';
        $result .= '<div class="objectTitleRefs objectTitle' . $this->_sizeCSS . 'Refs informationTitleRefs informationTitleRefs' . $this->_type . '">' . $this->_translateInstance->getTranslate($this->_iconText) . '</div>';
        $result .= '<div class="informationTitleName informationTitleName' . $this->_type . ' informationTitle' . $this->_sizeCSS . 'Name">' . $this->_message . '</div>';
        $result .= '</div></div></div>';
        return $result;
    }

    public function setDisplayAlone(bool $enable): void
    {
        $this->_displayAlone = $enable;
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS for DisplayInformation(). */
            .informationTitleIcons img {
                background: none;
            }

            .informationDisplay {
                height: auto;
            }

            .informationDisplayMessage {
                background: #333333;
            }

            .informationDisplayOk {
                background: #103020;
            }

            .informationDisplayWarn {
                background: #ffe080;
            }

            .informationDisplayError {
                background: #ffa0a0;
            }

            .informationDisplayInformation {
                background: #ababab;
            }

            .informationDisplayGo {
                background: #abbcab;
            }

            .informationDisplayBack {
                background: #abbccd;
            }

            .informationTitleText {
                background: none;
                height: auto;
            }

            .informationDisplayTiny {
            }

            .informationDisplaySmall {
                min-height: 32px;
                font-size: 32px;
                border: 0;
            }

            .informationDisplayMedium {
                min-height: 64px;
                font-size: 64px;
                border: 0;
            }

            .informationDisplayLarge {
                min-height: 128px;
                font-size: 128px;
                border: 0;
            }

            .informationDisplayFull {
                min-height: 256px;
                font-size: 256px;
                border: 0;
            }

            .informationTitleTinyText {
                min-height: 16px;
                background: none;
            }

            .informationTitleSmallText {
                min-height: 30px;
                text-align: left;
                padding: 1px 0 1px 1px;
                color: #000000;
            }

            .informationTitleMediumText {
                min-height: 58px;
                text-align: left;
                padding: 3px 0 3px 3px;
                color: #000000;
            }

            .informationTitleLargeText {
                min-height: 122px;
                text-align: left;
                padding: 3px 0 3px 3px;
                color: #000000;
            }

            .informationTitleFullText {
                min-height: 246px;
                text-align: left;
                padding: 5px 0 5px 5px;
                color: #000000;
            }

            .informationTitleName {
                font-weight: normal;
                overflow: hidden;
                height: auto;
            }

            .informationTitleNameMessage, .informationTitleRefsMessage {
                color: #ffffff;
            }

            .informationTitleNameOk, .informationTitleRefsOk {
                color: #ffffff;
            }

            .informationTitleNameWarn, .informationTitleRefsWarn {
                color: #ff8000;
            }

            .informationTitleNameGo, .informationTitleRefsGo {
                color: #ffffff;
            }

            .informationTitleNameBack, .informationTitleRefsBack {
                color: #ffffff;
            }

            .informationTitleNameWarn {
                font-weight: bold;
            }

            .informationTitleNameError, .informationTitleRefsError {
                color: #ff0000;
            }

            .informationTitleNameError {
                font-weight: bold;
            }

            .informationTitleNameInformation, .informationTitleRefsInformation {
                color: #000000;
            }

            .informationTitleTinyName {
                height: 1rem;
                line-height: 1rem;
                font-size: 1rem;
            }

            .informationTitleSmallName {
                line-height: 14px;
                overflow: hidden;
                white-space: normal;
                font-size: 1rem;
            }

            .informationTitleMediumName {
                line-height: 22px;
                overflow: hidden;
                white-space: normal;
                font-size: 1.2rem;
            }

            .informationTitleLargeName {
                line-height: 30px;
                overflow: hidden;
                white-space: normal;
                font-size: 1.5rem;
            }

            .informationTitleFullName {
                line-height: 62px;
                overflow: hidden;
                white-space: normal;
                font-size: 2rem;
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   704_display_object.php
//   020250222173351
//   07df9c1cb035cb7170367ea2fff3878c1e9ba545dce8cd0fbe2a330e41f10311.sha2.256

/**
 * Classe DisplayObject
 *       ---
 *  FIXME
 *  Retourne la représentation html de l'objet en fonction des paramètres passés.
 *  Les paramètres d'activation de contenus :
 *  - enableDisplayColor : Affiche le carré de couleur.
 *      Par défaut true : affiche le carré de couleur.
 *      enableDisplayIconApp doit être à false.
 *      Boolean
 *  - enableDisplayIcon : Affiche le carré avec l'image attaché à l'objet ou l'icône de son type sur la couleur de l'objet en fond.
 *      Par défaut true : affiche le carré de l'image/icône.
 *      enableDisplayIconApp doit être à false.
 *      Boolean
 *  - enableDisplayIconApp : Affiche le carré de couleur avec le nom long et court d'une application.
 *      Par défaut true : affiche le carré de couleur avec le nom.
 *      Boolean
 *  - enableDisplayRefs : Affiche le(s) référence(s) de l'objet (signataire du lien).
 *      enableDisplayName doit être à true.
 *      Par défaut false : n'affiche pas la référence.
 *      Boolean
 *  - enableDisplayName : Affiche le nom de l'objet.
 *      Par défaut true : affiche le nom.
 *      Boolean
 *  - enableDisplayID : Affiche l'ID de l'objet.
 *      Par défaut false : n'affiche pas l'ID.
 *      Boolean
 *  - enableDisplayFlags : Affiche les icônes d'état de l'objet (protection...).
 *      enableDisplayName doit être à true.
 *      Par défaut false : n'affiche pas les icônes d'état.
 *      Boolean
 *  - enableDisplayFlagEmotions : Affiche les icônes des émotions de l'objet sans les compteurs.
 *      enableDisplayFlags et l'option displayEmotions doivent être à true.
 *      Par défaut false : n'affiche pas les icônes.
 *      Boolean
 *  - enableDisplayFlagProtection : Affiche l'icône de protection de l'objet.
 *      enableDisplayFlags doit être à true.
 *      L'option permitProtectedObject doit être à true.
 *      Par défaut false : n'affiche pas l'icône.
 *      Boolean
 *  - enableDisplayFlagObfuscate : Affiche l'icône de dissimulation de l'objet.
 *      enableDisplayFlags doit être à true.
 *      L'option permitObfuscatedLink doit être à true.
 *      Par défaut false : n'affiche pas l'icône.
 *      Boolean
 *  - enableDisplayFlagUnlocked : Affiche l'icône de déverrouillage de l'entité.
 *      enableDisplayFlags doit être à true.
 *      Par défaut false : n'affiche pas l'icône.
 *      Boolean
 *  - enableDisplayFlagActivated : Affiche l'icône d'activation de l'objet.
 *      enableDisplayFlags doit être à true.
 *      Par défaut false : n'affiche pas l'icône.
 *      Boolean
 *  - enableDisplayFlagState : Affiche l'icône d'état de l'objet.
 *      enableDisplayFlags doit être à true.
 *      Par défaut false : n'affiche pas l'icône.
 *      Boolean
 *  - enableDisplayStatus : Affiche le status de l'objet (indicatif).
 *      Par défaut false : n'affiche pas le status.
 *      Boolean
 *  - enableDisplayContent : Affiche le contenu de l'objet si possible.
 *      Par défaut false : n'affiche pas le contenu.
 *      Boolean
 *  - enableDisplayLink2Object : Affiche le lien HTML vers l'objet :
 *      Sur le nom de l'objet.
 *      Sur le carré de couleur et sur l'image/icône de l'objet, ou si le menu des actions est activé le menu remplace le lien HTML.
 *      Par défaut true : affiche le lien ou le menu.
 *      Boolean
 *  - enableDisplayObjectActions : Affiche le menu des actions liées à l'objet.
 *      Sinon le lien de l'objet est utilisé à la place.
 *      enableDisplayLink2Object doit être à true.
 *      Par défaut true : affiche le menu.
 *      Boolean
 *  - enableDisplayLink2Refs : Affiche le lien HTML vers le(s) référence(s) de l'objet.
 *      enableDisplayRefs doit être à true.
 *      Par défaut true : affiche le lien.
 *      Boolean
 *  - enableDisplaySelfHook : Affiche les actions principales de l'objet utilisé.
 *      enableDisplayObjectActions doit être à true.
 *      Par défaut true : affiche les actions.
 *      Boolean
 *  - enableDisplayTypeHook : Affiche les actions secondaires de l'objet par rapport à son type.
 *      enableDisplayObjectActions doit être à true.
 *      Par défaut true si enableDisplayJS : affiche les actions.
 *      Par défaut false si pas enableDisplayJS : n'affiche pas les actions.
 *      Boolean
 *  - enableDisplayJS : Utilise le Java Script pour le menu des actions.
 *      Si false, le menu n'est pas caché et son contenu s'affiche sous la barre de titre de l'objet.
 *      Par défaut true : utilise le Java Script.
 *      Boolean
 *  Les paramètres de définition de contenus :
 *  - social : Détermine le niveau social de tri des liens.
 *      Par défaut vide : utilise le niveau social par défaut.
 *      String
 *  - setType : Détermine le type d'objet pour le traitement.
 *      Par défaut null : le type est extrait en fonction du niveau social.
 *      String
 *  - objectName : Détermine le nom de l'objet ou un texte de remplacement.
 *      enableDisplayName doit être à true.
 *      Par défaut null : le nom complet est extrait en fonction du niveau social.
 *      Si enableDisplayIconApp à true, le nom simple est extrait en fonction du niveau social.
 *      String
 *  - objectAppShortName : Détermine le nom de l'objet ou un texte de remplacement.
 *      enableDisplayIconApp doit être à true.
 *      Par défaut null : le nom court (prénom) est extrait en fonction du niveau social.
 *      String
 *  - objectIcon : Détermine l'image de l'objet.
 *      enableDisplayIcon doit être à true.
 *      Le fond est de la couleur de l'objet.
 *      Par défaut null : l'image est une icône représentant le type d'objet.
 *      String
 *  - objectRefs : Détermine la liste des références de l'objet affiché, ou autres entités.
 *      Si c'est un text, affiche juste le texte après un filtre.
 *      Par défaut vide.
 *      Array of string|Object ou string
 *  - link2Object : Détermine le lien HTML vers l'objet.
 *      Par défaut vide : le lien est préparé vers l'objet en fonction de son type.
 *      String
 *  - flagProtection : Détermine l'icône de protection de l'objet.
 *      enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
 *      Par défaut false : icône éteinte.
 *      Boolean
 *  - flagProtectionIcon : Détermine l'icône de protection de l'objet.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
 *      Par défaut vide : icône de lien de chiffrement LK.
 *      String
 *  - flagProtectionText : Détermine l'icône de protection de l'objet.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
 *      Par défaut vide : Texte standard traduit.
 *      String
 *  - flagProtectionLink : Détermine le lien HTML de l'icône de protection de l'objet.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
 *      Par défaut vide.
 *      String
 *  - flagObfuscate : Détermine l'icône de dissimulation de l'objet.
 *      enableDisplayFlags et enableDisplayFlagObfuscate doivent être à true.
 *      Par défaut false : icône éteinte.
 *      Boolean
 *  - flagObfuscateIcon : Détermine l'icône de dissimulation de l'objet.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagObfuscate doivent être à true.
 *      Par défaut vide : icône de lien de dissimulation LC.
 *      String
 *  - flagObfuscateText : Détermine l'icône de dissimulation de l'objet.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagObfuscate doivent être à true.
 *      Par défaut vide : Texte standard traduit.
 *      String
 *  - flagObfuscateLink : Détermine le lien HTML de l'icône de dissimulation de l'objet.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagProtection doivent être à true.
 *      Par défaut vide.
 *      String
 *  - flagUnlocked : Détermine l'icône de déverrouillage de l'entité.
 *      enableDisplayFlags et enableDisplayFlagUnlocked doivent être à true.
 *      Par défaut dépend de l'état de l'entité.
 *      Si pas une entité, par défaut false : icône éteinte.
 *      Boolean
 *  - flagUnlockedIcon : Détermine l'icône de déverrouillage de l'entité.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagUnlocked doivent être à true.
 *      Par défaut vide : icône de lien de chiffrement LK.
 *      String
 *  - flagUnlockedText : Détermine l'icône de déverrouillage de l'entité.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagUnlocked doivent être à true.
 *      Par défaut vide : Texte standard traduit.
 *      String
 *  - flagUnlockedLink : Détermine le lien HTML de l'icône de déverrouillage de l'entité.
 *      Permet de détourner le bouton de son usage primaire.
 *      enableDisplayFlags et enableDisplayFlagUnlocked doivent être à true.
 *      Par défaut vide.
 *      String
 *  - flagActivated : Détermine l'icône d'activation de l'objet.
 *      enableDisplayFlags et enableDisplayFlagActivateded doivent être à true.
 *      Par défaut false : icône rouge en croix.
 *      Si à true, icône verte validée.
 *      Boolean
 *  - flagActivatedDesc : Détermine le texte de description de l'activation de l'objet.
 *      enableDisplayFlags et enableDisplayFlagActivated doivent être à true.
 *      Par défaut vide : calcul la description de l'état de l'objet.
 *      Le texte de ces état est traduit.
 *      Par défaut est calculé par rapport à flagActivated :
 *        - false : ':::display:content:NotActived'
 *        - true  : ':::display:content:Actived'
 *      String
 *  - flagState : Détermine l'icône de l'état de l'objet.
 *      enableDisplayFlags et enableDisplayFlagState doivent être à true.
 *      Par défaut vide : calcul l'état de l'objet.
 *      Les états possibles sont :
 *        - e : l'objet est taggé 'banni' ;
 *        - w : l'objet est taggé 'warning' ;
 *        - n : l'objet n'est pas présent ;
 *        - o : OK tout va bien.
 *      String
 *  - flagStateDesc : Détermine le texte de description de l'état de l'objet.
 *      enableDisplayFlags et enableDisplayFlagState doivent être à true.
 *      Par défaut vide : calcul la description de l'état de l'objet.
 *      Le texte de ces état est traduit.
 *      Par défaut est calculé par rapport à flagState :
 *        - e : '::::display:content:errorBan'
 *        - w : '::::display:content:warningTaggedWarning'
 *        - n : '::::display:content:errorNotAvailable'
 *        - o : '::::display:content:OK'
 *      String
 *  - flagMessage : Détermine un message à afficher au niveau des flags dépliés.
 *      enableDisplayFlags doit être à true.
 *      N'apparait pas comme icône simple.
 *      Par défaut vide : pas de message.
 *      String
 *  - flagTargetObject : Détermine un objet 'cible' (ou pas) à afficher au niveau des flags dépliés.
 *      enableDisplayFlags doit être à true.
 *      N'apparait pas comme icône simple. L'objet est affiché sous forme tiny.
 *      Par défaut vide : pas d'objet.
 *      String (hex)
 *  - status : Détermine le status de l'objet.
 *      Par défaut vide : pas de status.
 *      String
 *  - displaySize : Détermine la taille de l'affichage de l'élément complet.
 *      Tailles disponibles :
 *      - tiny : très petite taille correspondant à un carré de base de 16 pixels de large.
 *          Certains éléments ne sont pas affichés.
 *      - small : petite taille correspondant à un carré de base de 32 pixels de large.
 *      - medium : taille moyenne correspondant à un carré de base de 64 pixels de large par défaut.
 *      - large : grande taille correspondant à un carré de base de 128 pixels de large par défaut.
 *      - full : très grande taille correspondant à un carré de base de 256 pixels de large par défaut.
 *      Par défaut medium : taille moyenne.
 *      String
 *  - displayRatio : Détermine la forme de l'affichage par son ratio dans la mesure du possible si pas d'affichage du contenu de l'objet.
 *      Ratios disponibles :
 *      - square : forme carrée de 2x2 displaySize.
 *      - short : forme plate courte de 6x1 displaySize.
 *      - long : forme plate longue de toute largeure disponible.
 *      Par défaut short : forme plate courte.
 *      String
 *  - selfHookList : Détermine la liste des point d'encrage à utiliser pour les actions sur l'objet utilisé.
 *      Par défaut vide : est préparé en fonction de selfHookName.
 *      Array
 *  - selfHookName : Détermine le nom du point d'encrage à utiliser pour les actions sur l'objet utilisé.
 *      Par défaut vide : est préparé en fonction du type d'objet :
 *      - objet : selfMenuObject
 *      - entité : selfMenuEntity
 *      - groupe : selfMenuGroup
 *      - conversation : selfMenuConversation
 *      String
 *  - typeHookName : Détermine le nom du point d'encrage à utiliser pour les actions sur l'objet par rapport à son type.
 *      Par défaut vide : est préparé en fonction du type d'objet :
 *      - objet : typeMenuObject
 *      - entité : typeMenuEntity
 *      - groupe : typeMenuGroup
 *      - conversation : typeMenuConversation
 *      String
 *  Exemple de table de paramètres avec les valeurs par défaut :
 *  $param = array(
 *  'enableDisplayColor' => true,
 *  'enableDisplayIcon' => true,
 *  'enableDisplayIconApp' => false,
 *  'enableDisplayRefs' => false,
 *  'enableDisplayName' => true,
 *  'enableDisplayID' => false,
 *  'enableDisplayFlags' => false,
 *  'enableDisplayFlagEmotions' => true,
 *  'enableDisplayFlagProtection' => false,
 *  'enableDisplayFlagObfuscate' => false,
 *  'enableDisplayFlagUnlocked' => false,
 *  'enableDisplayFlagActivated' => false,
 *  'enableDisplayFlagState' => false,
 *  'enableDisplayStatus' => false,
 *  'enableDisplayContent' => false,
 *  'enableDisplayLink2Object' => true,
 *  'enableDisplayObjectActions' => true,
 *  'enableDisplayLink2Refs' => true,
 *  'enableDisplaySelfHook' => true,
 *  'enableDisplayTypeHook' => true,
 *  'enableDisplayJS' => true,
 *  'social' => '',
 *  'setType' => null,
 *  'objectName' => null,
 *  'objectAppShortName' => null,
 *  'objectIcon' => null,
 *  'objectRefs' => array(),
 *  'link2Object' => '',
 *  'flagProtection' => false,
 *  'flagProtectionIcon' => '',
 *  'flagProtectionText' => '',
 *  'flagProtectionLink' => '',
 *  'flagObfuscate' => false,
 *  'flagObfuscateIcon' => '',
 *  'flagObfuscateText' => '',
 *  'flagObfuscateLink' => '',
 *  'flagUnlocked' => false,
 *  'flagUnlockedIcon' => '',
 *  'flagUnlockedText' => '',
 *  'flagUnlockedLink' => '',
 *  'flagActivated' => false,
 *  'flagActivatedDesc' => '',
 *  'flagState' => '',
 *  'flagStateDesc' => '',
 *  'flagMessage' => '',
 *  'flagTargetObject' => '',
 *  'status' => '',
 *  'displaySize' => 'medium',
 *  'displayRatio' => 'short',
 *  'selfHookList' => array(),
 *  'selfHookName' => '',
 *  'typeHookName' => '',
 *  );
 *      ---
 * Example:
 * $instance = new DisplayObject($this->_applicationInstance);
 * $instance->setNID($nid);
 * $instance->setEnableColor(true);
 * $instance->setEnableIconApp(false);
 * $instance->setEnableRefs(true);
 * $instance->setEnableName(true);
 * $instance->setEnableNID(true);
 * $instance->setEnableFlags(true);
 * $instance->setEnableFlagEmotions(true);
 * $instance->setEnableFlagProtection(true);
 * $instance->setEnableFlagObfuscate(true);
 * $instance->setEnableFlagUnlocked(true);
 * $instance->setEnableFlagActivated(true);
 * $instance->setEnableFlagState(true);
 * $instance->setEnableStatus(true);
 * $instance->setEnableContent(true);
 * $instance->setEnableLink(true);
 * $instance->setEnableActions(true);
 * $instance->setEnableLink2Refs(true);
 * $instance->setEnableSelfHook(true);
 * $instance->setEnableTypeHook(true);
 * $instance->setEnableJS(true);
 * $instance->setSocial('all');
 * $instance->setType('Node');
 * $instance->setName('Name');
 * $instance->setAppShortName('Shortname');
 * $icon = $this->_cacheInstance->newNode(Displays::DEFAULT_ICON_IOK);
 * $instance->setIcon($icon);
 * $instance->setRefs(array());
 * $instance->setLink('https://nebule.org');
 * $instance->setFlagProtection(false);
 * $instance->setFlagProtectionIcon($icon);
 * $instance->setFlagProtectionText('Text');
 * $instance->setFlagProtectionLink('https://nebule.org');
 * $instance->setFlagObfuscate(false);
 * $instance->setFlagObfuscateIcon($icon);
 * $instance->setFlagObfuscateText('Text');
 * $instance->setFlagObfuscateLink('https://nebule.org');
 * $instance->setFlagUnlocked(false);
 * $instance->setFlagUnlockedIcon($icon);
 * $instance->setFlagUnlockedText('Text');
 * $instance->setFlagUnlockedLink('https://nebule.org');
 * $instance->setActivated(false);
 * $instance->setActivatedText('Text');
 * $instance->setFlagState('o');
 * $instance->setFlagStateText('Text');
 * $instance->setFlagMessage('Text');
 * $instance->setFlagTargetObject('https://nebule.org');
 * $instance->setStatus('');
 * $instance->setSize(self::SIZE_MEDIUM);
 * $instance->setRatio(self::RATIO_SHORT);
 * $instance->setSelfHookList(array());
 * $instance->setSelfHookName('Name');
 * $instance->setTypeHookName('Name');
 * $instance->display();
 *      ---
 * Usage:
 *  FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayObject extends DisplayItemIconMessageSizeable implements DisplayInterface
{
    private ?Node $_nid = null;
    private bool $_displayColor = true;
    private bool $_displayIcon = false;
    private bool $_displayIconApp = false;
    private bool $_displayRefs = false;
    private bool $_displayName = true;
    private bool $_displayNID = false;
    private bool $_displayFlags = false;
    private bool $_displayFlagEmotions = false;
    private bool $_displayFlagProtection = false;
    private bool $_displayFlagObfuscate = false;
    private bool $_displayFlagUnlocked = false;
    private bool $_displayFlagActivated = false;
    private bool $_displayFlagState = false;
    private bool $_displayStatus = false;
    private bool $_displayContent = false;
    private bool $_displayActions = false;
    private string $_actionsID = '';
    private bool $_displayLink = true;
    private bool $_displayLink2Refs = true;
    private bool $_displayJS = true;
    private bool $_displaySelfHook = true;
    private bool $_displayTypeHook = true;
    private string $_name = '';
    private string $_appShortname = '';
    private bool $_flagProtection = false;
    private ?Node $_flagProtectionIcon = null;
    private string $_flagProtectionText = '::::display:object:flag:unprotected';
    private string $_flagProtectionLink = '';
    private bool $_flagObfuscate = false;
    private ?Node $_flagObfuscateIcon = null;
    private string $_flagObfuscateText = '::::display:object:flag:unobfuscated';
    private string $_flagObfuscateLink = '';
    private bool $_flagUnlocked = false;
    private ?Node $_flagUnlockedIcon = null;
    private string $_flagUnlockedText = '::::display:object:flag:locked';
    private string $_flagUnlockedLink = '';
    private bool $_flagActivated = false;
    private string $_flagActivatedText = '::::display:object:flag:unactivated';
    private string $_flagState = '';
    private ?Node $_flagStateIcon = null;
    private string $_flagStateText = '';
    private string $_flagMessage = '';
    private ?Node $_flagTargetObject = null;
    private string $_status = '';
    private array $_refs = array();
    private string $_selfHookName = '';
    private string $_typeHookName = '';
    private array $_selfHookList = array();

    protected function _init(): void
    {
        $this->setSocial('');
        $this->setSize();
        $this->setRatio();
        $this->setEnableJS();
        $this->setActionsID();
    }

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null)
            return '';

        $result = '';

        // FIXME

        $this->_solveConflicts();

        $titleMenuIcons = $this->_getObjectColorHTML() . $this->_getObjectIconHTML();

        $titleLinkOpenImg = '';
        $titleLinkOpenName = '';
        $titleLinkCloseImg = '';
        $titleLinkCloseName = '';
        if ($this->_displayLink) {
            if ($this->_displayActions
                && $this->_displayJS
            ) {
                if ($this->_link != '')
                    $titleLinkOpenName = '<a href="' . $this->_link . '">';
                else
                    $titleLinkOpenName = '<a href="' . $this->_displayInstance->prepareDefaultObjectOrGroupOrEntityHtlink($this->_nid) . '">';
                $titleLinkCloseName = '</a>';
            } else {
                if ($this->_link != '')
                    $titleLinkOpenImg = '<a href="' . $this->_link . '">' . "\n";
                else
                    $titleLinkOpenImg = '<a href="' . $this->_displayInstance->prepareDefaultObjectOrGroupOrEntityHtlink($this->_nid) . '">';
                $titleLinkOpenName = $titleLinkOpenImg;
                $titleLinkCloseImg = '</a>';
                $titleLinkCloseName = $titleLinkCloseImg;
            }
        }

        // Prépare le menu si besoin.
        $divTitleMenuOpen = '';
        $divTitleMenuClose = '';
        $divTitleMenuTitleOpen = '';
        $divTitleMenuTitleClose = '';
        $divTitleMenuIconsOpen = '';
        $divTitleMenuIconsClose = '';
        $divTitleMenuContentOpen = '';
        $divTitleMenuContentClose = '';
        $divTitleMenuActionsOpen = '';
        $divTitleMenuActionsClose = '';
        $divMenuContentOpen = '';
        $divMenuContentClose = '';
        $menuContent = '';
        $menuActions = '';
        if ($this->_displayLink
            && $this->_displayActions
        ) {
            $menuContent = '   <div class="objectMenuContentMsg objectMenuContentMsgID">ID:';
            $menuContent .= $this->_nid->getID();
            $menuContent .= '</div>' . "\n";
            if ($this->_displayFlags) {
                if ($this->_displayFlagState) {
                    $menuContent .= '   <div class="objectMenuContentMsg objectMenuContentMsg';
                    if ($this->_flagState == 'e')
                        $menuContent .= 'Error';
                    elseif ($this->_flagState == 'w')
                        $menuContent .= 'Warn';
                    elseif ($this->_flagState == 'n')
                        $menuContent .= 'Error';
                    else
                        $menuContent .= 'OK';
                    $menuContent .= '">';
                    $menuContent .= $this->_getObjectFlagHTML(
                        false,
                        $this->_flagStateIcon->getID(),
                        $this->_flagStateText,
                        '');
                    $menuContent .= $this->_translateInstance->getTranslate($this->_flagStateText);
                    $menuContent .= '</div>' . "\n";
                }
                if ($this->_displayFlagProtection) {
                    if ($this->_flagProtectionLink != '')
                        $menuContent .= '<a href="' . $this->_flagProtectionLink . '">';
                    $menuContent .= '   <div class="objectMenuContentMsg objectMenuContentMsg';
                    if ($this->_flagProtection)
                        $menuContent .= 'OK';
                    else
                        $menuContent .= 'Info';
                    $menuContent .= '">';
                    $menuContent .= $this->_getObjectFlagHTML(
                        $this->_flagProtection,
                        $this->_flagProtectionIcon->getID(),
                        $this->_flagProtectionText,
                        $this->_flagProtectionText);
                    $menuContent .= $this->_translateInstance->getTranslate($this->_flagProtectionText);
                    $menuContent .= '</div>' . "\n";
                    if ($this->_flagProtectionLink != '')
                        $menuContent .= '</a>';
                }
                if ($this->_displayFlagObfuscate) {
                    if ($this->_flagObfuscateLink != '')
                        $menuContent .= '<a href="' . $this->_flagObfuscateLink . '">';
                    $menuContent .= '   <div class="objectMenuContentMsg objectMenuContentMsg';
                    if ($this->_flagObfuscate)
                        $menuContent .= 'OK';
                    else
                        $menuContent .= 'Info';
                    $menuContent .= '">';
                    $menuContent .= $this->_getObjectFlagHTML(
                        $this->_flagObfuscate,
                        $this->_flagObfuscateIcon->getID(),
                        $this->_flagObfuscateText,
                        $this->_flagObfuscateText);
                    $menuContent .= $this->_translateInstance->getTranslate($this->_flagObfuscateText);
                    $menuContent .= '</div>' . "\n";
                    if ($this->_flagObfuscateLink != '')
                        $menuContent .= '</a>';
                }
                if ($this->_displayFlagUnlocked) {
                    if ($this->_flagUnlockedLink != '')
                        $menuContent .= '<a href="' . $this->_flagUnlockedLink . '">';
                    $menuContent .= '   <div class="objectMenuContentMsg objectMenuContentMsg';
                    if ($this->_flagUnlocked)
                        $menuContent .= 'OK';
                    else
                        $menuContent .= 'Info';
                    $menuContent .= '">';
                    $menuContent .= $this->_getObjectFlagHTML(
                        $this->_flagUnlocked,
                        $this->_flagUnlockedIcon->getID(),
                        $this->_flagUnlockedText,
                        $this->_flagUnlockedText);
                    $menuContent .= $this->_translateInstance->getTranslate($this->_flagUnlockedText);
                    $menuContent .= '</div>' . "\n";
                    if ($this->_flagUnlockedLink != '')
                        $menuContent .= '</a>';
                }
                if ($this->_displayFlagActivated) {
                    $menuContent .= '   <div class="objectMenuContentMsg objectMenuContentMsg';
                    if ($this->_flagActivated)
                        $menuContent .= 'OK';
                    else
                        $menuContent .= 'Info';
                    $menuContent .= '">';
                    $menuContent .= $this->_getObjectFlagHTML(
                        $this->_flagActivated,
                        Displays::DEFAULT_ICON_LL,
                        $this->_flagActivatedText,
                        $this->_flagActivatedText);
                    if ($this->_flagActivated)
                        $menuContent .= $this->_translateInstance->getTranslate('::::display:object:flag:activated');
                    else
                        $menuContent .= $this->_translateInstance->getTranslate('::::display:object:flag:unactivated');
                    $menuContent .= '</div>' . "\n";
                }
                if ($this->_flagMessage != '') {
                    $menuContent .= '   <div class="objectMenuContentMsg objectMenuContentMsgInfo">';
                    $menuContent .= $this->_getObjectFlagHTML(
                        false,
                        Displays::DEFAULT_ICON_IINFO,
                        '',
                        '-');
                    $menuContent .= $this->_flagMessage;
                    $menuContent .= '</div>' . "\n";
                }
                if ($this->_flagTargetObject !== null) {
                    $menuContent .= '   <div class="objectMenuContentMsg objectMenuContentMsgtargetObject">';
                    // ATTENTION à une possible boucle infinie !

                    // TODO rewrite this...
                    $instanceNID = new DisplayObject($this->_applicationInstance);
                    $instanceNID->setNID($this->_flagTargetObject);
                    $instanceNID->setEnableColor(true);
                    $instanceNID->setEnableIcon(true);
                    $instanceNID->setEnableRefs(false);
                    $instanceNID->setEnableName(true);
                    $instanceNID->setEnableNID(false);
                    $instanceNID->setEnableFlags(false);
                    $instanceNID->setEnableStatus(false);
                    $instanceNID->setEnableContent(false);
                    $instanceNID->setSize(DisplayObject::SIZE_TINY);
                    $instanceNID->setRatio(DisplayObject::RATIO_SHORT);
                    $instanceNID->setEnableJS(false);
                    $instanceNID->setEnableActions(false);
                    $menuContent .= $instanceNID->getHTML();

                    $menuContent .= '</div>' . "\n";
                }
                if ($this->_displayFlagEmotions
                    && $this->_displayJS
                ) {
                    $menuContent .= '   <div class="objectMenuContentMsg objectMenuContentMsgEmotions">';
                    $menuContent .= $this->_getObjectFlagEmotionsHTML($this->_nid, true);
                    $menuContent .= '</div>' . "\n";
                }
            }

            if ($this->_displayJS) {
                $divTitleMenuOpen = '  <div class="objectTitleMenuContentLayout" id="objectTitleMenu-' . $this->_actionsID . '" '
                    . "onclick=\"display_hide('objectTitleMenu-" . $this->_actionsID . "');\" >\n";
                $divTitleMenuOpen .= '   <div class="objectTitleMenuContent">' . "\n";
                $divTitleMenuTitleOpen = '    <div class="objectTitleMedium objectTitleMediumLong">' . "\n";
                $divTitleMenuIconsOpen = '    <div class="objectTitleIcons">' . "\n";
                $divTitleMenuIconsClose = '    </div>' . "\n";
                $divTitleMenuTitleClose = '    </div>' . "\n";
                $divTitleMenuContentOpen = '    <div class="objectMenuContent">' . "\n";
                $divTitleMenuContentClose = '    </div>' . "\n";
                $menuActions = $this->_displayInstance->getDisplayObjectHookList(
                    $this->_selfHookName,
                    $this->_typeHookName,
                    $this->_nid,
                    true,
                    $this->_sizeCSS . 'Long',
                    $this->_selfHookList);
                if ($menuActions != '') {
                    $divTitleMenuActionsOpen = '<div class="objectMenuContentActions objectMenuContentActions' . $this->_sizeCSS . 'Long">' . "\n";
                    $divTitleMenuActionsClose = ' <div class="objectMenuContentAction-close"></div>' . "\n</div>\n";
                }
                $divTitleMenuClose = '   </div></div>' . "\n";
            } else {
                $divMenuContentOpen = '  <div class="objectMenuContent objectDisplay' . $this->_sizeCSS . ' objectDisplay' . $this->_sizeCSS . $this->_ratioCSS . '">' . "\n";
                $divMenuContentClose = '  </div>' . "\n";
                $menuActions = $this->_displayInstance->getDisplayObjectHookList(
                    $this->_selfHookName,
                    $this->_typeHookName,
                    $this->_nid,
                    false,
                    $this->_sizeCSS . $this->_ratioCSS,
                    $this->_selfHookList);
                if ($menuActions != '') {
                    $divTitleMenuActionsOpen = '<div class="objectMenuContentActions objectMenuContentActions' . $this->_sizeCSS . $this->_ratioCSS . '">' . "\n";
                    $divTitleMenuActionsClose = ' <div class="objectMenuContentAction-close"></div>' . "\n</div>\n";
                }
            }
        }

        // Assemble les contenus.
        $divDisplayOpen = '';
        $divDisplayClose = '';
        $divTitleOpen = '';
        $divTitleClose = '';
        $titleContent = '';
        $divTitleIconsOpen = '';
        $divTitleIconsClose = '';
        $titleIconsContent = '';
        $divTitleTextOpen = '';
        $divTitleTextClose = '';
        $titleTextContent = '';
        $divTitleRefsOpen = '';
        $divTitleRefsClose = '';
        $titleRefsContent = '';
        $divTitleNameOpen = '';
        $divTitleNameClose = '';
        $titleNameContent = '';
        $divTitleIdOpen = '';
        $divTitleIdClose = '';
        $titleIdContent = '';
        $divTitleFlagsOpen = '';
        $divTitleFlagsClose = '';
        $titleFlagsContent = '';
        $divTitleStatusOpen = '';
        $divTitleStatusClose = '';
        $titleStatusContent = '';
        $divObjectOpen = '';
        $divObjectClose = '';
        $objectContent = '';
        if ($this->_sizeCSS == 'tiny')
            $result = $titleLinkOpenName . '<span style="font-size:1em" class="objectTitleIconsInline">' . $titleMenuIcons . '</span>' . $this->_name . $titleLinkCloseName;
        else {
            $divDisplayOpen = '<div class="layoutObject">' . "\n";
            $divDisplayClose = '</div>' . "\n";
            $divTitleOpen = ' <div class="objectTitle objectDisplay' . $this->_sizeCSS . ' objectTitle' . $this->_sizeCSS . ' objectDisplay' . $this->_sizeCSS . $this->_ratioCSS . '">' . "\n";
            $divTitleClose = ' </div>' . "\n";
            $divTitleIconsOpen = '  <div class="objectTitleIcons">';
            $divTitleIconsClose = '</div>' . "\n";
            if ($this->_displayName) {
                $padding = 0;
                if ($this->_displayColor)
                    $padding += 1;
                if ($this->_displayIcon)
                    $padding += 1;
                if ($this->_displayIconApp)
                    $padding += 1;
                $divTitleTextOpen = '  <div class="objectTitleText objectTitle' . $this->_sizeCSS . 'Text objectTitleText' . $padding . '">' . "\n";
                $divTitleTextClose = '  </div>' . "\n";
                $divTitleRefsOpen = '   <div class="objectTitleRefs objectTitle' . $this->_sizeCSS . 'Refs">';
                $divTitleRefsClose = '</div>' . "\n";
                $divTitleNameOpen = '   <div class="objectTitleName objectTitle' . $this->_sizeCSS . 'Name">';
                $divTitleNameClose = '</div>' . "\n";
                $divTitleFlagsOpen = '   <div class="objectTitleFlags objectTitle' . $this->_sizeCSS . 'Flags">' . "\n";
                $divTitleFlagsClose = '   </div>' . "\n";
                $divTitleStatusOpen = '    <div class="objectTitleStatus">';
                $divTitleStatusClose = '</div>' . "\n";
                if ($this->_displayRefs && sizeof($this->_refs) > 0)
                    $titleRefsContent = $this->_getObjectRefsHTML($this->_refs);
                if ($this->_displayNID) {
                    $divTitleIdOpen = '    <div class="objectTitleID">';
                    $divTitleIdClose = '</div>' . "\n";
                    $titleIdContent = $this->_nid->getID();
                }
                $titleNameContent = $this->_name;
                if ($this->_displayFlags) {
                    if ($this->_displayFlagState) {
                        $titleFlagsContent .= $this->_getObjectFlagHTML(
                            false,
                            $this->_flagStateIcon->getID(),
                            $this->_flagStateText,
                            '');
                    }
                    if ($this->_displayFlagProtection) {
                        if ($this->_flagProtectionLink != '') {
                            $titleFlagsContent .= '<a href="' . $this->_flagProtectionLink . '">';
                        }
                        $titleFlagsContent .= $this->_getObjectFlagHTML(
                            $this->_flagProtection,
                            $this->_flagProtectionIcon->getID(),
                            $this->_flagProtectionText,
                            $this->_flagProtectionText);
                        if ($this->_flagProtectionLink != '')
                            $titleFlagsContent .= '</a>';
                    }
                    if ($this->_displayFlagObfuscate) {
                        if ($this->_flagObfuscateLink != '')
                            $titleFlagsContent .= '<a href="' . $this->_flagObfuscateLink . '">';
                        $titleFlagsContent .= $this->_getObjectFlagHTML(
                            $this->_flagObfuscate,
                            $this->_flagObfuscateIcon->getID(),
                            $this->_flagObfuscateText,
                            $this->_flagObfuscateText);
                        if ($this->_flagObfuscateLink != '')
                            $titleFlagsContent .= '</a>';
                    }
                    if ($this->_displayFlagUnlocked) {
                        if ($this->_flagUnlockedLink != '')
                            $titleFlagsContent .= '<a href="' . $this->_flagUnlockedLink . '">';
                        $titleFlagsContent .= $this->_getObjectFlagHTML(
                            $this->_flagUnlocked,
                            $this->_flagUnlockedIcon->getID(),
                            $this->_flagUnlockedText,
                            $this->_flagUnlockedText);
                        if ($this->_flagUnlockedLink != '')
                            $titleFlagsContent .= '</a>';
                    }
                    if ($this->_displayFlagActivated) {
                        $titleFlagsContent .= $this->_getObjectFlagHTML(
                            $this->_flagActivated,
                            Displays::DEFAULT_ICON_LL,
                            '::::display:object:flag:unactivated',
                            '::::display:object:flag:activated');
                    }
                    if ($this->_displayFlagEmotions)
                        $titleFlagsContent .= $this->_getObjectFlagEmotionsHTML($this->_nid, false);
                }
                if ($this->_displayStatus)
                    $titleStatusContent = $this->_status;
            }
            $titleContent = $titleLinkOpenImg . "\n" . $divTitleIconsOpen . $titleMenuIcons . $divTitleIconsClose . $titleLinkCloseImg . "\n";
            $titleContent .= $divTitleTextOpen;
            $titleContent .= $divTitleRefsOpen . $titleRefsContent . $divTitleRefsClose;
            $titleContent .= $divTitleNameOpen . $titleLinkOpenName . $titleNameContent . $titleLinkCloseName . $divTitleNameClose;
            $titleContent .= $divTitleIdOpen . $titleIdContent . $divTitleIdClose;
            $titleContent .= $divTitleFlagsOpen . $titleFlagsContent;
            $titleContent .= $divTitleStatusOpen . $titleStatusContent . $divTitleStatusClose;
            $titleContent .= $divTitleFlagsClose;
            $titleContent .= $divTitleTextClose;
            if ($this->_displayJS
                && $this->_displayActions
            ) {
                $titleContent .= $divTitleMenuOpen;
                $titleContent .= $divTitleMenuTitleOpen;
                $titleContent .= $divTitleMenuIconsOpen . $titleMenuIcons . "\n" . $divTitleMenuIconsClose;
                $titleContent .= $divTitleTextOpen;
                $titleContent .= $divTitleRefsOpen . $titleRefsContent . $divTitleRefsClose;
                $titleContent .= $divTitleNameOpen . $titleLinkOpenName . $titleNameContent . $titleLinkCloseName . $divTitleNameClose;
                $titleContent .= $divTitleIdOpen . $titleIdContent . $divTitleIdClose;
                $titleContent .= $divTitleFlagsOpen . $titleFlagsContent;
                $titleContent .= $divTitleStatusOpen . $titleStatusContent . $divTitleStatusClose;
                $titleContent .= $divTitleFlagsClose;
                $titleContent .= $divTitleTextClose;
                $titleContent .= $divTitleMenuTitleClose;
                $titleContent .= $divTitleMenuContentOpen . $menuContent . $divTitleMenuContentClose;
                $titleContent .= $divTitleMenuActionsOpen . $menuActions . $divTitleMenuActionsClose;
                $titleContent .= $divTitleMenuClose;
            }

            if ($this->_displayContent)
                $objectContent = $this->_displayInstance->getDisplayObjectContent($this->_nid, $this->_sizeCSS, $this->_ratioCSS);

            // Prépare le résultat à afficher.
            $result = $divDisplayOpen;
            $result .= $divTitleOpen . $titleContent . $divTitleClose;
            if (!$this->_displayJS
                && $this->_displayActions
            ) {
                $result .= $divMenuContentOpen . $menuContent . $divMenuContentClose;
                $result .= $divTitleMenuActionsOpen . $menuActions . $divTitleMenuActionsClose;
            }
            $result .= $divObjectOpen . $objectContent . $divObjectClose;
            $result .= $divDisplayClose;
        }

        return $result;
    }

    private function _solveConflicts():void
    {
        if (!$this->_configurationInstance->getOptionAsBoolean('permitProtectedObject'))
            $this->_displayFlagProtection = false;

        if (!$this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
            $this->_displayFlagObfuscate = false;

        if (!$this->_configurationInstance->getOptionAsBoolean('permitJavaScript'))
            $this->_displayJS = false;

        if ($this->_sizeCSS == 'Tiny') {
            $this->_displayLink2Refs = false;
            $this->_displayActions = false;
            $this->_displayRefs = false;
            $this->_displayFlags = false;
            $this->_displayStatus = false;
            $this->_displayContent = false;
        }

        if ($this->_sizeCSS == 'Small') {
            $this->_displayFlags = false;
            $this->_displayStatus = false;
        }

        if ($this->_displayContent
            && $this->_ratioCSS == 'Square'
        ) {
            $this->_ratioCSS = 'Short';
        }

        if ($this->_displayIconApp) {
            $this->_displayColor = false;
            $this->_icon = null;
        }

        if (!$this->_displayColor
            && !$this->_displayIcon
            && !$this->_displayIconApp
        )
            $this->_displayActions = false;

        if (!$this->_displayName) {
            $this->_displayRefs = false;
            $this->_displayFlags = false;
            $this->_displayStatus = false;
        }

        if (!$this->_configurationInstance->getOptionAsBoolean('displayEmotions'))
            $this->_displayFlagEmotions = false;

        if ($this->_sizeCSS == self::SIZE_TINY
            || $this->_sizeCSS == self::SIZE_SMALL
            || ($this->_sizeCSS == self::SIZE_MEDIUM && $this->_displayFlags)
            || !$this->_displayName
        )
            $this->_displayNID = false;
    }

    private function _getObjectColorHTML(): string
    {
        if (!$this->_displayColor)
            return '';

        $colorInstance = new DisplayColor($this->_applicationInstance);
        $colorInstance->setNID($this->_nid);
        if ($this->_name != '')
            $colorInstance->setName($this->_name);
        $colorInstance->setActionsID($this->_actionsID);
        $colorInstance->setEnableActions($this->_displayActions);
        $colorInstance->setSize($this->_sizeCSS);
        $colorInstance->setEnableJS($this->_displayJS);
        return $colorInstance->getHTML();
    }

    private function _getObjectIconHTML(): string
    {
        if (!$this->_displayIcon)
            return '';

        if ($this->_displayIconApp) {
            $iconInstance = new DisplayIconApplication($this->_applicationInstance);
            $iconInstance->setNID($this->_nid);
            if ($this->_appShortname != '')
                $iconInstance->setShortName($this->_appShortname);
        }
        else {
            $iconInstance = new DisplayIcon($this->_applicationInstance);
            $iconInstance->setNID($this->_nid);
            $iconInstance->setIcon($this->_icon);
        }
        if ($this->_name != '')
            $iconInstance->setName($this->_name);
        $iconInstance->setActionsID($this->_actionsID);
        $iconInstance->setEnableActions($this->_displayActions);
        $iconInstance->setSize($this->_sizeCSS);
        $iconInstance->setEnableJS($this->_displayJS);
        return $iconInstance->getHTML();
    }

    /**
     * Pour les fonctions getDisplayObject() et getDisplayMessage().
     * Prépare la liste des références (signataires).
     *
     * Si l'entrée est un texte, retourne le texte (à afficher).
     *
     * @param array $list
     * @return string
     */
    private function _getObjectRefsHTML(array $list): string
    {
        // FIXME add $this->_displayLink2Refs support.
        $result = '';

        if (sizeof($list) == 0)
            return '';

        $size = sizeof($list);
        $count = 0;

        foreach ($list as $object) {
            if (is_string($object))
                $object = $this->_applicationInstance->getTypedInstanceFromNID($object);
            if ($object === null)
                continue;
            $htLink = $this->_displayInstance->prepareDefaultObjectOrGroupOrEntityHtlink($object);
            $color = $this->_displayInstance->prepareObjectColor($object);
            $icon = '';
            if ($size < 11)
                $icon = $this->_displayInstance->prepareObjectFace($object);
            $name = '';
            if ($size < 3)
                $name = $this->_displayInstance->truncateName($object->getFullName('all'));
            $result .= $this->_displayInstance->convertHypertextLink($color . $icon . $name, $htLink);
            if ($size < 11)
                $result .= ' ';

            $count++;
            if ($count > 30) {
                $result .= '+';
                break;
            }
        }

        return $result;
    }

    /**
     * Pour la fonction getDisplayObject().
     * Prépare les icônes des indicateurs (flags).
     *
     * @param boolean $on
     * @param string  $image
     * @param string  $descOff
     * @param string  $descOn
     * @return string
     */
    private function _getObjectFlagHTML(bool $on, string $image, string $descOff, string $descOn): string
    {
        $result = '';

        $image = $this->_displayInstance->prepareIcon($image);
        if ($on)
            $desc = $this->_translateInstance->getTranslate($descOn);
        else
            $desc = $this->_translateInstance->getTranslate($descOff);
        $result .= '<img title="' . $desc . '" ';
        if ($on)
            $result .= 'class="objectFlagOn" ';
        $result .= 'alt="[C]" src="' . $image . '" />';

        return $result;
    }

    /**
     * Pour les fonctions getDisplayObject() et getDisplayMessage().
     * Prépare les icônes des émotions avec ou sans les compteurs ($counts).
     *
     * @param Node    $object
     * @param boolean $counts
     * @return string
     */
    private function _getObjectFlagEmotionsHTML(Node $object, bool $counts = false): string
    {
        // Vérifie si les émotions doivent être affichées.
        if (!$this->_configurationInstance->getOptionUntyped('displayEmotions'))
            return '';
        $result = '';

        $listEmotions = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET,
        );
        $listEmotions0 = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE => Displays::REFERENCE_ICON_EMOTION_JOIE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE => Displays::REFERENCE_ICON_EMOTION_CONFIANCE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR => Displays::REFERENCE_ICON_EMOTION_PEUR0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE => Displays::REFERENCE_ICON_EMOTION_SURPRISE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE => Displays::REFERENCE_ICON_EMOTION_TRISTESSE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT => Displays::REFERENCE_ICON_EMOTION_DEGOUT0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE => Displays::REFERENCE_ICON_EMOTION_COLERE0,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET => Displays::REFERENCE_ICON_EMOTION_INTERET0,
        );
        $listEmotions1 = array(
            References::REFERENCE_NEBULE_OBJET_EMOTION_JOIE => Displays::REFERENCE_ICON_EMOTION_JOIE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_CONFIANCE => Displays::REFERENCE_ICON_EMOTION_CONFIANCE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_PEUR => Displays::REFERENCE_ICON_EMOTION_PEUR1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_SURPRISE => Displays::REFERENCE_ICON_EMOTION_SURPRISE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_TRISTESSE => Displays::REFERENCE_ICON_EMOTION_TRISTESSE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_DEGOUT => Displays::REFERENCE_ICON_EMOTION_DEGOUT1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_COLERE => Displays::REFERENCE_ICON_EMOTION_COLERE1,
            References::REFERENCE_NEBULE_OBJET_EMOTION_INTERET => Displays::REFERENCE_ICON_EMOTION_INTERET1,
        );

        foreach ($listEmotions as $emotion) {
            // Génère la base du lien html pour revenir au bon endroit en toute situation.
            $httpLink = '?' . Displays::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this->_applicationInstance->getDisplayInstance()->getCurrentDisplayMode()
                . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this->_applicationInstance->getDisplayInstance()->getCurrentDisplayView()
                . '&' . References::COMMAND_SELECT_OBJECT . '=' . $object->getID()
                . '&' . References::COMMAND_SELECT_ENTITY . '=' . $this->_applicationInstance->getCurrentEntityID()
                . '&' . References::COMMAND_SELECT_GROUP . '=' . $this->_nebuleInstance->getCurrentGroupID()
                . '&' . References::COMMAND_SELECT_CONVERSATION . '=' . $this->_nebuleInstance->getCurrentConversationID();

            // Préparation du lien.
            $source = $object->getID();
            $target = $this->_nebuleInstance->getCryptoInstance()->hash($emotion);
            $meta = $this->_entitiesInstance->getCurrentEntityID();

            // Détermine si l'émotion a été marqué par l'entité en cours.
            if ($object->getMarkEmotion($emotion, 'myself')) {
                $action = 'x';
                $rid = $this->_cacheInstance->newNode($listEmotions1[$emotion]);
            } else {
                $action = 'f';
                $rid = $this->_cacheInstance->newNode($listEmotions0[$emotion]);
            }
            $link = $action . '_' . $source . '_' . $target . '_' . $meta;
            $httpLink .= '&' . Actions::DEFAULT_COMMAND_ACTION_SIGN_LINK1 . '=' . $link . $this->_nebuleInstance->getTicketingInstance()->getActionTicketValue();
            $icon = $this->_displayInstance->convertReferenceImage($rid, $emotion, 'iconInlineDisplay');

            // Si connecté, l'icône est active.
            if ($this->_unlocked
                && $this->_configurationInstance->getOptionAsBoolean('permitWrite')
                && $this->_configurationInstance->getOptionAsBoolean('permitWriteLink')
            )
                $result .= $this->_displayInstance->convertHypertextLink($icon, $httpLink);
            else
                $result .= $icon;

            // Détermine le nombre d'entités qui ont marqué cette émotion.
            if ($counts) {
                $count = $object->getMarkEmotionSize($emotion, 'all');
                if ($count > 0)
                    $result .= $count . ' ';
            }
        }

        return $result;
    }

    public function setNID(?Node $nid): void
    {
        if ($nid === null) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid=null', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_nid = null;
        } elseif ($nid->getID() != '0' && is_a($nid, 'Nebule\Library\Node')) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set ' . get_class($nid) . ' nid=' . $nid->getID(), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_nid = $nid;
            $this->setType();
            $this->setName();
        }
    }

    public function setEnableColor(bool $enable = true): void
    {
        $this->_displayColor = $enable;
    }

    public function setEnableIcon(bool $enable = true): void
    {
        $this->_displayIcon = $enable;
    }

    public function setEnableIconApp(bool $enable = true): void
    {
        $this->_displayIconApp = $enable;
    }

    public function setEnableName(bool $enable = true): void
    {
        $this->_displayName = $enable;
    }

    public function setEnableNID(bool $enable = true): void
    {
        $this->_displayNID = $enable;
    }

    public function setEnableFlags(bool $enable = true): void
    {
        $this->_displayFlags = $enable;
    }

    public function setEnableFlagEmotions(bool $enable = true): void
    {
        $this->_displayFlagEmotions = $enable;
    }

    public function setEnableContent(bool $enable = true): void
    {
        $this->_displayContent = $enable;
    }

    public function setEnableActions(bool $enable = true): void // TODO rétrocompatibilité, en double de enableJS, à supprimer.
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set enable actions ' . (string)$enable, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_displayActions = $enable;
    }

    public function setActionsID(string $id = '')
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set actions id ' . $id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($id == '')
            $this->_actionsID = bin2hex($this->_nebuleInstance->getCryptoInstance()->getRandom(8, Crypto::RANDOM_PSEUDO));
        else
            $this->_actionsID = trim((string)filter_var($id, FILTER_SANITIZE_STRING));

        if ($this->_actionsID != '')
            $this->_displayActions = true;
    }

    public function setEnableLink(bool $enable = true): void
    {
        $this->_displayLink = $enable;
    }

    public function setEnableJS(bool $enable = true): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set enable JS ' . (string)$enable, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitJavaScript'))
            $this->_displayJS = $enable;
        else
            $this->_displayJS = false;
    }
    
    public function setType(string $type = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set type ' . $type, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($type == '')
            $this->_type = $this->_nid->getType($this->_social);
        else
            $this->_type = $type;
    }
    
    public function setName(string $name = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set name ' . $name, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($name != '')
            $this->_name = trim((string)filter_var($name, FILTER_SANITIZE_STRING));
        else {
            if ($this->_displayIconApp)
                $this->_name = $this->_nid->getName($this->_social);
            else
                $this->_name = $this->_nid->getFullName($this->_social);
        }
    }

    public function setAppShortName(string $name): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set shortname ' . $name, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($name != '')
            $this->_appShortname = trim((string)filter_var($name, FILTER_SANITIZE_STRING));
        else {
            if ($this->_displayIconApp)
                $this->_appShortname = $this->_nid->getSurname($this->_social);
            else
                $this->_appShortname = '';
        }
    }

    public function setEnableRefs(bool $enable = true): void
    {
        $this->_displayRefs = $enable;
    }

    public function setRefs(array $refs): void
    {
        $this->_refs = $refs;
    }

    public function setEnableLink2Refs(bool $enable = true): void
    {
        $this->_displayLink2Refs = $enable;
    }

    public function setLink(string $link): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set link ' . $link, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_link = trim((string)filter_var($link, FILTER_SANITIZE_URL));
    }

    public function setEnableFlagProtection(bool $enable): void
    {
        if ($this->_configurationInstance->getOptionAsBoolean('permitProtectedObject'))
            $this->_displayFlagProtection = $enable;
        
        if ($enable) {
            $this->_flagProtectionIcon = $this->_displayInstance->getImageByReference($this->_cacheInstance->newNode(Displays::REFERENCE_ICON_LINK_LK));
        }
    }

    public function setFlagProtection(bool $enable = true): void
    {
        $this->_flagProtection = $enable;
        $this->_setFlagProtection();
    }

    private function _setFlagProtection(): void
    {
        if ($this->_flagProtection)
            $this->_flagProtectionText = '::::display:object:flag:protected';
        else
            $this->_flagProtectionText = '::::display:object:flag:unprotected';
    }

    public function setFlagProtectionIcon(?Node $oid): void
    {
        if ($oid === null) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid=null', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_flagProtectionIcon = null;
        }
        elseif ($oid->getID() != '0' && is_a($oid, 'Nebule\Library\Node') && $oid->checkPresent()) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set ' . get_class($oid) . ' oid=' . $oid->getID(), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_flagProtectionIcon = $oid;
        }
    }

    public function setFlagProtectionText(string $text): void
    {
        $this->_flagProtectionText = trim((string)filter_var($text, FILTER_SANITIZE_STRING));
    }

    public function setFlagProtectionLink(string $link): void
    {
        $this->_flagProtectionLink = trim((string)filter_var($link, FILTER_SANITIZE_URL));
    }

    public function setEnableFlagObfuscate(bool $enable = true): void
    {
        if ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
            $this->_displayFlagObfuscate = $enable;

        if ($enable) {
            $this->_flagObfuscateIcon = $this->_displayInstance->getImageByReference($this->_cacheInstance->newNode(Displays::REFERENCE_ICON_LINK_LC));
        }
    }

    public function setFlagObfuscate(bool $enable = true): void
    {
        $this->_flagObfuscate = $enable;
        $this->_setFlagObfuscate();
    }

    private function _setFlagObfuscate(): void
    {
        if ($this->_flagObfuscate)
            $this->_flagObfuscateText = '::::display:object:flag:obfuscated';
        else
            $this->_flagObfuscateText = '::::display:object:flag:unobfuscated';
    }

    public function setFlagObfuscateIcon(?Node $oid): void
    {
        if ($oid === null) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid=null', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_flagObfuscateIcon = null;
        }
        elseif ($oid->getID() != '0' && is_a($oid, 'Nebule\Library\Node') && $oid->checkPresent()) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set ' . get_class($oid) . ' oid=' . $oid->getID(), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_flagObfuscateIcon = $oid;
        }
    }

    public function setFlagObfuscateText(string $text): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set obfuscate text ' . $text, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_flagObfuscateText = trim((string)filter_var($text, FILTER_SANITIZE_STRING));
    }

    public function setFlagObfuscateLink(string $link): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set obfuscate link ' . $link, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_flagObfuscateLink = trim((string)filter_var($link, FILTER_SANITIZE_URL));
    }

    public function setEnableFlagUnlocked(bool $enable = true): void
    {
        $this->_displayFlagUnlocked = $enable;
        if ($enable)
            $this->_flagUnlockedIcon = $this->_displayInstance->getImageByReference($this->_cacheInstance->newNode(Displays::REFERENCE_ICON_KEY));
    }

    public function setFlagUnlocked(bool $enable): void
    {
        $this->_flagUnlocked = $enable;
        $this->_setFlagUnlocked();
    }

    private function _setFlagUnlocked(): void
    {
        if ($this->_flagUnlocked)
            $this->_flagUnlockedText = '::::display:object:flag:locked';
        else
            $this->_flagUnlockedText = '::::display:object:flag:unlocked';
    }

    public function setFlagUnlockedIcon(?Node $oid): void
    {
        if ($oid === null) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid=null', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_flagUnlockedIcon = null;
        }
        elseif ($oid->getID() != '0' && is_a($oid, 'Nebule\Library\Node') && $oid->checkPresent()) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set ' . get_class($oid) . ' oid=' . $oid->getID(), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_flagUnlockedIcon = $oid;
        }
    }

    public function setFlagUnlockedText(string $text): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set unlocked text ' . $text, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_flagUnlockedText = trim((string)filter_var($text, FILTER_SANITIZE_STRING));
    }

    public function setFlagUnlockedLink(string $link): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set unlocked link ' . $link, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_flagUnlockedLink = trim((string)filter_var($link, FILTER_SANITIZE_URL));
    }

    public function setEnableFlagActivated(bool $enable = true): void
    {
        $this->_displayFlagActivated = $enable;
    }

    public function setActivated(bool $enable = true): void
    {
        $this->_flagActivated = $enable;
        $this->_setActivated();
    }

    private function _setActivated(): void
    {
        if ($this->_flagActivated)
            $this->_flagActivatedText = '::::display:object:flag:activated';
        else
            $this->_flagActivatedText = '::::display:object:flag:unactivated';
    }
    
    public function setActivatedText(string $text): void
    {
        $this->_flagActivatedText = trim((string)filter_var($text, FILTER_SANITIZE_STRING));
    }

    public function setEnableFlagState(bool $enable = true): void
    {
        $this->_displayFlagState = $enable;
        $this->_setFlagState();
    }

    private function _setFlagState(): void
    {
        if ($this->_nid === null)
            $this->setFlagState('n');
        elseif ($this->_nid->getMarkDanger())
            $this->setFlagState('e');
        elseif ($this->_nid->getMarkWarning())
            $this->setFlagState('w');
        elseif ($this->_nid->checkPresent())
            $this->setFlagState('o');
        else
            $this->setFlagState('n');
    }

    public function setFlagState(string $state): void
    {
        if ($state == 'e') {
            $this->_flagState = 'e';
            $this->_flagStateIcon = $this->_displayInstance->getImageByReference($this->_cacheInstance->newNode(Displays::REFERENCE_ICON_INFO_ERROR));
            $this->_flagStateText = '::::display:content:errorBan';
        } elseif ($state == 'w') {
            $this->_flagState = 'w';
            $this->_flagStateIcon = $this->_displayInstance->getImageByReference($this->_cacheInstance->newNode(Displays::REFERENCE_ICON_INFO_WARN));
            $this->_flagStateText = '::::display:content:warningTaggedWarning';
        } elseif ($state == 'o') {
            $this->_flagState = 'o';
            $this->_flagStateIcon = $this->_displayInstance->getImageByReference($this->_cacheInstance->newNode(Displays::REFERENCE_ICON_INFO_OK));
            $this->_flagStateText = '::::display:content:OK';
        } else {
            $this->_flagState = 'n';
            $this->_flagStateIcon = $this->_displayInstance->getImageByReference($this->_cacheInstance->newNode(Displays::REFERENCE_ICON_INFO_ERROR));
            $this->_flagStateText = '::::display:content:errorNotAvailable';
        }
    }

    public function setFlagStateText(string $text): void
    {
        $this->_flagStateText = trim((string)filter_var($text, FILTER_SANITIZE_STRING));
    }

    public function setEnableStatus(bool $enable = true): void
    {
        $this->_displayStatus = $enable;
    }

    public function setStatus(string $status): void
    {
        if ($status == '')
            $this->_status = $this->_translateInstance->getTranslate($this->_type);
        else
            $this->_status = $this->_translateInstance->getTranslate(trim((string)filter_var($status, FILTER_SANITIZE_STRING)));
        
        if ($this->_status == '')
                $this->_displayStatus = false;
    }

    public function setFlagMessage(string $text): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set flag message ' . $text, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_flagMessage = trim((string)filter_var($text, FILTER_SANITIZE_STRING));
    }

    public function setFlagTargetObject(?Node $nid): void
    {
        if ($nid === null) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid=null', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_flagTargetObject = null;
        }
        elseif ($nid->getID() != '0' && is_a($nid, 'Nebule\Library\Node')) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set ' . get_class($nid) . ' nid=' . $nid->getID(), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
            $this->_flagTargetObject = $nid;
        }
    }

    public function setEnableSelfHook(bool $enable = true): void
    {
        $this->_displaySelfHook = $enable;
        if ($enable)
            $this->_setSelfHookName();
    }

    private function _setSelfHookName(): void
    {
        if (is_a($this->_nid, 'Nebule\Library\Entity'))
            $this->_selfHookName = 'selfMenuEntity';
        elseif (is_a($this->_nid, 'Nebule\Library\Conversation'))
            $this->_selfHookName = 'selfMenuConversation';
        elseif (is_a($this->_nid, 'Nebule\Library\Group'))
            $this->_selfHookName = 'selfMenuGroup';
        elseif (is_a($this->_nid, 'Nebule\Library\Transaction'))
            $this->_selfHookName = 'selfMenuTransaction';
        elseif (is_a($this->_nid, 'Nebule\Library\Wallet'))
            $this->_selfHookName = 'selfMenuWallet';
        elseif (is_a($this->_nid, 'Nebule\Library\Token'))
            $this->_selfHookName = 'selfMenuToken';
        elseif (is_a($this->_nid, 'Nebule\Library\TokenPool'))
            $this->_selfHookName = 'selfMenuTokenPool';
        elseif (is_a($this->_nid, 'Nebule\Library\Currency'))
            $this->_selfHookName = 'selfMenuCurrency';
        else
            $this->_selfHookName = 'selfMenuObject';
    }

    public function setSelfHookName(string $name): void
    {
        $this->_selfHookName = trim((string)filter_var($name, FILTER_SANITIZE_STRING));
    }

    public function setEnableTypeHook(bool $enable = true): void
    {
        $this->_displayTypeHook = $enable;
        if ($enable)
            $this->_setTypeHookName();
    }

    private function _setTypeHookName(): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('track functions ' . $this->_nid, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (is_a($this->_nid, 'Nebule\Library\Entity'))
            $this->_typeHookName = 'typeMenuEntity';
        elseif (is_a($this->_nid, 'Nebule\Library\Conversation'))
            $this->_typeHookName = 'typeMenuConversation';
        elseif (is_a($this->_nid, 'Nebule\Library\Group'))
            $this->_typeHookName = 'typeMenuGroup';
        elseif (is_a($this->_nid, 'Nebule\Library\Transaction'))
            $this->_typeHookName = 'typeMenuTransaction';
        elseif (is_a($this->_nid, 'Nebule\Library\Wallet'))
            $this->_typeHookName = 'typeMenuWallet';
        elseif (is_a($this->_nid, 'Nebule\Library\Token'))
            $this->_typeHookName = 'typeMenuToken';
        elseif (is_a($this->_nid, 'Nebule\Library\TokenPool'))
            $this->_typeHookName = 'typeMenuTokenPool';
        elseif (is_a($this->_nid, 'Nebule\Library\Currency'))
            $this->_typeHookName = 'typeMenuCurrency';
        else
            $this->_typeHookName = 'typeMenuObject';
    }

    public function setTypeHookName(string $name): void
    {
        $this->_typeHookName = trim((string)filter_var($name, FILTER_SANITIZE_STRING));
    }
    
    public function setSelfHookList(array $list): void
    {
        $this->_selfHookList = $list;
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS for DisplayObject(). */
            .layoutObject {
                margin: 5px 0 0 5px;
                border: 0;
                background: none;
                display: inline-block;
                vertical-align: top;
            }

            .objectDisplayTiny {
                font-size: 16px;
            }

            .objectDisplaySmall {
                font-size: 32px;
            }

            .objectDisplayMedium {
                font-size: 64px;
            }

            .objectDisplayLarge {
                font-size: 128px;
            }

            .objectDisplayFull {
                font-size: 256px;
            }

            .objectTitle a:link, .objectTitle a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #000000;
            }

            .objectTitle a:hover, .objectTitle a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #000000;
            }

            .objectTitleTiny {
                height: 16px;
                font-size: 16px;
                border: 0;
            }

            .objectTitleSmall {
                height: 32px;
                font-size: 32px;
                border: 0;
            }

            .objectTitleMedium {
                height: 64px;
                font-size: 64px;
                border: 0;
            }

            .objectTitleLarge {
                height: 128px;
                font-size: 128px;
                border: 0;
            }

            .objectTitleFull {
                height: 256px;
                font-size: 256px;
                border: 0;
            }

            .objectTitleText {
                background: rgba(255, 255, 255, 0.5);
            }

            .objectTitleTinyText {
                height: 16px;
                background: none;
            }

            .objectTitleSmallText {
                height: 30px;
                text-align: left;
                padding: 1px 0 1px 1px;
                color: #000000;
            }

            .objectTitleMediumText {
                height: 58px;
                text-align: left;
                padding: 3px 0 3px 3px;
                color: #000000;
            }

            .objectTitleLargeText {
                height: 122px;
                text-align: left;
                padding: 3px 0 3px 3px;
                color: #000000;
            }

            .objectTitleFullText {
                height: 246px;
                text-align: left;
                padding: 5px 0 5px 5px;
                color: #000000;
            }

            .objectTitleTinyRefs {
                visibility: hidden;
            }

            .objectTitleTinyRefs img {
                visibility: hidden;
            }

            .objectTitleSmallRefs {
                height: 12px;
                line-height: 12px;
                overflow: hidden;
                white-space: nowrap;
                font-size: 9px;
            }

            .objectTitleSmallRefs img {
                height: 12px;
                width: 12px;
            }

            .objectTitleMediumRefs {
                height: 16px;
                line-height: 16px;
                overflow: hidden;
                white-space: nowrap;
                font-size: 12px;
            }

            .objectTitleMediumRefs img {
                height: 16px;
                width: 16px;
            }

            .objectTitleLargeRefs {
                height: 16px;
                line-height: 16px;
                overflow: hidden;
                white-space: nowrap;
                font-size: 12px;
            }

            .objectTitleLargeRefs img {
                height: 16px;
                width: 16px;
            }

            .objectTitleFullRefs {
                height: 32px;
                line-height: 32px;
                overflow: hidden;
                white-space: nowrap;
                font-size: 20px;
            }

            .objectTitleFullRefs img {
                height: 32px;
                width: 32px;
            }

            .objectTitleTinyName {
                height: 1rem;
                line-height: 1rem;
                font-size: 1rem;
            }

            .objectTitleSmallName {
                height: 16px;
                line-height: 16px;
                overflow: hidden;
                white-space: nowrap;
                font-size: 14px;
            }

            .objectTitleMediumName {
                height: 24px;
                line-height: 24px;
                overflow: hidden;
                white-space: nowrap;
                font-size: 20px;
            }

            .objectTitleLargeName {
                height: 32px;
                line-height: 32px;
                overflow: hidden;
                white-space: nowrap;
                font-size: 28px;
            }

            .objectTitleFullName {
                height: 64px;
                line-height: 64px;
                overflow: hidden;
                white-space: nowrap;
                font-size: 40px;
            }

            .objectTitleID {
                height: 16px;
                font-size: 10px;
                overflow: hidden;
            }

            .objectTitleTinyFlags {
                visibility: hidden;
            }

            .objectTitleTinyFlags img {
                visibility: hidden;
            }

            .objectTitleSmallFlags {
                visibility: hidden;
            }

            .objectTitleSmallFlags img {
                visibility: hidden;
            }

            .objectTitleMediumFlags {
                height: 16px;
                font-size: 16px;
            }

            .objectTitleMediumFlags img {
                height: 16px;
                width: 16px;
                margin: 0 1px 0 0;
                float: left;
            }

            .objectTitleLargeFlags {
                height: 16px;
                font-size: 16px;
            }

            .objectTitleLargeFlags img {
                height: 16px;
                width: 16px;
                margin: 0 2px 0 0;
                float: left;
            }

            .objectTitleFullFlags {
                height: 32px;
                font-size: 32px;
            }

            .objectTitleFullFlags img {
                height: 32px;
                width: 32px;
                margin: 0 4px 0 0;
                float: left;
            }

            .objectTitleIcons img {
                height: 1em;
                width: 1em;
                float: left;
            }

            .objectTitleIconsInline img {
                height: 1em;
                width: 1em;
            }

            .objectTitleText0 {
                margin-left: 0;
            }

            .objectTitleText1 {
                margin-left: 1em;
            }

            .objectTitleText2 {
                margin-left: 2em;
            }

            .objectTitleStatus {
                height: 1em;
                line-height: 1em;
                overflow: hidden;
                white-space: nowrap;
                font-weight: bold;
                text-align: right;
                padding-right: 2px;
            }

            .objectDisplayTinyShort {
            }

            .objectDisplaySmallShort {
                width: 8em;
            }

            .objectDisplayMediumShort {
                width: 6em;
            }

            .objectDisplayLargeShort {
                width: 5em;
            }

            .objectDisplayFullShort {
                width: 4em;
            }

            .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                width: 256px;
            }

            @media screen and (min-width: 320px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 310px;
                }
            }

            @media screen and (min-width: 480px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 470px;
                }
            }

            @media screen and (min-width: 600px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 590px;
                }
            }

            @media screen and (min-width: 768px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 758px;
                }
            }

            @media screen and (min-width: 1024px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 1014px;
                }
            }

            @media screen and (min-width: 1200px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 1190px;
                }
            }

            @media screen and (min-width: 1600px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 1590px;
                }
            }

            @media screen and (min-width: 1920px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 1910px;
                }
            }

            @media screen and (min-width: 2048px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 2038px;
                }
            }

            @media screen and (min-width: 2400px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 2390px;
                }
            }

            @media screen and (min-width: 3840px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 3830px;
                }
            }

            @media screen and (min-width: 4096px) {
                .objectDisplayTinyLong, .objectDisplaySmallLong, .objectDisplayMediumLong, .objectDisplayLargeLong, .objectDisplayFullLong {
                    width: 4086px;
                }
            }

            .objectContent {
                font-size: 0.8rem;
                border: 0;
                padding: 3px;
                margin: 0;
                color: #000000;
                overflow: auto;
            }

            .objectContentShort {
                width: 378px;
                max-height: 378px;
            }

            .objectContentText {
                background: rgba(255, 255, 255, 0.666);
                text-align: left;
            }

            .objectContentImage {
                background: rgba(255, 255, 255, 0.12);
                text-align: center;
            }

            .objectContentImage img {
                height: auto;
                max-width: 100%;
            }

            .objectFlagOn {
                background: #00ff20;
            }

            .objectTitleMenuContentLayout {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.33);
                z-index: 100;
                display: none;
                font-size: 0;
            }

            .objectTitleMenuContent {
                position: fixed;
                top: 10%;
                left: 10%;
                width: 80%;
                background: rgba(240, 240, 240, 0.5);
                padding: 16px;
            }

            .objectTitleMenuContent .objectTitleTinyLong, .objectTitleMenuContent .objectTitleSmallLong, .objectTitleMenuContent .objectTitleMediumLong, .objectTitleMenuContent .objectTitleLargeLong, .objectTitleMenuContent .objectTitleFullLong {
                width: 100%;
            }

            .objectTitleMenuContent .objectTitleText {
                background: rgba(255, 255, 255, 0.66);
            }

            .objectTitleMenuContentIcons {
                height: 64px;
                width: 128px;
            }

            .objectTitleMenuContentIcons img {
                height: 64px;
                width: 64px;
            }

            .objectMenuContent {
                background: rgba(255, 255, 255, 0.2);
                padding-top: 4px;
            }

            .objectMenuContentMsg {
                background-origin: border-box;
                font-size: 14px;
                text-align: left;
                margin-top: 1px;
                width: 100%;
                overflow: hidden;
                white-space: normal;
                min-height: 16px;
            }

            .objectMenuContentMsg img {
                height: 16px;
                width: 16px;
                margin: 0 2px 0 0;
                float: left;
            }

            .objectMenuContentMsgOK {
                background: #103020;
                color: #ffffff;
            }

            .objectMenuContentMsgWarn {
                background: #ffe080;
                color: #ff8000;
            }

            .objectMenuContentMsgError {
                background: #ffa0a0;
                color: #ff0000;
                font-family: monospace;
            }

            .objectMenuContentMsgInfo {
                background: rgba(0, 0, 0, 0.4);
                color: #ffffff;
            }

            .objectMenuContentMsgID {
                background: rgba(255, 255, 255, 0.4);
                color: #000000;
                font-family: monospace;
                font-size: 9px;
                overflow: hidden;
                white-space: nowrap;
                min-height: 4px;
            }

            .objectMenuContentMsgEmotions {
                background: rgba(255, 255, 255, 0.1);
                color: #000000;
                text-align: center;
                min-height: 24px;
            }

            .objectMenuContentMsgEmotions img {
                height: 24px;
                width: 24px;
                margin: 0 1px 0 3px;
                float: none;
            }

            .objectMenuContentMsgtargetObject {
                background: rgba(0, 0, 0, 0.4);
                font-size: 12px;
                color: #ffffff;
                white-space: nowrap;
            }

            .objectMenuContentMsgtargetObject img {
                height: 16px;
                width: 16px;
                margin: 0;
                float: none;
            }

            .objectMenuContentMsgtargetObject a:link, .objectMenuContentMsgtargetObject a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #ffffff;
            }

            .objectMenuContentMsgtargetObject a:hover, .objectMenuContentMsgtargetObject a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #ffffff;
            }

            .objectMenuContentActions {
                margin: 1px 0 0 0;
                min-height: 32px;
                padding-top: 5px;
                background: rgba(255, 255, 255, 0.2);
            }

            .objectMenuContentActionsTinyShort {
            }

            .objectMenuContentActionsSmallShort {
                width: 256px;
            }

            .objectMenuContentActionsMediumShort {
                width: 384px;
            }

            .objectMenuContentActionsLargeShort {
                width: 640px;
            }

            .objectMenuContentActionsFullShort {
                width: 1024px;
            }

            .objectMenuContentActionsTinyLong, .objectMenuContentActionsSmallLong, .objectMenuContentActionsMediumLong, .objectMenuContentActionsLargeLong, .objectMenuContentActionsFullLong {
                width: 100%;
            }

            .objectMenuContentAction {
                height: 64px;
                display: inline-block;
                margin-top: 5px;
                margin-left: 5px;
                text-align: left;
            }

            /* Correction à vérifier */
            .objectMenuContentActionNoJS {
                height: 32px;
                display: inline-block;
                margin-bottom: 1px;
                text-align: left;
            }

            .objectMenuContentActionTinyShort {
            }

            .objectMenuContentActionSmallShort {
                width: 256px;
            }

            .objectMenuContentActionMediumShort {
                width: 384px;
            }

            .objectMenuContentActionLargeShort {
                width: 210px;
                margin-right: 5px;
            }

            .objectMenuContentActionFullShort {
                width: 251px;
                margin-right: 5px;
            }

            .objectMenuContentActionTinyLong, .objectMenuContentActionSmallLong, .objectMenuContentActionMediumLong, .objectMenuContentActionLargeLong, .objectMenuContentActionFullLong {
                width: 251px;
            }

            .objectMenuContentActionSelf {
                background: rgba(255, 255, 255, 0.5);
                color: #000000;
            }

            .objectMenuContentActionSelf a:link, .objectMenuContentActionSelf a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #000000;
            }

            .objectMenuContentActionSelf a:hover, .objectMenuContentActionSelf a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #000000;
            }

            .objectMenuContentActionType {
                background: rgba(0, 0, 0, 0.66);
                color: #ffffff;
            }

            .objectMenuContentActionType a:link, .objectMenuContentActionType a:visited {
                font-weight: bold;
                text-decoration: none;
                color: #ffffff;
            }

            .objectMenuContentActionType a:hover, .objectMenuContentActionType a:active {
                font-weight: bold;
                text-decoration: underline;
                color: #ffffff;
            }

            .objectMenuContentAction-icon, .objectMenuContentAction-iconNoJS {
                float: left;
                margin-right: 5px;
            }

            .objectMenuContentAction-icon img {
                height: 64px;
                width: 64px;
            }

            .objectMenuContentAction-iconNoJS img {
                height: 32px;
                width: 32px;
            }

            .objectMenuContentAction-modname p {
                font-size: 0.7rem;
                font-style: italic;
                font-weight: normal;
                overflow: hidden;
                white-space: nowrap;
            }

            .objectMenuContentAction-title p {
                font-size: 1.1rem;
                font-weight: bold;
                overflow: hidden;
                white-space: nowrap;
            }

            .objectMenuContentAction-text p {
                font-size: 0.8rem;
                font-weight: normal;
                overflow: hidden;
                white-space: nowrap;
            }

            .objectMenuContentAction-close {
                height: 1px;
                clear: both;
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   705_display_link.php
//   020240906141538
//   eabdce5d6bbf709a40459cd9c2b86e53df9ccc63630d98295a3c310197be2141.sha2.256

/**
 * Classe DisplayLink
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayLink extends DisplayItem implements DisplayInterface
{
    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return ''; // TODO
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS de la fonction getDisplayLink(). */
            .layoutLink {
                margin-right: 5px;
            }

            .linkDisplay {
            }

            .linkDisplaySmall img {
                height: 16px;
            }

            .linkDisplayMedium img {
                height: 32px;
            }

            .linkDisplayLarge img {
                height: 64px;
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   706_display_blocklink.php
//   020240906141538
//   c13a71c161b0466991ab1dcebeeeab1ead6de475adaa6b1ffe8d10870e448df8.sha2.256

/**
 * Classe DisplayBlockLink
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayBlockLink extends DisplayItem implements DisplayInterface
{
    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return ''; // TODO
    }

    public static function displayCSS(): void
    {
        echo ''; // TODO
    }
}



// ========================================================================================
//   707_display_security.php
//   020240908184500
//   5d80b8d9bc7cf2c512b5843b6a2aae1921e6aaf5c47a08d16d89d98eff4a606a.sha2.256

/**
 * Classe DisplaySecurity
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplaySecurity extends DisplayItemIconMessageSizeable implements DisplayInterface
{
    private bool $_displayAlone = true;
    private bool $_displayOk = true;
    private bool $_displayFull = false;

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $result = '';
        $error = 'ok';

        if ($this->_displayAlone)
            $result .= '<div class="layoutList"><div class="listContent">';

        $instance = new DisplayInformation($this->_applicationInstance);
        $instance->setType(DisplayItemIconMessage::TYPE_WARN);
        $instance->setDisplayAlone(false);
        $instance->setRatio($this->_ratioCSS);
        $instance->setSize($this->_sizeCSS);

        if ($this->_rescueInstance->getModeRescue()) {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $instance->setMessage('::::RESCUE');
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $instance->setMessage('::::RESCUE');
            $result .= $instance->getHTML();
        }

        $instance->setMessage($this->_applicationInstance->getCheckSecurityCryptoHashMessage());
        if ($this->_applicationInstance->getCheckSecurityCryptoHash() == 'WARN') {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_applicationInstance->getCheckSecurityCryptoHash() == 'ERROR') {
            $instance->setType(DisplayItemIconMessage::TYPE_ERROR);
            $error = 'er';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) { // TODO revoir tous les messages OK avec de vrais messages...
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $result .= $instance->getHTML();
        }

        $instance->setMessage($this->_applicationInstance->getCheckSecurityCryptoSymMessage());
        if ($this->_applicationInstance->getCheckSecurityCryptoSym() == 'WARN') {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_applicationInstance->getCheckSecurityCryptoSym() == 'ERROR') {
            $instance->setType(DisplayItemIconMessage::TYPE_ERROR);
            $error = 'er';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $result .= $instance->getHTML();
        }

        $instance->setMessage($this->_applicationInstance->getCheckSecurityCryptoAsymMessage());
        if ($this->_applicationInstance->getCheckSecurityCryptoAsym() == 'WARN') {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_applicationInstance->getCheckSecurityCryptoAsym() == 'ERROR') {
            $instance->setType(DisplayItemIconMessage::TYPE_ERROR);
            $error = 'er';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $result .= $instance->getHTML();
        }

        $instance->setMessage($this->_applicationInstance->getCheckSecurityBootstrapMessage());
        if ($this->_applicationInstance->getCheckSecurityBootstrap() == 'ERROR') {
            $instance->setType(DisplayItemIconMessage::TYPE_ERROR);
            $error = 'er';
            $result .= $instance->getHTML();
        } elseif ($this->_applicationInstance->getCheckSecurityBootstrap() == 'WARN') {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $result .= $instance->getHTML();
        }

        $instance->setMessage($this->_applicationInstance->getCheckSecuritySignMessage());
        if ($this->_applicationInstance->getCheckSecuritySign() == 'WARN') {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_applicationInstance->getCheckSecuritySign() == 'ERROR') {
            $instance->setType(DisplayItemIconMessage::TYPE_ERROR);
            $error = 'er';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $result .= $instance->getHTML();
        }

        $instance->setMessage($this->_applicationInstance->getCheckSecurityURLMessage());
        if ($this->_applicationInstance->getCheckSecurityURL() == 'WARN') {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $result .= $instance->getHTML();
        }

        $instance->setMessage('::::warn_ServNotPermitWrite');
        if (!$this->_configurationInstance->getOptionAsBoolean('permitWrite')) {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $result .= $instance->getHTML();
        }

        $instance->setMessage('::::warn_flushSessionAndCache');
        if ($this->_nebuleInstance->getCacheInstance()->getFlushCache()) {
            $instance->setType(DisplayItemIconMessage::TYPE_WARN);
            $error = 'wr';
            $result .= $instance->getHTML();
        } elseif ($this->_displayFull) {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $result .= $instance->getHTML();
        }

        if ( $this->_displayOk && $error == 'ok')
        {
            $instance->setType(DisplayItemIconMessage::TYPE_OK);
            $instance->setMessage('::::SecurityChecks');
            $result .= $instance->getHTML();
        }

        if ($this->_displayAlone)
            $result .= '</div></div>';

        return $result;
    }

    public function setDisplayAlone(bool $enable): void // TODO peut être mis en commun.
    {
        $this->_displayAlone = $enable;
    }

    public function setDisplayOK(bool $enable): void
    {
        $this->_displayOk = $enable;
    }

    public function setDisplayFull(bool $enable): void
    {
        $this->_displayFull = $enable;
    }

    public static function displayCSS(): void
    {
        echo ''; // TODO
    }
}



// ========================================================================================
//   708_display_list.php
//   020250215163515
//   f0949a3a910a2da3eadd809a7ceff172cf335f26ac4a52584e0013aa9e1b8dbc.sha2.256

/**
 * Classe DisplayList
 *       ---
 * Display a list of mix with DisplayInformation, DisplayObject, DisplaySecurity, DisplayQuery and DisplayBlankLine.
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayList extends DisplayItem implements DisplayInterface
{
    private array $_list = array();
    private bool $_onPerLine = false;

    public function getHTML(): string {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content',
            Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if (sizeof($this->_list) == 0 && $this->_enableWarnIfEmpty)
        {
            $instanceWarn = new DisplayInformation($this->_applicationInstance);
            $instanceWarn->setType(DisplayItemIconMessage::TYPE_MESSAGE);
            $instanceWarn->setMessage('::::list:empty');
            $instanceWarn->setRatio(DisplayItem::RATIO_SHORT);
            $this->_list[] = $instanceWarn;
        }
        if (sizeof($this->_list) == 0)
            return '';

        $result = '<div class="layoutList">' . "\n";
        $result .= '<div class="listContent">' . "\n";
        $result .= "\n";
        foreach ($this->_list as $item){
            $this->_nebuleInstance->getMetrologyInstance()->addLog('get code from ' . get_class($item),
                Metrology::LOG_LEVEL_DEBUG, __METHOD__, '52d6f3ea');
            if ($item instanceof DisplayInformation) {
                $item->setSize($this->_sizeCSS);
                $item->setDisplayAlone(false);
                $result .= $item->getHTML();
            } elseif ($item instanceof DisplayObject) {
                $item->setSize($this->_sizeCSS);
                //$item->setDisplayAlone(false); TODO
                $result .= $item->getHTML();
            } elseif ($item instanceof DisplaySecurity) {
                $item->setSize($this->_sizeCSS);
                $item->setDisplayAlone(false);
                $result .= $item->getHTML();
            } elseif ($item instanceof DisplayQuery) {
                $item->setSize($this->_sizeCSS);
                $item->setDisplayAlone(false);
                $result .= $item->getHTML();
            } elseif ($item instanceof DisplayBlankLine)
                $result .= $item->getHTML();
            if ($this->_onPerLine)
                $result .= '<br />';
            $result .= "\n";
        }
        $result .= '</div>';
        $result .= '</div>';
        $result .= "\n";

        return $result;
    }

    public function addItem(DisplayItem $item): void {
        if ($item instanceof DisplayInformation
            || $item instanceof DisplayObject
            || $item instanceof DisplaySecurity
            || $item instanceof DisplayQuery
            || $item instanceof DisplayBlankLine
        )
            $this->_list[] = $item;
        else
            $this->_nebuleInstance->getMetrologyInstance()->addLog('invalid instance ' . get_class($item)
                . ' to add on display list', Metrology::LOG_LEVEL_ERROR, __METHOD__, '93aa0cae');
    }

    private bool $_enableWarnIfEmpty = false;

    public function setEnableWarnIfEmpty(bool $enable = true): void
    {
        $this->_enableWarnIfEmpty = $enable;
    }

    public function setOnePerLine(bool $onePerLine = true): void {
        $this->_onPerLine = $onePerLine;
    }

    public static function displayCSS(): void {
        ?>

        <style type="text/css">
            /* CSS de la fonction DisplayList(). */
            .layoutList {
                padding: 3px;
            }
        </style>
        <?php
    }
}


/**
 * Classe DisplayBlankLine
 *       ---
 * Force display a blank line in DisplayList.
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayBlankLine extends DisplayItem implements DisplayInterface
{
    public function getHTML(): string {
        return "<br />&nbsp;<br />\n";
    }

    public static function displayCSS(): void {}
}



// ========================================================================================
//   709_display_menu.php
//   020250222064249
//   dcaa775e80a60be1322e67a58dd228ee067424edb2da1f44937e70764814b601.sha2.256

/**
 * Classe DisplayMenu
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayMenu extends DisplayItem implements DisplayInterface
{
    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        return ''; // TODO
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS de la fonction getDisplayObject(). */
            .layoutMenuList {
                font-size: 0;
                padding-top: 4px;
                width: 100%;
            }

            .menuListContent {
                margin: auto;
                text-align: center;
            }

            .menuListContentActionDiv {
                display: inline-block;
            }

            .menuListContentActionDiv a:link, .menuListContentActionDiv a:visited {
                font-weight: normal;
                text-decoration: none;
            }

            .menuListContentActionDiv a:hover, .menuListContentActionDiv a:active {
                font-weight: bold;
                text-decoration: none;
            }

            .menuListContentAction {
                height: 64px;
                margin-bottom: 5px;
                margin-right: 5px;
                text-align: left;
                color: #545454;
            }

            .menuListContentActionSmall {
                width: 128px;
            }

            .menuListContentActionMedium {
                width: 295px;
            }

            .menuListContentActionLarge {
                width: 395px;
            }

            .menuListContentAction-content {
                padding: 5px;
            }

            .menuListContentAction-icon {
                float: left;
                height: 64px;
                width: 64px;
                margin-right: 5px;
            }

            .menuListContentAction-ref {
                font-size: 0.6rem;
                font-style: italic;
                overflow: hidden;
                white-space: nowrap;
            }

            .menuListContentAction-title {
                font-size: 1.1rem;
                font-weight: bold;
                overflow: hidden;
                white-space: normal;
            }

            .menuListContentAction-desc {
                font-size: 0.8rem;
                overflow: hidden;
                white-space: nowrap;
            }

            .menuListContentActionModules {
                background: rgba(0, 0, 0, 0.5);
                color: #ffffff;
            }

            .menuListContentActionHooks {
                background: rgba(255, 255, 255, 0.66);
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   710_display_color.php
//   020250215163515
//   5e3ac94a96ceba0e9813969eba6714392a30d0a247df6e934483156701124e4f.sha2.256

/**
 * Classe DisplayColor
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayColor extends DisplayItemCSS implements DisplayInterface
{
    const ICON_ALPHA_COLOR_OID = '87b260416aa0f50736d3ca51bcb6aae3eff373bf471d5662883b8b6797e73e85.sha2.256';

    private ?Node $_nid = null;
    private string $_name = '';
    private bool $_displayActions = false;
    private string $_actionsID = '';
    private bool $_displayJS = true;

    protected function _init(): void
    {
        $this->setSocial();
        $this->setEnableJS();
        $this->setActionsID();
        $this->setSize();
    }

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('nid null', Metrology::LOG_LEVEL_ERROR, __METHOD__, '4d5732c9');
            return '';
        }

        $result = '<img title="' . $this->_name . '"' . $this->_styleCSS;
        $result .= ' alt="[C]" src="o/' . self::ICON_ALPHA_COLOR_OID . '" class="iconColor' . $this->_sizeCSS . '"';
        if ($this->_classCSS != '')
            $result .= ' class="' . $this->_classCSS . '"';
        if ($this->_idCSS != '')
            $result .= ' id="' . $this->_idCSS . '"';
        if ($this->_displayActions && $this->_displayJS)
            $result .= " onclick=\"display_menu('objectTitleMenu-" . $this->_actionsID . "');\"";
        $result .= '/>';

        return $result;
    }

    public function setNID(?Node $nid): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid ' . gettype($nid), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($nid === null)
            $this->_nid = null;
        elseif ($nid->getID() != '0' && is_a($nid, 'Nebule\Library\Node')) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid ' . $nid->getID(), Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'af41d8bd');
            $this->_nid = $nid;
            $this->setName();
            $this->setStyleCSS();
        }
    }

    public function setName(string $name = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set name ' . $name, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null)
            return;
        if ($name != '')
            $this->_name = trim((string)filter_var($name, FILTER_SANITIZE_STRING));
        else
            $this->_name = $this->_nid->getFullName($this->_social);
    }

    public function setStyleCSS(string $style = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set style CSS ' . $style, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null)
            return;
        $this->_styleCSS = ' style="background:#'
            . $this->_nid->getPrimaryColor()
            . trim((string)filter_var($style, FILTER_SANITIZE_STRING))
            . ';"';
    }

    public function setEnableActions(bool $enable = true): void // TODO rétrocompatibilité, en double de enableJS, à supprimer.
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set enable actions ' . (string)$enable, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_displayActions = $enable;
    }

    public function setActionsID(string $id = '')
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set actions id ' . $id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($id == '')
            $this->_actionsID = bin2hex($this->_nebuleInstance->getCryptoInstance()->getRandom(8, Crypto::RANDOM_PSEUDO));
        else
            $this->_actionsID = trim((string)filter_var($id, FILTER_SANITIZE_STRING));

        if ($this->_actionsID != '')
            $this->_displayActions = true;
    }

    public function setEnableJS(bool $enable = true): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set enable JS ' . (string)$enable, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitJavaScript'))
            $this->_displayJS = $enable;
        else
            $this->_displayJS = false;
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS for DisplayColor(). */

            .iconColorTiny {
                height: 16px;
                font-size: 16px;
            }

            .iconColorSmall {
                height: 32px;
                font-size: 32px;
            }

            .iconColorMedium {
                height: 64px;
                font-size: 64px;
            }

            .iconColorLarge {
                height: 128px;
                font-size: 128px;
            }

            .iconColorFull {
                height: 256px;
                font-size: 256px;
            }

        <?php
    }
}



// ========================================================================================
//   711_display_icon.php
//   020250218172711
//   96e1dd5e575fbee977b65d7a55c27ef19df791b636aefbfc657e92e2083f6fe2.sha2.256

/**
 * Classe DisplayIcon
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayIcon extends DisplayItemIconable implements DisplayInterface
{
    private ?Node $_nid = null;
    private string $_name = '';
    private string $_type = '';
    private bool $_displayActions = false;
    private string $_actionsID = '';
    private bool $_displayJS = true;

    protected function _init(): void
    {
        $this->setSocial();
        $this->setEnableJS();
        $this->setActionsID();
        $this->setIconText('[I]');
        $this->setSize();
    }

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('nid null', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'f94ff81b');
            return '';
        }

        $result = '<img title="' . $this->_name . '"' . $this->_styleCSS;
        $result .= ' alt="' . $this->_iconText . '" src="' . $this->_getNidIconHTML($this->_nid, $this->_icon) . '" class="iconFace' . $this->_sizeCSS . '"';
        if ($this->_classCSS != '')
            $result .= ' class="' . $this->_classCSS . '"';
        if ($this->_idCSS != '')
            $result .= ' id="' . $this->_idCSS . '"';
        if ($this->_displayActions && $this->_displayJS)
            $result .= " onclick=\"display_menu('objectTitleMenu-" . $this->_actionsID . "');\"";
        $result .= '/>';

        return $result;
    }

    public function setNID(?Node $nid): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid ' . gettype($nid), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($nid === null)
            $this->_nid = null;
        elseif ($nid->getID() != '0' && is_a($nid, 'Nebule\Library\Node')) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid ' . $nid->getID(), Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'b73c6a2e');
            $this->_nid = $nid;
            $this->setType();
            $this->setName();
            $this->setStyleCSS();
        }
    }

    public function setType(string $type = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set type ' . $type, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null)
            return;
        if ($type == '') {
            $this->_type = $this->_nid->getType($this->_social);
            $this->setIconRID($this->_nid::DEFAULT_ICON_RID);
        }
        else {
            $this->_type = $type;
            $this->setIconRID(Node::DEFAULT_ICON_RID); // FIXME
        }
    }

    public function setName(string $name = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set name ' . $name, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null)
            return;
        if ($name != '')
            $this->_name = trim((string)filter_var($name, FILTER_SANITIZE_STRING));
        else
            $this->_name = $this->_nid->getFullName($this->_social);
    }

    public function setStyleCSS(string $style = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set style CSS ' . $style, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null)
            return;
        $this->_styleCSS = ' style="background:#'
            . $this->_nid->getPrimaryColor()
            . trim((string)filter_var($style, FILTER_SANITIZE_STRING))
            . ';"';
    }

    public function setEnableActions(bool $enable = true): void // TODO rétrocompatibilité, en double de enableJS, à supprimer.
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set enable actions ' . (string)$enable, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_displayActions = $enable;
    }

    public function setActionsID(string $id = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set actions id ' . $id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($id == '')
            $this->_actionsID = bin2hex($this->_nebuleInstance->getCryptoInstance()->getRandom(8, Crypto::RANDOM_PSEUDO));
        else
            $this->_actionsID = trim((string)filter_var($id, FILTER_SANITIZE_STRING));

        if ($this->_actionsID != '')
            $this->_displayActions = true;
    }

    public function setEnableJS(bool $enable = true): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set enable JS ' . (string)$enable, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitJavaScript'))
            $this->_displayJS = $enable;
        else
            $this->_displayJS = false;
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS for DisplayColor(). */

            .iconFaceTiny {
                height: 16px;
                font-size: 16px;
            }

            .iconFaceSmall {
                height: 32px;
                font-size: 32px;
            }

            .iconFaceMedium {
                height: 64px;
                font-size: 64px;
            }

            .iconFaceLarge {
                height: 128px;
                font-size: 128px;
            }

            .iconFaceFull {
                height: 256px;
                font-size: 256px;
            }

        <?php
    }
}



// ========================================================================================
//   712_display_icon_application.php
//   020250215163515
//   90f42bc8c995d0e294ac7a891570e34a27784707bb06ff5bc49e39fc204ea43c.sha2.256

/**
 * Classe DisplayIconApplication
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayIconApplication extends DisplayItem implements DisplayInterface
{
    private $_nid = null;
    private $_name = '';
    private $_shortName = '';
    private $_classCSS = '';
    private $_idCSS = '';
    private $_styleCSS = '';
    private $_displayActions = false;
    private $_actionsID = '';
    private $_displayJS = true;

    protected function _init(): void
    {
        $this->setSocial();
        $this->setEnableJS();
        $this->setActionsID();
    }

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_nid === null) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('nid null', Metrology::LOG_LEVEL_ERROR, __METHOD__, '0ee97bc0');
            return '';
        }

        $result = '<div class="objectTitleIconsApp"' . $this->_styleCSS;
        if ($this->_classCSS != '')
            $result .= ' class="' . $this->_classCSS . '"';
        if ($this->_idCSS != '')
            $result .= ' id="' . $this->_idCSS . '"';
        if ($this->_displayActions && $this->_displayJS)
            $result .= " onclick=\"display_menu('objectTitleMenu-" . $this->_actionsID . "');\"";
        $result .= '/><div><span class="objectTitleIconsAppShortname">' . $this->_shortName
            . '</span><br /><span class="objectTitleIconsAppTitle">' . $this->_name . '</span></div></div>';

        return $result;
    }

    public function setNID(?Node $nid): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid ' . gettype($nid), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($nid === null)
            $this->_nid = null;
        elseif ($nid->getID() != '0' && is_a($nid, 'Nebule\Library\Node')) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid ' . $nid->getID(), Metrology::LOG_LEVEL_DEBUG, __METHOD__, '2cd59e0e');
            $this->_nid = $nid;
            $this->setName();
            $this->setShortName();
            $this->setStyleCSS();
        }
    }

    public function setName(string $name = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set name ' . $name, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($name != '')
            $this->_name = trim((string)filter_var($name, FILTER_SANITIZE_STRING));
        else
            $this->_name = $this->_nid->getName($this->_social);
    }

    public function setShortName(string $name): void
    {
        if ($name != '')
            $this->_shortName = trim((string)filter_var($name, FILTER_SANITIZE_STRING));
        else
            $this->_shortName = $this->_nid->getSurname($this->_social);
    }

    public function setClassCSS(string $class = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set class CSS ' . $class, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_classCSS = trim((string)filter_var($class, FILTER_SANITIZE_STRING));
    }

    public function setIdCSS(string $id = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set id CSS ' . $id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_idCSS = trim((string)filter_var($id, FILTER_SANITIZE_STRING));
    }

    public function setStyleCSS(string $style = ''): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set style CSS ' . $style, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_styleCSS = ' style="background:#'
            . $this->_nid->getPrimaryColor()
            . trim((string)filter_var($style, FILTER_SANITIZE_STRING))
            . ';"';
    }

    public function setEnableActions(bool $enable = true): void // TODO rétrocompatibilité, en double de enableJS, à supprimer.
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set enable actions ' . (string)$enable, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $this->_displayActions = $enable;
    }

    public function setActionsID(string $id = '')
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set actions id ' . $id, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($id == '')
            $this->_actionsID = bin2hex($this->_nebuleInstance->getCryptoInstance()->getRandom(8, Crypto::RANDOM_PSEUDO));
        else
            $this->_actionsID = trim((string)filter_var($id, FILTER_SANITIZE_STRING));

        if ($this->_actionsID != '')
            $this->_displayActions = true;
    }

    public function setEnableJS(bool $enable = true): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set enable JS ' . (string)$enable, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_configurationInstance->getOptionAsBoolean('permitJavaScript'))
            $this->_displayJS = $enable;
        else
            $this->_displayJS = false;
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS for DisplayIconApplication(). */
            .objectTitleIconsApp {
                height: 1em;
                width: 1em;
                float: left;
            }

            .objectTitleIconsApp div {
                overflow: hidden;
                font-size: 12px;
                text-align: left;
                font-weight: normal;
                margin: 3px;
                color: #ffffff;
            }

            .objectTitleIconsAppShortname {
                font-size: 18px;
            }

            .objectTitleIconsAppTitle {
                font-size: 11px;
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   713_display_content.php
//   020250215163515
//   eb7ff138c1193d6fe8f269f5cb72c79e8658fc7c6e6fee8dd332ed5141e8b7f3.sha2.256

/**
 * Classe DisplayContent
 *       ---
 *  Example:
 *   FIXME
 *       ---
 *  Usage:
 *   FIXME
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayContent extends DisplayItemIconMessageSizeable implements DisplayInterface
{
    private ?Node $_nid = null;
    
    protected function _init(): void
    {
        $this->setSize();
        $this->setRatio();
    }

    public function getHTML(): string
    {
        $result = '<div class="objectContent">' . "\n";
        switch (get_class($this->_nid)) {
            case 'Nebule\Library\Entity':
                $result .= $this->_getEntityHTML();
                break;
            case 'Nebule\Library\Group':
                $result .= $this->_getGroupHTML();
                break;
            case 'Nebule\Library\Conversation':
                $result .= $this->_getConversationHTML();
                break;
            default:
                $result .= $this->_getObjectHTML();
                break;
        }
        $result .= "</div>\n";

        return $result;
    }

    private function _getEntityHTML(): string
    {
        $result = '';
        if ($this->_nid->checkPresent()) {
            if ($this->_sizeCSS == 'medium' || $this->_sizeCSS == 'full') {
                $result .= '<div class="objectContentEntity">' . "\n<p>";
                $result .= sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                    $this->convertInlineObjectColorIcon($this->_nid) . ' ' . '<b>' . $this->_nid->getID() . "</b>\n");
                $result .= "</p>\n";

                if ($this->_sizeCSS = 'full') {
                    // Liste des localisations.
                    $localisations = $this->_nid->getLocalisationsID();
                    if (sizeof($localisations) > 0) {
                        $result .= '<table border="0"><tr><td><td>' . $this->_translateInstance->getTranslate('::EntityLocalisation') . " :</td><td>\n";
                        foreach ($localisations as $localisation) {
                            $locObject = $this->_cacheInstance->newNode($localisation);
                            $result .= "\t " . $this->convertInlineObjectColorIcon($localisation) . ' '
                                . $this->convertHypertextLink(
                                    $locObject->readOneLineAsText(),
                                    $locObject->readOneLineAsText()
                                ) . "<br />\n";
                        }
                        $result .= "</td></tr></table>\n";
                        unset($localisations, $localisation, $locObject);
                    }
                }
                $result .= "</div>\n";
            }
        } else
            $result .= $this->convertLineMessage('::::display:content:errorNotAvailable', 'error');
        return $result;
    }

    private function _getGroupHTML(): string
    {
        $result = '';
        $result .= '<div class="objectContentGroup">' . "\n\t<p>"
            . sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                $this->convertInlineObjectColorIcon($this->_nid) . ' ' . '<b>' . $this->_nid->getID() . "</b>\n");
        if ($this->_nid->getMarkClosed())
            $result .= "<br />\n" . $this->_translateInstance->getTranslate('::GroupeFerme') . ".\n";
        else
            $result .= "<br />\n" . $this->_translateInstance->getTranslate('::GroupeOuvert') . ".\n";
        $result .= "\t</p>\n</div>\n";
        return $result;
    }

    private function _getConversationHTML(): string
    {
        $result = '';
        $result .= '<div class="objectContentConversation">' . "\n\t<p>"
            . sprintf($this->_translateInstance->getTranslate('::UniqueID'),
                $this->convertInlineObjectColorIcon($this->_nid) . ' ' . '<b>' . $this->_nid->getID() . "</b>\n");
        if ($this->_nid->getMarkClosed())
            $result .= "<br />\n" . $this->_translateInstance->getTranslate('::ConversationFermee') . ".\n";
        else
            $result .= "<br />\n" . $this->_translateInstance->getTranslate('::ConversationOuverte') . ".\n";
        $result .= "\t</p>\n</div>\n";
        return $result;
    }

    private function _getObjectHTML(): string
    {
        $result = '';
        $result .= $this->getDisplayAsObjectContent($this->_nid, $this->_sizeCSS, $this->_ratioCSS, $permitWarnProtected);
        return $result;
    }

    public function setNID(?Node $nid): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid ' . gettype($nid), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($nid === null)
            $this->_nid = null;
        elseif ($nid->getID() != '0' && is_a($nid, 'Nebule\Library\Node')) {
            $this->_nebuleInstance->getMetrologyInstance()->addLog('set nid ' . $nid->getID(), Metrology::LOG_LEVEL_DEBUG, __METHOD__, '2cd59e0e');
            $this->_nid = $nid;
            $this->setName();
            $this->setShortName();
            $this->setStyleCSS();
        }
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS for DisplayContent(). */
            .objectContent {
            }

            /* .layoutInformation { max-width:2000px; } */
            .objectContent .layoutInformation {
                margin-left: -3px;
            }

            .objectContentObject {
            }

            .objectContentEntity {
            }

            .objectContentGroup {
            }

            .objectContentConversation {
            }

            .objectContentText {
                font-size: 0.8rem;
                background: rgba(255, 255, 255, 0.666);
                text-align: left;
                color: #000000;
                font-family: sans-serif;
            }

            .objectContentCode {
                font-size: 0.8rem;
                background: rgba(255, 255, 255, 0.666);
                text-align: left;
                color: #000000;
                font-family: monospace;
            }

            .objectContentAudio {
            }

            .objectContentImage {
                background: rgba(255, 255, 255, 0.12);
                text-align: center;
            }

            .objectContentImage img {
                height: auto;
                max-width: 100%;
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   714_display_notify.php
//   020240906141538
//   f815451a0c03a33ce929478d6a727df82d681e46a97fd93393cc5e34dc68c936.sha2.256

/**
 * Classe DisplayMessage
 *     ---
 * Display or prepare a simple message to the interface with the user.
 *     ---
 * Example:
 *  $instance = new DisplayMessage($this->_applicationInstance);
 *  $instance->setMessage('Message to user', 'arg1', 'arg2', 'arg3', 'arg4', 'arg5');
 *  $instance->setType(DisplayInformation::TYPE_MESSAGE);
 *  $instance->setIconText('Alternative text on icon');
 *  $icon = $this->_cacheInstance->newNode(Displays::DEFAULT_ICON_IOK);
 *  $instance->setIcon($icon);
 *  $instance->setLink('https://nebule.org');
 *  $instance->display();
 *     ---
 * Usage:
 *   - setMessage : Define message to display. If empty, nothing will be displayed.
 *       If empty, nothing displayed.
 *       Default: empty.
 *       String
 *   - setType : Détermine le type de message.
 *       Les types disponibles :
 *       - DisplayInformation::TYPE_MESSAGE : affichage d'un message simple en blanc sur fond noir transparent.
 *       - DisplayInformation::TYPE_OK : affichage d'un message de validation en blanc sur fond vert.
 *       - DisplayInformation::TYPE_WARN : affichage d'un message d'avertissement en jaune gras sur fond orange clair.
 *       - DisplayInformation::TYPE_ERROR : affichage d'un message d'erreur en rouge gras sur fond rose clair.
 *       - DisplayInformation::TYPE_INFORMATION : affichage d'un message simple en noir sur fond blanc transparent (style d'affichage des objets).
 *       - DisplayInformation::TYPE_GO : affichage d'un message pour valider une action.
 *       - DisplayInformation::TYPE_BACK : affichage d'un message de retour arrière.
 *       Default: DisplayInformation::TYPE_INFORMATION
 *       String
 *   - setIconText : Détermine le nom du type de message à afficher.
 *       If empty, no alternate text displayed.
 *       Default: empty.
 *       String
 *   - setIcon : Détermine l'icône à utiliser.
 *       Si null, l'icône est sélectionnée automatiquement en fonction du type de message.
 *       Default: null
 *       Node/null
 *   - setLink : Détermine le lien HTML à utiliser.
 *       If empty, no link displayed.
 *       Default: empty.
 *   - getHTML : Get HTML code to use.
 *   - display : Display HTML code.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayNotify extends DisplayItemIconMessage implements DisplayInterface
{
    protected function _init(): void
    {
        $this->setType(self::TYPE_INFORMATION);
        $this->setIconText('[I]');
    }

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_message == '')
            return '';

        $result = '<div class="notify' . $this->_type . ' notifyCommon">';
        if ($this->_link != '')
            $result .= '<a href="' . $this->_link . '">';
        $result .= '<p>';
        if ($this->_icon !== null)
            $result .= $this->_getImageHTML($this->_icon, $this->_iconText);
        $result .= '&nbsp;' . $this->_message . '</p>';
        if ($this->_link != '')
            $result .= '</a>';
        $result .= '</div>';
        $result .= "\n";

        return $result;
    }

    public static function displayCSS(): void // FIXME
    {
        ?>
        <style type="text/css">
            /* CSS for DisplayNotify(). */
            .notifyCommon {
                background-origin: border-box;
                text-align: left;
            }

            .notifyCommon p {
                color: #000000;
                padding: 5px;
            }

            .notifyCommon img {
                height: 32px;
                width: 32px;
            }

            .notifyCommon a:link, .notifyCommon a:visited {
                font-weight: normal;
                text-decoration: none;
            }

            .notifyCommon a:hover, .notifyCommon a:active {
                font-weight: bold;
                text-decoration: none;
            }

            .notifyMessage {
                background: #333333;
            }
            .notifyMessage p {
                color: #ffffff;
            }

            .notifyInformation {
                background: #ababab;
            }
            .notifyInformation p {
                color: #000000;
            }

            .notifyOk {
                background: #103020;
                font-family: monospace;
                font-size: 1.2em;
            }
            .notifyOk p {
                color: #ffffff;
            }

            .notifyError {
                background: #ffa0a0;
                font-family: monospace;
                font-size: 1.2em;
            }
            .notifyError p {
                color: #ff0000;
            }

            .notifyWarn {
                background: #ffe080;
                font-family: monospace;
                font-size: 1.2em;
            }
            .notifyWarn p {
                color: #ff8000;
            }

            .notifyGo {
                background: #abbcab;
            }
            .notifyGo p {
                color: #000000;
            }

            .notifyBack {
                background: #abbccd;
            }
            .notifyBack p {
                color: #000000;
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   715_display_query.php
//   020240906141538
//   cfcf5145f018a7819d25035af32fe31fc90571b5e5c3789664866abf3181357c.sha2.256

/**
 * Classe DisplayInput
 *     ---
 * Display or prepare a n input to the interface with the user.
 *     ---
 * Example:
 *  $instance = new DisplayInput($this->_applicationInstance);
 *  TODO
 *     ---
 * Usage:
 *   - TODO
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class DisplayQuery extends DisplayItemIconMessageSizeable implements DisplayInterface
{
    public const QUERY_STRING = 'query';
    public const QUERY_PASSWORD = 'password';
    public const QUERY_BOOLEAN = 'boolean';
    public const ICON_QUERY_RID = '16e9a40a7f705f9c3871d13ce78b9f016f6166c2214b293e5a38964502a5ff9a05bb.none.272';
    public const ICON_PASSWORD_RID = 'ebde500081ce0916fb54efc3a900472be9fadee2dfcf988e3b5b721ebf00d687f655.none.272';

    private bool $_displayAlone = false;
    private string $_displayPassword = '';
    private string $_hiddenName = 'id';
    private string $_hiddenValue = 'none';

    protected function _init(): void
    {
        $this->setType(self::QUERY_STRING);
        $this->setSize();
        $this->setRatio();
    }

    public function getHTML(): string
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('get HTML content', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if ($this->_message == '')
            return '';

        $result = $this->_getAloneStartHTML();
        if ($this->_sizeCSS == self::SIZE_TINY)
            $result .= $this->_getTinyHTML();
        else
            $result .= $this->_getNotTinyHTML();
        $result .= $this->_getAloneEndHTML()
            . "\n";

        return $result;
    }

    private function _getAloneStartHTML(): string
    {
        if ($this->_displayAlone)
            return '<div class="layoutAloneItem"><div class="aloneItemContent">';
        return '';
    }

    private function _getAloneEndHTML(): string
    {
        if ($this->_displayAlone)
            return '</div></div>';
        return '';
    }

    private function _getTinyHTML(): string
    {
        $result = '';
        if ($this->_icon !== null)
            $result .= '<span style="font-size:1em" class="objectTitleIconsInline">' . $this->_getImageHTML($this->_icon, $this->_iconText) . '</span>';
        $result .= $this->_getFormInputHTML();
        return $result;
    }

    private function _getNotTinyHTML(): string
    {
        $padding = 0;
        $result = '<div class="layoutObject layoutInformation">';
        $result .= '<div class="objectTitle objectDisplay' . $this->_sizeCSS . $this->_ratioCSS . ' queryDisplay queryDisplay' . $this->_sizeCSS . ' queryDisplay' . $this->_type . '">';
        $result .= '<div class="objectTitleIcons queryTitleIcons queryTitleIcons' . $this->_type . '">';
        if ($this->_icon !== null) {
            $result .= $this->_getImageHTML($this->_icon, $this->_iconText);
            $padding = 1;
        }
        $result .= '</div>';
        $result .= '<div class="objectTitleText' . $padding . ' queryTitleText queryTitle' . $this->_sizeCSS . 'Text">';
        $result .= '<div class="queryTitleName queryTitleName' . $this->_type . ' queryTitle' . $this->_sizeCSS . 'Name">';
        $result .= $this->_getFormInputHTML();
        $result .= '</div></div></div></div>';
        return $result;
    }

    private function _getFormInputHTML(): string {
        $result = $this->_message;
        $result .= '<form method="post" action="' . $this->_link . '">';
        $result .= '<input type="hidden" name="' . $this->_hiddenName . '" value="' . $this->_hiddenValue . '">';
        $result .= '<label><input ' . $this->_displayPassword . 'name="' . References::COMMAND_SELECT_PASSWORD . '"></label>';
        $result .= '<input type="submit" value="&gt;">';
        $result .= '</form>';
        return $result;
    }

    public function setHiddenName(string $name): void
    {
        $this->_hiddenName = trim($name);
    }

    public function setHiddenValue(string $value): void
    {
        $this->_hiddenValue = trim($value);
    }

    public function setDisplayAlone(bool $enable): void
    {
        $this->_displayAlone = $enable;
    }

    public function setType(string $type): void
    {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('set type ' . $type, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        switch (strtolower($type)) {
            case self::QUERY_PASSWORD:
                $this->_type = 'Password';
                $this->_iconText = '::::Password';
                $icon = self::ICON_PASSWORD_RID;
                $this->_displayPassword = 'type="password" ';
                break;
            case self::QUERY_BOOLEAN:
                $this->_type = 'Boolean';
                $this->_iconText = '::::Switch';
                $icon = self::ICON_QUERY_RID;
                $this->_displayPassword = 'type="bool" '; // FIXME
                break;
            default:
                $this->_type = 'Query';
                $this->_iconText = '::::Query';
                $icon = self::ICON_QUERY_RID;
                $this->_displayPassword = '';
                break;
        }
        $rid = $this->_cacheInstance->newNode($icon);
        $this->_icon = $rid->getReferencedObjectInstance(References::REFERENCE_NEBULE_OBJET_IMAGE_REFERENCE);
    }

    public static function displayCSS(): void
    {
        ?>

        <style type="text/css">
            /* CSS for DisplayQuery(). */
            .queryTitleIcons img {
                background: none;
            }

            .queryDisplay {
                height: auto;
            }

            .queryDisplayPassword {
                background: #ffe080;
            }

            .queryDisplayQuery {
                background: #ababab;
            }

            .queryTitleText {
                background: none;
                height: auto;
            }

            .queryDisplayTiny {
            }

            .queryDisplaySmall {
                min-height: 32px;
                font-size: 32px;
                border: 0;
            }

            .queryDisplayMedium {
                min-height: 64px;
                font-size: 64px;
                border: 0;
            }

            .queryDisplayLarge {
                min-height: 128px;
                font-size: 128px;
                border: 0;
            }

            .queryDisplayFull {
                min-height: 256px;
                font-size: 256px;
                border: 0;
            }

            .queryTitleTinyText {
                min-height: 16px;
                background: none;
            }

            .queryTitleSmallText {
                min-height: 30px;
                text-align: left;
                padding: 1px 0 1px 1px;
                color: #000000;
            }

            .queryTitleMediumText {
                min-height: 58px;
                text-align: left;
                padding: 3px 0 3px 3px;
                color: #000000;
            }

            .queryTitleLargeText {
                min-height: 122px;
                text-align: left;
                padding: 3px 0 3px 3px;
                color: #000000;
            }

            .queryTitleFullText {
                min-height: 246px;
                text-align: left;
                padding: 5px 0 5px 5px;
                color: #000000;
            }

            .queryTitleName {
                font-weight: normal;
                overflow: hidden;
                height: auto;
            }

            .queryTitleNamePassword {
                color: #ff8000;
            }

            .queryTitleNamePassword {
                font-weight: bold;
            }

            .queryTitleNameQuery {
                color: #000000;
            }

            .queryTitleTinyName {
                height: 1rem;
                line-height: 1rem;
                font-size: 1rem;
            }

            .queryTitleSmallName {
                line-height: 14px;
                overflow: hidden;
                white-space: normal;
                font-size: 1rem;
            }

            .queryTitleMediumName {
                line-height: 22px;
                overflow: hidden;
                white-space: normal;
                font-size: 1.2rem;
            }

            .queryTitleLargeName {
                line-height: 30px;
                overflow: hidden;
                white-space: normal;
                font-size: 1.5rem;
            }

            .queryTitleFullName {
                line-height: 62px;
                overflow: hidden;
                white-space: normal;
                font-size: 2rem;
            }

            input {
                margin-right: 5px;
            }
            input[type=password], input[type=text], input[type=email] {
                width: 268px;
            }
            input[type=submit] {
                width: 27px;
                font-weight: bold;
            }
        </style>
        <?php
    }
}



// ========================================================================================
//   751_action.php
//   020250218163827
//   0587839653e30bb9db57ff5912004b1cc45aa76b587dfc829af0bc6027ded031.sha2.256

/**
 * Classe Actions communes.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
abstract class Actions extends Functions
{
    const DEFAULT_COMMAND_APPLICATION = 'a';
    const DEFAULT_COMMAND_NEBULE_BOOTSTRAP = 'a=1';
    const DEFAULT_COMMAND_NEBULE_FLUSH = 'f';
    const DEFAULT_COMMAND_NEBULE_RESCUE = 'r';
    const DEFAULT_COMMAND_ACTION_SIGN_LINK1 = 'actsiglnk1';
    const DEFAULT_COMMAND_ACTION_SIGN_LINK1_OBFUSCATE = 'actsiglnk1o';
    const DEFAULT_COMMAND_ACTION_SIGN_LINK2 = 'actsiglnk2';
    const DEFAULT_COMMAND_ACTION_SIGN_LINK2_OBFUSCATE = 'actsiglnk2o';
    const DEFAULT_COMMAND_ACTION_SIGN_LINK3 = 'actsiglnk3';
    const DEFAULT_COMMAND_ACTION_SIGN_LINK3_OBFUSCATE = 'actsiglnk3o';
    const DEFAULT_COMMAND_ACTION_UPLOAD_SIGNED_LINK = 'actupsl';
    const DEFAULT_COMMAND_ACTION_UPLOAD_FILE_LINKS = 'actupfl';
    const DEFAULT_COMMAND_ACTION_OBFUSCATE_LINK = 'actobflnk';
    const DEFAULT_COMMAND_ACTION_DELETE_OBJECT = 'actdelobj';
    const DEFAULT_COMMAND_ACTION_DELETE_OBJECT_FORCE = 'actdelobjf';
    const DEFAULT_COMMAND_ACTION_DELETE_OBJECT_OBFUSCATE = 'actdelobjo';
    const DEFAULT_COMMAND_ACTION_PROTECT_OBJECT = 'actprtobj';
    const DEFAULT_COMMAND_ACTION_UNPROTECT_OBJECT = 'actuprtobj';
    const DEFAULT_COMMAND_ACTION_SHARE_PROTECT_TO_ENTITY = 'actshrprtent';
    const DEFAULT_COMMAND_ACTION_SHARE_PROTECT_TO_GROUP_OPENED = 'actshrprtgrpo';
    const DEFAULT_COMMAND_ACTION_SHARE_PROTECT_TO_GROUP_CLOSED = 'actshrprtgrpc';
    const DEFAULT_COMMAND_ACTION_CANCEL_SHARE_PROTECT_TO_ENTITY = 'actushrprtent';
    const DEFAULT_COMMAND_ACTION_SYNCHRONIZE_OBJECT = 'actsynobj';
    const DEFAULT_COMMAND_ACTION_SYNCHRONIZE_ENTITY = 'actsynent';
    const DEFAULT_COMMAND_ACTION_SYNCHRONIZE_NEW_ENTITY = 'actsynnewent';
    const DEFAULT_COMMAND_ACTION_SYNCHRONIZE_LINKS = 'actsynlnk';
    const DEFAULT_COMMAND_ACTION_SYNCHRONIZE_APPLICATION = 'actsynapp';
    const DEFAULT_COMMAND_ACTION_UPLOAD_FILE = 'upfile';
    const DEFAULT_COMMAND_ACTION_UPLOAD_FILE_UPDATE = 'upfilemaj';
    const DEFAULT_COMMAND_ACTION_UPLOAD_FILE_ASK_UPDATE = 'upfileaskmaj';
    const DEFAULT_COMMAND_ACTION_UPLOAD_FILE_PROTECT = 'upfileprt';
    const DEFAULT_COMMAND_ACTION_UPLOAD_FILE_OBFUSCATE_LINKS = 'upfileobf';
    const DEFAULT_COMMAND_ACTION_UPLOAD_TEXT = 'uptext';
    const DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_NAME = 'uptextname';
    const DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_TYPE = 'uptexttype';
    const DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_PROTECT = 'uptextprt';
    const DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_OBFUSCATE_LINKS = 'uptextobf';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY = 'creaent';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_PREFIX = 'creaentprefix';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_SUFFIX = 'creaentsuffix';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_FIRSTNAME = 'creaentfstnam';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_NIKENAME = 'creaentniknam';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_NAME = 'creaentnam';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_PASSWORD1 = 'creaentpwd1';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_PASSWORD2 = 'creaentpwd2';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_ALGORITHM = 'creaentalgo';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_TYPE = 'creaenttype';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_AUTONOMY = 'creaentaut';
    const DEFAULT_COMMAND_ACTION_CREATE_ENTITY_OBFUSCATE_LINKS = 'creaentobf';
    const DEFAULT_COMMAND_ACTION_CREATE_GROUP = 'creagrp';
    const DEFAULT_COMMAND_ACTION_CREATE_GROUP_NAME = 'creagrpnam';
    const DEFAULT_COMMAND_ACTION_CREATE_GROUP_CLOSED = 'creagrpcld';
    const DEFAULT_COMMAND_ACTION_CREATE_GROUP_OBFUSCATE_LINKS = 'creagrpobf';
    const DEFAULT_COMMAND_ACTION_DELETE_GROUP = 'actdelgrp';
    const DEFAULT_COMMAND_ACTION_ADD_TO_GROUP = 'actaddtogrp';
    const DEFAULT_COMMAND_ACTION_REMOVE_FROM_GROUP = 'actremtogrp';
    const DEFAULT_COMMAND_ACTION_ADD_ITEM_TO_GROUP = 'actadditogrp';
    const DEFAULT_COMMAND_ACTION_REMOVE_ITEM_FROM_GROUP = 'actremitogrp';
    const DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION = 'creacvt';
    const DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION_NAME = 'creacvtnam';
    const DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION_CLOSED = 'creacvtcld';
    const DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION_PROTECTED = 'creacvtprt';
    const DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION_OBFUSCATE_LINKS = 'creacvtobf';
    const DEFAULT_COMMAND_ACTION_DELETE_CONVERSATION = 'actdelcvt';
    const DEFAULT_COMMAND_ACTION_ADD_TO_CONVERSATION = 'actaddtocvt';
    const DEFAULT_COMMAND_ACTION_REMOVE_FROM_CONVERSATION = 'actremtocvt';
    const DEFAULT_COMMAND_ACTION_ADD_ITEM_TO_CONVERSATION = 'actadditocvt';
    const DEFAULT_COMMAND_ACTION_REMOVE_ITEM_FROM_CONVERSATION = 'actremitocvt';
    const DEFAULT_COMMAND_ACTION_CREATE_MESSAGE = 'creamsg';
    const DEFAULT_COMMAND_ACTION_CREATE_MESSAGE_PROTECTED = 'creamsgprt';
    const DEFAULT_COMMAND_ACTION_CREATE_MESSAGE_OBFUSCATE_LINKS = 'creamsgobf';
    const DEFAULT_COMMAND_ACTION_MARK_OBJECT = 'actmarkobj';
    const DEFAULT_COMMAND_ACTION_UNMARK_OBJECT = 'actunmarkobj';
    const DEFAULT_COMMAND_ACTION_UNMARK_ALL_OBJECT = 'actunmarkallobj';
    const DEFAULT_COMMAND_ACTION_ADD_PROPERTY = 'actaddprop';
    const DEFAULT_COMMAND_ACTION_ADD_PROPERTY_OBJECT = 'actaddpropobj';
    const DEFAULT_COMMAND_ACTION_ADD_PROPERTY_VALUE = 'actaddpropval';
    const DEFAULT_COMMAND_ACTION_ADD_PROPERTY_PROTECTED = 'actaddpropprf';
    const DEFAULT_COMMAND_ACTION_ADD_PROPERTY_OBFUSCATE_LINKS = 'actaddpropobf';
    const DEFAULT_COMMAND_ACTION_CREATE_CURRENCY = 'creacur';
    const DEFAULT_COMMAND_ACTION_CREATE_TOKEN_POOL = 'creactp';
    const DEFAULT_COMMAND_ACTION_CREATE_TOKENS = 'creactk';
    const DEFAULT_COMMAND_ACTION_CREATE_TOKENS_COUNT = 'creactkcnt';

    protected bool $_unlocked = false;

    public function __destruct() { return true; }
    public function __toString() { return 'Action'; }
    public function __sleep() { return array(); } // TODO do not cache



    protected function _initialisation(): void {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('initialisation action', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '4b67de69');
        $this->_unlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();
    }


    public function getActions(): void {
        try {
            $this->_metrologyInstance->addLog('call special actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00da4388');
            $this->specialActions();
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog('error special actions ('  . $e->getCode() . ') : ' . $e->getFile()
                . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '8a263023');
        }

        try {
            $this->_metrologyInstance->addLog('call generic actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '5f58e568');
            $this->genericActions();
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog('error generic actions ('  . $e->getCode() . ') : ' . $e->getFile()
                . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, 'd27f51b8');
        }

        try {
            $this->_metrologyInstance->addLog('call application actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '285f18cf');
            $this->applicationActions();
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog('error actions for application ' . $this->_applicationInstance->getName()
                . ' ('  . $e->getCode() . ') : ' . $e->getFile()
                . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, 'f90d32f4');
        }

        $this->modulesActions(); // try catch inside
    }

    public function genericActions(): void {
        $this->_metrologyInstance->addLog('generic actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '84b627f1');

        if (!$this->_ticketingInstance->checkActionTicket() || !$this->_unlocked)
            return;

        $this->_extractActionObfuscateLink();
        $this->_extractActionDeleteObject();
        $this->_extractActionProtectObject();
        $this->_extractActionUnprotectObject();
        $this->_extractActionShareProtectObjectToEntity();
        $this->_extractActionShareProtectObjectToGroupOpened();
        $this->_extractActionShareProtectObjectToGroupClosed();
        $this->_extractActionCancelShareProtectObjectToEntity();
        $this->_extractActionSynchronizeObject();
        $this->_extractActionSynchronizeEntity();
        $this->_extractActionSynchronizeObjectLinks();
        $this->_extractActionSynchronizeApplication();
        $this->_extractActionSynchronizeNewEntity();
        $this->_extractActionMarkObject();
        $this->_extractActionUnmarkObject();
        $this->_extractActionUnmarkAllObjects();
        $this->_extractActionUploadFile();
        $this->_extractActionUploadText();
        $this->_extractActionCreateGroup();
        $this->_extractActionDeleteGroup();
        $this->_extractActionAddToGroup();
        $this->_extractActionRemoveFromGroup();
        $this->_extractActionAddItemToGroup();
        $this->_extractActionRemoveItemFromGroup();
        $this->_extractActionCreateConversation();
        $this->_extractActionDeleteConversation();
        $this->_extractActionAddMessageOnConversation();
        $this->_extractActionRemoveMessageOnConversation();
        $this->_extractActionAddMemberOnConversation();
        $this->_extractActionRemoveMemberOnConversation();
        $this->_extractActionCreateMessage();
        $this->_extractActionCreateCurrency();
        $this->_extractActionCreateTokenPool();
        $this->_extractActionCreateTokens();
        $this->_extractActionAddProperty();

        $this->_metrologyInstance->addLog('router generic actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '59d4a536');

        if ($this->_actionObfuscateLinkInstance !== null
            && $this->_actionObfuscateLinkInstance != ''
            && is_a($this->_actionObfuscateLinkInstance, 'Nebule\Library\LinkRegister')
            && $this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink')
        )
            $this->_actionObfuscateLink();

        if ($this->_actionDeleteObject
            && is_a($this->_actionDeleteObjectInstance, 'Nebule\Library\Node')
        )
            $this->_actionDeleteObject();

        if ($this->_actionProtectObjectInstance != ''
            && is_a($this->_actionProtectObjectInstance, 'Nebule\Library\Node')
        )
            $this->_actionProtectObject();
        if ($this->_actionUnprotectObjectInstance != ''
            && is_a($this->_actionUnprotectObjectInstance, 'Nebule\Library\Node')
        )
            $this->_actionUnprotectObject();
        if ($this->_actionShareProtectObjectToEntity != '')
            $this->_actionShareProtectObjectToEntity();
        if ($this->_actionShareProtectObjectToGroupOpened != '')
            $this->_actionShareProtectObjectToGroupOpened();
        if ($this->_actionShareProtectObjectToGroupClosed != '')
            $this->_actionShareProtectObjectToGroupClosed();
        if ($this->_actionCancelShareProtectObjectToEntity != '')
            $this->_actionCancelShareProtectObjectToEntity();

        if ($this->_actionSynchronizeObjectInstance != '')
            $this->_actionSynchronizeObject();
        if ($this->_actionSynchronizeEntityInstance != '')
            $this->_actionSynchronizeEntity();
        if ($this->_actionSynchronizeObjectLinksInstance != '')
            $this->_actionSynchronizeObjectLinks();
        if ($this->_actionSynchronizeApplicationInstance != '')
            $this->_actionSynchronizeApplication();
        if ($this->_actionSynchronizeNewEntityID != '')
            $this->_actionSynchronizeNewEntity();

        if ($this->_actionMarkObject != '')
            $this->_actionMarkObject();
        if ($this->_actionUnmarkObject != '')
            $this->_actionUnmarkObject();
        if ($this->_actionUnmarkAllObjects)
            $this->_actionUnmarkAllObjects();

        if ($this->_actionUploadFile)
            $this->_actionUploadFile();
        if ($this->_actionUploadText)
            $this->_actionUploadText();

        if ($this->_actionCreateGroup)
            $this->_actionCreateGroup();
        if ($this->_actionDeleteGroup)
            $this->_actionDeleteGroup();
        if ($this->_actionAddToGroup != '')
            $this->_actionAddToGroup();
        if ($this->_actionRemoveFromGroup != '')
            $this->_actionRemoveFromGroup();
        if ($this->_actionAddItemToGroup != '')
            $this->_actionAddItemToGroup();
        if ($this->_actionRemoveItemFromGroup != '')
            $this->_actionRemoveItemFromGroup();

        if ($this->_actionCreateConversation)
            $this->_actionCreateConversation();
        if ($this->_actionDeleteConversation)
            $this->_actionDeleteConversation();
        if ($this->_actionAddMessageOnConversation != '')
            $this->_actionAddMessageOnConversation();
        if ($this->_actionRemoveMessageOnConversation != '')
            $this->_actionRemoveMessageOnConversation();
        if ($this->_actionAddMemberOnConversation != '')
            $this->_actionAddMemberOnConversation();
        if ($this->_actionRemoveMemberOnConversation != '')
            $this->_actionRemoveMemberOnConversation();
        if ($this->_actionCreateMessage)
            $this->_actionCreateMessage();
        if ($this->_actionAddProperty != '')
            $this->_actionAddProperty();

        if ($this->_actionCreateCurrency)
            $this->_actionCreateCurrency();
        if ($this->_actionCreateTokenPool)
            $this->_actionCreateTokenPool();
        if ($this->_actionCreateTokens)
            $this->_actionCreateTokens();

        $this->_metrologyInstance->addLog('generic actions end', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'b2046b14');
    }

    public function applicationActions():void {}

    public function modulesActions():void {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('call modules actions', Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        if (!$this->_ticketingInstance->checkActionTicket() || !$this->_unlocked)
            return;
        foreach ($this->_applicationInstance->getModulesListInstances() as $module) {
            if ($module::MODULE_COMMAND_NAME == $this->_displayInstance->getCurrentDisplayMode()) {
                try {
                    $this->_metrologyInstance->addLog('actions for module ' . $module::MODULE_COMMAND_NAME, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '55fba077');
                    $module->actions();
                } catch (\Exception $e) {
                    $this->_metrologyInstance->addLog('error actions for module ' . $module::MODULE_COMMAND_NAME
                        . ' ('  . $e->getCode() . ') : ' . $e->getFile()
                        . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                        . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, 'c48b1d8c');
                }
            }
        }
    }

    protected function _checkPermitGroupAction($name): bool
    {
        if (!isset(self::GROUP_ACTIONS_PERMIT[$name]))
        {
            $this->_metrologyInstance->addLog('unknown group action ' . $name, Metrology::LOG_LEVEL_ERROR, __METHOD__,'5edb0ddf');
            return false;
        }
        return $this->_configurationInstance->checkBooleanOptions(self::GROUP_ACTIONS_PERMIT[$name]);
    }

    const GROUP_ACTIONS_PERMIT = array(
        'GroupCreateObject' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupCreateLink' => ['unlocked','permitWrite','permitCreateLink'],
        'GroupDeleteObject' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupProtectObject' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupUnprotectObject' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupShareProtectObjectToEntity' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupShareProtectObjectToGroupOpened' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupShareProtectObjectToGroupClosed' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupCancelShareProtectObjectToEntity' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupSynchronizeObject' => ['permitWrite','permitWriteObject'],
        'GroupSynchronizeEntity' => ['permitWrite','permitWriteObject'],
        'GroupSynchronizeObjectLinks' => ['permitWrite','permitWriteLink'],
        'GroupSynchronizeApplication' => ['permitWrite','permitWriteLink','permitWriteObject','permitSynchronizeObject','permitSynchronizeLink','permitSynchronizeApplication'],
        'GroupSynchronizeNewEntity' => ['permitWrite','permitWriteObject','permitSynchronizeObject','permitSynchronizeLink'],
        'GroupUploadFileLinks' => ['permitWrite','permitWriteLink','permitUploadLink'],
        'GroupUploadFile' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupUploadText' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupCreateEntity' => ['permitWrite','permitWriteLink','permitWriteObject','permitWriteEntity'],
        'GroupCreateGroup' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject','permitWriteGroup'],
        'GroupSignLink' => ['unlocked','permitWrite','permitWriteLink','permitCreateLink'],
        'GroupUploadLink' => ['permitWrite','permitWriteLink','permitUploadLink'],
        'GroupObfuscateLink' => ['unlocked','permitWrite','permitWriteLink','permitObfuscatedLink'],
        'GroupDeleteGroup' => ['unlocked','permitWrite','permitWriteLink','permitWriteGroup'],
        'GroupAddToGroup' => ['unlocked','permitWrite','permitWriteLink','permitWriteGroup'],
        'GroupRemoveFromGroup' => ['unlocked','permitWrite','permitWriteLink','permitWriteGroup'],
        'GroupAddItemToGroup' => ['unlocked','permitWrite','permitWriteLink','permitWriteGroup'],
        'GroupRemoveItemFromGroup' => ['unlocked','permitWrite','permitWriteLink','permitWriteGroup'],
        'GroupCreateConversation' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject','permitWriteConversation'],
        'GroupDeleteConversation' => ['unlocked','permitWrite','permitWriteLink','permitWriteConversation'],
        'GroupAddMessageOnConversation' => ['unlocked','permitWrite','permitWriteLink','permitWriteConversation'],
        'GroupRemoveMessageOnConversation' => ['unlocked','permitWrite','permitWriteLink','permitWriteConversation'],
        'GroupAddMemberOnConversation' => ['unlocked','permitWrite','permitWriteLink','permitWriteConversation'],
        'GroupRemoveMemberOnConversation' => ['unlocked','permitWrite','permitWriteLink','permitWriteConversation'],
        'GroupCreateMessage' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject','permitWriteConversation'],
        'GroupAddProperty' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject'],
        'GroupCreateCurrency' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject','permitCurrency','permitWriteCurrency','permitCreateCurrency'],
        'GroupCreateTokenPool' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject','permitCurrency','permitWriteCurrency','permitCreateCurrency'],
        'GroupCreateTokens' => ['unlocked','permitWrite','permitWriteLink','permitWriteObject','permitCurrency','permitWriteCurrency','permitCreateCurrency'],
    );



    /**
     * Traitement des actions spéciales.
     *
     * Les actions peuvent être réalisées sans entité déverrouillée, mais pas nécessairement.
     * Certaines actions ne nécessitent pas la création de nouveaux liens. C'est par exemple
     *   le cas de la génération d'une nouvelle entité qui va générer ses propres liens.
     * Certaines actions peuvent avoir un comportement restreint si elles ne peuvent générer
     *   de nouveaux liens mais permettre de prendre en compte des liens déjà signés.
     *
     * Les actions spéciales doivent avoir des pré-requis bien ciblés pour éviter tout contournement.
     *
     * @return void
     */
    public function specialActions(): void
    {
        $this->_metrologyInstance->addLog('extract special actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '6f9dfb64');

        // Vérifie que l'action de création d'entité soit permise entité verrouillée.
        if ($this->_configurationInstance->getOptionAsBoolean('permitPublicCreateEntity')
            || $this->_unlocked
        )
            $this->_extractActionCreateEntity();

        // Vérifie que l'action de chargement de lien soit permise.
        if ($this->_configurationInstance->checkBooleanOptions(self::GROUP_ACTIONS_PERMIT['GroupUploadLink'])
            || $this->_unlocked
        ) {
            // Extrait les actions.
            $this->_extractActionSignLink1();
            $this->_extractActionSignLink2();
            $this->_extractActionSignLink3();
            $this->_extractActionUploadLink();
            $this->_extractActionUploadFileLinks();
        }

        $this->_metrologyInstance->addLog('router special actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '0b4f22ef');

        // Si l'action de création d'entité est validée.
        if ($this->_actionCreateEntity)
            $this->_actionCreateEntity();

        // Si l'action de chargement de lien est permise y compris entité verrouillée.
        if ($this->_configurationInstance->checkBooleanOptions(self::GROUP_ACTIONS_PERMIT['GroupUploadLink'])
            && ($this->_configurationInstance->getOptionAsBoolean('permitPublicUploadCodeAuthoritiesLink')
                || $this->_configurationInstance->getOptionAsBoolean('permitPublicUploadLink')
                || $this->_unlocked
            )
        ) {
            // Lien à signer 1.
            if ($this->_checkPermitGroupAction('GroupCreateLink')
                && is_a($this->_actionSignLinkInstance1, 'Nebule\Library\LinkRegister')
            )
                $this->_actionSignLink($this->_actionSignLinkInstance1, $this->_actionSignLinkInstance1Obfuscate);

            // Lien à signer 2.
            if ($this->_checkPermitGroupAction('GroupCreateLink')
                && is_a($this->_actionSignLinkInstance2, 'Nebule\Library\LinkRegister')
            )
                $this->_actionSignLink($this->_actionSignLinkInstance2, $this->_actionSignLinkInstance2Obfuscate);

            // Lien à signer 3.
            if ($this->_checkPermitGroupAction('GroupCreateLink')
                && is_a($this->_actionSignLinkInstance3, 'Nebule\Library\LinkRegister')
            )
                $this->_actionSignLink($this->_actionSignLinkInstance3, $this->_actionSignLinkInstance3Obfuscate);

            // Liens pré-signés.
            if ($this->_actionUploadLinkInstance !== null
                && is_a($this->_actionUploadLinkInstance, 'Nebule\Library\LinkRegister')
            )
                $this->_actionUploadLink_DISABLED($this->_actionUploadLinkInstance);

            // Fichier de liens pré-signés.
            if ($this->_actionUploadFileLinks)
                $this->_actionUploadFileLinks();
        }

        $this->_metrologyInstance->addLog('special actions end', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '88ff0291');
    }

    public function getDisplayActions(): void
    {
        $this->_displayInstance->displayInlineLastAction(); // FIXME
    }

    protected string $_actionSignLinkInstance1 = '';
    protected bool $_actionSignLinkInstance1Obfuscate = false;
    protected function _extractActionSignLink1(): void
    {
        if (!$this->_checkPermitGroupAction('GroupSignLink'))
            return;

        $this->_metrologyInstance->addLog('extract action sign link 1', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c5415d94');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SIGN_LINK1);
        $argObfuscate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_SIGN_LINK1_OBFUSCATE);

        if ($arg == '')
            return ;
        $this->_actionSignLinkInstance1 = $arg;
        $this->_actionSignLinkInstance1Obfuscate = $argObfuscate;

    }
    protected function _actionSignLink(string $link, bool $obfuscate = false): void
    {
        if ($this->_unlocked) {
            $this->_metrologyInstance->addLog('action sign link', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '8baa9fae');

            $blockLinkInstance = new BlocLink($this->_nebuleInstance, 'new');
            $blockLinkInstance->addLink($link);


            // On cache le lien ? // FIXME
            if ($obfuscate !== false
                && $obfuscate !== true
            )
                $obfuscate = $this->_configurationInstance->getOptionUntyped('defaultObfuscateLinks');
            //...

            $link->signWrite();
        } elseif ($this->_configurationInstance->getOptionAsBoolean('permitPublicUploadCodeAuthoritiesLink')
            || $this->_configurationInstance->getOptionAsBoolean('permitPublicUploadLink')
        ) {
            $this->_metrologyInstance->addLog('action sign link', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'be97740a');

            if ($link->getSigned())
                $link->write();
        }
    }

    protected string $_actionSignLinkInstance2 = '';
    protected bool $_actionSignLinkInstance2Obfuscate = false;
    protected function _extractActionSignLink2(): void
    {
        if (!$this->_checkPermitGroupAction('GroupSignLink'))
            return;

        $this->_metrologyInstance->addLog('extract action sign link 2', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'e1059b93');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SIGN_LINK2);
        $argObfuscate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_SIGN_LINK2_OBFUSCATE);

        if ($arg == '')
            return ;
        $this->_actionSignLinkInstance2 = $arg;
        $this->_actionSignLinkInstance2Obfuscate = $argObfuscate;
    }

    protected string $_actionSignLinkInstance3 = '';
    protected bool $_actionSignLinkInstance3Obfuscate = false;
    protected function _extractActionSignLink3(): void
    {
        if (!$this->_checkPermitGroupAction('GroupSignLink'))
            return;

        $this->_metrologyInstance->addLog('extract action sign link 3', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'cc145716');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SIGN_LINK3);
        $argObfuscate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_SIGN_LINK3_OBFUSCATE);

        if ($arg == '')
            return ;
            $this->_actionSignLinkInstance3 = $arg;
            $this->_actionSignLinkInstance3Obfuscate = $argObfuscate;
    }

    protected ?LinkRegister $_actionUploadLinkInstance = null;
    protected function _extractActionUploadLink(): void
    {
        if ($this->_checkPermitGroupAction('GroupUploadLink')
            && ($this->_configurationInstance->getOptionAsBoolean('permitPublicUploadLink')
                || $this->_configurationInstance->getOptionAsBoolean('permitPublicUploadCodeAuthoritiesLink')
                || $this->_unlocked
            )
        ) {
            $this->_metrologyInstance->addLog('extract action upload signed link', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '0e682f22');

            $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_UPLOAD_SIGNED_LINK);

            // Vérifie si restriction des liens au maître du code. Non par défaut.
            $permitNotCodeMaster = false;
            if ($this->_configurationInstance->getOptionAsBoolean('permitPublicUploadLink')
                || $this->_unlocked
            )
                $permitNotCodeMaster = true;

            // Extraction du lien et stockage pour traitement.
            if ($arg != ''
                && strlen($arg) != 0
            ) {
                $instance = $this->flatLinkExtractAsInstance_DISABLED($arg);
                if ($instance->getValid()
                    && $instance->getSigned()
                    && ($instance->getSignersEID() == $this->_authoritiesInstance->getCodeAuthoritiesEID()
                        || $permitNotCodeMaster
                    )
                )
                    $this->_actionUploadLinkInstance = $instance;
                unset($instance);
            }
        }
    }

    protected ?LinkRegister $_actionObfuscateLinkInstance = null;
    protected function _extractActionObfuscateLink(): void
    {
        if (!$this->_checkPermitGroupAction('GroupObfuscateLink'))
            return;

        $this->_metrologyInstance->addLog('extract action obfuscate link', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c22677ad');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_OBFUSCATE_LINK);

        if (strlen($arg) != 0)
            $this->_actionObfuscateLinkInstance = $this->flatLinkExtractAsInstance_DISABLED($arg);
    }
    protected function _actionObfuscateLink(): void
    {
        if ($this->_actionObfuscateLinkInstance === null
            || !$this->_actionObfuscateLinkInstance->getValid()
            || !$this->_actionObfuscateLinkInstance->getSigned() // FIXME
        )
            return;

        $this->_metrologyInstance->addLog('action obfuscate link', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'b3bf62a9');

        // On dissimule le lien.
        $this->_actionObfuscateLinkInstance->obfuscateWrite();
    }

    protected bool $_actionDeleteObject = false;
    protected string $_actionDeleteObjectID = '0';
    protected ?Node $_actionDeleteObjectInstance = null;
    protected bool $_actionDeleteObjectForce = false;
    protected bool $_actionDeleteObjectObfuscate = false;
    public function getDeleteObject(): bool
    {
        return $this->_actionDeleteObject;
    }
    public function getDeleteObjectID(): string
    {
        return $this->_actionDeleteObjectID;
    }
    protected function _extractActionDeleteObject(): void
    {
        if (!$this->_checkPermitGroupAction('GroupDeleteObject'))
            return;

        $this->_metrologyInstance->addLog('extract action delete object', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '19096242');

        $argObject = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_DELETE_OBJECT, FILTER_FLAG_ENCODE_LOW);
        $argForce = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_DELETE_OBJECT_FORCE);
        $argObfuscate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_DELETE_OBJECT_OBFUSCATE);

        // Extraction de l'objet à supprimer.
        if (Node::checkNID($argObject)) {
            $this->_actionDeleteObjectID = $argObject;
            $this->_actionDeleteObjectInstance = $this->_cacheInstance->newNode($argObject);
            $this->_actionDeleteObject = true;
        }

        // Extraction si la suppression doit être forcée.
        if ($argForce)
            $this->_actionDeleteObjectForce = true;

        // Extraction si la suppression doit être cachée.
        if ($argObfuscate
            && $this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink')
        )
            $this->_actionDeleteObjectObfuscate = true;
    }
    protected function _actionDeleteObject(): void
    {
        $this->_metrologyInstance->addLog('action delete object', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '234f6195');

        // Suppression de l'objet.
        if ($this->_actionDeleteObjectForce)
            $this->_actionDeleteObjectInstance->deleteForceObject();
        else
            $this->_actionDeleteObjectInstance->deleteObject();
    }

    protected ?Node $_actionProtectObjectInstance = null;
    protected function _extractActionProtectObject(): void
    {
        if (!$this->_checkPermitGroupAction('GroupProtectObject'))
            return;

        $this->_metrologyInstance->addLog('extract action protect object', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'd4d5b6f4');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_PROTECT_OBJECT, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionProtectObjectInstance = $this->_cacheInstance->newNode($arg);
    }
    protected function _actionProtectObject(): void
    {
        $this->_metrologyInstance->addLog('action protect object', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '0aff7e01');

        // Demande de protection de l'objet.
        $this->_actionProtectObjectInstance->setProtected();
    }

    protected ?Node $_actionUnprotectObjectInstance = null;
    protected function _extractActionUnprotectObject(): void
    {
        if (!$this->_checkPermitGroupAction('GroupUnprotectObject'))
            return;

        $this->_metrologyInstance->addLog('extract action unprotect object', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '4a15018f');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_UNPROTECT_OBJECT, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionUnprotectObjectInstance = $this->_cacheInstance->newNode($arg);
    }
    protected function _actionUnprotectObject(): void
    {
        $this->_metrologyInstance->addLog('action unprotect object', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '2a652083');

        // Demande de protection de l'objet.
        $this->_actionUnprotectObjectInstance->setUnprotected();
    }

    protected string $_actionShareProtectObjectToEntity = '';
    protected function _extractActionShareProtectObjectToEntity(): void
    {
        if (!$this->_checkPermitGroupAction('GroupShareProtectObjectToEntity'))
            return;

        $this->_metrologyInstance->addLog('extract action share protect object to entity', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'ae098953');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SHARE_PROTECT_TO_ENTITY, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionShareProtectObjectToEntity = $arg;
    }
    protected function _actionShareProtectObjectToEntity(): void
    {
        $this->_metrologyInstance->addLog('action share protect object to entity ' . $this->_actionShareProtectObjectToEntity, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '27bac517');

        // Demande de protection de l'objet.
        $this->_nebuleInstance->getCurrentObjectInstance()->shareProtectionTo($this->_actionShareProtectObjectToEntity);
    }

    protected string $_actionShareProtectObjectToGroupOpened = '';
    protected function _extractActionShareProtectObjectToGroupOpened(): void
    {
        if (!$this->_checkPermitGroupAction('GroupShareProtectObjectToGroupOpened'))
            return;

        $this->_metrologyInstance->addLog('extract action share protect object to opened group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '302775bd');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SHARE_PROTECT_TO_GROUP_OPENED, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionShareProtectObjectToGroupOpened = $arg;
    }
    protected function _actionShareProtectObjectToGroupOpened(): void
    {
        $this->_metrologyInstance->addLog('action share protect object to opened group', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '3ae7ee74');

        // Demande de protection de l'objet.
        $group = $this->_cacheInstance->newGroup($this->_actionShareProtectObjectToGroupOpened);
        foreach ($group->getListMembersID('myself', null) as $id) {
            $this->_nebuleInstance->getCurrentObjectInstance()->shareProtectionTo($id);
        }
        unset($group, $id);
    }

    protected string $_actionShareProtectObjectToGroupClosed = '';
    protected function _extractActionShareProtectObjectToGroupClosed(): void
    {
        if (!$this->_checkPermitGroupAction('GroupShareProtectObjectToGroupClosed'))
            return;

        $this->_metrologyInstance->addLog('extract action share protect object to closed group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c6c42849');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SHARE_PROTECT_TO_GROUP_CLOSED, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionShareProtectObjectToGroupClosed = $arg;
    }
    protected function _actionShareProtectObjectToGroupClosed(): void
    {
        $this->_metrologyInstance->addLog('action share protect object to closed group', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'b217dcb1');

        // Demande de protection de l'objet.
        $group = $this->_cacheInstance->newGroup($this->_actionShareProtectObjectToGroupClosed);
        foreach ($group->getListMembersID('myself', null) as $id) {
            $this->_nebuleInstance->getCurrentObjectInstance()->shareProtectionTo($id);
        }
        unset($group, $id);
    }

    protected string $_actionCancelShareProtectObjectToEntity = '';
    protected function _extractActionCancelShareProtectObjectToEntity(): void
    {
        if (!$this->_checkPermitGroupAction('GroupCancelShareProtectObjectToEntity'))
            return;

        $this->_metrologyInstance->addLog('extract action cancel share protect object to entity', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'bf5ed8c7');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CANCEL_SHARE_PROTECT_TO_ENTITY, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionCancelShareProtectObjectToEntity = $arg;
    }
    protected function _actionCancelShareProtectObjectToEntity(): void
    {
        $this->_metrologyInstance->addLog('action cancel share protect object to entity', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '71313220');

        // Demande d'annulation de protection de l'objet.
        $this->_nebuleInstance->getCurrentObjectInstance()->cancelShareProtectionTo($this->_actionCancelShareProtectObjectToEntity);
    }

    protected ?Node $_actionSynchronizeObjectInstance = null;
    public function getSynchronizeObjectInstance(): ?Node
    {
        return $this->_actionSynchronizeObjectInstance;
    }
    protected function _extractActionSynchronizeObject(): void
    {
        if (!$this->_checkPermitGroupAction('GroupSynchronizeObject'))
            return;

        $this->_metrologyInstance->addLog('extract action synchronize object', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'd9e5454c');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SYNCHRONIZE_OBJECT, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionSynchronizeObjectInstance = $this->_cacheInstance->newNode($arg);
    }
    protected function _actionSynchronizeObject(): void
    {
        $this->_metrologyInstance->addLog('action synchronize object', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '74dfb558');

        echo $this->_displayInstance->convertInlineIconFace('DEFAULT_ICON_SYNOBJ') . $this->_displayInstance->convertInlineObjectColor($this->_actionSynchronizeObjectInstance);

        // Synchronisation.
        $this->_actionSynchronizeObjectInstance->syncObject();
    }

    protected ?Entity $_actionSynchronizeEntityInstance = null;
    public function getSynchronizeEntityInstance(): ?Entity
    {
        return $this->_actionSynchronizeEntityInstance;
    }
    protected function _extractActionSynchronizeEntity(): void
    {
        if (!$this->_checkPermitGroupAction('GroupSynchronizeEntity'))
            return;

        $this->_metrologyInstance->addLog('extract action synchronize entity', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '2ec437bf');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SYNCHRONIZE_ENTITY, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionSynchronizeEntityInstance = $this->_cacheInstance->newEntity($arg);
    }
    protected function _actionSynchronizeEntity(): void
    {
        $this->_metrologyInstance->addLog('action synchronize entity', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'f41d4b64');

        echo $this->_displayInstance->convertInlineIconFace('DEFAULT_ICON_SYNENT') . $this->_displayInstance->convertInlineObjectColor($this->_actionSynchronizeEntityInstance);

        // Synchronisation des liens (l'objet est forcément présent).
        $this->_actionSynchronizeEntityInstance->syncLinks();

        // Liste des liens l pour l'entité en source.
        $links = $this->_actionSynchronizeEntityInstance->readLinksFilterFull('', '', 'l', $this->_actionSynchronizeEntityInstance->getID(), '', '');
        // Synchronise l'objet cible.
        $object = null;
        foreach ($links as $link) {
            $object = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid2']);
            // Synchronise les liens (avant).
            $object->syncLinks();
            // Synchronise l'objet.
            $object->syncObject();
        }
        // Liste des liens l pour l'entité en cible.
        $links = $this->_actionSynchronizeEntityInstance->readLinksFilterFull('', '', 'l', '', $this->_actionSynchronizeEntityInstance->getID(), '');
        // Synchronise l'objet source.
        $object = null;
        foreach ($links as $link) {
            $object = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid1']);
            // Synchronise les liens (avant).
            $object->syncLinks();
            // Synchronise l'objet.
            $object->syncObject();
        }
        unset($links, $link, $object);
    }

    protected ?Node $_actionSynchronizeObjectLinksInstance = null;
    public function getSynchronizeObjectLinksInstance(): ?Node
    {
        return $this->_actionSynchronizeObjectLinksInstance;
    }
    protected function _extractActionSynchronizeObjectLinks(): void
    {
        if (!$this->_checkPermitGroupAction('GroupSynchronizeObjectLinks'))
            return;

        $this->_metrologyInstance->addLog('extract action synchronize object links', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '1ec3ab52');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SYNCHRONIZE_LINKS, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionSynchronizeObjectLinksInstance = $this->_cacheInstance->newNode($arg);
    }
    protected function _actionSynchronizeObjectLinks(): void
    {
        $this->_metrologyInstance->addLog('action synchronize object links', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '4dc338f4');

        echo $this->_displayInstance->convertInlineIconFace('DEFAULT_ICON_SYNLNK') . $this->_displayInstance->convertInlineObjectColor($this->_actionSynchronizeObjectLinksInstance);

        // Synchronisation.
        $this->_actionSynchronizeObjectLinksInstance->syncLinks();
    }

    protected ?Node $_actionSynchronizeApplicationInstance = null;
    public function getSynchronizeApplicationInstance(): ?Node
    {
        return $this->_actionSynchronizeApplicationInstance;
    }
    protected function _extractActionSynchronizeApplication(): void
    {
        if ($this->_checkPermitGroupAction('GroupSynchronizeApplication')
            && ($this->_configurationInstance->getOptionAsBoolean('permitPublicSynchronizeApplication')
                || $this->_unlocked
            )
        ) {
            $this->_metrologyInstance->addLog('extract action synchronize entity', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '2692acb5');

            $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SYNCHRONIZE_APPLICATION, FILTER_FLAG_ENCODE_LOW);

            if (Node::checkNID($arg))
                $this->_actionSynchronizeApplicationInstance = $this->_cacheInstance->newNode($arg);
        }
    }
    protected function _actionSynchronizeApplication(): void
    {
        $this->_metrologyInstance->addLog('action synchronize application', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'c5d52f3e');

        echo $this->_displayInstance->convertInlineIconFace('DEFAULT_ICON_SYNOBJ') . $this->_displayInstance->convertInlineObjectColor($this->_actionSynchronizeApplicationInstance);

        // Synchronisation des liens (l'objet est forcément présent).
        $this->_actionSynchronizeApplicationInstance->syncLinks();

        // Liste des liens l pour l'entité en source.
        $links = $this->_actionSynchronizeApplicationInstance->readLinksFilterFull('', '', 'l', $this->_actionSynchronizeApplicationInstance->getID(), '', '');
        // Synchronise l'objet cible.
        $object = null;
        foreach ($links as $link) {
            $object = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid2']);
            // Synchronise les liens (avant).
            $object->syncLinks();
            // Synchronise l'objet.
            $object->syncObject();
        }
        // Liste des liens l pour l'entité en cible.
        $links = $this->_actionSynchronizeApplicationInstance->readLinksFilterFull('', '', 'l', '', $this->_actionSynchronizeApplicationInstance->getID(), '');
        // Synchronise l'objet source.
        $object = null;
        foreach ($links as $link) {
            $object = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid1']);
            // Synchronise les liens (avant).
            $object->syncLinks();
            // Synchronise l'objet.
            $object->syncObject();
        }
        unset($links, $link, $object);
    }

    protected string $_actionSynchronizeNewEntityID = '';
    protected string $_actionSynchronizeNewEntityURL = '';
    protected ?Entity $_actionSynchronizeNewEntityInstance = null;
    public function getSynchronizeNewEntityInstance(): ?Entity
    {
        return $this->_actionSynchronizeNewEntityInstance;
    }
    protected function _extractActionSynchronizeNewEntity(): void
    {
        if (!$this->_checkPermitGroupAction('GroupSynchronizeNewEntity'))
            return;

        $this->_metrologyInstance->addLog('extract action synchronize new entity', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_SYNCHRONIZE_NEW_ENTITY, FILTER_FLAG_ENCODE_LOW);

        // Extraction de l'URL et stockage pour traitement.
        if ($arg != ''
            && strlen($arg) >= 9
            && ctype_print($arg)
        ) {
            // Décompose l'URL.
            $parseURL = parse_url($arg);
            // Extrait le protocol.
            if (isset($parseURL['scheme'])
                && ($parseURL['scheme'] == 'http'
                    || $parseURL['scheme'] == 'https'
                )
            )
                $scheme = $parseURL['scheme'];
            else {
                // Il manque le protocol, suppose que c'est http.
                $scheme = 'http';
                $parseURL = parse_url($scheme . '://' . $arg);
            }
            // Vérifie les champs de l'URL.
            if ($parseURL['host'] != ''
                && $parseURL['path'] != ''
                && substr($parseURL['path'], 0, 3) == '/o/'
            ) {
                // Extrait l'ID de l'objet de l'entité à synchroniser.
                $id = substr($parseURL['path'], 3);
                $this->_metrologyInstance->addLog('extract action synchronize new entity - ID=' . $id, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
                // Vérifie l'ID.
                if (!$this->_ioInstance->checkObjectPresent($id)
                    && Node::checkNID($id)
                ) {
                    // Si c'est bon on prépare pour la synchronisation.
                    $this->_actionSynchronizeNewEntityID = $id;
                    $this->_actionSynchronizeNewEntityURL = $scheme . '://' . $parseURL['host'];
                    if (isset($parseURL['port'])) {
                        $port = $parseURL['port'];
                        $this->_actionSynchronizeNewEntityURL .= ':' . $port;
                    }
                    $this->_metrologyInstance->addLog('extract action synchronize new entity - URL=' . $this->_actionSynchronizeNewEntityURL, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
                }
            }
        }
    }
    protected function _actionSynchronizeNewEntity(): void
    {
        $this->_metrologyInstance->addLog('action synchronize new entity', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        // Vérifie si l'objet est déjà présent.
        $present = $this->_ioInstance->checkObjectPresent($this->_actionSynchronizeNewEntityID);
        // Lecture de l'objet.
        $data = $this->_ioInstance->getObject($this->_actionSynchronizeNewEntityID, Entity::ENTITY_MAX_SIZE, $this->_actionSynchronizeNewEntityURL);
        // Calcul de l'empreinte.
        $hash = $this->_nebuleInstance->getCryptoInstance()->hash($data);
        if ($hash != $this->_actionSynchronizeNewEntityID) {
            $this->_metrologyInstance->addLog('action synchronize new entity - Hash error', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
            unset($data);
            echo $this->_displayInstance->convertInlineIconFace('DEFAULT_ICON_SYNENT') .
                $this->_displayInstance->convertInlineObjectColor($this->_actionSynchronizeNewEntityID) .
                $this->_displayInstance->convertInlineIconFace('DEFAULT_ICON_IERR');
            $this->_actionSynchronizeNewEntityID = '';
            $this->_actionSynchronizeNewEntityURL = '';
            return;
        }
        // Ecriture de l'objet.
        $this->_ioInstance->setObject($this->_actionSynchronizeNewEntityID, $data);

        $this->_actionSynchronizeNewEntityInstance = $this->_cacheInstance->newEntity($this->_actionSynchronizeNewEntityID);

        if (!$this->_actionSynchronizeNewEntityInstance->getTypeVerify()) {
            $this->_metrologyInstance->addLog('action synchronize new entity - Not entity', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
            if (!$present)
                $this->_actionSynchronizeNewEntityInstance->deleteObject();
        }

        echo $this->_displayInstance->convertInlineIconFace('DEFAULT_ICON_SYNENT') . $this->_displayInstance->convertInlineObjectColor($this->_actionSynchronizeNewEntityInstance);

        // Synchronisation des liens.
        $this->_actionSynchronizeNewEntityInstance->syncLinks();

        // Liste des liens l pour l'entité en source.
        $links = $this->_actionSynchronizeNewEntityInstance->getLinksOnFields('', '', 'l', $hash, '', '');
        // Synchronise l'objet cible.
        $object = null;
        foreach ($links as $link) {
            $object = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid2']);
            // Synchronise les liens (avant).
            $object->syncLinks();
            // Synchronise l'objet.
            $object->syncObject();
        }
        // Liste des liens l pour l'entité en cible.
        $links = $this->_actionSynchronizeNewEntityInstance->getLinksOnFields('', '', 'l', '', $hash, '');
        // Synchronise l'objet source.
        $object = null;
        foreach ($links as $link) {
            $object = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid1']);
            // Synchronise les liens (avant).
            $object->syncLinks();
            // Synchronise l'objet.
            $object->syncObject();
        }
        unset($links, $link, $object);
    }

    protected string $_actionMarkObject = '';
    protected function _extractActionMarkObject(): void
    {
        $this->_metrologyInstance->addLog('extract action mark object', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_MARK_OBJECT, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionMarkObject = $arg;
    }
    protected function _actionMarkObject(): void
    {
        $this->_metrologyInstance->addLog('action mark object', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $this->_applicationInstance->setMarkObject($this->_actionMarkObject);
    }

    protected string $_actionUnmarkObject = '';
    protected function _extractActionUnmarkObject(): void
    {
        $this->_metrologyInstance->addLog('extract action unmark object', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_UNMARK_OBJECT, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionUnmarkObject = $arg;
    }
    protected function _actionUnmarkObject(): void
    {
        $this->_metrologyInstance->addLog('action unmark object', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $this->_applicationInstance->setUnmarkObject($this->_actionUnmarkObject);
    }

    protected bool $_actionUnmarkAllObjects = false;
    protected function _extractActionUnmarkAllObjects(): void
    {
        $this->_metrologyInstance->addLog('extract action unmark all objects', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_UNMARK_ALL_OBJECT);

        if ($arg !== false)
            $this->_actionUnmarkAllObjects = true;
    }
    protected function _actionUnmarkAllObjects(): void
    {
        $this->_metrologyInstance->addLog('action unmark all objects', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $this->_applicationInstance->setUnmarkAllObjects();
    }

    protected bool $_actionUploadFileLinks = false;
    protected string $_actionUploadFileLinksName = '';
    protected string $_actionUploadFileLinksSize = '';
    protected string $_actionUploadFileLinksPath = '';
    protected bool $_actionUploadFileLinksError = false;
    protected string $_actionUploadFileLinksErrorMessage = 'Initialisation du transfert.';
    public function getUploadFileSignedLinks(): bool
    {
        return $this->_actionUploadFileLinks;
    }
    protected function _extractActionUploadFileLinks(): void
    {
        if ($this->_checkPermitGroupAction('GroupUploadFileLinks')
            && ($this->_configurationInstance->getOptionAsBoolean('permitPublicUploadLink')
                || $this->_configurationInstance->getOptionAsBoolean('permitPublicUploadCodeAuthoritiesLink')
                || $this->_unlocked
            )
        ) {
            $this->_metrologyInstance->addLog('extract action upload file of signed links', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

            // Lit le contenu de la variable _FILE si un fichier est téléchargé.
            if (isset($_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_LINKS]['error'])
                && $_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_LINKS]['error'] == UPLOAD_ERR_OK
                && trim($_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_LINKS]['name']) != ''
            ) {
                // Extraction des méta données du fichier.
                $upname = mb_convert_encoding(strtok(trim((string)filter_var($_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_LINKS]['name'], FILTER_SANITIZE_STRING)), "\n"), 'UTF-8');
                $upsize = $_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_LINKS]['size'];
                $uppath = $_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_LINKS]['tmp_name'];

                // Si le fichier est bien téléchargé.
                if (file_exists($uppath)) {
                    // Si le fichier n'est pas trop gros.
                    if ($upsize <= $this->_configurationInstance->getOptionUntyped('ioReadMaxData')) {
                        // Ecriture des variables.
                        $this->_actionUploadFileLinks = true;
                        $this->_actionUploadFileLinksName = $upname;
                        $this->_actionUploadFileLinksSize = $upsize;
                        $this->_actionUploadFileLinksPath = $uppath;
                    } else {
                        $this->_metrologyInstance->addLog('action _extractActionUploadFileLinks File size too big', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                        $this->_actionUploadFileLinksError = true;
                        $this->_actionUploadFileLinksErrorMessage = 'File size too big';
                    }
                } else {
                    $this->_metrologyInstance->addLog('action _extractActionUploadFileLinks File upload error', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                    $this->_actionUploadFileLinksError = true;
                    $this->_actionUploadFileLinksErrorMessage = 'File upload error';
                }
            }
        }
    }
    /**
     * Transfert un fichier de liens pré-signés et les ajoute.
     *
     * Cette fonction est appelée par la fonction specialActions().
     * Elle est utilisée par l'application upload et le module module_upload de l'application sylabe.
     * Le fonctioneement est identique dans ces deux usages même si l'affichage ne le montre pas.
     *
     * La fonction nécessite au minimum les droits :
     *   - permitWrite
     *   - permitWriteLink
     *   - permitUploadLink
     * L'activation de la fonction est ensuite conditionnée par une conbinaison d'autres droits ou facteurs.
     *
     * Si le droit permitPublicUploadCodeAuthoritiesLink est activé :
     *   les liens signés du maître du code sont acceptés ;
     *   les liens des autres entités sont ignorés avec seulement ce droit.
     *
     * Si le droit permitPublicUploadLink est activé :
     *   tous les liens signés sont acceptés ;
     *   les entités signataires doivent exister localement pour la vérification les signatures.
     *
     * Si l'entité en cours est déverrouillée, this->_unlocked :
     *   la réception de liens est prise comme une action légitime ;
     *   les liens signés de toutes les entités sont acceptés ;
     *   les liens non signés sont signés par l'entité en cours.
     * Si un lien est structurellement valide mais non signé, il est régénéré et signé par l'entité en cours.
     *
     * Les liens ne sont écris que si leurs signatures sont valides.
     *
     * @return void
     */
    protected function _actionUploadFileLinks(): void
    {
        $this->_metrologyInstance->addLog('action upload file signed links', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        // Ecrit les liens correctement signés.
        $updata = file($this->_actionUploadFileLinksPath);
        $nbLinks = 0; // FIXME unused
        $nbLines = 0; // FIXME unused
        foreach ($updata as $line) {
            if (substr($line, 0, 21) != 'nebule/liens/version/') {
                $nbLines++;
                $instance = $this->_cacheInstance->newBlockLink($line);
                if ($instance->getValid()) {
                    if ($instance->getSigned()
                        && (($instance->getSignersEID() == $this->_authoritiesInstance->getCodeAuthoritiesEID()
                                && $this->_configurationInstance->getOptionAsBoolean('permitPublicUploadCodeAuthoritiesLink')
                            )
                            || $this->_configurationInstance->getOptionAsBoolean('permitPublicUploadLink')
                            || $this->_unlocked
                        )
                    ) {
                        $instance->write();
                        $nbLinks++;
                        $this->_metrologyInstance->addLog('action upload file links - signed link ' . $instance->getRaw(), Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
                    } elseif ($this->_unlocked) {
                        /*$instance = $this->_cacheInstance->newBlockLink( FIXME
                            '0_'
                            . $this->_entitiesInstance->getCurrentEntityID() . '_'
                            . $instance->getDate() . '_'
                            . $instance->getParsed()['bl/rl/req'] . '_'
                            . $instance->getParsed()['bl/rl/nid1'] . '_'
                            . $instance->getParsed()['bl/rl/nid2'] . '_'
                            . $instance->getParsed()['bl/rl/nid3']
                        );
                        $instance->signWrite();*/
                        $nbLinks++;
                        $this->_metrologyInstance->addLog('action upload file links - unsigned link ' . $instance->getRaw(), Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
                    }
                }
            }
        }
    }

    protected bool $_actionUploadFile = false;
    protected string $_actionUploadFileID = '0';
    protected string $_actionUploadFileName = '';
    protected string $_actionUploadFileExtension = '';
    protected string $_actionUploadFileType = '';
    protected string $_actionUploadFileSize = '';
    protected string $_actionUploadFilePath = '';
    protected bool $_actionUploadFileUpdate = false;
    protected bool $_actionUploadFileProtect = false;
    protected bool $_actionUploadFileObfuscateLinks = false;
    protected bool $_actionUploadFileError = false;
    protected string $_actionUploadFileErrorMessage = 'Initialisation du transfert.';
    public function getUploadObject(): bool
    {
        return $this->_actionUploadFile;
    }
    public function getUploadObjectID(): string
    {
        return $this->_actionUploadFileID;
    }
    public function getUploadObjectError(): bool
    {
        return $this->_actionUploadFileError;
    }
    public function getUploadObjectErrorMessage(): string
    {
        return $this->_actionUploadFileErrorMessage;
    }
    protected function _extractActionUploadFile(): void
    {
        if (!$this->_checkPermitGroupAction('GroupUploadFile'))
            return;

        $this->_metrologyInstance->addLog('extract action upload file', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $uploadArgName = self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE;
        if (!isset($_FILES[$uploadArgName]))
            return;
        $uploadRawName = $_FILES[$uploadArgName]['name'];
        $uploadError = $_FILES[$uploadArgName]['error'];

        switch ($_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE]['error']) {
            case UPLOAD_ERR_OK:
                // Extraction des méta données du fichier.
                $upfname = mb_convert_encoding(strtok(trim((string)filter_var($_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE]['name'], FILTER_SANITIZE_STRING)), "\n"), 'UTF-8');
                $upinfo = pathinfo($upfname);
                $upext = $upinfo['extension'];
                $upname = basename($upfname, '.' . $upext);
                $upsize = $_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE]['size'];
                $uppath = $_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE]['tmp_name'];
                $uptype = '';
                // Si le fichier est bien téléchargé.
                if (file_exists($uppath)) {
                    // Si le fichier n'est pas trop gros.
                    if ($upsize <= $this->_configurationInstance->getOptionUntyped('ioReadMaxData')) {
                        // Lit le type mime.
                        $finfo = finfo_open(FILEINFO_MIME_TYPE);
                        $uptype = finfo_file($finfo, $uppath);
                        finfo_close($finfo);
                        if ($uptype == 'application/octet-stream') {
                            $uptype = $this->_getFilenameTypeMime("$upname.$upext");
                        }

                        // Extrait les options de téléchargement.
                        $argUpd = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_UPDATE);
                        $argPrt = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_PROTECT);
                        $argObf = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE_OBFUSCATE_LINKS);

                        // Ecriture des variables.
                        $this->_actionUploadFile = true;
                        $this->_actionUploadFileName = $upname;
                        $this->_actionUploadFileExtension = $upext;
                        $this->_actionUploadFileType = $uptype;
                        $this->_actionUploadFileSize = $upsize;
                        $this->_actionUploadFilePath = $uppath;
                        $this->_actionUploadFileUpdate = $argUpd;
                        if ($this->_configurationInstance->getOptionAsBoolean('permitProtectedObject')) {
                            $this->_actionUploadFileProtect = $argPrt;
                        }
                        if ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink')) {
                            $this->_actionUploadFileObfuscateLinks = $argObf;
                        }
                    } else {
                        $this->_metrologyInstance->addLog('action _extractActionUploadFile ioReadMaxData exeeded', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                        $this->_actionUploadFileError = true;
                        $this->_actionUploadFileErrorMessage = 'Le fichier dépasse la taille limite de transfert.';
                    }
                } else {
                    $this->_metrologyInstance->addLog('action _extractActionUploadFile upload error', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                    $this->_actionUploadFileError = true;
                    $this->_actionUploadFileErrorMessage = "No uploaded file.";
                }
                unset($upfname, $upinfo, $upext, $upname, $upsize, $uppath, $uptype);
                break;
            case UPLOAD_ERR_INI_SIZE:
                $this->_metrologyInstance->addLog('action _extractActionUploadFile upload PHP error UPLOAD_ERR_INI_SIZE', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionUploadFileError = true;
                $this->_actionUploadFileErrorMessage = "The uploaded file exceeds the upload_max_filesize directive in php.ini.";
                break;
            case UPLOAD_ERR_FORM_SIZE:
                $this->_metrologyInstance->addLog('action _extractActionUploadFile upload PHP error UPLOAD_ERR_FORM_SIZE', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionUploadFileError = true;
                $this->_actionUploadFileErrorMessage = "The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form.";
                break;
            case UPLOAD_ERR_PARTIAL:
                $this->_metrologyInstance->addLog('action _extractActionUploadFile upload PHP error UPLOAD_ERR_PARTIAL', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionUploadFileError = true;
                $this->_actionUploadFileErrorMessage = "The uploaded file was only partially uploaded.";
                break;
            case UPLOAD_ERR_NO_FILE:
                $this->_metrologyInstance->addLog('action _extractActionUploadFile upload PHP error UPLOAD_ERR_NO_FILE', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionUploadFileError = true;
                $this->_actionUploadFileErrorMessage = "No file was uploaded.";
                break;
            case UPLOAD_ERR_NO_TMP_DIR:
                $this->_metrologyInstance->addLog('action _extractActionUploadFile upload PHP error UPLOAD_ERR_NO_TMP_DIR', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionUploadFileError = true;
                $this->_actionUploadFileErrorMessage = "Missing a temporary folder.";
                break;
            case UPLOAD_ERR_CANT_WRITE:
                $this->_metrologyInstance->addLog('action _extractActionUploadFile upload PHP error UPLOAD_ERR_CANT_WRITE', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionUploadFileError = true;
                $this->_actionUploadFileErrorMessage = "Failed to write file to disk.";
                break;
            case UPLOAD_ERR_EXTENSION:
                $this->_metrologyInstance->addLog('action _extractActionUploadFile upload PHP error UPLOAD_ERR_EXTENSION', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionUploadFileError = true;
                $this->_actionUploadFileErrorMessage = "A PHP extension stopped the file upload. PHP does not provide a way to ascertain which extension caused the file upload to stop.";
                break;
        }
    }
    protected function _getFilenameTypeMime(string $f): string
    {
        $m = '/etc/mime.types'; // Chemin du fichier pour trouver le type mime.
        $e = substr(strrchr($f, '.'), 1);
        if (empty($e))
            return 'application/octet-stream';
        $r = "/^([\w\+\-\.\/]+)\s+(\w+\s)*($e\s)/i";
        $ls = file($m);
        foreach ($ls as $l) {
            if (substr($l, 0, 1) == '#')
                continue;
            $l = rtrim($l) . ' ';
            if (!preg_match($r, $l, $m))
                continue;
            return $m[1];
        }
        return 'application/octet-stream';
    }
    protected function _actionUploadFile(): void
    {
        $this->_metrologyInstance->addLog('action upload file', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        // Lit le contenu du fichier.
        $data = file_get_contents($_FILES[self::DEFAULT_COMMAND_ACTION_UPLOAD_FILE]['tmp_name']);

        // Ecrit le contenu dans l'objet.
        $instance = new Node($this->_nebuleInstance, '0', $data, $this->_actionUploadFileProtect);
        if ($instance === false) {
            $this->_metrologyInstance->addLog('action _actionUploadFile cant create object instance', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionUploadFileError = true;
            $this->_actionUploadFileErrorMessage = "L'instance de l'objet n'a pas pu être créée.";
            return;
        }

        // Lit l'ID.
        $id = $instance->getID();
        unset($data);
        if ($id == '0') {
            $this->_metrologyInstance->addLog('action _actionUploadFile cant create object', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionUploadFileError = true;
            $this->_actionUploadFileErrorMessage = "L'objet n'a pas pu être créé.";
            return;
        }
        $this->_actionUploadFileID = $id;

        // Définition de la date et le signataire.
        $date = date(DATE_ATOM);
        $signer = $this->_entitiesInstance->getCurrentEntityID();

        // Création du type mime.
        $instance->setType($this->_actionUploadFileType);

        // Crée l'objet du nom.
        $instance->setName($this->_actionUploadFileName);

        // Crée l'objet de l'extension.
        $instance->setSuffix($this->_actionUploadFileExtension);

        // Si mise à jour de l'objet en cours.
        if ($this->_actionUploadFileUpdate) {
            // Crée le lien.
            $action = 'u';
            $source = $this->_applicationInstance->getCurrentObjectID();
            $target = $id;
            $meta = '0';
            $this->_createLink_DISABLED($signer, $date, $action, $source, $target, $meta, $this->_actionUploadFileObfuscateLinks);
        }
    }

    protected bool $_actionUploadText = false;
    protected string $_actionUploadTextName = '';
    protected string $_actionUploadTextType = '';
    protected string $_actionUploadTextContent = '';
    protected string $_actionUploadTextID = '0';
    protected bool $_actionUploadTextProtect = false;
    protected bool $_actionUploadTextObfuscateLinks = false;
    protected bool $_actionUploadTextError = false;
    protected string $_actionUploadTextErrorMessage = 'Initialisation du transfert.';
    public function getUploadText(): bool
    {
        return $this->_actionUploadText;
    }
    public function getUploadTextName(): string
    {
        return $this->_actionUploadTextName;
    }
    public function getUploadTextID(): string
    {
        return $this->_actionUploadTextID;
    }
    public function getUploadTextError(): bool
    {
        return $this->_actionUploadTextError;
    }
    public function getUploadTextErrorMessage(): string
    {
        return $this->_actionUploadTextErrorMessage;
    }
    protected function _extractActionUploadText(): void
    {
        if (!$this->_checkPermitGroupAction('GroupUploadText'))
            return;

        $this->_metrologyInstance->addLog('extract action upload text', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_UPLOAD_TEXT);

        // Extraction du lien et stockage pour traitement.
        if ($arg !== false) {
            $argText = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_UPLOAD_TEXT, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argName = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_NAME, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argType = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_TYPE, FILTER_FLAG_NO_ENCODE_QUOTES);

            // Extrait les options de téléchargement.
            $argPrt = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_PROTECT);
            $argObf = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_OBFUSCATE_LINKS);

            if (strlen($argText) != 0) {
                $this->_actionUploadText = true;
                $this->_actionUploadTextContent = $argText;
                $this->_actionUploadTextName = $argName;
                if ($argType != '')
                    $this->_actionUploadTextType = $argType;
                else
                    $this->_actionUploadTextType = References::REFERENCE_OBJECT_TEXT;

                if ($this->_configurationInstance->getOptionAsBoolean('permitProtectedObject'))
                    $this->_actionUploadTextProtect = $argPrt;
                if ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
                    $this->_actionUploadTextObfuscateLinks = $argObf;
            }
        }
    }
    protected function _actionUploadText(): void
    {
        $this->_metrologyInstance->addLog('action upload text', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        // Crée l'instance de l'objet.
        $instance = new Node($this->_nebuleInstance, '0', $this->_actionUploadTextContent, $this->_actionUploadTextProtect);
        if ($instance === false) {
            $this->_metrologyInstance->addLog('action _actionUploadText cant create object instance', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionUploadFileError = true;
            $this->_actionUploadFileErrorMessage = "L'instance de l'objet n'a pas pu être créée.";
            return;
        }

        // Lit l'ID.
        $id = $instance->getID();
        if ($id == '0') {
            $this->_metrologyInstance->addLog('action _actionUploadText cant create object', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionUploadFileError = true;
            $this->_actionUploadFileErrorMessage = "L'objet n'a pas pu être créé.";
            return;
        }
        $this->_actionUploadTextID = $id;

        // Définition de la date et du signataire.
        //$signer	= $this->_nebuleInstance->getCurrentEntity();
        //$date = date(DATE_ATOM);

        $instance->setType($this->_actionUploadTextType);
        $instance->setName($this->_actionUploadTextName);

        unset($id, $instance);
    }

    protected bool $_actionCreateEntity = false;
    protected string $_actionCreateEntityPrefix = '';
    protected string $_actionCreateEntitySuffix = '';
    protected string $_actionCreateEntityFirstname = '';
    protected string $_actionCreateEntityNikename = '';
    protected string $_actionCreateEntityName = '';
    protected string $_actionCreateEntityPassword = '';
    protected string $_actionCreateEntityType = '';
    protected string $_actionCreateEntityID = '0';
    protected bool $_actionCreateEntityObfuscateLinks = false;
    protected ?Entity $_actionCreateEntityInstance = null;
    protected bool $_actionCreateEntityError = false;
    protected string $_actionCreateEntityErrorMessage = 'Initialisation de la création.';
    public function getCreateEntity(): bool
    {
        return $this->_actionCreateEntity;
    }
    public function getCreateEntityID(): string
    {
        return $this->_actionCreateEntityID;
    }
    public function getCreateEntityInstance(): ?Entity
    {
        return $this->_actionCreateEntityInstance;
    }
    public function getCreateEntityError(): bool
    {
        return $this->_actionCreateEntityError;
    }
    public function getCreateEntityErrorMessage(): string
    {
        return $this->_actionCreateEntityErrorMessage;
    }
    protected function _extractActionCreateEntity(): void
    {
        if ((!$this->_unlocked && !$this->_configurationInstance->getOptionAsBoolean('permitPublicCreateEntity'))
            || !$this->_checkPermitGroupAction('GroupCreateEntity')
        )
            return;

        $this->_metrologyInstance->addLog('extract action create entity', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argCreate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY);

        if ($argCreate !== false)
            $this->_actionCreateEntity = true;

        // Si on crée une nouvelle entité.
        if ($this->_actionCreateEntity) {
            $argPrefix = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_PREFIX, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argSuffix = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_SUFFIX, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argFstnam = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_FIRSTNAME, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argNiknam = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_NIKENAME, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argName = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_NAME, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argPasswd1 = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_PASSWORD1, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argPasswd2 = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_PASSWORD2, FILTER_FLAG_NO_ENCODE_QUOTES);
            $argType = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_TYPE, FILTER_FLAG_NO_ENCODE_QUOTES);

            // Extrait les options de téléchargement.
            $argObf = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_CREATE_ENTITY_OBFUSCATE_LINKS);

            // Sauvegarde les valeurs.
            $this->_actionCreateEntityPrefix = $argPrefix;
            $this->_actionCreateEntitySuffix = $argSuffix;
            $this->_actionCreateEntityFirstname = $argFstnam;
            $this->_actionCreateEntityNikename = $argNiknam;
            $this->_actionCreateEntityName = $argName;
            if ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
                $this->_actionCreateEntityObfuscateLinks = $argObf;

            if ($argPasswd1 == $argPasswd2)
                $this->_actionCreateEntityPassword = $argPasswd1;
            else {
                $this->_metrologyInstance->addLog('action _extractActionCreateEntity passwords not match', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionCreateEntityError = true;
                $this->_actionCreateEntityErrorMessage = 'Les mots de passes ne sont pas identiques.';
            }

            if ($argType == 'human' || $argType == 'robot')
                $this->_actionCreateEntityType = $argType;
            else
                $this->_actionCreateEntityType = '';

            unset($argPrefix, $argSuffix, $argFstnam, $argNiknam, $argName, $argPasswd1, $argPasswd2, $argType);
        }
    }
    protected function _actionCreateEntity(): void
    {
        $this->_metrologyInstance->addLog('action create entity', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instance = new Entity($this->_nebuleInstance, 'new');

        if (is_a($instance, 'Nebule\Library\Entity') && $instance->getID() != '0') {
            $this->_actionCreateEntityError = false;

            // Enregistre l'instance créée.
            $this->_actionCreateEntityInstance = $instance;
            $this->_actionCreateEntityID = $instance->getID();
            unset($instance);

            // Modifie le mot de passe de clé privée.
            $this->_actionCreateEntityInstance->changePrivateKeyPassword($this->_actionCreateEntityPassword);

            // Bascule temporairement sur la nouvelle entité.
            $this->_entitiesInstance->setTempCurrentEntity($this->_actionCreateEntityInstance);
            $this->_entitiesInstance->getCurrentEntityInstance()->setPrivateKeyPassword($this->_actionCreateEntityPassword);

            // Définition de la date et du signataire.
            $date = date(DATE_ATOM);
            $signer = $this->_actionCreateEntityID;

            // Si prénom et pas de nom, le prénom devient le nom.
            if ($this->_actionCreateEntityName == '' && $this->_actionCreateEntityFirstname != '') {
                $this->_actionCreateEntityName = $this->_actionCreateEntityFirstname;
                $this->_actionCreateEntityFirstname = '';
            }

            // Nomme l'entité.
            if ($this->_actionCreateEntityName != '') {
                // Crée l'objet avec le texte.
                $textID = $this->createTextAsObject($this->_actionCreateEntityName); // Est fait avec l'entité courante, pas la nouvelle !!!
                if ($textID !== false) {
                    // Crée le lien.
                    $action = 'l';
                    $source = $this->_actionCreateEntityID;
                    $target = $textID;
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash('nebule/objet/nom');
                    //$this->_createLink($signer, $date, $action, $source, $target, $meta, $this->_actionCreateEntityObfuscateLinks); FIXME
                }
            }
            if ($this->_actionCreateEntityFirstname != '') {
                // Crée l'objet avec le texte.
                $textID = $this->createTextAsObject($this->_actionCreateEntityFirstname);
                if ($textID !== false) {
                    // Crée le lien.
                    $action = 'l';
                    $source = $this->_actionCreateEntityID;
                    $target = $textID;
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash('nebule/objet/prenom');
                    //$this->_createLink($signer, $date, $action, $source, $target, $meta, $this->_actionCreateEntityObfuscateLinks); FIXME
                }
            }
            if ($this->_actionCreateEntityNikename != '') {
                // Crée l'objet avec le texte.
                $textID = $this->createTextAsObject($this->_actionCreateEntityNikename);
                if ($textID !== false) {
                    // Crée le lien.
                    $action = 'l';
                    $source = $this->_actionCreateEntityID;
                    $target = $textID;
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash('nebule/objet/surnom');
                    $this->_createLink_DISABLED($signer, $date, $action, $source, $target, $meta, $this->_actionCreateEntityObfuscateLinks);
                }
            }

            if ($this->_actionCreateEntityPrefix != '') {
                // Crée l'objet avec le texte.
                $textID = $this->createTextAsObject($this->_actionCreateEntityPrefix);
                if ($textID !== false) {
                    // Crée le lien.
                    $action = 'l';
                    $source = $this->_actionCreateEntityID;
                    $target = $textID;
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash('nebule/objet/prefix');
                    $this->_createLink_DISABLED($signer, $date, $action, $source, $target, $meta, $this->_actionCreateEntityObfuscateLinks);
                }
            }
            if ($this->_actionCreateEntitySuffix != '') {
                // Crée l'objet avec le texte.
                $textID = $this->createTextAsObject($this->_actionCreateEntitySuffix);
                if ($textID !== false) {
                    // Crée le lien.
                    $action = 'l';
                    $source = $this->_actionCreateEntityID;
                    $target = $textID;
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash('nebule/objet/suffix');
                    $this->_createLink_DISABLED($signer, $date, $action, $source, $target, $meta, $this->_actionCreateEntityObfuscateLinks);
                }
            }
            if ($this->_actionCreateEntityType != '') {
                // Crée l'objet avec le texte.
                $textID = $this->createTextAsObject($this->_actionCreateEntityType);
                if ($textID !== false) {
                    // Crée le lien.
                    $action = 'l';
                    $source = $this->_actionCreateEntityID;
                    $target = $textID;
                    $meta = $this->_nebuleInstance->getCryptoInstance()->hash('nebule/objet/entite/type');
                    $this->_createLink_DISABLED($signer, $date, $action, $source, $target, $meta, $this->_actionCreateEntityObfuscateLinks);
                }
            }

            unset($date, $source, $target, $meta, $link, $newLink, $textID);

            // Restaure l'entité d'origine.
            $this->_entitiesInstance->unsetTempCurrentEntity();

            // Efface le cache pour recharger l'entité.
            $this->_nebuleInstance->getCacheInstance()->unsetEntityOnCache($this->_actionCreateEntityID);

            // Recrée l'instance de l'objet.
            $this->_actionCreateEntityInstance = $this->_cacheInstance->newEntity($this->_actionCreateEntityID);
        } else {
            // Si ce n'est pas bon.
            $this->_applicationInstance->getDisplayInstance()->displayInlineErrorFace();
            $this->_metrologyInstance->addLog('action _actionCreateEntity cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionCreateEntityError = true;
            $this->_actionCreateEntityErrorMessage = 'Echec de la génération.';
        }
    }

    protected bool $_actionCreateGroup = false;
    protected string $_actionCreateGroupName = '';
    protected string $_actionCreateGroupID = '0';
    protected bool $_actionCreateGroupClosed = false;
    protected bool $_actionCreateGroupObfuscateLinks = false;
    protected ?Group $_actionCreateGroupInstance = null;
    protected bool $_actionCreateGroupError = false;
    protected string $_actionCreateGroupErrorMessage = 'Initialisation de la création.';
    public function getCreateGroup(): bool
    {
        return $this->_actionCreateGroup;
    }
    public function getCreateGroupID(): string
    {
        return $this->_actionCreateGroupID;
    }
    public function getCreateGroupInstance(): ?Group
    {
        return $this->_actionCreateGroupInstance;
    }
    public function getCreateGroupError(): bool
    {
        return $this->_actionCreateGroupError;
    }
    public function getCreateGroupErrorMessage(): string
    {
        return $this->_actionCreateGroupErrorMessage;
    }
    protected function _extractActionCreateGroup(): void
    {
        if (!$this->_checkPermitGroupAction('GroupCreateGroup'))
            return;

        $this->_metrologyInstance->addLog('extract action create group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argCreate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_CREATE_GROUP);

        if ($argCreate !== false)
            $this->_actionCreateGroup = true;

        // Si on crée une nouvelle entité.
        if ($this->_actionCreateGroup) {
            $argName = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_GROUP_NAME, FILTER_FLAG_NO_ENCODE_QUOTES);

            // Extrait les options de téléchargement.
            $argCld = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_CREATE_GROUP_CLOSED);
            $argObf = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_CREATE_GROUP_OBFUSCATE_LINKS);

            // Sauvegarde les valeurs.
            $this->_actionCreateGroupName = $argName;
            $this->_actionCreateGroupClosed = $argCld;
            if ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
                $this->_actionCreateGroupObfuscateLinks = $argObf;
        }
    }
    protected function _actionCreateGroup(): void
    {
        $this->_metrologyInstance->addLog('action create group', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instance = new Group($this->_nebuleInstance, 'new', $this->_actionCreateGroupClosed);

        if (is_a($instance, 'Nebule\Library\Group') && $instance->getID() != '0') {
            $this->_actionCreateGroupError = false;
            $instance->setName($this->_actionCreateGroupName);

            $this->_actionCreateGroupInstance = $instance;
            $this->_actionCreateGroupID = $instance->getID();
        } else {
            // Si ce n'est pas bon.
            $this->_applicationInstance->getDisplayInstance()->displayInlineErrorFace();
            $this->_metrologyInstance->addLog('action _actionCreateGroup cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionCreateGroupError = true;
            $this->_actionCreateGroupErrorMessage = 'Echec de la génération.';
        }
    }

    protected bool $_actionDeleteGroup = false;
    protected string $_actionDeleteGroupID = '0';
    protected bool $_actionDeleteGroupError = false;
    protected string $_actionDeleteGroupErrorMessage = 'Initialisation de la supression.';
    public function getDeleteGroup(): bool
    {
        return $this->_actionDeleteGroup;
    }
    public function getDeleteGroupID(): string
    {
        return $this->_actionDeleteGroupID;
    }
    public function getDeleteGroupError(): bool
    {
        return $this->_actionDeleteGroupError;
    }
    public function getDeleteGroupErrorMessage(): string
    {
        return $this->_actionDeleteGroupErrorMessage;
    }
    protected function _extractActionDeleteGroup(): void
    {
        if (!$this->_checkPermitGroupAction('GroupDeleteGroup'))
            return;

        $this->_metrologyInstance->addLog('extract action delete group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argDelete = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_DELETE_GROUP, FILTER_FLAG_ENCODE_LOW);

        if ($argDelete !== ''
            && strlen($argDelete) >= BlocLink::NID_MIN_HASH_SIZE
            && Node::checkNID($argDelete)
        ) {
            $this->_actionDeleteGroup = true;
            $this->_actionDeleteGroupID = $argDelete;
        }
    }
    protected function _actionDeleteGroup(): void
    {
        $this->_metrologyInstance->addLog('action delete group ' . $this->_actionDeleteGroupID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instance = $this->_cacheInstance->newGroup($this->_actionDeleteGroupID);

        // Vérification.
        if ($instance->getID() == '0'
            || !$instance->getIsGroup('all')
        ) {
            $this->_actionDeleteGroupError = false;
            $this->_actionDeleteGroupErrorMessage = 'Pas un groupe.';
            $this->_metrologyInstance->addLog('action delete not a group', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
            return;
        }

        // Suppression.
        if ($instance->getMarkClosed()) {
            $this->_metrologyInstance->addLog('action delete group closed', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
            $instance->unsetMarkClosed();
        }
        $instance->unsetGroup();

        // Vérification.
        if ($instance->getIsGroup('myself')) {
            // Si ce n'est pas bon.
            $this->_metrologyInstance->addLog('action _actionDeleteGroup cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionDeleteGroupError = true;
            $this->_actionDeleteGroupErrorMessage = 'Echec de la génération.';
        }
    }

    protected string $_actionAddToGroup = '';
    public function getAddToGroup(): string
    {
        return $this->_actionAddToGroup;
    }
    protected function _extractActionAddToGroup(): void
    {
        if (!$this->_checkPermitGroupAction('GroupAddToGroup'))
            return;

        $this->_metrologyInstance->addLog('extract action add to group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_ADD_TO_GROUP, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionAddToGroup = $arg;
    }
    protected function _actionAddToGroup(): void
    {
        $this->_metrologyInstance->addLog('action add to group ' . $this->_actionAddToGroup, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        $instanceGroupe = $this->_cacheInstance->newGroup($this->_actionAddToGroup);
        $instanceGroupe->setMember($this->_nebuleInstance->getCurrentObjectInstance());
    }

    protected string $_actionRemoveFromGroup = '';
    public function getRemoveFromGroup(): string
    {
        return $this->_actionRemoveFromGroup;
    }
    protected function _extractActionRemoveFromGroup(): void
    {
        if (!$this->_checkPermitGroupAction('GroupRemoveFromGroup'))
            return;

        $this->_metrologyInstance->addLog('extract action remove from group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_REMOVE_FROM_GROUP, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionRemoveFromGroup = $arg;
    }
    protected function _actionRemoveFromGroup(): void
    {
        $this->_metrologyInstance->addLog('action remove from group ' . $this->_actionRemoveFromGroup, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        $instanceGroupe = $this->_cacheInstance->newGroup($this->_actionRemoveFromGroup);
        $instanceGroupe->unsetMember($this->_nebuleInstance->getCurrentObjectInstance());
    }

    protected string $_actionAddItemToGroup = '';
    public function getAddItemToGroup(): string
    {
        return $this->_actionAddItemToGroup;
    }
    protected function _extractActionAddItemToGroup(): void
    {
        if (!$this->_checkPermitGroupAction('GroupAddItemToGroup'))
            return;

        $this->_metrologyInstance->addLog('extract action add item to group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_ADD_ITEM_TO_GROUP, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionAddItemToGroup = $arg;
    }
    protected function _actionAddItemToGroup(): void
    {
        $this->_metrologyInstance->addLog('action add item to group ' . $this->_actionAddItemToGroup, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        $this->_nebuleInstance->getCurrentGroupInstance()->setMember($this->_actionAddItemToGroup);
    }

    protected string $_actionRemoveItemFromGroup = '';
    public function getRemoveItemFromGroup(): string
    {
        return $this->_actionRemoveItemFromGroup;
    }
    protected function _extractActionRemoveItemFromGroup(): void
    {
        if (!$this->_checkPermitGroupAction('GroupRemoveItemFromGroup'))
            return;

        $this->_metrologyInstance->addLog('extract action remove item from group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_REMOVE_ITEM_FROM_GROUP, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionRemoveItemFromGroup = $arg;
    }
    protected function _actionRemoveItemFromGroup(): void
    {
        $this->_metrologyInstance->addLog('action remove item from group ' . $this->_actionRemoveItemFromGroup, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        $this->_nebuleInstance->getCurrentGroupInstance()->unsetMember($this->_actionRemoveItemFromGroup);
    }

    protected bool $_actionCreateConversation = false;
    protected string $_actionCreateConversationName = '';
    protected string $_actionCreateConversationID = '0';
    protected bool $_actionCreateConversationClosed = false;
    protected bool $_actionCreateConversationProtected = false;
    protected bool $_actionCreateConversationObfuscateLinks = false;
    protected ?Conversation $_actionCreateConversationInstance = null;
    protected bool $_actionCreateConversationError = false;
    protected string $_actionCreateConversationErrorMessage = 'Initialisation de la création.';
    public function getCreateConversation(): bool
    {
        return $this->_actionCreateConversation;
    }
    public function getCreateConversationID(): string
    {
        return $this->_actionCreateConversationID;
    }
    public function getCreateConversationInstance(): ?Conversation
    {
        return $this->_actionCreateConversationInstance;
    }
    public function getCreateConversationError(): bool
    {
        return $this->_actionCreateConversationError;
    }
    public function getCreateConversationErrorMessage(): string
    {
        return $this->_actionCreateConversationErrorMessage;
    }
    protected function _extractActionCreateConversation(): void
    {
        if (!$this->_checkPermitGroupAction('GroupCreateConversation'))
            return;

        $this->_metrologyInstance->addLog('extract action create group', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argCreate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION);

        if ($argCreate !== false)
            $this->_actionCreateConversation = true;

        // Si on crée une nouvelle conversation.
        if ($this->_actionCreateConversation) {
            $argName = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION_NAME, FILTER_FLAG_NO_ENCODE_QUOTES);

            // Extrait les options de téléchargement.
            $argCld = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION_CLOSED);
            $argPrt = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION_PROTECTED);
            $argObf = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_CREATE_CONVERSATION_OBFUSCATE_LINKS);

            // Sauvegarde les valeurs.
            $this->_actionCreateConversationName = $argName;
            $this->_actionCreateConversationClosed = $argCld;
            if ($this->_configurationInstance->getOptionAsBoolean('permitProtectedObject'))
                $this->_actionCreateConversationProtected = $argPrt;
            if ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
                $this->_actionCreateConversationObfuscateLinks = $argObf;
        }
    }
    protected function _actionCreateConversation(): void
    {
        $this->_metrologyInstance->addLog('action create conversation', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        // Création de la nouvelle conversation.
        $instance = new Conversation(
            $this->_nebuleInstance,
            'new',
            $this->_actionCreateConversationClosed,
            $this->_actionCreateConversationProtected,
            $this->_actionCreateConversationObfuscateLinks);

        if (is_a($instance, 'Nebule\Library\Conversation')
            && $instance->getID() != '0'
        ) {
            $this->_actionCreateConversationError = false;
            $instance->setName($this->_actionCreateConversationName);

            $this->_actionCreateConversationInstance = $instance;
            $this->_actionCreateConversationID = $instance->getID();
        } else {
            // Si ce n'est pas bon.
            $this->_applicationInstance->getDisplayInstance()->displayInlineErrorFace();
            $this->_metrologyInstance->addLog('action _actionCreateConversation cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionCreateConversationError = true;
            $this->_actionCreateConversationErrorMessage = 'Echec de la génération.';
        }
    }

    protected bool $_actionDeleteConversation = false;
    protected string $_actionDeleteConversationID = '0';
    protected bool $_actionDeleteConversationError = false;
    protected string $_actionDeleteConversationErrorMessage = 'Initialisation de la supression.';
    public function getDeleteConversation(): bool
    {
        return $this->_actionDeleteConversation;
    }
    public function getDeleteConversationID(): string
    {
        return $this->_actionDeleteConversationID;
    }
    public function getDeleteConversationError(): bool
    {
        return $this->_actionDeleteConversationError;
    }
    public function getDeleteConversationErrorMessage(): string
    {
        return $this->_actionDeleteConversationErrorMessage;
    }
    protected function _extractActionDeleteConversation(): void
    {
        if (!$this->_checkPermitGroupAction('GroupDeleteConversation'))
            return;

        $this->_metrologyInstance->addLog('extract action delete conversation', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argDelete = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_DELETE_CONVERSATION, FILTER_FLAG_ENCODE_LOW);

        if ($argDelete !== ''
            && strlen($argDelete) >= BlocLink::NID_MIN_HASH_SIZE
            && Node::checkNID($argDelete)
        ) {
            $this->_actionDeleteConversation = true;
            $this->_actionDeleteConversationID = $argDelete;
        }
    }
    protected function _actionDeleteConversation(): void
    {
        $this->_metrologyInstance->addLog('action delete conversation ' . $this->_actionDeleteConversationID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        // Suppression.
        $instance = $this->_cacheInstance->newConversation($this->_actionDeleteConversationID);
        if (!is_a($instance, 'Nebule\Library\Conversation')
            || $instance->getID() == '0'
            || !$instance->getIsConversation('myself')
        ) {
            $this->_actionDeleteConversationError = false;
            $this->_actionDeleteConversationErrorMessage = 'Pas un conversation.';
            $this->_metrologyInstance->addLog('action delete not a group', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
            return;
        }
        if ($instance->getIsConversationClosed()) {
            $this->_metrologyInstance->addLog('action delete conversation closed', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
            $instance->setUnmarkConversationClosed();
            $test = $instance->getIsConversationClosed();
        } else {
            $this->_metrologyInstance->addLog('action delete conversation', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
            $instance->setUnmarkConversationOpened();
            $test = $instance->getIsConversationOpened();
        }

        // Vérification.
        if ($test) {
            // Si ce n'est pas bon.
            $this->_metrologyInstance->addLog('action _actionDeleteConversation cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionDeleteConversationError = true;
            $this->_actionDeleteConversationErrorMessage = 'Echec de la génération.';
        }
    }

    protected string $_actionAddMessageOnConversation = '';
    public function getAddMessageOnConversation(): string
    {
        return $this->_actionAddMessageOnConversation;
    }
    protected function _extractActionAddMessageOnConversation(): void
    {
        if (!$this->_checkPermitGroupAction('GroupAddMessageOnConversation'))
            return;

        $this->_metrologyInstance->addLog('extract action add to conversation', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_ADD_TO_CONVERSATION, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionAddMessageOnConversation = $arg;
    }
    protected function _actionAddMessageOnConversation(): void
    {
        $this->_metrologyInstance->addLog('action add message to conversation ' . $this->_actionAddMessageOnConversation, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instanceConversation = $this->_cacheInstance->newConversation($this->_actionAddMessageOnConversation);
        $instanceConversation->setMember($this->_nebuleInstance->getCurrentObject(), false);
    }

    protected string $_actionRemoveMessageOnConversation = '';
    public function getRemoveMessageOnConversation(): string
    {
        return $this->_actionRemoveMessageOnConversation;
    }
    protected function _extractActionRemoveMessageOnConversation(): void
    {
        if (!$this->_checkPermitGroupAction('GroupRemoveMessageOnConversation'))
            return;

        $this->_metrologyInstance->addLog('extract action remove from conversation', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_REMOVE_FROM_CONVERSATION, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionRemoveMessageOnConversation = $arg;
    }
    protected function _actionRemoveMessageOnConversation(): void
    {
        $this->_metrologyInstance->addLog('action remove message to conversation ' . $this->_actionRemoveMessageOnConversation, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instanceConversation = $this->_cacheInstance->newConversation($this->_actionRemoveMessageOnConversation);
        $instanceConversation->unsetMember($this->_nebuleInstance->getCurrentObject());
    }

    protected string $_actionAddMemberOnConversation = '';
    public function getAddMemberOnConversation(): string
    {
        return $this->_actionAddMemberOnConversation;
    }
    protected function _extractActionAddMemberOnConversation(): void
    {
        if (!$this->_checkPermitGroupAction('GroupAddMemberOnConversation'))
            return;

        $this->_metrologyInstance->addLog('extract action add item to conversation', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_ADD_ITEM_TO_CONVERSATION, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionAddMemberOnConversation = $arg;
    }
    protected function _actionAddMemberOnConversation(): void
    {
        $this->_metrologyInstance->addLog('action add member to conversation ' . $this->_actionAddMemberOnConversation, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instanceConversation = $this->_cacheInstance->newConversation($this->_actionAddMemberOnConversation);
        $instanceConversation->setFollower($this->_nebuleInstance->getCurrentObject());
    }

    protected string $_actionRemoveMemberOnConversation = '';
    public function getRemoveMemberOnConversation(): string
    {
        return $this->_actionRemoveMemberOnConversation;
    }
    protected function _extractActionRemoveMemberOnConversation(): void
    {
        if (!$this->_checkPermitGroupAction('GroupRemoveMemberOnConversation'))
            return;

        $this->_metrologyInstance->addLog('extract action remove item from conversation', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $arg = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_REMOVE_ITEM_FROM_CONVERSATION, FILTER_FLAG_ENCODE_LOW);

        if (Node::checkNID($arg))
            $this->_actionRemoveMemberOnConversation = $arg;
    }
    protected function _actionRemoveMemberOnConversation(): void
    {
        $this->_metrologyInstance->addLog('action remove member to conversation ' . $this->_actionRemoveMemberOnConversation, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instanceConversation = $this->_cacheInstance->newConversation($this->_actionRemoveMemberOnConversation);
        $instanceConversation->unsetFollower($this->_nebuleInstance->getCurrentObject());
    }

    protected bool $_actionCreateMessage = false;
    protected string $_actionCreateMessageID = '0';
    protected bool $_actionCreateMessageError = false;
    protected bool $_actionCreateMessageProtected = false;
    protected bool $_actionCreateMessageObfuscateLinks = false;
    protected string $_actionCreateMessageErrorMessage = 'Initialisation de la suppression.';
    protected function _extractActionCreateMessage(): void
    {
        if (!$this->_checkPermitGroupAction('GroupCreateMessage'))
            return;

        $this->_metrologyInstance->addLog('extract action create message', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argCreate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_CREATE_MESSAGE);

        if ($argCreate !== false)
            $this->_actionCreateMessage = true;

        // Si on crée un nouveau message.
        if ($this->_actionCreateMessage) {
            // Extrait les options de téléchargement.
            $argPrt = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_PROTECT);
            $argObf = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_UPLOAD_TEXT_OBFUSCATE_LINKS);

            // Sauvegarde les valeurs.
            if ($this->_configurationInstance->getOptionAsBoolean('permitProtectedObject'))
                $this->_actionCreateMessageProtected = $argPrt;
            if ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
                $this->_actionCreateMessageObfuscateLinks = $argObf;
        }

        // Le reste des valeurs est récupéré par la partie création d'un texte.
    }
    protected function _actionCreateMessage(): void
    {
        $id = $this->_actionUploadTextID;
        $this->_metrologyInstance->addLog('action create message ' . $id, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        if ($this->_actionCreateMessageProtected) {
            $this->_metrologyInstance->addLog('action create message protected', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        }
        if ($this->_actionCreateMessageObfuscateLinks) {
            $this->_metrologyInstance->addLog('action create message with obfuscated links', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        }

        $instanceMessage = $this->_cacheInstance->newNode($id);

        if (is_a($instanceMessage, 'Nebule\Library\Node')
            && $instanceMessage->getID() != '0'
        ) {
            $this->_actionCreateConversationError = false;

            $instanceConversation = $this->_nebuleInstance->getCurrentConversationInstance();
            $instanceConversation->setMember($id, $this->_actionCreateMessageObfuscateLinks);

            unset($instanceConversation);

            $this->_actionCreateMessageID = $id;
        } else {
            // Si ce n'est pas bon.
            $this->_applicationInstance->getDisplayInstance()->displayInlineErrorFace();
            $this->_metrologyInstance->addLog('action _actionCreateMessage cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionCreateMessageError = true;
            $this->_actionCreateMessageErrorMessage = 'Echec de la génération.';
        }
    }

    protected string $_actionAddProperty = '';
    protected string $_actionAddPropertyObject = '';
    protected string $_actionAddPropertyValue = '';
    protected bool $_actionAddPropertyProtected = false;
    protected bool $_actionAddPropertyObfuscateLinks = false;
    protected bool $_actionAddPropertyError = false;
    protected string $_actionAddPropertyErrorMessage = 'Initialisation de la supression.';
    public function getAddPropertyError(): bool
    {
        return $this->_actionAddPropertyError;
    }
    public function getAddPropertyErrorMessage(): string
    {
        return $this->_actionAddPropertyErrorMessage;
    }
    protected function _extractActionAddProperty(): void
    {
        if (!$this->_checkPermitGroupAction('GroupAddProperty'))
            return;

        $this->_metrologyInstance->addLog('extract action add property', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argAdd = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_ADD_PROPERTY, FILTER_FLAG_ENCODE_LOW);

        if ($argAdd != '')
            $this->_actionAddProperty = $argAdd;

        // Si on crée une nouvelle propriété.
        if ($this->_actionAddProperty != '') {
            $argObj = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_ADD_PROPERTY_OBJECT, FILTER_FLAG_ENCODE_LOW);
            $argVal = $this->getFilterInput(self::DEFAULT_COMMAND_ACTION_ADD_PROPERTY_VALUE);
            $argPrt = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_ADD_PROPERTY_PROTECTED);
            $argObf = filter_has_var(INPUT_POST, self::DEFAULT_COMMAND_ACTION_ADD_PROPERTY_OBFUSCATE_LINKS);

            // Sauvegarde les valeurs.
            if ($argVal != '') {
                if ($argObj == '')
                    $this->_actionAddPropertyObject = $this->_nebuleInstance->getCurrentObject();
                else
                    $this->_actionAddPropertyObject = $argObj;
                $this->_actionAddPropertyValue = $argVal;
                if ($this->_configurationInstance->getOptionAsBoolean('permitProtectedObject'))
                    $this->_actionAddPropertyProtected = $argPrt;
                if ($this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink'))
                    $this->_actionAddPropertyObfuscateLinks = $argObf;
            } else {
                $this->_metrologyInstance->addLog('action _extractActionAddProperty null value', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionAddPropertyError = true;
                $this->_actionAddPropertyErrorMessage = 'Valeur vide.';
            }
        }
    }
    protected function _actionAddProperty(): void
    {
        $prop = $this->_actionAddProperty;
        $propID = $this->_nebuleInstance->getCryptoInstance()->hash($prop);
        $this->_metrologyInstance->addLog('action add property ' . $prop, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        $objectID = $this->_actionAddPropertyObject;
        $this->_metrologyInstance->addLog('action add property for ' . $objectID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        $value = $this->_actionAddPropertyValue;
        $valueID = $this->_nebuleInstance->getCryptoInstance()->hash($value);
        $this->_metrologyInstance->addLog('action add property value : ' . $value, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        $protected = $this->_actionAddPropertyProtected;
        if ($protected) {
            $this->_metrologyInstance->addLog('action add property protected', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        }
        if ($this->_actionAddPropertyObfuscateLinks) {
            $this->_metrologyInstance->addLog('action add property with obfuscated links', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        }

        // Création des objets si besoin.
        if (!$this->_nebuleInstance->getIoInstance()->checkObjectPresent($propID)) {
            $this->createTextAsObject($prop);
        }
        if (!$this->_nebuleInstance->getIoInstance()->checkObjectPresent($valueID)) {
            $this->createTextAsObject($value, $protected, $this->_actionAddPropertyObfuscateLinks);
        }

        // Création du lien.
        $date = date(DATE_ATOM);
        $signer = $this->_entitiesInstance->getCurrentEntityID();
        $action = 'l';
        $source = $objectID;
        $target = $valueID;
        $meta = $propID;
        $this->_createLink_DISABLED($signer, $date, $action, $source, $target, $meta, $this->_actionAddPropertyObfuscateLinks);
    }

    protected bool $_actionCreateCurrency = false;
    protected string $_actionCreateCurrencyID = '';
    protected ?Currency $_actionCreateCurrencyInstance = null;
    protected array $_actionCreateCurrencyParam = array();
    protected bool $_actionCreateCurrencyError = false;
    protected string $_actionCreateCurrencyErrorMessage = 'Initialisation de la création.';
    public function getCreateCurrency(): bool
    {
        return $this->_actionCreateCurrency;
    }
    public function getCreateCurrencyID(): string
    {
        return $this->_actionCreateCurrencyID;
    }
    public function getCreateCurrencyInstance(): ?Currency
    {
        return $this->_actionCreateCurrencyInstance;
    }
    public function getCreateCurrencyParam(): array
    {
        return $this->_actionCreateCurrencyParam;
    }
    public function getCreateCurrencyError(): bool
    {
        return $this->_actionCreateCurrencyError;
    }
    public function getCreateCurrencyErrorMessage(): string
    {
        return $this->_actionCreateCurrencyErrorMessage;
    }
    /**
     * Extrait pour action si une monnaie doit être créé.
     *
     * array( 'currency' => array(
     * ...,
     * 'CurrencyType' => array(
     * 'key' => 'TYP',
     * 'shortname' => 'ctyp',
     * 'type' => 'string',
     * 'info' => 'omcptyp',
     * 'limit' => '32',
     * 'force' => 'cryptocurrency', ),
     * 'display' => '64',
     * 'forceable' => true,
     * ...,
     * ),
     * ...,
     * )
     *
     * @return void
     */
    protected function _extractActionCreateCurrency(): void
    {
        if (!$this->_checkPermitGroupAction('GroupCreateCurrency'))
            return;

        $this->_metrologyInstance->addLog('extract action create currency', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argCreate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_CREATE_CURRENCY);

        if ($argCreate !== false)
            $this->_actionCreateCurrency = true;

        if ($this->_actionCreateCurrency) {
            // Récupère la liste des propriétés.
            $instance = $this->_nebuleInstance->getCurrentCurrencyInstance();
            $propertiesList = $instance->getPropertiesList();
            unset($instance);

            /*foreach ($propertiesList['currency'] as $name => $property) {
                // Extrait une valeur.
                if (isset($property['checkbox'])) {
                    $value = '';
                    try {
                        $valueArray = (string)filter_input(INPUT_POST, $property['shortname'], FILTER_SANITIZE_STRING, FILTER_FLAG_NO_ENCODE_QUOTES | FILTER_FORCE_ARRAY);
                    } catch (\Exception $e) {
                        $valueArray = '';
                    }
                    $valueArray = $this->getFilterInput($property['shortname'], FILTER_FLAG_NO_ENCODE_QUOTES | FILTER_FORCE_ARRAY);
                    foreach ($valueArray as $item)
                        $value .= ' ' . trim($item);
                    $this->_actionCreateCurrencyParam[$name] = trim($value);
                    unset($value, $valueArray);
                } else {
                    try {
                        $this->_actionCreateCurrencyParam[$name] = (string)filter_input(INPUT_POST, $property['shortname'], FILTER_SANITIZE_STRING, FILTER_FLAG_NO_ENCODE_QUOTES);
                    } catch (\Exception $e) {
                        $this->_actionCreateCurrencyParam[$name] = '';
                    }
                    $this->_actionCreateCurrencyParam[$name] = trim($this->_actionCreateCurrencyParam[$name]);
                }
                $this->_metrologyInstance->addLog('extract action create currency - _' . $property['shortname'] . ':' . $this->_actionCreateCurrencyParam[$name], Metrology::LOG_LEVEL_DEVELOP, __METHOD__, '00000000');

                // Extrait si forcé.
                if (isset($property['forceable'])) {
                    $this->_actionCreateCurrencyParam['Force' . $name] = filter_has_var(INPUT_POST, 'f' . $property['shortname']);
                    if ($this->_actionCreateCurrencyParam['Force' . $name])
                        $this->_metrologyInstance->addLog('extract action create currency - f' . $property['shortname'] . ':true', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
                }
            }*/
        }
    }
    protected function _actionCreateCurrency(): void
    {
        $this->_metrologyInstance->addLog('action create currency', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instance = new Currency($this->_nebuleInstance, 'new', $this->_actionCreateCurrencyParam, false, false);

        if (is_a($instance, 'Nebule\Library\Currency')
            && $instance->getID() != '0'
        ) {
            $this->_actionCreateCurrencyError = false;

            $this->_actionCreateCurrencyInstance = $instance;
            $this->_actionCreateCurrencyID = $instance->getID();

            $this->_metrologyInstance->addLog('action _actionCreateCurrency generated ID=' . $instance->getID(), Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        } else {
            // Si ce n'est pas bon.
            $this->_applicationInstance->getDisplayInstance()->displayInlineErrorFace();
            $this->_metrologyInstance->addLog('action _actionCreateCurrency cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionCreateCurrencyError = true;
            $this->_actionCreateCurrencyErrorMessage = 'Echec de la génération.';
        }
    }

    protected bool $_actionCreateTokenPool = false;
    protected string $_actionCreateTokenPoolID = '';
    protected ?TokenPool $_actionCreateTokenPoolInstance = null;
    protected array $_actionCreateTokenPoolParam = array();
    protected bool $_actionCreateTokenPoolError = false;
    protected string $_actionCreateTokenPoolErrorMessage = 'Initialisation de la création.';
    public function getCreateTokenPool(): bool
    {
        return $this->_actionCreateTokenPool;
    }
    public function getCreateTokenPoolID(): string
    {
        return $this->_actionCreateTokenPoolID;
    }
    public function getCreateTokenPoolInstance(): TokenPool
    {
        return $this->_actionCreateTokenPoolInstance;
    }
    public function getCreateTokenPoolParam(): array
    {
        return $this->_actionCreateTokenPoolParam;
    }
    public function getCreateTokenPoolError(): bool
    {
        return $this->_actionCreateTokenPoolError;
    }
    public function getCreateTokenPoolErrorMessage(): string
    {
        return $this->_actionCreateTokenPoolErrorMessage;
    }
    protected function _extractActionCreateTokenPool(): void
    {
        if (!$this->_checkPermitGroupAction('GroupCreateTokenPool'))
            return;

        $this->_metrologyInstance->addLog('extract action create token pool', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argCreate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_CREATE_TOKEN_POOL);

        if ($argCreate !== false)
            $this->_actionCreateTokenPool = true;

        if ($this->_actionCreateTokenPool) {
            // Récupère la liste des propriétés.
            $instance = $this->_nebuleInstance->getCurrentTokenPoolInstance();
            $propertiesList = $instance->getPropertiesList();
            unset($instance);

            /*foreach ($propertiesList['tokenpool'] as $name => $property) {
                // Extrait une valeur.
                if (isset($property['checkbox'])) {
                    $value = '';
                    try {
                        $valueArray = (string)filter_input(INPUT_POST, $property['shortname'], FILTER_SANITIZE_STRING, FILTER_FLAG_NO_ENCODE_QUOTES | FILTER_FORCE_ARRAY);
                    } catch (\Exception $e) {
                        $valueArray = '';
                    }
                    foreach ($valueArray as $item)
                        $value .= ' ' . trim($item);
                    $this->_actionCreateTokenPoolParam[$name] = trim($value);
                    unset($value, $valueArray);
                } else {
                    try {
                        $this->_actionCreateTokenPoolParam[$name] = (string)filter_input(INPUT_POST, $property['shortname'], FILTER_SANITIZE_STRING, FILTER_FLAG_NO_ENCODE_QUOTES);
                    } catch (\Exception $e) {
                        $this->_actionCreateTokenPoolParam[$name] = '';
                    }
                    $this->_actionCreateTokenPoolParam[$name] = trim($this->_actionCreateTokenPoolParam[$name]);
                }
                $this->_metrologyInstance->addLog('extract action create token pool - p' . $property['key'] . ':' . $this->_actionCreateTokenPoolParam[$name], Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

                // Extrait si forcé.
                if (isset($property['forceable'])) {
                    $this->_actionCreateTokenPoolParam['Force' . $name] = filter_has_var(INPUT_POST, 'f' . $property['shortname']);
                    if ($this->_actionCreateTokenPoolParam['Force' . $name])
                        $this->_metrologyInstance->addLog('extract action create token pool - f' . $property['shortname'] . ':true', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
                }
            }*/
        }
    }
    protected function _actionCreateTokenPool(): void
    {
        $this->_metrologyInstance->addLog('action create token pool', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instance = new TokenPool($this->_nebuleInstance, 'new', $this->_actionCreateTokenPoolParam, false, false);

        if (is_a($instance, 'Nebule\Library\TokenPool')
            && $instance->getID() != '0'
        ) {
            $this->_actionCreateTokenPoolError = false;

            $this->_actionCreateTokenPoolInstance = $instance;
            $this->_actionCreateTokenPoolID = $instance->getID();

            $this->_metrologyInstance->addLog('action _actionCreateTokenPool generated ID=' . $instance->getID(), Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
        } else {
            // Si ce n'est pas bon.
            $this->_applicationInstance->getDisplayInstance()->displayInlineErrorFace();
            $this->_metrologyInstance->addLog('action _actionCreateTokenPool cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
            $this->_actionCreateTokenPoolError = true;
            $this->_actionCreateTokenPoolErrorMessage = 'Echec de la génération.';
        }
    }

    protected bool $_actionCreateTokens = false;
    protected array $_actionCreateTokensID = array();
    protected array $_actionCreateTokensInstance = array();
    protected array $_actionCreateTokensParam = array();
    protected int $_actionCreateTokensCount = 1;
    protected bool $_actionCreateTokensError = false;
    protected string $_actionCreateTokensErrorMessage = 'Initialisation de la création.';
    public function getCreateTokens(): bool
    {
        return $this->_actionCreateTokens;
    }
    public function getCreateTokensID(): array
    {
        return $this->_actionCreateTokensID;
    }
    public function getCreateTokensInstance(): array
    {
        return $this->_actionCreateTokensInstance;
    }
    public function getCreateTokensParam(): array
    {
        return $this->_actionCreateTokensParam;
    }
    public function getCreateTokensError(): bool
    {
        return $this->_actionCreateTokensError;
    }
    public function getCreateTokensErrorMessage(): string
    {
        return $this->_actionCreateTokensErrorMessage;
    }
    protected function _extractActionCreateTokens(): void
    {
        if (!$this->_checkPermitGroupAction('GroupCreateTokens'))
            return;

        $this->_metrologyInstance->addLog('extract action create tokens', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

        $argCreate = filter_has_var(INPUT_GET, self::DEFAULT_COMMAND_ACTION_CREATE_TOKENS);

        if ($argCreate !== false)
            $this->_actionCreateTokens = true;

        if ($this->_actionCreateTokens) {
            // Récupère la liste des propriétés.
            $instance = $this->_tokenizingInstance->getCurrentTokenInstance();
            $propertiesList = $instance->getPropertiesList();
            unset($instance);

            /*foreach ($propertiesList['token'] as $name => $property) {
                // Extrait une valeur.
                if (isset($property['checkbox'])) {
                    $value = '';
                    try {
                        $valueArray = (string)filter_input(INPUT_POST, $property['shortname'], FILTER_SANITIZE_STRING, FILTER_FLAG_NO_ENCODE_QUOTES | FILTER_FORCE_ARRAY);
                    } catch (\Exception $e) {
                        $valueArray = '';
                    }
                    foreach ($valueArray as $item)
                        $value .= ' ' . trim($item);
                    $this->_actionCreateTokensParam[$name] = trim($value);
                    unset($value, $valueArray);
                } else {
                    try {
                        $this->_actionCreateTokensParam[$name] = trim((string)filter_input(INPUT_POST, $property['shortname'], FILTER_SANITIZE_STRING, FILTER_FLAG_NO_ENCODE_QUOTES));
                    } catch (\Exception $e) {
                        $this->_actionCreateTokensParam[$name] = '';
                    }
                    $this->_actionCreateTokensParam[$name] = trim($this->_actionCreateTokensParam[$name]);
                }
                $this->_metrologyInstance->addLog('extract action create tokens - t' . $property['key'] . ':' . $this->_actionCreateTokensParam[$name], Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

                // Extrait si forcé.
                if (isset($property['forceable'])) {
                    $this->_actionCreateTokensParam['Force' . $name] = filter_has_var(INPUT_POST, 'f' . $property['shortname']);
                    if ($this->_actionCreateTokensParam['Force' . $name])
                        $this->_metrologyInstance->addLog('extract action create tokens - f' . $property['shortname'] . ':true', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
                }
            }*/

            // Extrait le nombre de jetons à générer.
            $this->_actionCreateTokensCount = (int)$this->getFilterInput(self::DEFAULT_COMMAND_ACTION_CREATE_TOKENS_COUNT, FILTER_SANITIZE_NUMBER_INT);
        }
    }
    protected function _actionCreateTokens(): void
    {
        $this->_metrologyInstance->addLog('action create tokens', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        $instance = $this->_tokenizingInstance->getCurrentTokenInstance();
        for ($i = 0; $i < $this->_actionCreateTokensCount; $i++) {
            // Si pas le premier jeton, supprime le SID demandé de façon à ce qu'il soit généré aléatoirement.
            if ($i > 0) {
                $this->_actionCreateTokensParam['TokenSerialID'] = '';
            }

            // Création du nouveau sac de jetons.
            $instance = new Token($this->_nebuleInstance, 'new', $this->_actionCreateTokensParam, false, false);

            if (is_a($instance, 'Nebule\Library\Token')
                && $instance->getID() != '0'
            ) {
                $this->_actionCreateTokensError = false;

                $this->_actionCreateTokensInstance[$i] = $instance;
                $this->_actionCreateTokensID[$i] = $instance->getID();

                $this->_metrologyInstance->addLog('action _actionCreateTokens generated ID=' . $instance->getID(), Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');
            } else {
                // Si ce n'est pas bon.
                $this->_applicationInstance->getDisplayInstance()->displayInlineErrorFace();
                $this->_metrologyInstance->addLog('action _actionCreateTokens cant generate', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
                $this->_actionCreateTokensError = true;
                $this->_actionCreateTokensErrorMessage = 'Echec de la génération.';

                // Quitte le processus de génération.
                break;
            }
        }
    }



    /**
     * Ecrit un lien pré-signé.
     * Cette fonction est appelée par la fonction specialActions().
     * Elle est utilisée par l'application upload et le module module_upload de l'application sylabe.
     * Le fonctioneement est identique dans ces deux usages même si l'affichage ne le montre pas.
     * La fonction nécessite au minimum les droits :
     *   - permitWrite
     *   - permitWriteLink
     *   - permitUploadLink
     * L'activation de la fonction est ensuite conditionnée par une conbinaison d'autres droits ou facteurs.
     * Si le droit permitPublicUploadCodeAuthoritiesLink est activé :
     *   les liens signés du maître du code sont acceptés ;
     *   les liens des autres entités sont ignorés avec seulement ce droit.
     * Si le droit permitPublicUploadLink est activé :
     *   tous les liens signés sont acceptés ;
     *   les entités signataires doivent exister localement pour la vérification les signatures.
     * Si l'entité en cours est déverrouillée, this->_unlocked :
     *   la réception de liens est prise comme une action légitime ;
     *   les liens signés de toutes les entités sont acceptés ;
     *   les liens non signés sont signés par l'entité en cours.
     * Si un lien est structurellement valide mais non signé, il est régénéré et signé par l'entité en cours.
     * Les liens ne sont écris que si leurs signatures sont valides.
     *
     * @param LinkRegister $link
     * @return void
     */
    protected function _actionUploadLink_DISABLED(LinkRegister $link): void
    {
        /*if (!$link->getValid()
            || true // FIXME
        )
            return;
        
        $this->_metrologyInstance->addLog('action upload link', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '00000000');

        if ($link->getSigned()
            && (($link->getSignersEID() == $this->_authoritiesInstance->getCodeAuthoritiesEID()
                    && $this->_configurationInstance->getOptionAsBoolean('permitPublicUploadCodeAuthoritiesLink')
                )
                || $this->_configurationInstance->getOptionAsBoolean('permitPublicUploadLink')
                || $this->_unlocked
            )
        ) {
            $link->write();
            $this->_metrologyInstance->addLog('action upload link - signed link ' . $link->getRaw(), Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
        } elseif ($this->_unlocked) {
            $link = $this->_cacheInstance->newBlockLink(
                '0_'
                . $this->_entitiesInstance->getCurrentEntityID() . '_'
                . $link->getDate() . '_'
                . $link->getParsed()['bl/rl/req'] . '_'
                . $link->getParsed()['bl/rl/nid1'] . '_'
                . $link->getParsed()['bl/rl/nid2'] . '_'
                . $link->getParsed()['bl/rl/nid3']
            );
            $link->signWrite();
            $this->_metrologyInstance->addLog('action upload link - unsigned link ' . $link->getRaw(), Metrology::LOG_LEVEL_NORMAL, __METHOD__, '00000000');
        }*/
    }


    /**
     * Crée un lien.
     *
     * @param      $signer
     * @param      $date
     * @param      $action
     * @param      $source
     * @param      $target
     * @param      $meta
     * @param bool $obfuscate
     * @return boolean
     */
    protected function _createLink_DISABLED($signer, $date, $action, $source, $target, $meta, bool $obfuscate = false): bool
    {
        return false; // FIXME

        /*$link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new LinkRegister($this->_nebuleInstance, $link);

        // Signe le lien.
        $newLink->sign($signer);

        // Si besoin, obfuscation du lien.
        if ($obfuscate
            && $this->_configurationInstance->getOptionAsBoolean('permitObfuscatedLink')
        ) {
            $newLink->setObfuscate();
        }

        // Ecrit le lien.
        return $newLink->write();*/
    }




    /**
     * Extrait et analyse un lien.
     * Accepte une chaine de caractère représentant un lien.
     * En fonction du nombre de champs, c'est interprété :
     * 2 champs : 0_0_0_action_source_0_0
     * 3 champs : 0_0_0_action_source_target_0
     * 4 champs : 0_0_0_action_source_target_meta
     * 5 champs : 0_0_date_action_source_target_meta
     * 6 champs : 0_signer_date_action_source_target_meta
     * 7 champs : signe_signer_date_action_source_target_meta
     * Sinon    : 0_0_0_0_0_0_0
     * Retourne un tableau des constituants du lien :
     * [signature, signataire, date, action, source, destination, méta]
     * Les champs non renseignés sont à '0'.
     *
     * @param string $link : lien à extraire.
     * @return array:string : un tableau des champs (signature, signataire, date, action, source, destination, méta).
     */
    public function flatLinkExtractAsArray_DISABLED(string $link): array
    {
        return array('0', '0', '0', '0', '0', '0', '0');
        /*    // Variables.
            $list = array();
            $date = date(DATE_ATOM);
            $ent = $this->_currentEntity;
    
            // Extraction du lien.
            $arg1 = strtok($link, '_');
            $arg2 = strtok('_');
            $arg3 = strtok('_');
            $arg4 = strtok('_');
            $arg5 = strtok('_');
            $arg6 = strtok('_');
            $arg7 = strtok('_');
    
            // Nettoyage du lien.
            if ($arg1 != '' && $arg2 != '' && $arg3 != '' && $arg4 != '' && $arg5 != '' && $arg6 != '' && $arg7 != '') {
                // Forme : signe_signer_date_action_source_target_meta
                $list = array($arg1, $arg2, $arg3, $arg4, $arg5, $arg6, $arg7);
            } elseif ($arg1 != '' && $arg2 != '' && $arg3 != '' && $arg4 != '' && $arg5 != '' && $arg6 != '' && $arg7 == '') {
                // Forme : 0_signer_date_action_source_target_meta
                $list = array('0', $arg1, $arg2, $arg3, $arg4, $arg5, $arg6);
            } elseif ($arg1 != '' && $arg2 != '' && $arg3 != '' && $arg4 != '' && $arg5 != '' && $arg6 == '' && $arg7 == '') {
                // Forme : 0_0_date_action_source_target_meta
                $list = array('0', $ent, $arg1, $arg2, $arg3, $arg4, $arg5);
            } elseif ($arg1 != '' && $arg2 != '' && $arg3 != '' && $arg4 != '' && $arg5 == '' && $arg6 == '' && $arg7 == '') {
                // Forme : 0_0_0_action_source_target_meta
                $list = array('0', $ent, $date, $arg1, $arg2, $arg3, $arg4);
            } elseif ($arg1 != '' && $arg2 != '' && $arg3 != '' && $arg4 == '' && $arg5 == '' && $arg6 == '' && $arg7 == '') {
                // Forme : 0_0_0_action_source_target_0
                $list = array('0', $ent, $date, $arg1, $arg2, $arg3, '0');
            } elseif ($arg1 != '' && $arg2 != '' && $arg3 == '' && $arg4 == '' && $arg5 == '' && $arg6 == '' && $arg7 == '') {
                // Forme : 0_0_0_action_source_0_0 : le minimum !
                $list = array('0', $ent, $date, $arg1, $arg2, '0', '0');
            } else {
                $list = array('0', '0', '0', '0', '0', '0', '0');
            }
    
            unset($date, $arg1, $arg2, $arg3, $arg4, $arg5, $arg6, $arg7);
            return $list;*/
    }

    public function flatLinkExtractAsArray(string $link): array {
        $list = array();

        $blockLinkInstance = new BlocLink($this->_nebuleInstance, 'new');
        $blockLinkInstance->addLink($link);

        return $list;
    }

    /**
     * Extrait et analyse un lien.
     *
     * @param string $link : lien à extraire.
     * @return ?LinkRegister : une instance de lien.
     *                     Accepte une chaine de caractère représentant un lien.
     * En fonction du nombre de champs, c'est interprété :
     * 2 champs : 0_0_0_action_source_0_0
     * 3 champs : 0_0_0_action_source_target_0
     * 4 champs : 0_0_0_action_source_target_meta
     * 5 champs : 0_0_date_action_source_target_meta
     * 6 champs : 0_signer_date_action_source_target_meta
     * 7 champs : signe_signer_date_action_source_target_meta
     * Sinon    : 0_0_0_0_0_0_0
     * Retourne une instance du lien.
     */
    public function flatLinkExtractAsInstance_DISABLED(string $link): ?LinkRegister
    {
        return null; // FIXME
        /*// Vérifier compatibilité avec liens incomplets...

        // Extrait le lien.
        $linkArray = $this->flatLinkExtractAsArray_DISABLED($link);

        // Création du lien.
        $flatLink = $linkArray[0] . '_' . $linkArray[1] . '_' . $linkArray[2] . '_' . $linkArray[3] . '_' . $linkArray[4] . '_' . $linkArray[5] . '_' . $linkArray[6];
        $linkInstance = $this->newLink($flatLink);

        unset($linkArray, $flatLink);
        return $linkInstance;*/
    }
}



// ========================================================================================
//   761_translation.php
//   020250227163020
//   54666b35f62a3d15e44b64433495d278467d8f17a2a574b10488e514820aa2f4.sha2.256


/**
 * Classe Traductions
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
abstract class Translates extends Functions
{
    const DEFAULT_COMMAND_LANGUAGE = 'lang';
    const DEFAULT_LANGUAGE = 'en-en';
    const MODULE_LOGO = '25a0ea1b1d88d7a659ff0fa3d1b70d0cf7ae788023f897da845b1ce8d1cc7e00.sha2.256';
    const MODULE_NAME = '/';
    CONST TRANSLATE_TABLE = [
        'fr-fr' => [
            '::::Welcome' => 'Bienvenue',
            '::::INFO' => 'Information',
            '::::OK' => 'OK',
            '::::INFORMATION' => 'Message',
            '::::WARN' => 'ATTENTION !',
            '::::ERROR' => 'ERREUR !',
            '::::RESCUE' => 'Mode de sauvetage !',
            '::::GO' => 'Avancer',
            '::::BACK' => 'Revenir',
            '::::SecurityChecks' => 'Tests de sécurité',
            '::::icon:DEFAULT_ICON_LO' => 'Objet',
            '::::HtmlHeadDescription' => 'Page web cliente sylabe pour nebule.',
            '::::Experimental' => '[Experimental]',
            '::::Developpement' => '[En cours de développement]',
            '::::help' => 'Aide',
            '::::Password' => 'Mot de passe',
            '::::IDprivateKey' => 'ID privé',
            '::::IDpublicKey' => 'ID public',
            '::::display:content:errorBan' => 'Cet objet est banni, il ne peut pas être affiché !',
            '::::display:content:warningTaggedWarning' => 'Cet objet est marqué comme dangereux, attention à son contenu !',
            '::::display:content:ObjectProctected' => 'Cet objet est protégé !',
            '::::display:content:warningObjectProctected' => 'Cet objet est marqué comme protégé, attention à la divulgation de son contenu en public !!!',
            '::::display:content:OK' => "Le contenu de l'objet est valide.",
            '::::display:content:warningTooBig' => "Cet objet est trop volumineux, son contenu n'a pas été vérifié !",
            '::::display:content:errorNotDisplayable' => 'Cet objet ne peut pas être affiché !',
            '::::display:content:errorNotAvailable' => "Cet objet n'est pas disponible, il ne peut pas être affiché !",
            '::::display:content:notAnObject' => "Cet objet de référence n'a pas de contenu.",
            '::::display:content:ObjectHaveUpdate' => 'Cet objet a été mis à jour vers :',
            '::::display:content:Activated' => 'Cet objet est activé.',
            '::::display:content:NotActivated' => 'Cet objet est désactivé.',
            '::::display:link:OK' => 'Ce lien est valide.',
            '::::display:link:errorInvalid' => "Ce lien n'est pas valide !",
            '::::warn_ServNotPermitWrite' => "Ce serveur n'autorise pas les modifications.",
            '::::warn_flushSessionAndCache' => "Toutes les données de connexion ont été effacées.",
            '::::err_NotPermit' => 'Non autorisé sur ce serveur !',
            '::::act_chk_errCryptHash' => "La fonction de prise d'empreinte cryptographique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptHashkey' => "La taille de l'empreinte cryptographique est trop petite !",
            '::::act_chk_errCryptHashkey' => "La taille de l'empreinte cryptographique est invalide !",
            '::::act_chk_errCryptSym' => "La fonction de chiffrement cryptographique symétrique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptSymkey' => "La taille de clé de chiffrement cryptographique symétrique est trop petite !",
            '::::act_chk_errCryptSymkey' => "La taille de clé de chiffrement cryptographique symétrique est invalide !",
            '::::act_chk_errCryptAsym' => "La fonction de chiffrement cryptographique asymétrique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptAsymkey' => "La taille de clé de chiffrement cryptographique asymétrique est trop petite !",
            '::::act_chk_errCryptAsymkey' => "La taille de clé de chiffrement cryptographique asymétrique est invalide !",
            '::::act_chk_errBootstrap' => "L'empreinte cryptographique du bootstrap est invalide !",
            '::::act_chk_warnSigns' => 'La vérification des signatures de liens est désactivée !',
            '::::act_chk_errSigns' => 'La vérification des signatures de liens ne fonctionne pas !',
            '::::info_OnlySignedLinks' => 'Uniquement des liens signés !',
            '::::info_OnlyLinksFromCodeMaster' => 'Uniquement les liens signés du maître du code !',
            '::::display:object:flag:protected' => 'Cet objet est protégé.',
            '::::display:object:flag:unprotected' => "Cet objet n'est pas protégé.",
            '::::display:object:flag:obfuscated' => 'Cet objet est dissimulé.',
            '::::display:object:flag:unobfuscated' => "Cet objet n'est pas dissimulé.",
            '::::display:object:flag:locked' => 'Cet entité est déverrouillée.',
            '::::display:object:flag:unlocked' => 'Cet entité est verrouillée.',
            '::::display:object:flag:activated' => 'Cet objet est activé.',
            '::::display:object:flag:unactivated' => "Cet objet n'est pas activé.",
            '::::list:empty' => 'Liste vide',
            '::::yes' => 'Oui',
            '::::no' => 'Non',
            '::::lock' => 'Verrouiller',
            '::::unlock' => 'Déverrouiller',
            '::::entity:locked' => 'Entité verrouillée. Déverrouiller ?',
            '::::entity:unlocked' => 'Entité déverrouillée. Verrouiller ?',
        ],
        'en-en' => [
            '::::Welcome' => 'Welcome',
            '::::INFO' => 'Information',
            '::::OK' => 'OK',
            '::::INFORMATION' => 'Message',
            '::::WARN' => 'WARNING!',
            '::::ERROR' => 'ERROR!',
            '::::RESCUE' => 'Rescue mode!',
            '::::GO' => 'Continue',
            '::::BACK' => 'Go back',
            '::::SecurityChecks' => 'Security checks',
            '::::icon:DEFAULT_ICON_LO' => 'Object',
            '::::HtmlHeadDescription' => 'Client web page sylabe for nebule.',
            '::::Experimental' => '[Experimental]',
            '::::Developpement' => '[Under developpement]',
            '::::help' => 'Help',
            '::::Password' => 'Password',
            '::::IDprivateKey' => 'Private ID',
            '::::IDpublicKey' => 'Public ID',
            '::::display:content:errorBan' => "This object is banned, it can't be displayed!",
            '::::display:content:warningTaggedWarning' => "This object is marked as dangerous, be carfull with it's content!",
            '::::display:content:ObjectProctected' => "This object is marked as protected!",
            '::::display:content:warningObjectProctected' => "This object is marked as protected, be careful when it's content is displayed in public!",
            '::::display:content:OK' => 'The object content is valid.',
            '::::display:content:warningTooBig' => "This object is too big, it's content have not been checked!",
            '::::display:content:errorNotDisplayable' => "This object can't be displayed!",
            '::::display:content:errorNotAvailable' => "This object is not available, it can't be displayed!",
            '::::display:content:notAnObject' => 'This reference object do not have content.',
            '::::display:content:ObjectHaveUpdate' => 'This object have been updated to:',
            '::::display:content:Activated' => 'This object is activated.',
            '::::display:content:NotActivated' => 'This object is not activated.',
            '::::display:link:OK' => 'This link is valid.',
            '::::display:link:errorInvalid' => 'This link is invalid!',
            '::::warn_ServNotPermitWrite' => 'This server do not permit modifications.',
            '::::warn_flushSessionAndCache' => 'All datas of this connexion have been flushed.',
            '::::err_NotPermit' => 'Non autorisé sur ce serveur !',
            '::::act_chk_errCryptHash' => "La fonction de prise d'empreinte cryptographique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptHashkey' => "La taille de l'empreinte cryptographique est trop petite !",
            '::::act_chk_errCryptHashkey' => "La taille de l'empreinte cryptographique est invalide !",
            '::::act_chk_errCryptSym' => "La fonction de chiffrement cryptographique symétrique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptSymkey' => "La taille de clé de chiffrement cryptographique symétrique est trop petite !",
            '::::act_chk_errCryptSymkey' => "La taille de clé de chiffrement cryptographique symétrique est invalide !",
            '::::act_chk_errCryptAsym' => "La fonction de chiffrement cryptographique asymétrique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptAsymkey' => "La taille de clé de chiffrement cryptographique asymétrique est trop petite !",
            '::::act_chk_errCryptAsymkey' => "La taille de clé de chiffrement cryptographique asymétrique est invalide !",
            '::::act_chk_errBootstrap' => "L'empreinte cryptographique du bootstrap est invalide !",
            '::::act_chk_warnSigns' => 'La vérification des signatures de liens est désactivée !',
            '::::act_chk_errSigns' => 'La vérification des signatures de liens ne fonctionne pas !',
            '::::info_OnlySignedLinks' => 'Only signed links!',
            '::::info_OnlyLinksFromCodeMaster' => 'Only links signed by the code master!',
            '::::display:object:flag:protected' => 'This object is protected.',
            '::::display:object:flag:unprotected' => 'This object is not protected.',
            '::::display:object:flag:obfuscated' => 'This object is obfuscated.',
            '::::display:object:flag:unobfuscated' => 'This object is not obfuscated.',
            '::::display:object:flag:locked' => 'This entity is unlocked.',
            '::::display:object:flag:unlocked' => 'This entity is locked.',
            '::::display:object:flag:activated' => 'This object is activated.',
            '::::display:object:flag:unactivated' => 'This object is not activated.',
            '::::list:empty' => 'Empty list',
            '::::yes' => 'Yes',
            '::::no' => 'No',
            '::::lock' => 'Locking',
            '::::unlock' => 'Unlocking',
            '::::entity:locked' => 'Entity locked. Unlock?',
            '::::entity:unlocked' => 'Entity unlocked. Lock?',
        ],
        'es-co' => [
            '::::Welcome' => 'Bienvenido',
            '::::INFO' => 'Information',
            '::::OK' => 'OK',
            '::::INFORMATION' => 'Mensaje',
            '::::WARN' => '¡ADVERTENCIA!',
            '::::ERROR' => '¡ERROR!',
            '::::RESCUE' => '¡Modo de rescate!',
            '::::GO' => 'Avanzar',
            '::::BACK' => 'Volver atrás',
            '::::SecurityChecks' => 'Controles de seguridad',
            '::::icon:DEFAULT_ICON_LO' => 'Objeto',
            '::::HtmlHeadDescription' => 'Página web cliente sylabe para nebule.',
            '::::Experimental' => '[Experimental]',
            '::::Developpement' => '[Under developpement]',
            '::::help' => 'Ayuda',
            '::::Password' => 'Contraseña',
            '::::IDprivateKey' => 'ID privé',
            '::::IDpublicKey' => 'ID public',
            '::::display:content:errorBan' => "This object is banned, it can't be displayed!",
            '::::display:content:warningTaggedWarning' => "This object is marked as dangerous, be carfull with it's content!",
            '::::display:content:ObjectProctected' => "This object is marked as protected!",
            '::::display:content:warningObjectProctected' => "This object is marked as protected, be careful when it's content is displayed in public!",
            '::::display:content:OK' => 'The object content is valid.',
            '::::display:content:warningTooBig' => "This object is too big, it's content have not been checked!",
            '::::display:content:errorNotDisplayable' => "This object can't be displayed!",
            '::::display:content:errorNotAvailable' => "This object is not available, it can't be displayed!",
            '::::display:content:notAnObject' => 'This reference object do not have content.',
            '::::display:content:ObjectHaveUpdate' => 'This object have been updated to:',
            '::::display:content:Activated' => 'This object is activated.',
            '::::display:content:NotActivated' => 'This object is not activated.',
            '::::display:link:OK' => 'This link is valid.',
            '::::display:link:errorInvalid' => 'This link is invalid!',
            '::::warn_ServNotPermitWrite' => 'This server do not permit modifications.',
            '::::warn_flushSessionAndCache' => 'All datas of this connexion have been flushed',
            '::::err_NotPermit' => 'Non autorisé sur ce serveur !',
            '::::act_chk_errCryptHash' => "La fonction de prise d'empreinte cryptographique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptHashkey' => "La taille de l'empreinte cryptographique est trop petite !",
            '::::act_chk_errCryptHashkey' => "La taille de l'empreinte cryptographique est invalide !",
            '::::act_chk_errCryptSym' => "La fonction de chiffrement cryptographique symétrique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptSymkey' => "La taille de clé de chiffrement cryptographique symétrique est trop petite !",
            '::::act_chk_errCryptSymkey' => "La taille de clé de chiffrement cryptographique symétrique est invalide !",
            '::::act_chk_errCryptAsym' => "La fonction de chiffrement cryptographique asymétrique ne fonctionne pas correctement !",
            '::::act_chk_warnCryptAsymkey' => "La taille de clé de chiffrement cryptographique asymétrique est trop petite !",
            '::::act_chk_errCryptAsymkey' => "La taille de clé de chiffrement cryptographique asymétrique est invalide !",
            '::::act_chk_errBootstrap' => "L'empreinte cryptographique du bootstrap est invalide !",
            '::::act_chk_warnSigns' => 'La vérification des signatures de liens est désactivée !',
            '::::act_chk_errSigns' => 'La vérification des signatures de liens ne fonctionne pas !',
            '::::info_OnlySignedLinks' => 'Only signed links!',
            '::::info_OnlyLinksFromCodeMaster' => 'Only links signed by the code master!',
            '::::display:object:flag:protected' => 'Este objeto está protegido.',
            '::::display:object:flag:unprotected' => 'Este objeto no está protegido.',
            '::::display:object:flag:obfuscated' => 'Este objeto está oculto.',
            '::::display:object:flag:unobfuscated' => 'Este objeto no está oculto.',
            '::::display:object:flag:locked' => 'Esta entidad está desbloqueada.',
            '::::display:object:flag:unlocked' => 'Esta entidad está bloqueada.',
            '::::display:object:flag:activated' => 'Este objeto está activado.',
            '::::display:object:flag:unactivated' => 'Este objeto no está activado.',
            '::::list:empty' => 'Empty list',
            '::::yes' => 'Si',
            '::::no' => 'No',
            '::::lock' => 'Locking',
            '::::unlock' => 'Unlocking',
            '::::entity:locked' => 'Entidad bloqueada. Desbloquear?',
            '::::entity:unlocked' => 'Entidad desbloqueada. Bloquear?',
        ],
    ];

    protected bool $_useModules = false;
    protected ?ApplicationModules $_applicationModulesInstance = null;
    protected string $_currentLanguage = '';
    protected string $_currentLanguageIcon = '';
    protected string $_defaultLanguage = '';
    protected array $_languageList = array();
    protected ?Translates $_currentLanguageInstance = null;
    protected ?Translates $_defaultLanguageInstance = null;

    public function __toString() { return 'Traduction'; }
    public function __sleep() { return array(); } // TODO do not cache



    protected function _initialisation(): void {
        $this->_metrologyInstance->addLog('initialisation translate', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'c845beb4');
        $this->_applicationModulesInstance = $this->_applicationInstance->getApplicationModulesInstance();

        $this->_findDefaultLanguage();
        $this->_findLanguages();
        $this->_findCurrentLanguage();
    }



    protected function _findDefaultLanguage(): void {
        $this->_defaultLanguage = self::DEFAULT_LANGUAGE;

        if ($this->_applicationInstance::USE_MODULES) {
            foreach ($this->_applicationModulesInstance->getModulesTranslateListName() as $module) {
                if ($module::MODULE_LANGUAGE == $this->_defaultLanguage) {
                    $this->_defaultLanguageInstance = $module;
                }
            }
        }
        $this->_metrologyInstance->addLog('Find default language : ' . $this->_defaultLanguage, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '376c6fa5');
    }


    protected function _findLanguages(): void {
        if ($this->_applicationInstance::USE_MODULES) {
            foreach ($this->_applicationModulesInstance->getModulesListInstances() as $module) {
                if ($module::MODULE_TYPE == 'traduction') {
                    $this->_languageList[$module::MODULE_LANGUAGE] = $module::MODULE_LANGUAGE;
                    $this->_applicationModulesInstance->getModulesTranslateListName()[$module::MODULE_LANGUAGE];
                    $this->_metrologyInstance->addLog('Find new language : ' . $module::MODULE_LANGUAGE, Metrology::LOG_LEVEL_DEVELOP, __METHOD__, '7e21187d');
                }
            }
        } else
            $this->_languageList = array(self::DEFAULT_LANGUAGE);
    }


    /**
     * La langue d'affichage de l'interface.
     *
     * La recherche de la langue se fait en lisant la langue demandée dans l'URL,
     *   puis en la comparant aux modules de traductions présents.
     *
     * @return void
     */
    protected function _findCurrentLanguage(): void {
        $arg_lang = filter_input(INPUT_GET, self::DEFAULT_COMMAND_LANGUAGE, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW);

        if ($arg_lang != ''
            && strlen($arg_lang) != 5
            && substr($arg_lang, 2, 1) != '-'
        )
            $arg_lang = '';

        $ok_lang = false;
        $lang_instance = '';
        foreach ($this->_languageList as $lang) {
            if ($arg_lang == $lang) {
                $ok_lang = true;
                if ($this->_applicationInstance::USE_MODULES)
                    $lang_instance = $this->_applicationModulesInstance->getModulesTranslateListName()[$lang];
                break;
            }
        }

        if ($ok_lang) {
            $this->_currentLanguage = $arg_lang;
            $this->_currentLanguageInstance = $lang_instance;
            $this->_sessionInstance->setSessionStore($this->_applicationInstance->getClassName() . 'DisplayLanguage', $arg_lang);
        } else {
            $cache = $this->_sessionInstance->getSessionStore($this->_applicationInstance->getClassName() . 'DisplayLanguage');
            if ($cache !== false
                && $cache != ''
            ) {
                $this->_currentLanguage = $cache;
                $this->_currentLanguageInstance = $this->_applicationModulesInstance->getModulesTranslateListName()[$cache]; // FIXME en-en not exist
            } else {
                $this->_currentLanguage = $this->_defaultLanguage;
                $this->_currentLanguageInstance = $this->_applicationModulesInstance->getModulesTranslateListName()[$this->_defaultLanguage];
                $this->_sessionInstance->setSessionStore($this->_applicationInstance->getClassName() . 'DisplayLanguage', $this->_defaultLanguage);
            }
            unset($cache);
        }

        $this->_metrologyInstance->addLog('Find current language : ' . $this->_currentLanguage, Metrology::LOG_LEVEL_DEVELOP, __METHOD__, '0edc11b2');
    }

    public function getLanguageList(): array { return $this->_languageList; }
    public function getDefaultLanguage(): string { return $this->_defaultLanguage; }
    public function getCurrentLanguage(): string { return $this->_currentLanguage; }
    public function getCurrentLanguageIcon(): string { return $this->_currentLanguageIcon; }
    public function getLanguageModuleInstanceList(): array { return $this->_applicationModulesInstance->getModulesTranslateListName(); }
    public function getCurrentLanguageInstance(): ?Translates { return $this->_currentLanguageInstance; }
    public function getDefaultLanguageInstance(): ?Translates  { return $this->_defaultLanguageInstance; }


    public function getTranslate(string $text, string $lang = ''): string {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('translate (' . $lang .  ') : ' . substr($text, 0, 250), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        if ($lang == '')
            $lang = $this->_currentLanguage;

        if (str_starts_with($text, '<'))
            return $text;

        $classAppTranslate = $this->_applicationInstance->getNamespace() . '\\' . 'Translate';

        if (str_starts_with($text, '::::') && isset(Translates::TRANSLATE_TABLE[$lang][$text]))
            return Translates::TRANSLATE_TABLE[$lang][$text];
        if (str_starts_with($text, ':::') && isset($classAppTranslate::TRANSLATE_TABLE[$lang][$text]))
            return $classAppTranslate::TRANSLATE_TABLE[$lang][$text];
        if (str_starts_with($text, '::')
            && is_a($this->_applicationModulesInstance->getCurrentModuleInstance(), '\Nebule\Library\Modules')
            && isset($this->_applicationModulesInstance->getCurrentModuleInstance()::TRANSLATE_TABLE[$lang][$text])
        )
            return $this->_applicationModulesInstance->getCurrentModuleInstance()::TRANSLATE_TABLE[$lang][$text];

        $result = $this->_getTranslateFromModules($text, $lang);
        if ($result != '')
            return $result;

        if ($lang == self::DEFAULT_LANGUAGE)
            return $text;

        if (str_starts_with($text, '::::') && isset(Translates::TRANSLATE_TABLE[self::DEFAULT_LANGUAGE][$text]))
            return Translates::TRANSLATE_TABLE[self::DEFAULT_LANGUAGE][$text];
        if (str_starts_with($text, ':::') && isset($classAppTranslate::TRANSLATE_TABLE[self::DEFAULT_LANGUAGE][$text]))
            return $classAppTranslate::TRANSLATE_TABLE[self::DEFAULT_LANGUAGE][$text];
        if (str_starts_with($text, '::')
            && is_a($this->_applicationModulesInstance->getCurrentModuleInstance(), '\Nebule\Library\Modules')
            && isset($this->_applicationModulesInstance->getCurrentModuleInstance()::TRANSLATE_TABLE[self::DEFAULT_LANGUAGE][$text])
        )
            return $this->_applicationModulesInstance->getCurrentModuleInstance()::TRANSLATE_TABLE[self::DEFAULT_LANGUAGE][$text];

        $this->_metrologyInstance->addLog('no translate, keep same value : ' . $result, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '74bd1f3a');
        return $text;
    }

    private function _getTranslateFromModules(string $text, string $lang): string {
        $this->_nebuleInstance->getMetrologyInstance()->addLog('translate (' . $lang .  ') : ' . substr($text, 0, 250), Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');
        $result = '';
        foreach ($this->_applicationModulesInstance->getModulesTranslateListName() as $module) {
            if ($module::MODULE_LANGUAGE == $lang && isset($module::TRANSLATE_TABLE[$lang][$text])) {
                $result = $module::TRANSLATE_TABLE[$lang][$text];
                $this->_metrologyInstance->addLog('find translate : ' . $result, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '65349a7b');
            }
        }
        return $result;
    }
}



// ========================================================================================
//   800_application_interface.php
//   020250215163515
//   b6d58460700872881d46d30e2869620e5aefbcfc74b9262db92f84d1b58881d2.sha2.256

/**
 * L'interface applicationInterface
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 *
 */
interface applicationInterface
{
    public function __construct(nebule $nebuleInstance);
    public function __toString(): string;
    public function __sleep(): array;
    public function __wakeup();

    public function initialisation(): void;
    public function getClassName(): string;
    public function getName(): string;
    public function getNebuleInstance(): ?nebule;
    public function getDisplayInstance(): ?Displays;
    public function getTranslateInstance(): ?Translates;
    public function getMetrologyInstance(): ?Metrology;
    public function getActionInstance(): ?Actions;
    // TODO
}



// ========================================================================================
//   801_applications.php
//   020250218162750
//   855effc788ec92fdaa70d36ae18f0a452284e58d0ed27ac68135ddf49a6b1ff8.sha2.256
use const Nebule\Bootstrap\LIB_ARG_BOOTSTRAP_BREAK;
use const Nebule\Bootstrap\LIB_ARG_FLUSH_SESSION;
use const Nebule\Bootstrap\LIB_ARG_INLINE_DISPLAY;
use const Nebule\Bootstrap\LIB_ARG_RESCUE_MODE;
use const Nebule\Bootstrap\LIB_ARG_SWITCH_APPLICATION;
use const Nebule\Bootstrap\LIB_ARG_UPDATE_APPLICATION;
use const Nebule\Bootstrap\LIB_LOCAL_ENTITY_FILE;
use const Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER;

/**
 * Classe de référence des applications.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
abstract class Applications extends Functions implements applicationInterface
{
    const APPLICATION_NAME = 'undef';
    const APPLICATION_SURNAME = 'undef';
    const APPLICATION_AUTHOR = 'undef';
    const APPLICATION_VERSION = 'undef';
    const APPLICATION_LICENCE = 'undef';
    const APPLICATION_WEBSITE = 'undef';
    const APPLICATION_NODE = 'undef';
    const APPLICATION_CODING = 'application/x-httpd-php';
    const USE_MODULES = false;
    const USE_MODULES_TRANSLATE = false;
    const USE_MODULES_EXTERNAL = false;
    const LIST_MODULES_INTERNAL = array();
    const LIST_MODULES_EXTERNAL = array();

    protected ?ApplicationModules $_applicationModulesInstance = null;
    protected string $_applicationNamespace = '';

    protected function _initialisation(): void
    {
        $this->_applicationInstance = $this;
        $this->_applicationNamespace = '\\Nebule\\Application\\' . strtoupper(substr(static::APPLICATION_NAME, 0, 1)) . strtolower(substr(static::APPLICATION_NAME, 1));

        $this->_findEnvironment();

        if ($this->_findAskDownload())
            return; // Do nothing more on app.

        $displayName = $this->_applicationNamespace . '\Display';
        $this->_metrologyInstance->addLog('instancing application display ' . $displayName, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '9d8c59bb');
        $this->_displayInstance = new $displayName($this->_nebuleInstance);

        $actionName = $this->_applicationNamespace . '\Action';
        $this->_metrologyInstance->addLog('instancing application action '  .$actionName, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'e19f2105');
        $this->_actionInstance = new $actionName($this->_nebuleInstance);

        $translateName = $this->_applicationNamespace . '\Translate';
        $this->_metrologyInstance->addLog('instancing application translate ' . $translateName, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '8fc40a38');
        $this->_translateInstance = new $translateName($this->_nebuleInstance);

        $this->_displayInstance->setEnvironmentLibrary($this->_nebuleInstance);
        $this->_displayInstance->setEnvironmentApplication($this);

        $this->_actionInstance->setEnvironmentLibrary($this->_nebuleInstance);
        $this->_actionInstance->setEnvironmentApplication($this);

        $this->_translateInstance->setEnvironmentLibrary($this->_nebuleInstance);
        $this->_translateInstance->setEnvironmentApplication($this);

        $this->_metrologyInstance->addLog('instancing application modules', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '1ddcee4c');
        $this->_applicationModulesInstance = new ApplicationModules($this);

        $this->_metrologyInstance->addLog('initialisation application translate', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'bd674f44');
        try {
            $this->_translateInstance->initialisation();
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog('initialisation application translate error ('  . $e->getCode() . ') : ' . $e->getFile() . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n" . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '585648a2');
        }

        $this->_metrologyInstance->addLog('initialisation application display', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '451a8518');
        try {
            $this->_displayInstance->initialisation();
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog('initialisation application display error ('  . $e->getCode() . ') : ' . $e->getFile() . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n" . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '4c7da4e2');
        }

        $this->_metrologyInstance->addLog('initialisation application action', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'd3478bd7');
        try {
            $this->_actionInstance->initialisation();
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog('initialisation application action error ('  . $e->getCode() . ') : ' . $e->getFile() . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n" . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '3c042de3');
        }
        $this->_actionInstance->getActions(); // try catch inside
    }

    public function __destruct() { return true; }
    public function __toString(): string { return static::class; }
    public function __sleep(): array { return array(); }



    public function getClassName(): string { return static::class; }
    public function getName(): string { return static::APPLICATION_NAME; }
    public function getNamespace(): string { return $this->_applicationNamespace; }
    public function getNebuleInstance(): ?nebule { return $this->_nebuleInstance; }
    public function getDisplayInstance(): ?Displays { return $this->_displayInstance; }
    public function getTranslateInstance(): ?Translates { return $this->_translateInstance; }
    public function getMetrologyInstance(): ?Metrology { return $this->_metrologyInstance; }
    public function getActionInstance(): ?Actions { return $this->_actionInstance; }
    public function getApplicationModulesInstance(): ApplicationModules { return $this->_applicationModulesInstance; }
    public function getCurrentObjectID(): string { return $this->_nebuleInstance->getCurrentObject(); }
    public function getCurrentObjectInstance(): Node { return $this->_nebuleInstance->getCurrentObjectInstance(); }

    protected function _findEnvironment(): void
    {
        $this->_findURL();
        $this->_findCurrentEntity();
    }

    protected string $_urlProtocol;
    protected string $_urlHost;
    protected string $_urlBasename;
    protected string $_urlPath;
    protected string $_urlHostname;

    protected function _findURL(): void
    {
        if (isset($_SERVER['HTTPS'])
            && $_SERVER['HTTPS']
        )
            $this->_urlProtocol = 'https';
        else
            $this->_urlProtocol = 'http';
        //$this->_urlHost	= $_SERVER['HTTP_HOST'];
        $this->_urlHost = $this->_configurationInstance->getOptionUntyped('hostURL');
        $explodeBaseName = explode('/', $_SERVER['REQUEST_URI']);
        $this->_urlBasename = end($explodeBaseName);
        $this->_urlPath = substr($_SERVER['REQUEST_URI'], 0, strlen($_SERVER['REQUEST_URI']) - strlen($this->_urlBasename) - 1);
        $this->_urlHostname = $this->_urlProtocol . '://' . $this->_urlHost . $this->_urlPath;
    }

    public function getUrlProtocol(): string
    {
        return $this->_urlProtocol;
    }

    public function getUrlHost(): string
    {
        return $this->_urlHost;
    }

    public function getUrlBasename(): string
    {
        return $this->_urlBasename;
    }

    public function getUrlPath(): string
    {
        return $this->_urlPath;
    }

    public function getUrlHostname(): string
    {
        return $this->_urlHostname;
    }


    protected string $_currentEntityOID;
    protected ?Node $_currentEntityInstance;

    /**
     * Recherche l'entité en cours d'utilisation.
     */
    protected function _findCurrentEntity(): void
    {
        /*$this->_metrologyInstance->addLog('finding current entity', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '639622a1');
        
        $arg_ent = filter_input(INPUT_GET, References::COMMAND_SELECT_ENTITY, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW);
        if ($arg_ent === false || $arg_ent === null)
            $arg_ent = '';
        $arg_ent = trim($arg_ent);
        if ($arg_ent != '' && Node::checkNID($arg_ent, false, false)
            && ($this->_nebuleInstance->getIoInstance()->checkObjectPresent($arg_ent)
                || $this->_nebuleInstance->getIoInstance()->checkLinkPresent($arg_ent)
            )
        ) {
            $this->_currentEntityOID = $arg_ent;
            $this->_currentEntityInstance = $this->_cacheInstance->newEntity($arg_ent);
            $this->_sessionInstance->setSessionStore('sylabeSelectedEntity', $arg_ent);
        } else {
            $cache = $this->_sessionInstance->getSessionStore('sylabeSelectedEntity');
            if ($cache !== false && $cache != '') {
                $this->_currentEntityOID = $cache;
                $this->_currentEntityInstance = $this->_cacheInstance->newEntity($cache);
            } else
            {
                $this->_currentEntityOID = $this->_entitiesInstance->getCurrentEntityID();
                $this->_currentEntityInstance = $this->_cacheInstance->newEntity($this->_entitiesInstance->getCurrentEntityID());
                $this->_sessionInstance->setSessionStore('sylabeSelectedEntity', $this->_entitiesInstance->getCurrentEntityID());
            }
            unset($cache);
        }
        unset($arg_ent);
        $this->_metrologyInstance->addLog('found current entity EID=' . $this->_currentEntityOID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '59e25e72');*/

        $this->_currentEntityOID = $this->_entitiesInstance->getCurrentEntityID();
        $this->_currentEntityInstance = $this->_entitiesInstance->getCurrentEntityInstance();
    }

    public function getCurrentEntityID(): string
    {
        return $this->_currentEntityOID;
    }

    public function getCurrentEntityInstance(): Node
    {
        return $this->_currentEntityInstance;
    }


    /**
     * Un téléchargement est demandé.
     *
     * @var boolean
     */
    protected bool $_askDownload = false;
    /**
     * ID de l'objet demandé au téléchargement.
     *
     * @var string
     */
    protected string $_askDownloadObject = '';
    /**
     * ID de l'objet dont les liens sont demandés au téléchargement.
     *
     * @var string
     */
    protected string $_askDownloadLinks = '';

    /**
     * Retourne si la requête web est un téléchargement d'objet ou de lien.
     * Des accélérations peuvent être prévues dans ce cas.
     *
     * @return boolean
     */
    public function askDownload(): bool
    {
        return $this->_askDownload;
    }

    /**
     * Gestion des variables pour le téléchargement d'objets et de liens.
     *
     * @return boolean
     */
    protected function _findAskDownload(): bool
    {
        $arg_dwlobj = trim((string)filter_input(INPUT_GET, nebule::NEBULE_LOCAL_OBJECTS_FOLDER, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        if (Node::checkNID($arg_dwlobj)) {
            $this->_askDownload = true;
            $this->_askDownloadObject = trim($arg_dwlobj);
            $this->_metrologyInstance->addLog('ask for download object ' . $arg_dwlobj, Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'df913e73');
        }
        $arg_dwllnk = trim((string)filter_input(INPUT_GET, nebule::NEBULE_LOCAL_LINKS_FOLDER, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        if (Node::checkNID($arg_dwllnk)) {
            $this->_askDownload = true;
            $this->_askDownloadLinks = trim($arg_dwllnk);
            $this->_metrologyInstance->addLog('ask for download links ' . $arg_dwllnk, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '98d5ee6d');
        }
        return $this->_askDownload;
    }

    /**
     * Fonction de téléchargement d'objets ou de liens.
     * Le téléchargement se fait sous forme de fichier pour dé-nebulisation d'un objet
     *   ou affichage dans un navigateur.
     * C'est la seule façon de télécharger le contenu d'un objet protégé.
     *
     * @return void
     */
    protected function _download(): void
    {
        $err404 = false;
        if ($this->_askDownloadLinks != '') // Détermine si c'est un lien à télécharger.
        {
            if ($this->_nebuleInstance->getIoInstance()->checkLinkPresent($this->_askDownloadLinks)) {
                $this->_metrologyInstance->addLog('Sending links ' . $this->_askDownloadLinks, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '91b305b1');
                // Flush des erreurs.
                ob_end_clean();
                // Transmission.
                header('Content-Description: File Transfer');
                header('Content-type: text/plain');
                header('Content-Disposition: attachment; filename="' . $this->_askDownloadLinks . '.neb.lnk"');
                header('Content-Transfer-Encoding: binary');
                header('Expires: 0');

                $this->_metrologyInstance->addLog('End sending links ' . $this->_askDownloadLinks, Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'd5318e9f');
            } else {
                $err404 = true;
                $this->_metrologyInstance->addLog('Error 404 sending links ' . $this->_askDownloadLinks, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'df11e69f');
            }
        } else // Sinon c'est un objet à télécharger.
        {
            $instance = $this->_cacheInstance->newNode($this->_askDownloadObject);
            $data = $instance->getContent(0);
            if ($data != null) {
                $this->_metrologyInstance->addLog('Sending object ' . $this->_askDownloadObject, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '18852ac4');
                // Calcul type mime, nom et suffixe de fichier pour l'utilisateur final.
                $downloadmime = $instance->getType('all');
                $downloadname = $instance->getName('all');
                $downloadsuffix = $instance->getSuffixName('all');
                if ($downloadsuffix != '') {
                    $downloadname .= '.' . $downloadsuffix;
                }
                // Flush des erreurs.
                ob_end_clean();
                // Transmission.
                header('Content-Description: File Transfer');
                header('Content-type: ' . $downloadmime);
                header('Content-Disposition: attachment; filename="' . $downloadname . '"');
                header('Content-Transfer-Encoding: binary');
                header('Expires: 0');
                echo $data;

                $this->_metrologyInstance->addLog('End sending object ' . $this->_askDownloadObject, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '99f390f9');
            } else {
                $err404 = true;
                $this->_metrologyInstance->addLog('Error 404 sending object ' . $this->_askDownloadObject, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'f8234249');
            }
        }

        if ($err404) {
            $this->_metrologyInstance->addLog('Sending error 404 ', Metrology::LOG_LEVEL_AUDIT, __METHOD__, '6efad36a');
            // Transmission.
            ob_end_clean();
            ob_clean();
            header('HTTP/1.0 404 Not Found');
            echo "<h1>404 Not Found</h1>\nThe page that you have requested could not be found.";
        }
    }



    public function getIsModuleActivated(Node $module): bool
    {
        return $this->_applicationModulesInstance->getIsModuleActivated($module);
    }

    public function getModulesListNames(): array
    {
        return $this->_applicationModulesInstance->getModulesListNames();
    }

    public function getModulesListInstances(): array
    {
        return $this->_applicationModulesInstance->getModulesListInstances();
    }

    public function getModulesTranslateListInstances(): array
    {
        return $this->_applicationModulesInstance->getModulesTranslateListInstances();
    }

    public function getModulesListOID(): array
    {
        return $this->_applicationModulesInstance->getModulesListOID();
    }

    public function getModulesListRID(): array
    {
        return $this->_applicationModulesInstance->getModulesListRID();
    }

    public function getModulesListSignersRID(): array
    {
        return $this->_applicationModulesInstance->getModulesListSignersRID();
    }

    public function getModulesListValid(): array
    {
        return $this->_applicationModulesInstance->getModulesListValid();
    }

    public function getModulesListEnabled(): array
    {
        return $this->_applicationModulesInstance->getModulesListEnabled();
    }

    public function isModuleLoaded(string $name): bool
    {
        return $this->_applicationModulesInstance->getIsModuleLoaded($name);
    }

    public function getCurrentModuleInstance(): ?Modules
    {
        return $this->_applicationModulesInstance->getCurrentModuleInstance();
    }

    public function getModule(string $name): ?Modules
    {
        return $this->_applicationModulesInstance->getModule($name);
    }


    /**
     * Routage.
     */
    public function router(): void
    {
        $this->_metrologyInstance->addLog('running application', Metrology::LOG_LEVEL_NORMAL, __METHOD__, 'cd5ec83d');

        if ($this->_askDownload)
            $this->_download();
        else {
            $this->_metrologyInstance->addLog('running display', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '13cb1fd7');
            try {
                $this->_displayInstance->display();
            } catch (\Exception $e) {
                $this->_metrologyInstance->addLog('error display ('  . $e->getCode() . ') : ' . $e->getFile()
                    . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                    . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __METHOD__, '93be3bc2');
            }
            $this->_metrologyInstance->addLog('end display', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '07edae7d');
        }
    }



    protected string $_checkSecurityAll = "OK";
    public function getCheckSecurityAll(): string
    {
        return $this->_checkSecurityAll;
    }
    public function checkSecurity(): void
    {
        $this->_checkSecurity();
    }
    protected function _checkSecurity(): void
    {
        $this->_checkSecurityBootstrap();
        $this->_checkSecurityCryptoHash();
        $this->_checkSecurityCryptoSym();
        $this->_checkSecurityCryptoAsym();
        $this->_checkSecuritySign();
        $this->_checkSecurityURL();

        $this->_checkSecurityAll = 'OK';

        if ($this->_checkSecurityBootstrap == 'WARN'
            || $this->_checkSecurityCryptoHash == 'WARN'
            || $this->_checkSecurityCryptoSym == 'WARN'
            || $this->_checkSecurityCryptoAsym == 'WARN'
            || $this->_checkSecuritySign == 'WARN'
            || $this->_checkSecurityURL == 'WARN'
        ) {
            $this->_checkSecurityAll = 'WARN';
            $this->_metrologyInstance->addLog('general security WARN', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'bb110e27');
        }

        if ($this->_checkSecurityBootstrap == 'ERROR'
            || $this->_checkSecurityCryptoHash == 'ERROR'
            || $this->_checkSecurityCryptoSym == 'ERROR'
            || $this->_checkSecurityCryptoAsym == 'ERROR'
            || $this->_checkSecuritySign == 'ERROR'
            || $this->_checkSecurityURL == 'ERROR'
        ) {
            $this->_checkSecurityAll = 'ERROR';
            $this->_metrologyInstance->addLog('general security ERROR', Metrology::LOG_LEVEL_ERROR, __METHOD__, '7f72506b');
        }
    }
    protected string $_checkSecurityBootstrap = "ERROR";
    protected string $_checkSecurityBootstrapMessage = "::::act_chk_errBootstrap";
    public function getCheckSecurityBootstrap(): string
    {
        return $this->_checkSecurityBootstrap;
    }
    public function getCheckSecurityBootstrapMessage(): string
    {
        return $this->_checkSecurityBootstrapMessage;
    }
    protected function _checkSecurityBootstrap(): void
    {
        $this->_checkSecurityBootstrap = 'OK';
        $this->_checkSecurityBootstrapMessage = "OK";

/*        $this->_checkSecurityBootstrap = 'ERROR';
        $data = file_get_contents(nebule::NEBULE_BOOTSTRAP_FILE);
        $hash = $this->_nebuleInstance->getCryptoInstance()->hash($data);

        // Recherche les liens de validation.
        $hashRef = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_INTERFACE_BOOTSTRAP);
        $object = $this->_cacheInstance->newNode($hashRef);
        $links = $object->getLinksOnFields('', '', 'f', $hashRef, $hash, $hashRef);

        // Trie sur les autorités locales.
        $ok = false;
        foreach ($links as $link) {
            foreach ($this->_nebuleInstance->getLocalAuthorities() as $autority) {
                if ($link->getParsed()['bs/rs1/eid'] == $autority) {
                    $ok = true;
                    break 2;
                }
            }
        }
        unset($data, $hash, $object, $links, $link);

        if ($ok) {
            $this->_checkSecurityBootstrap = 'OK';
            $this->_checkSecurityBootstrapMessage = "OK";
            $this->_metrologyInstance->addLog('SECURITY OK Bootstrap', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'a8578fbf');
        }*/
        // Modification pour le mode rescue afin de permettre un déverrouillage sur un boostrap inconnu. Le mode rescue est dangereux. @todo bof...
        /*		if ( $this->_nebuleInstance->getModeRescue()
				&& ! $ok
			)
		{
			$this->_checkSecurityBootstrap = 'WARN';
			$this->_checkSecurityBootstrapMessage = "::::act_chk_errBootstrap";
			$this->_metrologyInstance->addLog('SECURITY WARN Bootstrap', Metrology::LOG_LEVEL_ERROR, __METHOD__, '00000000');
		}*/
    }

    protected string $_checkSecurityCryptoHash = 'WARN';
    protected string $_checkSecurityCryptoHashMessage = 'HASH Unchecked';
    public function getCheckSecurityCryptoHash(): string
    {
        return $this->_checkSecurityCryptoHash;
    }
    public function getCheckSecurityCryptoHashMessage(): string
    {
        return $this->_checkSecurityCryptoHashMessage;
    }
    protected function _checkSecurityCryptoHash(): void
    {
        if (true || $this->_nebuleInstance->getCryptoInstance()->checkHashFunction()) { // TODO
            $this->_checkSecurityCryptoHash = 'OK';
            $this->_checkSecurityCryptoHashMessage = 'OK';
            $this->_metrologyInstance->addLog('SECURITY OK Hash Crypto', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '46f04cd0');
        } else {
            $this->_checkSecurityCryptoHash = 'ERROR';
            $this->_checkSecurityCryptoHashMessage = '::::act_chk_errCryptHash';
            $this->_metrologyInstance->addLog('SECURITY ERROR Hash Crypto', Metrology::LOG_LEVEL_ERROR, __METHOD__, '3b3440f7');
        }
    }

    protected string $_checkSecurityCryptoSym = 'WARN';
    protected string $_checkSecurityCryptoSymMessage = 'SYM Unchecked';
    public function getCheckSecurityCryptoSym(): string
    {
        return $this->_checkSecurityCryptoSym;
    }
    public function getCheckSecurityCryptoSymMessage(): string
    {
        return $this->_checkSecurityCryptoSymMessage;
    }
    protected function _checkSecurityCryptoSym(): void
    {
        if (true || $this->_nebuleInstance->getCryptoInstance()->checkSymmetricFunction()) { // TODO
            $this->_checkSecurityCryptoSym = 'OK';
            $this->_checkSecurityCryptoSymMessage = 'OK';
            $this->_metrologyInstance->addLog('SECURITY OK Sym Crypto', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'acc2b1c1');
        } else {
            $this->_checkSecurityCryptoSym = 'ERROR';
            $this->_checkSecurityCryptoSymMessage = '::::act_chk_errCryptSym';
            $this->_metrologyInstance->addLog('SECURITY ERROR Sym Crypto', Metrology::LOG_LEVEL_ERROR, __METHOD__, '50a09db3');
        }
    }

    protected string $_checkSecurityCryptoAsym = 'WARN';
    protected string $_checkSecurityCryptoAsymMessage = 'ASYM Unchecked';
    public function getCheckSecurityCryptoAsym(): string
    {
        return $this->_checkSecurityCryptoAsym;
    }
    public function getCheckSecurityCryptoAsymMessage(): string
    {
        return $this->_checkSecurityCryptoAsymMessage;
    }
    protected function _checkSecurityCryptoAsym(): void
    {
        if (true || $this->_nebuleInstance->getCryptoInstance()->checkAsymmetricFunction()) { // TODO
            $this->_checkSecurityCryptoAsym = 'OK';
            $this->_checkSecurityCryptoAsymMessage = 'OK';
            $this->_metrologyInstance->addLog('SECURITY OK Asym Crypto', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '0af33bed');
        } else {
            $this->_checkSecurityCryptoAsym = 'ERROR';
            $this->_checkSecurityCryptoAsymMessage = '::::act_chk_errCryptAsym';
            $this->_metrologyInstance->addLog('SECURITY ERROR Asym Crypto', Metrology::LOG_LEVEL_ERROR, __METHOD__, '12ba7b66');
        }
    }

    protected string $_checkSecuritySign = 'WARN';
    protected string $_checkSecuritySignMessage = 'SIGN Unchecked';
    public function getCheckSecuritySign(): string
    {
        return $this->_checkSecuritySign;
    }
    public function getCheckSecuritySignMessage(): string
    {
        return $this->_checkSecuritySignMessage;
    }
    protected function _checkSecuritySign(): void
    {
        if ($this->_nebuleInstance->getCryptoInstance()->checkFunction($this->_configurationInstance->getOptionAsString('cryptoAsymmetricAlgorithm'), Crypto::TYPE_ASYMMETRIC)) {
            $this->_checkSecuritySign = 'OK';
            $this->_checkSecuritySignMessage = 'OK';
            $this->_metrologyInstance->addLog('SECURITY OK Sign', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '148b111d');
        } else {
            $this->_checkSecuritySign = 'ERROR';
            $this->_checkSecuritySignMessage = '::::act_chk_errSigns';
            $this->_metrologyInstance->addLog('SECURITY ERROR Sign', Metrology::LOG_LEVEL_ERROR, __METHOD__, '70b97981');
        }
 /*       $this->_checkSecuritySign = 'WARN';
        if (!$this->_configurationInstance->getOptionAsBoolean('permitCheckSignOnVerify')) {
            $this->_checkSecuritySign = 'WARN';
            $this->_checkSecuritySignMessage = '::::act_chk_warnSigns';
        } else {
            $validLink = 'nebule:link/2:0_0>020210714/l>88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256>5d5b09f6dcb2d53a5fffc60c4ac0d55fabdf556069d6631545f42aa6e3500f2e.sha2.256>8e2adbda190535721fc8fceead980361e33523e97a9748aba95642f8310eb5ec.sha2.256_88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256>4fcc946ef03dff882c0b6a1717c99c0ce57639e99d1f52509e846874c98dad5abd28685c9d065b4ef0e9fefbbee217e91fc4a72ecac81712e1e2c14bd06612e71e9afdb09ef1c10e68117fe8edc4f93510318719d0a6d7436a1802cd38f814cba8503ef24d50aeca961825bc39b169acbe52240fa8528a44f387ee5dff0e096a2ab49a0b181fa688678540dfc409000104a6ab77c44a4495ac98d48f35658238c99f5b1f83d04c3309412ebf26b7b23c18bdde43b964ebb6b28b60393b4c343f567137461743153091039c07e35432fa7d0b46b729f65c11960cbda5cb78f3d8da52aaf662724e771125cce2fb99ef1409fbb23840872c6557fe63f2b25c8fc49b6b5663a44cdf2e829ffa9698cc121648136fd102333a556a97ac5b208a6b6fa584e239a35237fe9c38fd09fbe4c0580ca538d92c4e29d5e22ce4846df2563dc4cb39a599b92f22018b4973b768cf59cb8f517f3adae3ee21b7c43a812ec6c245fe548e6187a0e07ce6a0af38c40ccd24383216cbd312322e1583d5d358ccdc9911b67fdbf7d13b9f57a0a17a42f736be9dbd383fd9e7c0ce2589fbd6550a8e07ab90618302956a1bf69e76aaf3da829e1af4f7c7ceff169ce5e698ebe1987fa1b694c6b25130c0be5bbfdfe4a8594e54067abe235bf796cf455a84906d02ebc79e3feaa069db7c4adac872c104bfcbc08b2dfbcc3c9fd6aa465fb9d86c7f26.sha2.512';
            $invalidLink = 'nebule:link/2:0_0>020210714/l>88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256>5d5b09f6dcb2d53a5fffc60c4ac0d55fabdf556069d6631545f42aa6e3500f2e.sha2.256>8e2adbda190535721fc8fceead980361e33523e97a9748aba95642f8310eb5ec.sha2.256_88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256>4fcc946ef03dff882c0b6a1717c99c0ce57639e99d1f52509e846874c98dad5abd28685c9d065b4ef0e9fefbbee217e91fc4a72ecac81712e1e2c14bd06612e71e9afdb09ef1c10e68117fe8edc4f93510318719d0a6d7436a1802cd38f814cba8503ef24d50aeca961825bc39b169acbe52240fa8528a44f387ee5dff0e096a2ab49a0b181fa688678540dfc409000104a6ab77c44a4495ac98d48f35658238c99f5b1f83d04c3309412ebf26b7b23c18bdde43b964ebb6b28b60393b4c343f567137461743153091039c07e35432fa7d0b46b729f65c11960cbda5cb78f3d8da52aaf662724e771125cce2fb99ef1409fbb23840872c6557fe63f2b25c8fc49b6b5663a44cdf2e829ffa9698cc121648136fd102333a556a97ac5b208a6b6fa584e239a35237fe9c38fd09fbe4c0580ca538d92c4e29d5e22ce4846df2563dc4cb39a599b92f22018b4973b768cf59cb8f517f3adae3ee21b7c43a812ec6c245fe548e6187a0e07ce6a0af38c40ccd24383216cbd312322e1583d5d358ccdc9911b67fdbf7d13b9f57a0a17a42f736be9dbd383fd9e7c0ce2589fbd6550a8e07ab90618302956a1bf69e76aaf3da829e1af4f7c7ceff169ce5e698ebe1987fa1b694c6b25130c0be5bbfdfe4a8594e54067abe235bf796cf455a84906d02ebc79e3feaa069db7c4adac872c104bfcbc08b2dfbcc3c9fd6aa465fb9d86c7f27.sha2.512';
            $instanceValidLink = $this->_nebuleInstance->newLink($validLink);
            $instanceInvalidLink = $this->_nebuleInstance->newLink($invalidLink);

            if ($instanceValidLink->getSigned() === false
                || $instanceInvalidLink->getSigned() === true
            ) {
                $this->_checkSecuritySign = 'ERROR';
                $this->_checkSecuritySignMessage = '::::act_chk_errSigns';
                $this->_metrologyInstance->addLog('SECURITY ERROR Sign', Metrology::LOG_LEVEL_ERROR, __METHOD__, '70b97981');
            } else {
                $this->_checkSecuritySign = 'OK';
                $this->_checkSecuritySignMessage = 'OK';
                $this->_metrologyInstance->addLog('SECURITY OK Sign', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '148b111d');
            }
            unset($validLink, $instanceValidLink, $invalidLink, $instanceInvalidLink);
        }*/
    }

    protected string $_checkSecurityURL = 'OK';
    protected string $_checkSecurityURLMessage = 'OK';
    public function getCheckSecurityURL(): string
    {
        return $this->_checkSecurityURL;
    }
    public function getCheckSecurityURLMessage(): string
    {
        return $this->_checkSecurityURLMessage;
    }
    protected function _checkSecurityURL(): void
    {
        $this->_checkSecurityURL = 'OK';
        if ($this->_urlProtocol == 'http'
            && $this->_configurationInstance->getOptionUntyped('displayUnsecureURL')
        ) {
            $this->_checkSecurityURL = 'WARN';
            $this->_checkSecurityURLMessage = $this->_translateInstance->getTranslate('Connexion non sécurisée')
                . '. ' . $this->_translateInstance->getTranslate('Essayer plutôt')
                . ' <a href="https://' . $this->_urlHost . '/' . $this->_urlBasename . '">https://' . $this->_urlHost . '/</a>';
            $this->_metrologyInstance->addLog('SECURITY WARN URL', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'a4f9a7e0');
        } else {
            $this->_metrologyInstance->addLog('SECURITY OK URL', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '98045f5f');
        }
    }


    
    /**
     * Marque un objet.
     *
     * @param string $object
     * @return void
     */
    public function setMarkObject(string $object): void
    {
        $list = $this->_sessionInstance->getSessionStore('objectsMarkList');
        if ($list === false)
            $list = array();
        $list[$object] = true;
        $this->_sessionInstance->setSessionStore('objectsMarkList', $list);
        unset($list);
    }

    /**
     * Supprime la marque d'un objet.
     *
     * @param string $object
     * @return void
     */
    public function setUnmarkObject(string $object): void
    {
        $list = $this->_sessionInstance->getSessionStore('objectsMarkList');
        if ($list === false)
            return;
        unset($list[$object]);
        $this->_sessionInstance->setSessionStore('objectsMarkList', $list);
        unset($list);
    }

    /**
     * Supprime les marques de tous les objets.
     * 
     * @return void
     */
    public function setUnmarkAllObjects(): void
    {
        $list = array();
        $this->_sessionInstance->setSessionStore('objectsMarkList', $list);
        unset($list);
    }

    /**
     * Lit si un objet est marqué.
     *
     * @param string $object
     * @return boolean
     */
    public function getMarkObject(string $object): bool
    {
        $list = $this->_sessionInstance->getSessionStore('objectsMarkList');
        if ($list === false)
            return false;
        if (isset($list[$object]))
            return true;
        return false;
    }

    /**
     * Lit la liste des objets marqués.
     * @return array
     */
    public function getMarkObjectList(): array
    {
        $list = $this->_sessionInstance->getSessionStore('objectsMarkList');
        if ($list === false)
            $list = array();
        return $list;
    }


    /**
     * Affiche la partie du menu de la documentation.
     * Inclu les modules.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#oa">OA / Application</a>
            <ul>
                <li><a href="#oaf">OAF / Fonctionnement</a></li>
                <li><a href="#oan">OAN / Nommage</a></li>
                <li><a href="#oap">OAP / Protection</a></li>
                <li><a href="#oad">OAD / Dissimulation</a></li>
                <li><a href="#oal">OAL / Liens</a></li>
                <li><a href="#oac">OAC / Création</a></li>
                <li><a href="#oas">OAS / Stockage</a></li>
                <li><a href="#oat">OAT / Transfert</a></li>
                <li><a href="#oar">OAR / Réservation</a></li>
                <li><a href="#oai">OAI / Interface</a>
                    <ul>
                        <li><a href="#oain">OAIN / Nommage</a></li>
                        <li><a href="#oaip">OAIP / Protection</a></li>
                        <li><a href="#oaid">OAID / Dissimulation</a></li>
                        <li><a href="#oail">OAIL / Liens</a></li>
                        <li><a href="#oaic">OAIC / Création</a>
                            <ul>
                                <li><a href="#oaicr">OAICR / Référence</a>
                                <li><a href="#oaicc">OAICC / Code</a>
                                <li><a href="#oaice">OAICE / Enregistrement</a>
                            </ul>
                        </li>
                        <li><a href="#oaiu">OAIU / Mise à Jour</a></li>
                        <li><a href="#oais">OAIS / Stockage</a></li>
                        <li><a href="#oait">OAIT / Transfert</a></li>
                        <li><a href="#oair">OAIR / Réservation</a></li>
                        <li><a href="#oaig">OAIG / Applications d'Interfaçage Génériques</a>
                            <ul>
                                <li><a href="#oaigb">OAIGB / Nb - bootstrap</a></li>
                                <li><a href="#oaiga">OAIGA / Au - authen</a></li>
                                <li><a href="#oaigs">OAIGS / Sy - sylabe</a></li>
                                <li><a href="#oaigk">OAIGK / Kl - klicty</a></li>
                                <li><a href="#oaigm">OAIGM / Me - messae</a></li>
                                <li><a href="#oaigo">OAIGO / No - option</a></li>
                                <li><a href="#oaigu">OAIGU / Nu - upload</a></li>
                            </ul>
                        </li>
                        <li><a href="#oaio">OAIO / Implémentation des Options</a></li>
                        <li><a href="#oaia">OAIA / Implémentation des Actions</a></li>
                    </ul>
                </li>
                <li><a href="#oab">OAB / Bootstrap</a>
                    <ul>
                        <li><a href="#oabd">OABD / Description</a></li>
                        <li><a href="#oabi">OABI / Installation</a></li>
                        <li><a href="#oabf">OABF / Premier démarrage</a></li>
                        <li><a href="#oabm">OABM / Commandes</a></li>
                        <li><a href="#oabc">OABC / Configuration</a></li>
                        <li><a href="#oabb">OABB / Interruption</a></li>
                        <li><a href="#oabe">OABE / Applications externes</a></li>
                        <li><a href="#oaba">OABA / Applications intégrées</a>
                            <ul>
                                <li><a href="#oaba0">OABA0 / Application 0</a></li>
                                <li><a href="#oaba1">OABA1 / Application 1</a></li>
                                <li><a href="#oaba2">OABA2 / Application 2</a></li>
                                <li><a href="#oaba3">OABA3 / Application 3</a></li>
                                <li><a href="#oaba4">OABA4 / Application 4</a></li>
                                <li><a href="#oaba5">OABA5 / Application 5</a></li>
                                <li><a href="#oaba6">OABA6 / Application 6</a></li>
                                <li><a href="#oaba7">OABA7 / Application 7</a></li>
                                <li><a href="#oaba8">OABA8 / Application 8</a></li>
                                <li><a href="#oaba9">OABA9 / Application 9</a></li>
                            </ul>
                        </li>
                        <li><a href="#oabn">OABN / Fonctionnement nominal</a></li>
                    </ul>
                </li>
                <li><a href="#oal">OAL / Librairie</a>
                    <ul>
                        <li><a href="#oald">OALD / Description</a></li>
                        <li><a href="#oalc">OALC / Configuration</a></li>
                    </ul>
                </li>
                <?php \Nebule\Library\Modules::echoDocumentationTitles(); ?>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     * Inclu les modules.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <?php Displays::docDispTitle(2, 'oa', 'Application'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Une application permet d'interagir avec les objets et liens.</p>
        <p>Une application qui ne fait que lire des objets et liens, ou retransmettre des liens déjà signés, est dite
            passive. Si l'application à la capacité de générer des liens signés, donc avec une entité déverrouillée,
            alors elle est dite active.</p>
        <p>Si l'entité d'une instance d'application est par défaut et automatiquement déverrouillée, donc active, alors
            c'est aussi un robot. Le déverrouillage de cette entité peut cependant bénéficier de protections
            particulières.</p>

        <?php Displays::docDispTitle(3, 'oaf', 'Fonctionnement'); ?>
        <p>Dans la construction du code, il y a quatre niveaux. Chaque niveau de code est constitué d’un et un seul
            objet nebule ou fichier utilisé. Une seule application est utilisée à un instant donné, mais il peut y avoir
            plusieurs modules utilisés par l’application. Les niveaux :</p>
        <ul>
            <li>le bootstrap, fichier ;</li>
            <li>la librairie en PHP orienté objet, objet ;</li>
            <li>une application au choix, objet ou intégré ;</li>
            <li>des modules au choix, facultatifs, objets.</li>
        </ul>
        <p>Les applications sont toutes construites sur le même modèle et dépendent (extend) toutes des mêmes classes de
            l’application de référence dans la librairie nebule.</p>
        <p>Chaque application doit mettre en place les constantes personnalisées :</p>
        <ul>
            <li>APPLICATION_NAME</li>
            <li>APPLICATION_SURNAME</li>
            <li>APPLICATION_AUTHOR</li>
            <li>APPLICATION_VERSION</li>
            <li>APPLICATION_LICENCE</li>
            <li>APPLICATION_WEBSITE</li>
            <li>APPLICATION_NODE</li>
            <li>APPLICATION_CODING</li>
            <li>USE_MODULES</li>
            <li>USE_MODULES_TRANSLATE</li>
            <li>USE_MODULES_EXTERNAL</li>
            <li>LIST_MODULES_INTERNAL</li>
            <li>LIST_MODULES_EXTERNAL</li>
        </ul>
        <p>Chaque application doit mettre en place les classes :</p>
        <ul>
            <li>Application</li>
            <li>Display</li>
            <li>Action</li>
            <li>Traduction</li>
        </ul>
        <p>Elles dépendent respectivement des classes de l’application de référence Applications, Displays, Actions et
            Traductions dans la librairie nebule.</p>
        <p>Les applications peuvent gérer des modules pour les rendre plus souples dans leur fonctionnement et
            adaptatives. CF <a href="#oam">OAM</a>.</p>

        <?php Displays::docDispTitle(3, 'oan', 'Nommage'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oap', 'Protection'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oad', 'Dissimulation'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oal', 'Liens'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oac', 'Création'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oas', 'Stockage'); ?>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <?php Displays::docDispTitle(3, 'oat', 'Transfert'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oar', 'Réservation'); ?>
        <p>Les objets réservés spécifiquement pour les applications :</p>
        <ul>
            <li>nebule/objet/applications</li>
        </ul>

        <?php Displays::docDispTitle(3, 'oai', 'Interface'); ?>
        <p>Une interface est un programme dédié aux interactions entre deux milieux différents.</p>
        <p>Une interface permet à une entité, c'est-à-dire un utilisateur ou un robot, d'interagir avec une application.
            Cela peut être vu comme une extension de l'application.</p>
        <p>Les applications développées dans le cadre de <i>nebule</i> :</p>
        <ul>
            <li><b>bootstrap</b> : le chargeur initial de la librairie et des applications, <a href="#oaigb">OAIGB</a>,
                <a href="http://blog.nebule.org">blog.nebule.org</a>.
            </li>
            <li><b>autent</b> : l’application d'authentification interactive, <a href="#oaiga">OAIGA</a>,
                <a href="http://blog.nebule.org">blog.nebule.org</a>.
            </li>
            <li><b>sylabe</b> : l’application de référence des possibilités de nebule, <a href="#oaigs">OAIGS</a>,
                <a href="http://blog.sylabe.org">blog.sylabe.org</a>.
            </li>
            <li><b>klicty</b> : l’application de partage d’objets à durée limitée, <a href="#oaigk">OAIGK</a>,
                <a href="http://blog.klicty.org">blog.klicty.org</a>.
            </li>
            <li><b>messae</b> : l’application de gestion des conversations et messages, <a href="#oaigm">OAIGM</a>,
                <a href="http://blog.messae.org">blog.messae.org</a>.
            </li>
            <li><b>neblog</b> : l’application de gestion des web logs, <a href="#oaign">OAIGN</a>,
                <a href="http://blog.neblog.org">blog.neblog.org</a>.
            </li>
            <li><b>qantion</b> : l’application de gestion des monnaies, <a href="#oaigq">OAIGQ</a>,
                <a href="http://blog.qantion.org">blog.qantion.org</a>.
            </li>
            <li><b>option</b> : l’application de gestion des options, <a href="#oaigo">OAIGO</a>,
                <a href="http://blog.nebule.org">blog.nebule.org</a>.
            </li>
            <li><b>upload</b> : l’application de chargement de mises à jour, <a href="#oaigu">OAIGU</a>,
                <a href="http://blog.nebule.org">blog.nebule.org</a>.
            </li>
        </ul>
        <div class="layout-main">
            <div class="layout-content">
                <div id="appslist">
                    <div class="apps" style="background:#000000;"><span class="appstitle">Nb</span><br/><span
                            class="appsname">break</span></div>
                    <div class="apps" style="background:#000000;"><span class="appstitle">N0</span><br/><span
                            class="appsname">defolt</span></div>
                    <div class="apps" style="background:#333333;"><span class="appstitle">N3</span><br/><span
                            class="appsname">doctech</span></div>
                    <div class="apps" style="background:#902060;"><span class="appstitle">Au</span><br/><span
                                class="appsname">autent</span></div>
                    <div class="apps" style="background:#c02030;"><span class="appstitle">Sy</span><br/><span
                                class="appsname">sylabe</span></div>
                    <div class="apps" style="background:#d0b020;"><span class="appstitle">Kl</span><br/><span
                                class="appsname">klicty</span></div>
                    <div class="apps" style="background:#2060a0;"><span class="appstitle">Me</span><br/><span
                            class="appsname">messae</span></div>
                    <div class="apps" style="background:#05c3dd;"><span class="appstitle">Ne</span><br/><span
                            class="appsname">neblog</span></div>
                    <div class="apps" style="background:#20a040;"><span class="appstitle">Qa</span><br/><span
                                class="appsname">qantion</span></div>
                    <div class="apps" style="background:#555555;"><span class="appstitle">Op</span><br/><span
                            class="appsname">option</span></div>
                    <div class="apps" style="background:#666666;"><span class="appstitle">Up</span><br/><span
                            class="appsname">upload</span></div>
                </div>
            </div>
        </div>

        <?php Displays::docDispTitle(4, 'oain', 'Nommage'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oaip', 'Protection'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oaid', 'Dissimulation'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oail', 'Liens'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oaic', 'Création'); ?>
        <p>La création d'une application se passe en trois parties. Il faut créer un objet de référence de la nouvelle
            application. Il faut lui affecter un objet de code, objet de code qui sera mise à jour plus tard. Enfin il
            faut enregistrer l'application pour la rendre disponible.</p>

        <?php Displays::docDispTitle(5, 'oaicr', 'Référence'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>Cette partie est à faire au début lorsque l’on veut rendre visible et utiliser la nouvelle application. Elle
            ne sera plus refaite par la suite. Le but est de permettre au <i>bootstrap</i> de retrouver l’application et
            de permettre à l’utilisateur de la sélectionner.</p>
        <div class="layout-main">
            <div class="layout-content">
                <div id="appslist">
                    <div class="apps" style="background:#c02030;"><span class="appstitle">Sy</span><br/><span
                            class="appsname">sylabe</span></div>
                </div>
            </div>
        </div>
        <p>On définit un objet de référence, un objet qui sera virtuel puisqu'il n’aura pas de contenu.
            Sa seule contrainte forte est que l’empreinte est exprimée en hexadécimal. Par convention, il est recommandé
            que la taille de l’empreinte des objets virtuels soit comprise en 129 et 191 bits. Cet objet de référence
            peut être généré aléatoirement ou au contraire avoir un contenu pré-déterminé, ou mixer les deux.</p>
        <p>Chaque application doit avoir un objet de référence qui lui est réservé. Utiliser l’objet de référence d’une
            autre application revient à tenter de mettre à jour l’application, non à en faire une nouvelle.</p>
        <p>Par exemple avec la commande : <code>openssl rand -hex 36</code></p>
        <p>Cela donne une valeur, notre objet de référence, qui ressemble à ça :</p>
        <code>f3c2e389d0ec1bd3f279410748ba352c205ca354cec396a5f9fa0f8c0dcc1f9900bfd9</code>
        <p>Pour finir avec l’objet de référence, la couleur de l’application dépend de lui. Cette couleur étant
            constituée des 6 premiers caractères de l’empreinte de l’objet de référence, il est possible de choisir
            volontairement cette couleur.</p>
        <p>L’application doit avoir un nom et un préfixe. Ces deux propriétés sont utilisées par le bootstrap pour
            l’affichage des applications dans l’application de sélection des applications.</p>
        <p>Le nom est libre, mais si il est trop grand, il sera tronqué pour tenir dans le carré de l’application.</p>
        <p>Le préfixe doit faire 2 caractères. Si ce sont des lettres, systématiquement la première sera transformée en
            majuscule et la deuxième en minuscule.</p>
        <p>Par exemple :</p>
        <ul>
            <li>sylabe</li>
            <li>Sy</li>
        </ul>

        <p>Lorsque l’on a défini notre objet de référence et le nom de l’application, on crée les liens.</p>
        <p>Liste des liens à générer lors de la création d'une application interface.</p>
        <ul>
            <li>Le lien de hash :
                <ul>
                    <li>REQ : <code>l</code></li>
                    <li>NID1 : ID de l'application</li>
                    <li>NID2 : hash du nom de l’algorithme de prise d’empreinte</li>
                    <li>NID3 : hash(‘nebule/objet/hash’)</li>
                </ul>
            </li>
            <li>Le lien de définition de type application :
                <ul>
                    <li>REQ : <code>l</code></li>
                    <li>NID1 : ID de l'application</li>
                    <li>NID2 : hash(‘nebule/objet/interface/web/php/applications’)</li>
                    <li>NID3 : hash(‘nebule/objet/type’)</li>
                </ul>
            </li>
            <li>Le lien de nommage long de l'application :
                <ul>
                    <li>REQ : <code>l</code></li>
                    <li>NID1 : ID de l'application</li>
                    <li>NID2 : hash(nom long de l'application)</li>
                    <li>NID3 : hash(‘nebule/objet/nom’)</li>
                </ul>
            </li>
            <li>Le lien de nommage court de l'application :
                <ul>
                    <li>REQ : <code>l</code></li>
                    <li>NID1 : ID de l'application</li>
                    <li>NID2 : hash(nom court de l'application)</li>
                    <li>NID3 : hash(‘nebule/objet/surnom’)</li>
                </ul>
            </li>
        </ul>
        <p>Pour que ces liens soient reconnus par le bootstrap, ils doivent tous être signés d’une autorité locale.</p>

        <?php Displays::docDispTitle(5, 'oaicc', 'Code'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>
        <p>La création de la base d’une application est simple, il suffit de copier le modèle d’application dans un
            nouveau fichier et dans un premier temps d’adapter les variables et la fonction d’affichage.</p>
        <p>Ensuite, ce fichier doit être nébulisé, c'est-à-dire transféré vers le serveur comme nouvel objet.</p>
        <p>Une fois nébulisé, l’objet peut être déclaré par un lien comme code pour l’objet de référence de
            l’application. Ainsi, l'objet référence point un code à exécuter.</p>
        <p>Le lien de pointage du code :</p>
        <ul>
            <li>REQ : <code>f</code></li>
            <li>NID1 :</li>
            <li>NID2 :</li>
            <li>NID3 :</li>
        </ul>

        <p>Exemple de modèle d'application :</p>
        <pre>
&lt;?php
declare(strict_types=1);
namespace Nebule\Application\share;

/*
------------------------------------------------------------------------------------------
 /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING /// WARNING ///
------------------------------------------------------------------------------------------

 [FR] Toute modification de ce code entrainera une modification de son empreinte
      et entrainera donc automatiquement son invalidation !
 [EN] Any changes to this code will cause a change in its footprint and therefore
      automatically result in its invalidation!
 [ES] Cualquier cambio en el código causarán un cambio en su presencia y por lo
      tanto lugar automáticamente a su anulación!

------------------------------------------------------------------------------------------
*/

class Application extends Applications
{
    const APPLICATION_NAME = 'share';
    const APPLICATION_SURNAME = 'nebule/share';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250111';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.neblog.org';
    const APPLICATION_NODE = '70428bfe9e818c0140c06fd681a669370158f1290e589594e9397e567b020796cb29.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';
    const USE_MODULES = true;
    const USE_MODULES_TRANSLATE = true;
    const USE_MODULES_EXTERNAL = false;
    const LIST_MODULES_INTERNAL = array('module_neblog', 'module_lang_fr-fr');
    const LIST_MODULES_EXTERNAL = array();
// ------------------------------------------------------------------------------------------

class Application extends Applications
{
	/**
	 * Constructeur.
	 *
	 * @param nebule $nebuleInstance
	 * @return void
	 */
	public function __construct(nebule $nebuleInstance)
	{
		$this->_nebuleInstance = $nebuleInstance;
	}

	// Tout par défaut.
}

class Display extends Displays
{
	const DEFAULT_LOGO_BOOTSTRAP = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaX
HeAAABMElEQVR42u3ZQWqDQBTG8Tdp6VjEda5gyBnEeIkcxZ20mRuVrt0MIrhKyB3chFoIhULBalfZhCy6kBmI/7dVnPHHm3E+VC
LyKjOuhcy8AAAAAAAAAAAAAAAAAAAAAJhjPU7xkHEcX3xMXim1894Bvl5+qrHZAwAAAAAAfH+KfI6thP8CLAEAyAJkAbIAewAAAA
AAAFmADgAAALIAWYAswB4AAAAAAEAWoAMAAIAsMGEVRbEyxmz/c29VVYckSd5czOtBRDYuBrLWfmitP+M4XoZh+Hzrnr7vf621+z
zPbdu2P3cFICJSluUpCIKvLMvWt67XdX1M0/Td1cs7B7h0wjAMp2sEl23vFeB6OWitn1y3vXeAy3KIoui767rOGNM0TXP2cprkJM
hBCAAAAJhx/QGiUnc0nJCIeAAAAABJRU5ErkJggg==';

	/**
	 * Constructeur.
	 *
	 * @param Applications $applicationInstance
	 * @return void
	 */
	public function __construct(Applications $applicationInstance)
	{
		$this->_applicationInstance = $applicationInstance;
	}



	/**
	 * Affichage de la page.
	 */
	public function display()
	{
		global $applicationVersion, $applicationLicence, $applicationWebsite,
				$applicationName, $applicationSurname, $applicationAuthor;
		?>
&lt;!DOCTYPE html>
&lt;html>
	&lt;body>
		Hello
	&lt;/body>
&lt;/html>
&lt;?php
	}
}

class Action extends Actions
{
	const ACTION_APPLY_DELAY = 5;
	/**
	 * Constructeur.
	 *
	 * @param Applications $applicationInstance
	 * @return void
	 */
	public function __construct(Applications $applicationInstance)
	{
		$this->_applicationInstance = $applicationInstance;
	}



	/**
	 * Traitement des actions génériques.
	 */
	public function genericActions()
	{
		$this->_metrology->addLog('Generic actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

		// Rien.

		$this->_metrology->addLog('Generic actions end', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
	}



	/**
	 * Traitement des actions spéciales, qui peuvent être réalisées sans entité déverrouillée.
	 */
	public function specialActions()
	{
		$this->_metrology->addLog('Special actions', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');

		// Rien.

		$this->_metrology->addLog('Special actions end', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '00000000');
	}
}

class Traduction extends Traductions
{
	/**
	 * Initialisation de la table de traduction.
	 */
    CONST TRANSLATE_TABLE = [
        'fr-fr' => [
            '::::INFO' => 'Information',
            '::::OK' => 'OK',
            '::::INFORMATION' => 'Message',
            '::::WARN' => 'ATTENTION !',
            '::::ERROR' => 'ERREUR !',
        ],
        'en-en' => [
            '::::INFO' => 'Information',
            '::::OK' => 'OK',
            '::::INFORMATION' => 'Message',
            '::::WARN' => 'WARNING!',
            '::::ERROR' => 'ERROR!',
        ],
        'es-co' => [
            '::::INFO' => 'Information',
            '::::OK' => 'OK',
            '::::INFORMATION' => 'Mensaje',
            '::::WARN' => '¡ADVERTENCIA!',
            '::::ERROR' => '¡ERROR!',
        ],
    ];
}
</pre>

        <?php Displays::docDispTitle(5, 'oaice', 'Enregistrement'); ?>
        <p>Le lien d'enregistrement de l'application :</p>
        <ul>
            <li>Signature du lien</li>
            <li>Identifiant du signataire</li>
            <li>Horodatage</li>
            <li>action : <code>l</code></li>
            <li>source :</li>
            <li>cible :</li>
            <li>méta :</li>
        </ul>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oaiu', 'Mise à Jour'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oais', 'Stockage'); ?>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <?php Displays::docDispTitle(4, 'oait', 'Transfert'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oair', 'Réservation'); ?>
        <p>Les objets réservés spécifiquement pour les applications :</p>
        <ul>
            <li>nebule/objet/interface/web/php/bootstrap</li>
            <li>nebule/objet/interface/web/php/bibliotheque</li>
            <li>nebule/objet/interface/web/php/applications</li>
            <li>nebule/objet/interface/web/php/applications/direct</li>
            <li>nebule/objet/interface/web/php/applications/active</li>
        </ul>

        <?php Displays::docDispTitle(4, 'oaig', "Applications d'Interfaçage Génériques"); ?>
        <p>Ces applications sont développées dans le cadre de <i>nebule</i> et sont librement mises à disposition (sous
            license).</p>
        <p>Le nom de ces applications est toujours en minuscule.</p>

        <?php Displays::docDispTitle(5, 'oaigb', 'Nb - bootstrap'); ?>
        <p>voir <a href="#oab">OAB</a></p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(5, 'oaiga', 'Au - authen'); ?>
        <p>IID=9020606a70985a00f1cf73e6aed5cfd46399868871bd26d6c0bd7a202e01759c3d91b97e.none.288</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(5, 'oaigs', 'Sy - sylabe'); ?>
        <p>IID=c02030d3b77c52b3e18f36ee9035ed2f3ff68f66425f2960f973ea5cd1cc0240a4d28de1.none.288</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(5, 'oaigk', 'Kl - klicty'); ?>
        <p>IID=d0b02052a575f63a4e87ff320df443a8b417be1b99e8e40592f8f98cbd1adc58c221d501.none.288</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(5, 'oaigm', 'Me - messae'); ?>
        <p>IID=2060a0d21853a42093f01d2e4809c2a5e9300b4ec31afbaf18af66ec65586d6c78b2823a.none.288</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(5, 'oaign', 'Ne - neblog'); ?>
        <p>IID=05c3dd94a9ae4795c888cb9a6995d1e5a23b43816e2e7fb908b6841694784bc3ecda8adf.none.288</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(5, 'oaigq', 'Qa - qantion'); ?>
        <p>IID=20a04016698cd3c996fa69e90bbf3e804c582b8946a5d60e9880cdb24b36b5d376208939.none.288</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(5, 'oaigo', 'No - option'); ?>
        <p>IID=555555712c23ff20740c50e6f15e275f695fe95728142c3f8ba2afa3b5a89b3cd0879211.none.288</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(5, 'oaigu', 'Nu - upload'); ?>
        <p>IID=6666661d0923f08d50de4d70be7dc3014e73de3325b6c7b16efd1a6f5a12f5957b68336d.none.288</p>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oaio', 'Implémentation des Options'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oaia', 'Implémentation des Actions'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(3, 'oab', 'Bootstrap'); ?>
        <?php Displays::docDispTitle(4, 'oabd', 'Description'); ?>
        <p>Le <i>bootstrap</i> est un programme autonome de <i>nebule</i> constitué d'un seul et unique fichier écrit en
            PHP.</p>
        <p>Il constitue le point d'entrée par défaut de toute connexion des utilisateurs ou robots vers l'instance,
            c'est-à-dire une localisation précise sur un serveur Web sur lequel on se connecte avec une URL dédiée.</p>
        <p>Il permet de gérer un certain nombre d'applications intégrées ou externes. Ces applications sont des
            interfaces entre les informations stockées dans les objets et reliées par des liens. En interagissant avec
            le <i>bootstrap</i>, il est possible d'accéder aux applications. Via une option, il est possible de modifier
            l'application par défaut afin de personnaliser une instance.</p>
        <p>Il est aussi en charge de trouver les dernières versions de la bibliothèque
            <?php echo \Nebule\Library\nebule::NEBULE_LICENCE_NAME; ?> et des applications de manière sécurisée.</p>

        <?php Displays::docDispTitle(4, 'oabi', 'Installation'); ?>
        <p>Le <i>bootstrap</i> nécessite pour fonctionner un serveur Web avec PHP pré-installé. Il peut être hébergé sur
            le site principal, dans un sous-domaine ou un sous-dossier de site Web. Il nécessite le droit d'écriture sur
            le dossier le contenant au moins le temps du premier démarrage.</p>
        <p>Procédure :</p>
        <ul>
            <li>Installer un serveur Web (Linux/Apache) avec PHP. Aucun serveur de base de données n'est utilisé.</li>
            <li>Télécharger le fichier <i>bootstrap</i> sur le site Web
                <a href="<?php echo \Nebule\Library\nebule::NEBULE_LICENCE_LINK; ?>">
                <?php echo \Nebule\Library\nebule::NEBULE_LICENCE_LINK; ?></a>.
                <span style="color: red; font-weight: bold">FIXME téléchargement sécurisé !</span></li>
            <li>Positionner le fichier <i>bootstrap</i> dans le dossier Web du serveur Web. Au besoin, renommer le
                fichier en <i>index.php</i>.</li>
            <li>Donner les droits de lecture et d'écriture (755 groupe apache) sur le dossier Web contenant le fichier
                <i>bootstrap</i> et le droit de lecture sur le fichier <i>index.php</i> (644).</li>
            <li>Ouvrir un navigateur Web et donner en URL l'adresse du serveur Web.</li>
            <li>La partie premier démarrage du <i>bootstrap</i> est appelée. Voir <a href="#oabf">OABF</a>.</li>
            <li>Entrer un EID et une localisation pour le <i>puppetmaster</i> ou laisser celui par défaut. Valider.</li>
            <li>Entrer un EID et une localisation pour l'entité de subordination ou laisser celle par défaut.
                Valider.</li>
            <li>Noter l'empreinte EID de la nouvelle entité de l'instance et son mot de passe.</li>
            <li>Si tout se passe bien, on arrive sur l'application 1 de selection des applications.</li>
            <li>L'instance est prête.</li>
        </ul>
        <p>Après le premier démarrage, les droits de lecture sont suffisants sauf pour les dossiers <i>o</i> et <i>l</i>
            qui nécessitent le droit d'écriture.</p>
        <p>Il est possible sur une instance de ne laisser que les droits de lecture sur toute l'arborescence. Cependant,
            cela empêchera toute interaction nécessitant la création d'objets ou de liens. Il est préférable dans ce cas
            de positionner l'option <b>permitWrite</b> à <i>false</i> dans le fichier de configuration. Voir
            <a href="#cco">CCO</a> pour changer la configuration.</p>

        <?php Displays::docDispTitle(4, 'oabf', 'Premier démarrage'); ?>
        <p>Lors du premier démarrage (firstboot), c'est-à-dire lorsque l'on appelle le <i>bootstrap</i> via le serveur
            Web PHP, il va se charger de préparer l'environnement nécessaire au bon fonctionnement d'une instance
            <i>nebule</i>.
            Cela va inclure :</p>
        <ul>
            <li>La création d'un fichier <i><?php echo \Nebule\Library\nebule::NEBULE_ENVIRONMENT_FILE; ?></i> de
                configuration générique.</li>
            <li>La création d'un dossier <i><?php echo \Nebule\Library\nebule::NEBULE_LOCAL_OBJECTS_FOLDER; ?></i> pour
                stocker les objets.</li>
            <li>La création d'un dossier <i><?php echo \Nebule\Library\nebule::NEBULE_LOCAL_LINKS_FOLDER; ?></i> pour
                stocker les liens.</li>
            <li>La génération d'une entité locale, dite entité de l'instance.</li>
            <li>La création d'un fichier <i><?php echo \Nebule\Library\nebule::NEBULE_LOCAL_ENTITY_FILE; ?></i>
                contenant l'empreinte <i>EID</i> de l'entité de l'instance.</li>
            <li>La création de différents objets dans le dossier des objets.</li>
            <li>La création de différents liens dans le dossier des liens.</li>
        </ul>
        <p>Au besoin, un certain nombre de ces dossiers et fichiers peuvent être pré-initialisé lorsque l'on dépose le
            <i>bootstrap</i> sur le serveur Web. Mais cela n'est pas le fonctionnement normal.</p>

        <?php Displays::docDispTitle(4, 'oabm', 'Commandes'); ?>
        <p>Il est possible d'interagir avec le <i>bootstrap></i> au moyen de commandes dans l'URL.</p>
        <p>Liste des commandes :</p>
        <ul>
            <li><b><?php echo LIB_ARG_SWITCH_APPLICATION; ?></b> : Sélection d'une application.</li>
            <li><b><?php echo LIB_ARG_BOOTSTRAP_BREAK; ?></b> : Interruption du <i>bootstrap</i>.
                Voir <a href="#oabb">OABB</a>.</li>
            <li><b><?php echo LIB_LOCAL_ENTITY_FILE; ?></b> : Affichage de l'empreinte EID de l'entité de
                l'instance.</li>
            <li><b><?php echo LIB_ARG_FLUSH_SESSION; ?></b> : Réinitialisation de la session, suppression du cache,
                fermeture des applications et entités.</li>
            <li><b><?php echo LIB_ARG_INLINE_DISPLAY; ?></b> : Affichage en mode page intégrée d'une application.
                Ce n'est pas supporté partout.</li>
            <li><b><?php echo LIB_LOCAL_LINKS_FOLDER; ?></b> : Dans l'application 4, désigne le NID dont on veut
                afficher les blocs de liens. Non reconnu ailleurs.</li>
            <li><b><?php echo LIB_ARG_RESCUE_MODE; ?></b> : Charge en mode restreint pour dépannage.</li>
            <li><b><?php echo LIB_ARG_UPDATE_APPLICATION; ?></b> : Demande une mise à jour des applications et du cache
                associé.</li>
            <li><b>bootstrapfirstpuppetmastereid</b> : Dans le <i>firstboot</i>, donne l'EID de puppetmaster. Non
                reconnu ailleurs.</li>
            <li><b>bootstrapfirstpuppetmasterlocation</b> : Dans le <i>firstboot</i>, donne la localisation de
                téléchargement de puppetmaster. Non reconnu ailleurs.</li>
            <li><b>bootstrapfirstsubordinationeid</b> : Dans le <i>firstboot</i>, donne l'EID de l'entité de
                subordination. Non reconnu ailleurs.</li>
            <li><b>bootstrapfirstsubordinationlocation</b> : Dans le <i>firstboot</i>, donne la localisation de
                téléchargement de l'entité de subordination. Non reconnu ailleurs.</li>
        </ul>
        <p><b>ATTENTION</b> : si la bibliothèque ne peut être chargée, le <i>bootstrap</i> renverra systématiquement sur
            la page d'interruption ! Voir <a href="#oabb">OABB</a>.</p>

        <?php Displays::docDispTitle(4, 'oabc', 'Configuration'); ?>
        <p>Le <i>bootstrap</i> obéit aux mêmes options que la bibliothèque et les applications. Voir
            <a href="#cco">CCO</a>.</p>

        <?php Displays::docDispTitle(4, 'oabb', 'Interruption'); ?>
        <p>La présence de la commande <i><?php echo LIB_ARG_BOOTSTRAP_BREAK; ?></i> sur l'URL déclenche l'affichage
            d'une page d'interruption dédiée du <i>bootstrap</i>.</p>
        <p>En cas de problème lors de l'initialisation du <i>bootstrap</i> ou de la bibliothèque, le <i>bootstrap</i>
            renverra systématiquement sur la page d'interruption avec une erreur.</p>
        <p>Si la bibliothèque ne peut être chargée, quelque soit les arguments passés, le <i>bootstrap</i> renverra
            systématiquement sur la page d'interruption avec une erreur.</p>
        <p>Le résultat est une page contenant en partie centrale, par exemple :</p>
        <pre>#1 bootstrap break on
#1 bootstrap break on
- [11] user interrupt
tB=0.0820s
? Flush PHP session (3d964e)

#2 bootstrap
bootstrap RID         : fc9bb365082ea3a3c8e8e9692815553ad9a70632fe12e9b6d54c8ae5e20959ce94fbb64f.none.288
bootstrap BID         : 81de9f10eb1479bbb219c166547b6d4eb690672feadf0f3841cacf58dbb21f537252b011.none.288
bootstrap CID         : a9e420daf12bc21278317e180fd51460fa786f275a2923d7a7b0cb0ac9c1ee2f.sha2.256
bootstrap IID         : 304f4431cd011211e8fbb57081cd8f1609a25a46ab30476e4b3bffb90d47e73832374176.none.288
bootstrap OID         : 37cce34df78966b2c18ca145fd4b8cd085d64887a4c06ca6b46b4abfc603473a.sha2.256 OK
bootstrap SID         : 8ed620ee3811ba4885f9dc25141bfd5456213a112441136ba98e066a777d6b6b.sha2.256

#3 nebule library PP
library version       : 020250111
puppetmaster          : 81b01d19877fcce130914137810101297a03305806212085693db81aac9dc989.sha2.256
security authority    : 13257cc65415ab642418d086f76db4a32011cf70173e3d77db6db0031191b9fc.sha2.256
code authority        : 8ed620ee3811ba4885f9dc25141bfd5456213a112441136ba98e066a777d6b6b.sha2.256
directory authority   : 8e3eaf7607bd0c7f355dec8933d69331235c151e144ddb99b91eac5e0bffab22.sha2.256
time authority        : 037b1c30219d17270402fa1ec8e9a709bf7207adc8cdf941b17f096de1d193ec.sha2.256
server entity         : 13839ab4e217129b8e0bcc13b21201c4d5e894404aaa9db21b98839d482d60db.sha2.256
default entity        : 88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256
current entity        : 88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256
code branch           : 81de9f10eb1479bbb219c166547b6d4eb690672feadf0f3841cacf58dbb21f537252b011.none.288 (develop)
php version           : found 8.2.26, need >= 8.0.0

#4 nebule library POO
tL=0.4047s
library RID           : 780c5e2767e15ad2a92d663cf4fb0841f31fd302ea0fa97a53bfd1038a0f1c130010e15c.none.288
library IID           : 21f6396e921e4373a91d70d13895b04a359316fc269a1c0dc9268a71419ecfb41e88d58d.none.288
library OID           : 8c158d1e16f80cfa7c29726ce26f8a8e21b9a78723c54526f28b95eedc5774d9.sha2.256 version 020250111
library SID           : 8ed620ee3811ba4885f9dc25141bfd5456213a112441136ba98e066a777d6b6b.sha2.256
functional level      : found 020241123, need >= 020241123
puppetmaster          : 81b01d19877fcce130914137810101297a03305806212085693db81aac9dc989.sha2.256 OK (global authority)
security authority    : 13257cc65415ab642418d086f76db4a32011cf70173e3d77db6db0031191b9fc.sha2.256 OK (global authority)
code authority        : 8ed620ee3811ba4885f9dc25141bfd5456213a112441136ba98e066a777d6b6b.sha2.256 OK (local authority) (global authority)
directory authority   : 8e3eaf7607bd0c7f355dec8933d69331235c151e144ddb99b91eac5e0bffab22.sha2.256 OK
time authority        : 037b1c30219d17270402fa1ec8e9a709bf7207adc8cdf941b17f096de1d193ec.sha2.256 OK
server entity         : aqrobo OK (local authority)
default entity        : aqrobo OK (local authority)
current entity        : aqrobo OK (local authority)
subordination         : 0 OK
cryptography class    : Nebule\Library\CryptoOpenssl
cryptography          : hash sha2.256 OK
cryptography          : symmetric aes.256.ctr OK
cryptography          : asymmetric rsa.2048 OK
cryptography          : pseudo-random entropy 7.908364047653/8 OK
i/o class             : Nebule\Library\io
i/o                   : Nebule\Library\ioDisk (RW) file://, links OK, objects OK
i/o                   : Nebule\Library\ioNetworkHTTP (RO) http://code.master.nebule.org, links OK no write., objects OK no write.
i/o                   : Nebule\Library\ioNetworkHTTPS (RO) https://code.master.nebule.org, links OK no write., objects OK no write.
social class          : Nebule\Library\Social
social                : Nebule\Library\SocialMySelf OK
social                : Nebule\Library\SocialNotMyself OK
social                : Nebule\Library\SocialSelf OK
social                : Nebule\Library\SocialNotself OK
social                : Nebule\Library\SocialAuthority OK
social                : Nebule\Library\SocialAll OK
social                : Nebule\Library\SocialNone OK
social                : Nebule\Library\SocialOnList OK
social                : Nebule\Library\SocialOffList OK
social                : Nebule\Library\SocialReputation OK
social                : Nebule\Library\SocialUnreputation OK
metrology inputs      : Lr=247+310 Lv=247+0 Or=255+2 Ov=255+2 (PP+POO)
metrology buffers     : Lc=0 Oc=7 Ec=6 Gc=0 Cc=0 CUc=0 CPc=0 CTc=0 CWc=0

#5 application
application RID       : 4046edc20127dfa1d99f645a7a4ca3db42e94feffa151319c406269bd6ede981c32b96e2.none.288
application IID       : 1 load
application OID       : 1
application SID       :

#6 end bootstrap
tE=0.8049s
        </pre>
        <p>Les codes d'interruption :</p>
        <ul>
            <li>[00] unknown buggy interrupt reason</li>
            <li>[11] user interrupt</li>
            <li>[21] library init error</li>
            <li>[22] library i/o : link's folder error</li>
            <li>[23] library i/o : link's folder error</li>
            <li>[24] library i/o : object's folder error</li>
            <li>[25] library i/o : object's folder error</li>
            <li>[31] library load : finding library IID error</li>
            <li>[32] library load : finding library OID error</li>
            <li>[41] library load : find code error</li>
            <li>[42] library load : include code error</li>
            <li>[43] library load : functional version too old</li>
            <li>[44] library load : load error</li>
            <li>[45] application : find code error</li>
            <li>[46] application : include code error</li>
            <li>[47] application : load error</li>
            <li>[51] unknown bootstrap hash</li>
            <li>[61] no local server entity</li>
            <li>[62] local server entity error</li>
            <li>[71] need sync puppetmaster</li>
            <li>[72] need sync authorities of security</li>
            <li>[73] need sync authorities of security</li>
            <li>[74] need sync authorities of code</li>
            <li>[75] need sync authorities of code</li>
            <li>[76] need sync authorities of time</li>
            <li>[77] need sync authorities of time</li>
            <li>[78] need sync authorities of directory</li>
            <li>[79] need sync authorities of directory</li>
            <li>[81] library init : I/O open error</li>
            <li>[82] library init : puppetmaster error</li>
            <li>[83] library init : security authority error</li>
            <li>[84] library init : code authority error</li>
            <li>[85] library init : time authority error</li>
            <li>[86] library init : directory authority error</li>
        </ul>
        <p>Table d'utilisabilité des entités calculée par la bibliothèque orienté objet (entities error level) :</p>
        <ul>
            <li>1 : L'entité puppet n'est pas une entité.</li>
            <li>2 : L'entité puppet a un EID=0.</li>
            <li>3 : L'EID de puppet n'est pas celui de la configuration.</li>
            <li>11 : La liste des autorités de sécurité est vide.</li>
            <li>12 : Une des autorités de sécurité n'est pas une entité.</li>
            <li>13 : Une des autorités de sécurité a un EID=0.</li>
            <li>21 : La liste des autorités du code est vide.</li>
            <li>22 : Une des autorités du code n'est pas une entité.</li>
            <li>23 : Une des autorités du code a un EID=0.</li>
            <li>31 : La liste des autorités de l'annuaire est vide.</li>
            <li>32 : Une des autorités de l'annuaire n'est pas une entité.</li>
            <li>33 : Une des autorités de l'annuaire a un EID=0.</li>
            <li>41 : La liste des autorités du temps est vide.</li>
            <li>42 : Une des autorités du temps n'est pas une entité.</li>
            <li>43 : Une des autorités du temps a un EID=0.</li>
            <li>51 : L'entité instance n'est pas une entité.</li>
            <li>52 : L'entité instance a un EID=0.</li>
            <li>61 : L'entité courante n'est pas une entité.</li>
            <li>62 : L'entité courante a un EID=0.</li>
            <li>128 : Toutes les entités utilisées sont bonnes.</li>
        </ul>
        <p>Les temps de chargement (voir <a href="#mc">MC</a>) :</p>
        <ul>
            <li>tB : Temps de chargement du boostrap après la bibliothèque PP.</li>
            <li>tE : Temps de fin de chargement de page d'interruption.</li>
        </ul>
        <p style="color: red; font-weight: bold">À compléter avec la description des lignes...</p>

        <?php Displays::docDispTitle(4, 'oabe', 'Applications externes'); ?>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=RID</i> sur l'URL permet de passer
            vers l'application référencée par ce RID.
            Pour les applications externes, le RID est l'objet de référence de l'application. Chaque application dispose
            d'un RID unique avec une valeur assez longue pour éviter toute collision avec une autre application.</p>
        <p>Voir <a href="#oa">OA</a>, <a href="#oail">OAIL</a> et <a href="#oabn">OABN</a>.</p>

        <?php Displays::docDispTitle(4, 'oaba', 'Applications intégrées'); ?>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=RID</i> sur l'URL permet de passer
            vers l'application référencée par ce RID.
            Pour les applications internes, le RID est l'objet de référence interne de l'application sur un seul
            chiffre (0 à 9).</p>
        <p> Toutes les applications internes ne sont pas actives et donc ne sont pas accessibles. Certaines
            applications internes peuvent être bloquées par des options de configuration.</p>
        <p>Ci-dessous les différentes applications.</p>

        <?php Displays::docDispTitle(5, 'oaba0', 'Application 0'); ?>
        <p>C'est l'application par défaut pour les instances sans interaction. La page Web délivrée est minimaliste.</p>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=0</i> sur l'URL déclenche l'affichage
            de cette page dédiée du <i>bootstrap</i>.</p>
        <p>Son accès peut être bloqué par l'option <b>permitApplication1</b> à <i>false</i> ou un lien équivalent.</p>

        <?php Displays::docDispTitle(5, 'oaba1', 'Application 1'); ?>
        <p>C'est l'application de sélection et de navigation et les différentes applications.</p>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=1</i> sur l'URL déclenche l'affichage
            de cette page dédiée du <i>bootstrap</i>.</p>
        <p>Son accès peut être bloqué par l'option <b>permitApplication1</b> à <i>false</i> ou un lien équivalent.</p>

        <?php Displays::docDispTitle(5, 'oaba2', 'Application 2'); ?>
        <p>C'est une application minimale d'authentification des utilisateurs sur les entités.</p>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=2</i> sur l'URL déclenche l'affichage
            de cette page dédiée du <i>bootstrap</i>.</p>
        <p>Son accès peut être bloqué par l'option <b>permitApplication2</b> à <i>false</i> ou un lien équivalent.</p>

        <?php Displays::docDispTitle(5, 'oaba3', 'Application 3'); ?>
        <p>C'est l'application d'affichage de la documentation technique.</p>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=3</i> sur l'URL déclenche l'affichage
            de cette page dédiée du <i>bootstrap</i>.</p>
        <p>Son accès peut être bloqué par l'option <b>permitApplication3</b> à <i>false</i> ou un lien équivalent.</p>

        <?php Displays::docDispTitle(5, 'oaba4', 'Application 4'); ?>
        <p>C'est une application qui permet de voir de façon simplifiée les blocs de liens.</p>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=4</i> sur l'URL déclenche l'affichage
            de cette page dédiée du <i>bootstrap</i>.</p>
        <p>Son accès peut être bloqué par l'option <b>permitApplication4</b> à <i>false</i> ou un lien équivalent.</p>
        <p>Elle est désactivée par défaut.</p>

        <?php Displays::docDispTitle(5, 'oaba5', 'Application 5'); ?>
        <p>Son accès peut être bloqué par l'option <b>permitApplication5</b> à <i>false</i> ou un lien équivalent.</p>
        <p>Non utilisé, redirigé vers l'application 0.</p>

        <?php Displays::docDispTitle(5, 'oaba6', 'Application 6'); ?>
        <p>Son accès peut être bloqué par l'option <b>permitApplication6</b> à <i>false</i> ou un lien équivalent.</p>
        <p>Non utilisé, redirigé vers l'application 0.</p>

        <?php Displays::docDispTitle(5, 'oaba7', 'Application 7'); ?>
        <p>Son accès peut être bloqué par l'option <b>permitApplication7</b> à <i>false</i> ou un lien équivalent.</p>
        <p>Non utilisé, redirigé vers l'application 0.</p>

        <?php Displays::docDispTitle(5, 'oaba8', 'Application 8'); ?>
        <p>Son accès peut être bloqué par l'option <b>permitApplication8</b> à <i>false</i> ou un lien équivalent.</p>
        <p>Non utilisé, redirigé vers l'application 0.</p>

        <?php Displays::docDispTitle(5, 'oaba9', 'Application 9'); ?>
        <p>C'est une application utilisée pour le déverminage du code.</p>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=9</i> sur l'URL déclenche l'affichage
            de cette page dédiée du <i>bootstrap</i>.</p>
        <p>Son accès peut être bloqué par l'option <b>permitApplication9</b> à <i>false</i> ou un lien équivalent.</p>
        <p>Elle est désactivée par défaut.</p>

        <?php Displays::docDispTitle(4, 'oabn', 'Fonctionnement nominal'); ?>
        <p>Le <i>bootstrap</i> mémorise la dernière application utilisée, externe ou intégrée, et va représenter la même
            application à l'utilisateur jusqu'à déconnexion de la session à l'instance ou vidage du cache ou problème.
            C'est le fonctionnement nominal pour un utilisateur.</p>
        <p>La présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=RID</i> sur l'URL permet de passer
            vers l'application référencée par ce RID.
            Tant que la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?></i> n'est pas de nouveau utilisée, on
            reste sur la même application.</p>
        <p>La recherche de l'application à utiliser par le <i>bootstrap</i> est faite dans l'ordre :</p>
        <ul>
            <li>1 : Si présence de la commande <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?></i>, il essaie de trouver
                l'application correspondante.</li>
            <li>2 : Si une application est mémorisée dans le cache, il la charge.</li>
            <li>3 : Sinon il charge l'application par défaut. C'est équivalent à
                <i><?php echo LIB_ARG_SWITCH_APPLICATION; ?>=1</i>.</li>
        </ul>
        <p>Voir <a href="#oail">OAIL</a>.</p>

        <?php Displays::docDispTitle(3, 'oal', 'Librairie'); ?>
        <?php Displays::docDispTitle(4, 'oald', 'Description'); ?>
        <p style="color: red; font-weight: bold">A revoir...</p>

        <?php Displays::docDispTitle(4, 'oalc', 'Configuration'); ?>
        <p>La bibliothèque obéit aux mêmes options que le <i>bootstrap</i> et les applications. Voir
            <a href="#cco">CCO</a>.</p>

        <?php Modules::echoDocumentationCore();
    }
}



// ========================================================================================
//   810_app0.php
//   020250215163515
//   29488fb5a2f4d166bd89271c08a91508beb3b833042cbc3890662108e9e131c5.sha2.256

/**
 * Class Application for app0
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App0
{
    const APPLICATION_NAME = 'defolt';
    const APPLICATION_SURNAME = 'nebule/defolt';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250111';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        // Initialisation des logs
        \Nebule\Bootstrap\log_reopen('app0');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, '3a5c4178');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        echo '<div class="layout-main">' . "\n";
        echo ' <div class="layout-content">' . "\n";
        echo '  <img alt="nebule" id="logo" src="' . \Nebule\Bootstrap\LIB_APPLICATION_LOGO_LIGHT . '"/>' . "\n";
        echo " </div>\n";
        echo "</div>\n";

        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   811_app1.php
//   020250218163027
//   5186e31c3e5839a2c66c07b79f8d21994c3c808d58723d6e2408df27712c2dc1.sha2.256

/**
 * Class Application for app1
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App1
{
    const APPLICATION_NAME = 'applis';
    const APPLICATION_SURNAME = 'nebule/applis';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250111';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        global $nebuleInstance;

        \Nebule\Bootstrap\log_reopen('app1');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, '314e6e9b');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        echo '<div id="appslist">';

        $appList = \Nebule\Bootstrap\app_getList(\Nebule\Bootstrap\LIB_RID_INTERFACE_APPLICATIONS, false);

        // Display interrupt page.
        echo '<a href="/?b">';
        echo '<div class="apps" style="background:#000000;">';
        echo '<span class="appstitle">Nb</span><br /><span class="appsname">break</span>';
        echo "</div></a>\n";

        // Display flush page.
        echo '<a href="/?f">';
        echo '<div class="apps" style="background:#111111;">';
        echo '<span class="appstitle">Nf</span><br /><span class="appsname">flush</span>';
        echo "</div></a>\n";

        // Display default page.
        echo '<a href="/?a=0">';
        echo '<div class="apps" style="background:#222222;">';
        echo '<span class="appstitle">N0</span><br /><span class="appsname">defolt</span>';
        echo "</div></a>\n";

        // Display page of technical documentation.
        echo '<a href="/?a=3">';
        echo '<div class="apps" style="background:#333333;">';
        echo '<span class="appstitle">N3</span><br /><span class="appsname">doctec</span>';
        echo "</div></a>\n";

        // List all applications.
        foreach ($appList as $application) {
            $instance = new Node($nebuleInstance, $application);
            $color = '#' . substr($application . '000000', 0, 6);
            $title = $instance->getProperty(References::REFERENCE_NEBULE_OBJET_NOM,'authority');
            if ($title == '')
                $title = $instance->getProperty(References::REFERENCE_NEBULE_OBJET_NOM,'self');
            if ($title == '')
                $title = $instance->getProperty(References::REFERENCE_NEBULE_OBJET_NOM,'all');
            if ($title == '')
                $title = $instance->getID();
            $shortName = $instance->getProperty(References::REFERENCE_NEBULE_OBJET_SURNOM,'authority');
            if ($shortName == '')
                $shortName = $instance->getProperty(References::REFERENCE_NEBULE_OBJET_SURNOM,'self');
            if ($shortName == '')
                $shortName = $instance->getProperty(References::REFERENCE_NEBULE_OBJET_SURNOM,'all');
            $shortName = substr($shortName . '--', 0, 2);
            $subName = strtoupper(substr($shortName, 0, 1)) . strtolower(substr($shortName, 1, 1));
            \Nebule\Bootstrap\log_add('app=' . $application . ' name=' . $title . ' sname=' . $shortName, 'debug', __FUNCTION__, '9715d88e');
            echo '<a href="/?' . \Nebule\Bootstrap\LIB_ARG_SWITCH_APPLICATION . '=' . $application . '">';
            echo '<div class="apps" style="background:' . $color . ';">';
            echo '<span class="appstitle">' . $subName . '</span><br /><span class="appsname">' . $title . '</span>';
            echo "</div></a>\n";
        }

        echo "</div>\n";
        echo '<div id="sync">'."\n";
        echo "</div>\n";
        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   812_app2.php
//   020250215163515
//   90bdcc6f1736f4d1d3aa4ca3bf7e05ebd613afdba52b7b90a0acfb4fb88f1a32.sha2.256

/**
 * Class Application for app2
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App2
{
    const APPLICATION_NAME = 'autent';
    const APPLICATION_SURNAME = 'nebule/autent';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250111';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    const DEFAULT_REDIRECT_AUTH_APP = '9020606a70985a00f1cf73e6aed5cfd46399868871bd26d6c0bd7a202e01759c3d91b97e.none.288';

    public function display(): void
    {
        global $nebuleServerEntity;

        \Nebule\Bootstrap\log_reopen('app2');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, 'cb4450a2');

        if (filter_has_var(INPUT_GET, References::COMMAND_APPLICATION_BACK)) {
            $argBack = trim(filter_input(INPUT_GET, References::COMMAND_APPLICATION_BACK, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
            \Nebule\Bootstrap\log_add('input ' . References::COMMAND_APPLICATION_BACK . ' ask come back to application nid=' . $argBack, 'info', __FUNCTION__, 'a8a5401d');
        }
        else
            $argBack = '1';
        if (filter_has_var(INPUT_GET, References::COMMAND_SELECT_ENTITY)) {
            $argEnt = trim(filter_input(INPUT_GET, References::COMMAND_SELECT_ENTITY, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
            \Nebule\Bootstrap\log_add('input ' . References::COMMAND_SELECT_ENTITY . ' ask use entity eid=' . $argEnt, 'info', __FUNCTION__, '425694ce');
        }
        else
            $argEnt = $nebuleServerEntity;
        $argLogout = filter_has_var(INPUT_GET, References::COMMAND_AUTH_ENTITY_LOGOUT);
        $args = '?' . References::COMMAND_SWITCH_APPLICATION . '=' . self::DEFAULT_REDIRECT_AUTH_APP;
        $args .= '&' . References::COMMAND_APPLICATION_BACK . '=' . $argBack;
        $args .= '&' . References::COMMAND_SELECT_ENTITY . '=' . $argEnt;
        $args .= '&mod=auth&view=';
        if ($argLogout)
            $args .= References::COMMAND_AUTH_ENTITY_LOGOUT . '&' . References::COMMAND_AUTH_ENTITY_LOGOUT;
        else
            $args .= References::COMMAND_AUTH_ENTITY_LOGIN;

        echo 'CHK';
        ob_end_clean();

        ?>
<!DOCTYPE html>
<html lang="">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <link rel="icon" type="image/png" href="favicon.png"/>
        <meta http-equiv="refresh" content="0; url=<?php echo $args; ?>" />
        <title>Redirect</title>
    </head>
    <body>
        Redirect...
    </body>
</html>
        <?php
    }
}



// ========================================================================================
//   813_app3.php
//   020250215163515
//   77560dab120922b8ce1aae95fee42167418439b42b5ab76be028c04c8d03c105.sha2.256

/**
 * Class Application for app3
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App3
{
    const APPLICATION_NAME = 'doctec';
    const APPLICATION_SURNAME = 'nebule/doctec';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250111';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        global $nebuleInstance, $nebuleLibLevel, $nebuleLibVersion, $nebuleLicence, $nebuleAuthor, $nebuleWebsite;

        // Initialisation des logs
        \Nebule\Bootstrap\log_reopen('app3');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, 'a4e4acfe');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        // Instancie la classe de la documentation.
        $instance = new \Nebule\Library\Documentation($nebuleInstance);

        // Affiche la documentation.
        echo '<div id="layout_documentation">' . "\n";
        echo ' <div id="title_documentation"><p>Documentation technique de ' . $nebuleInstance->__toString() . '<br />' . "\n";
        echo '  Version ' . $nebuleInstance->getConfigurationInstance()->getOptionAsString('defaultLinksVersion')
            . ' - ' . $nebuleLibVersion . ' ' . $nebuleLibLevel . '<br />' . "\n";
        echo '  (c) ' . $nebuleLicence . ' ' . $nebuleAuthor . ' - <a href="' . $nebuleWebsite . '">' . $nebuleWebsite . "</a></p></div>\n";
        echo ' <div id="content_documentation">' . "\n";
        $instance->display_content();
        echo " </div>\n";
        echo "</div>\n";

        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   814_app4.php
//   020250215163515
//   eff102ea655aa5f3de9b19752b81de185a7f6b33819aa4006a846a8d0a15b81e.sha2.256

/**
 * Class Application for app4
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App4
{
    const APPLICATION_NAME = 'app4';
    const APPLICATION_SURNAME = 'nebule/app4';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250111';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        // Initialisation des logs
        \Nebule\Bootstrap\log_reopen('app4');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, 'a1613ff2');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        echo '<div class="layout-main">' . "\n";
        echo ' <div class="layout-content">' . "\n";

        $nid = '';
        $arg = '';
        if (filter_has_var(INPUT_GET, \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER))
            $arg = trim(filter_input(INPUT_GET, \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW));
        if (\Nebule\Bootstrap\nod_checkNID($arg))
            $nid = $arg;

        if ($nid == '')
            echo 'invalid NID' . "\n";
        else {
            echo 'NID=<a href="o/' . $nid . '">' . $nid . '</a><br />hypergraph:<br /><br />' . "\n";

            $blocLinks = array();
            \Nebule\Bootstrap\io_blockLinksRead($nid, $blocLinks);
            if (sizeof($blocLinks) == 0)
                echo 'not link for NID ' . $nid . "\n";
            else {
                foreach ($blocLinks as $bloc) {
                    if (strlen($bloc) == 0)
                        continue;
                    $parsedBloc = \Nebule\Bootstrap\blk_parse($bloc);

                    echo 'BH / RF=' . $parsedBloc['bh/rf'] . ' RV=' . $parsedBloc['bh/rv'] . "<br />\n";
                    echo 'BL / RC=' . $parsedBloc['bl/rc'] . '<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RL=' . $parsedBloc['bl/rl/req'] . '>';
                    \Nebule\Bootstrap\bootstrap_echoLinkNID($parsedBloc['bl/rl/nid1'], substr($parsedBloc['bl/rl/nid1'], 0, 16));
                    if ($parsedBloc['bl/rl/nid2'] != '') {
                        echo '>';
                        \Nebule\Bootstrap\bootstrap_echoLinkNID($parsedBloc['bl/rl/nid2'], substr($parsedBloc['bl/rl/nid2'], 0, 16));
                    }
                    if ($parsedBloc['bl/rl/nid3'] != '') {
                        echo '>';
                        \Nebule\Bootstrap\bootstrap_echoLinkNID($parsedBloc['bl/rl/nid3'], substr($parsedBloc['bl/rl/nid3'], 0, 16));
                    }
                    if ($parsedBloc['bl/rl/nid4'] != '') {
                        echo '>';
                        \Nebule\Bootstrap\bootstrap_echoLinkNID($parsedBloc['bl/rl/nid4'], substr($parsedBloc['bl/rl/nid4'], 0, 16));
                    }
                    echo "<br />\n";
                    echo 'BS / EID=';
                    \Nebule\Bootstrap\bootstrap_echoLinkNID($parsedBloc['bs/rs1/eid'], substr($parsedBloc['bs/rs1/eid'], 0, 16));
                    echo ' SIG=' . substr($parsedBloc['bs/rs1/sig'], 0, 16) . ' ';
                    if (\Nebule\Bootstrap\blk_verify($bloc))
                        echo 'OK';
                    else
                        echo 'NOK';
                    echo "<br /><br />\n";
                }
            }
        }


        echo " </div>\n";
        echo "</div>\n";

        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   815_app5.php
//   020250215163515
//   d2489381ef725e1c04f22e98fae480442520d055f3429c264ddd94248dfe9f9c.sha2.256

/**
 * Class Application for app5
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App5
{
    const APPLICATION_NAME = 'defolt';
    const APPLICATION_SURNAME = 'nebule/defolt';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250118';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        // Initialisation des logs
        \Nebule\Bootstrap\log_reopen('app5');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, '7c70c571');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        echo '<div class="layout-main">' . "\n";
        echo ' <div class="layout-content">' . "\n";
        echo '  <img alt="nebule" id="logo" src="' . \Nebule\Bootstrap\LIB_APPLICATION_LOGO_LIGHT . '"/>' . "\n";
        echo " </div>\n";
        echo "</div>\n";

        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   816_app6.php
//   020250215163515
//   e2a93395c3223b48628c03eb0fe3c4343a63d9fc87abdb453cc89e7af3689c19.sha2.256

/**
 * Class Application for app6
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App6
{
    const APPLICATION_NAME = 'defolt';
    const APPLICATION_SURNAME = 'nebule/defolt';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250118';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        // Initialisation des logs
        \Nebule\Bootstrap\log_reopen('app6');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, 'f096bcb8');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        echo '<div class="layout-main">' . "\n";
        echo ' <div class="layout-content">' . "\n";
        echo '  <img alt="nebule" id="logo" src="' . \Nebule\Bootstrap\LIB_APPLICATION_LOGO_LIGHT . '"/>' . "\n";
        echo " </div>\n";
        echo "</div>\n";

        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   817_app7.php
//   020250215163515
//   18be19c964e1622b57b41a00283e56f9c252976d67866738708e83dde2698c39.sha2.256

/**
 * Class Application for app7
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App7
{
    const APPLICATION_NAME = 'defolt';
    const APPLICATION_SURNAME = 'nebule/defolt';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250118';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        // Initialisation des logs
        \Nebule\Bootstrap\log_reopen('app7');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, '30344086');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        echo '<div class="layout-main">' . "\n";
        echo ' <div class="layout-content">' . "\n";
        echo '  <img alt="nebule" id="logo" src="' . \Nebule\Bootstrap\LIB_APPLICATION_LOGO_LIGHT . '"/>' . "\n";
        echo " </div>\n";
        echo "</div>\n";

        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   818_app8.php
//   020250215163515
//   f1eb94bfb10605c1abfc8d9ea55646a53df33d834eeb83c437f7a122c4d8ae33.sha2.256

/**
 * Class Application for app8
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App8
{
    const APPLICATION_NAME = 'defolt';
    const APPLICATION_SURNAME = 'nebule/defolt';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250118';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        // Initialisation des logs
        \Nebule\Bootstrap\log_reopen('app8');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, '2067738b');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        echo '<div class="layout-main">' . "\n";
        echo ' <div class="layout-content">' . "\n";
        echo '  <img alt="nebule" id="logo" src="' . \Nebule\Bootstrap\LIB_APPLICATION_LOGO_LIGHT . '"/>' . "\n";
        echo " </div>\n";
        echo "</div>\n";

        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   819_app9.php
//   020250215163515
//   e20a8ad257d1c13bb0b65e9562a8280fb895d29c65fa2275424dcc3fb00a95ab.sha2.256

/**
 * Class Application for app9
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class App9
{
    const APPLICATION_NAME = 'app9';
    const APPLICATION_SURNAME = 'nebule/app9';
    const APPLICATION_AUTHOR = 'Projet nebule';
    const APPLICATION_VERSION = '020250111';
    const APPLICATION_LICENCE = 'GNU GPL 2024-2025';
    const APPLICATION_WEBSITE = 'www.nebule.org';
    const APPLICATION_NODE = '88848d09edc416e443ce1491753c75d75d7d8790c1253becf9a2191ac369f4ea.sha2.256';
    const APPLICATION_CODING = 'application/x-httpd-php';

    public function display(): void
    {
        global $lastReferenceSID;

        // Initialisation des logs
        \Nebule\Bootstrap\log_reopen('app9');
        \Nebule\Bootstrap\log_add('Loading', 'info', __FUNCTION__, 'df3680d3');

        echo 'CHK';
        ob_end_clean();

        \Nebule\Bootstrap\bootstrap_htmlHeader();
        \Nebule\Bootstrap\bootstrap_htmlTop();

        echo '<div class="layout-main">' . "\n";
        echo ' <div class="layout-content">' . "\n";

        $ridList = array(
            \Nebule\Bootstrap\LIB_RID_INTERFACE_BOOTSTRAP,
            \Nebule\Bootstrap\LIB_RID_INTERFACE_LIBRARY,
            \Nebule\Bootstrap\LIB_RID_INTERFACE_APPLICATIONS);

        foreach ($ridList as $rid)
        {
            echo "RID=<a href='?a=4&" . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . "=$rid'>$rid</a><br />\n";
            $appList = \Nebule\Bootstrap\app_getList($rid, false);
            foreach ($appList as $iid) {
                echo "&gt;&nbsp;IID=<a href='?a=4&" . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . "=$iid'>$iid</a><br />\n";
                $links = array();
                \Nebule\Bootstrap\app_getCodeList($iid, $links);
                foreach ($links as $link)
                {
                    $oid = $link['bl/rl/nid2'];
                    $eid = $link['bs/rs1/eid'];
                    $date = $link['bl/rc'];
                    echo "&nbsp;-&nbsp;$date&nbsp;EID=<a href='?a=4&" . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . "=$eid'>$eid</a>a>&nbsp;OID=<a href='?a=4&" . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . "=$oid'>$oid</a><br />\n";
                }
                $oid = \Nebule\Bootstrap\app_getCode($iid);
                echo "&nbsp;+&nbsp;EID=<a href='?a=4&" . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . "=$lastReferenceSID'>$lastReferenceSID</a>&nbsp;OID=<a href='?a=4&" . \Nebule\Bootstrap\LIB_LOCAL_LINKS_FOLDER . "=$oid'>$oid</a><br />\n";
                echo "<br />\n";
            }
        }

        /*session_start();
        var_dump($_SESSION);
        session_abort();*/

        echo " </div>\n";
        echo "</div>\n";

        \Nebule\Bootstrap\bootstrap_htmlBottom();
    }
}



// ========================================================================================
//   890_application_modules.php
//   020250224170433
//   02ea4b822547a3018ca0a4918df10162fb2b4599a3594013cf9b9adb7624d7df.sha2.256

//use Nebule\Application\Autent\Application;

/**
 * Classe de référence de gestion des modules des applications.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class ApplicationModules
{
    protected ?nebule $_nebuleInstance = null;
    protected ?Rescue $_rescueInstance = null;
    protected ?Applications $_applicationInstance = null;
    protected ?Configuration $_configurationInstance = null;
    protected ?Metrology $_metrologyInstance = null;
    protected ?Displays $_displayInstance = null;
    protected ?Actions $_actionInstance = null;
    protected ?Translates $_translateInstance = null;
    protected ?Cache $_cacheInstance = null;
    protected ?Session $_sessionInstance = null;
    protected ?Authorities $_authoritiesInstance = null;
    protected ?Entities $_entitiesInstance = null;
    protected ?Recovery $_recoveryInstance = null;
    protected string $_applicationNamespace = '';
    protected array $_listModulesName = array();
    protected array $_listModulesInstance = array();
    protected array $_listModulesSignerRID = array();
    protected array $_listModulesInitRID = array();
    protected array $_listModulesRID = array();
    protected array $_listModulesOID = array();
    protected array $_listModulesTranslateRID = array();
    protected array $_listModulesTranslateOID = array();
    protected array $_listModulesTranslateName = array();
    protected array $_listModulesValid = array();
    protected array $_listModulesEnabled = array();
    protected ?Modules $_currentModuleInstance = null;
    protected bool $_loadModulesOK = false;

    public function __construct(Applications $applicationInstance)
    {
        $this->_applicationInstance = $applicationInstance;
        $this->_nebuleInstance = $this->_applicationInstance->getNebuleInstance();
        $this->_configurationInstance = $applicationInstance->getNebuleInstance()->getConfigurationInstance();
        $this->_metrologyInstance = $this->_nebuleInstance->getMetrologyInstance();
        $this->_rescueInstance = $this->_nebuleInstance->getRescueInstance();
        $this->_applicationNamespace = $applicationInstance->getNamespace();
        $this->_displayInstance = $this->_applicationInstance->getDisplayInstance();
        $this->_translateInstance = $this->_applicationInstance->getTranslateInstance();
        $this->_cacheInstance = $this->_nebuleInstance->getCacheInstance();
        $this->_sessionInstance = $this->_nebuleInstance->getSessionInstance();
        $this->_authoritiesInstance = $this->_nebuleInstance->getAuthoritiesInstance();
        $this->_entitiesInstance = $this->_nebuleInstance->getEntitiesInstance();
        $this->_recoveryInstance = $this->_nebuleInstance->getRecoveryInstance();

        $this->_initInternalModules();
        $this->_initInternalDeadModules();
        $this->_initExternalModules();
        $this->_initExternalTranslateModules();
        //$this->_findCurrentModule();
    }

    protected function _initInternalModules(): void {
        if (!$this->_applicationInstance::USE_MODULES
            || !$this->_configurationInstance->getOptionAsBoolean('permitApplicationModules')
        ) {
            $this->_metrologyInstance->addLog('do not load modules', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'bcc98872');
            return;
        }
        $this->_metrologyInstance->addLog('loading internal modules on NameSpace=' . $this->_applicationNamespace, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'b2bc7fc3');

        foreach ($this->_applicationInstance::LIST_MODULES_INTERNAL as $moduleName) {
            $this->_metrologyInstance->addTime();
            $moduleFullName = $this->_applicationNamespace . '\\' . $moduleName;
            try {
                $classImplement = class_implements($moduleFullName);
            } catch (\Exception $e) {
                $this->_metrologyInstance->addLog('module ' . $moduleFullName . ' (' . $moduleName . ')' . ' lost', Metrology::LOG_LEVEL_ERROR, __METHOD__, '993617b1');
                $classImplement = array();
            }
            if (! is_array($classImplement))
                $classImplement = array();

            if (str_starts_with($moduleName, 'ModuleTranslate') && in_array('Nebule\Library\ModuleTranslateInterface', $classImplement))
                $this->_initInternalModuleTranslate($moduleName, $moduleFullName);
            elseif (str_starts_with($moduleName, 'Module') && in_array('Nebule\Library\ModuleInterface', $classImplement))
                $this->_initInternalModuleApplication($moduleName, $moduleFullName);
            else
                $this->_metrologyInstance->addLog('unsupported module ' . $moduleFullName . ' (' . $moduleName . ')', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'e8543fd4');
        }
        $this->_metrologyInstance->addLog('internal modules loaded', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '050783df');
    }

    protected function _initInternalDeadModules(): void {
        $list = get_declared_classes();
        foreach ($list as $class) {
            if (str_starts_with($class, 'Module') && $class != 'Module') {
                $this->_metrologyInstance->addLog('dead module ' . $class, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '050783df');
                $this->_listModulesName[$class::MODULE_LANGUAGE] = $class;
            }
        }
    }

    protected function _initInternalModuleTranslate(string $moduleName, string $moduleFullName): void {
        $this->_metrologyInstance->addLog('loading internal translate modules ' . $moduleFullName . ' (' . $moduleName . ')', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '0b396e08');
        try {
            $lang = $moduleFullName::MODULE_LANGUAGE;
            $this->_listModulesName[$moduleName] = $moduleFullName;
            $this->_listModulesTranslateName[$lang] = $moduleFullName;
        } catch (\Exception $e) {
            $this->_metrologyInstance->addLog('translate module ' . $moduleFullName . ' (' . $moduleName . ')' . ' cannot been loaded', Metrology::LOG_LEVEL_ERROR, __METHOD__, '57947e3f');
        }
    }

    protected function _initInternalModuleApplication(string $moduleName, string $moduleFullName): void {
        $this->_metrologyInstance->addLog('loading internal modules ' . $moduleFullName . ' (' . $moduleName . ')', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '4879c453');
        try {
            //$instance = new $moduleFullName($this->_applicationInstance);
            $instance = new $moduleFullName($this->_nebuleInstance);
        } catch (\Error $e) {
            $this->_metrologyInstance->addLog('error instancing class=' . $moduleFullName .' ('  . $e->getCode() . ') : ' . $e->getFile()
                . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '6e8ba898');
            return;
        }
        if (! $instance instanceof \Nebule\Library\ModuleInterface) {
            $this->_metrologyInstance->addLog('module ' . $moduleFullName . ' (' . $moduleName . ')' . ' do not have module interface, cannot init', Metrology::LOG_LEVEL_ERROR, __METHOD__, 'b9742fd8');
            return;
        }
        $instance->setEnvironmentLibrary($this->_nebuleInstance);
        $instance->setEnvironmentApplication($this->_applicationInstance);
        $this->_metrologyInstance->addLog('init internal module ' . $moduleFullName . ' (' . $moduleName . ')', Metrology::LOG_LEVEL_AUDIT, __METHOD__, 'a6c894e7');
        try {
            $instance->initialisation();
        } catch (\Error $e) {
            $this->_metrologyInstance->addLog('error initialisation class=' . $moduleFullName .' ('  . $e->getCode() . ') : ' . $e->getFile()
                . '('  . $e->getLine() . ') : '  . $e->getMessage() . "\n"
                . $e->getTraceAsString(), Metrology::LOG_LEVEL_ERROR, __FUNCTION__, '0d36b043');
            return;
        }
        $this->_listModulesName[$moduleName] = $moduleFullName;
        $this->_listModulesInstance[$moduleFullName] = $instance;
        $this->_listModulesInitRID[$moduleFullName] = '0';
        $this->_listModulesOID[$moduleFullName] = '0';
        $this->_listModulesSignerRID[$moduleFullName] = '0';
        $this->_listModulesValid[$moduleFullName] = true;
    }

    protected function _initExternalModules(): void {
        if (!$this->_applicationInstance::USE_MODULES
            || !$this->_applicationInstance::USE_MODULES_EXTERNAL
            || !$this->_configurationInstance->getOptionAsBoolean('permitApplicationModules')
            || !$this->_configurationInstance->getOptionAsBoolean('permitApplicationModulesExternal')
        )
            return;
        $this->_metrologyInstance->addLog('load external modules on NameSpace=' . $this->_applicationNamespace, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $instanceRID = $this->_cacheInstance->newNode(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES);
        $links = $instanceRID->getReferencedLinks(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES, 'authority');
        foreach ($links as $link) {
            $moduleInstanceRID = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid2']);
            $moduleInstanceOID = $this->_cacheInstance->newNode($moduleInstanceRID->getReferencedOrSelfNID(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES));
            if ($moduleInstanceRID->getID() == '0'
                || $moduleInstanceOID->getID() == '0'
                || !$moduleInstanceOID->checkPresent()
            )
                continue;
            $moduleID = $moduleInstanceOID->getID();
            $this->_metrologyInstance->addLog('Load external module ' . $moduleID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '06a13897');
            include('o/' . $moduleID);                // @todo A modifier, passer par IO.
            $this->_listModulesRID[] = $moduleInstanceRID->getID();
            $this->_listModulesOID[] = $moduleID;
        }
        $this->_metrologyInstance->addLog('external modules loaded', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'a95de198');
    }

    protected function _initExternalTranslateModules(): void {
        if (!$this->_applicationInstance::USE_MODULES
            || !$this->_applicationInstance::USE_MODULES_TRANSLATE
            || !$this->_configurationInstance->getOptionAsBoolean('permitApplicationModules')
            || !$this->_configurationInstance->getOptionAsBoolean('permitApplicationModulesTranslate')
        )
            return;
        $this->_metrologyInstance->addLog('load translate modules on NameSpace=' . $this->_applicationNamespace, Metrology::LOG_LEVEL_FUNCTION, __METHOD__, '1111c0de');

        $instanceRID = $this->_cacheInstance->newNode(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES);
        $links = $instanceRID->getReferencedLinks(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES_TRANSLATE, 'authority');
        foreach ($links as $link) {
            $moduleInstanceRID = $this->_cacheInstance->newNode($link->getParsed()['bl/rl/nid2']);
            $moduleInstanceOID = $this->_cacheInstance->newNode($moduleInstanceRID->getReferencedOrSelfNID(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES));
            if ($moduleInstanceRID->getID() == '0'
                || $moduleInstanceOID->getID() == '0'
                || !$moduleInstanceOID->checkPresent()
            )
                continue;
            $moduleID = $moduleInstanceOID->getID();
            $this->_metrologyInstance->addLog('Load translate module ' . $moduleID, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '6d2f16cb');
            include('o/' . $moduleID);                // @todo A modifier, passer par IO.
            $this->_listModulesTranslateRID[] = $moduleInstanceRID->getID();
            $this->_listModulesTranslateOID[] = $moduleID;
        }
        $list = get_declared_classes();

        $this->_metrologyInstance->addLog('translate modules loaded', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '7e7aeaed');
    }



    protected function _findModulesRID(): void
    {
        global $bootstrapApplicationIID;

        if (!$this->_applicationInstance::USE_MODULES || !$this->_applicationInstance::USE_MODULES_EXTERNAL)
            return;

        $this->_metrologyInstance->addLog('Find option modules', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '226ce8be');

        $object = $this->_cacheInstance->newNode($bootstrapApplicationIID);
        $hashRef = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES);
        $links = $object->getLinksOnFields('', '', 'f', $bootstrapApplicationIID, '', $hashRef);

        foreach ($links as $link) {
            $ok = false;
            $module = $link->getParsed()['bl/rl/nid2'];
            foreach ($this->_authoritiesInstance->getLocalAuthoritiesID() as $authority) {
                if (isset($link->getParsed()['bs/rs1/eid'])
                    && $link->getParsed()['bs/rs1/eid'] == $authority
                    && $module != '0'
                    && $this->_nebuleInstance->getIoInstance()->checkLinkPresent($module)
                ) {
                    $ok = true;
                    break;
                }
            }
            if ($ok) {
                $this->_metrologyInstance->addLog('Find modules ' . $module, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '1520ed55');
                $this->_listModulesInitRID[$module] = $module;
                $this->_listModulesSignerRID[$module] = $link->getParsed()['bs/rs1/eid'];
            }
        }
    }

    protected function _findModulesUpdateID(): void
    {
        if (!$this->_applicationInstance::USE_MODULES || !$this->_applicationInstance::USE_MODULES_EXTERNAL)
            return;

        $this->_metrologyInstance->addLog('Find modules updates', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '19029717');

        // Recherche la mise à jour et vérifie les objets des modules avant de les charger.
        $listed = array();
        foreach ($this->_listModulesInitRID as $moduleID) {
            // Vérifie l'ID. Un module chargé par défaut est déjà chargé et à un ID = 0.
            if ($moduleID == '0' || $moduleID == '' )
                continue;

            $moduleRID = $moduleID;

            $this->_metrologyInstance->addLog('Ask load module ' . $moduleID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'cd99e217');
            $okValid = false;
            $okActivated = false;
            $okNotListed = true;

            // Vérifie que l'objet n'est pas déjà appelé.
            foreach ($listed as $element) {
                if ($element == $moduleID) {
                    $this->_metrologyInstance->addLog('Module already listed ' . $moduleID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '8a077f11');
                    $okNotListed = false;
                }
            }

            $instanceModule = $this->_cacheInstance->newNode($moduleID);
            $listed[$moduleID] = $moduleID;

            // Cherche une mise à jour.
            $updateModule = $moduleID;
            if ($okNotListed) {
                $updateModule = $instanceModule->getReferencedOrSelfNID(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES, 'authority');
                $updateSigner = $instanceModule->getReferencedSID(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MODULES, 'authority');
            }
            if ($updateModule != $moduleID
                && $updateModule != '0'
            ) {
                $instanceModule = $this->_cacheInstance->newNode($updateModule);
                if ($instanceModule->getType('authority') == References::REFERENCE_OBJECT_APP_PHP
                    && $this->_nebuleInstance->getIoInstance()->checkObjectPresent($updateModule)
                ) {
                    $this->_metrologyInstance->addLog('Find module update ' . $updateModule, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'cabf8ebd');
                    $okValid = true;
                    // Vérifie que l'objet n'est pas déjà appelé.
                    foreach ($listed as $element) {
                        if ($element == $updateModule) {
                            $this->_metrologyInstance->addLog('Module update already listed ' . $updateModule, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'fa4a752c');
                            $okNotListed = false;
                        }
                    }

                    $moduleID = $updateModule;
                    $listed[$updateModule] = $updateModule;
                } else {
                    $this->_metrologyInstance->addLog('Module updated type mime not valid ' . $moduleID, Metrology::LOG_LEVEL_ERROR, __METHOD__, 'f852ca44');
                    $okValid = false;
                }
            }

            // Vérifie si le module est activé.
            $okActivated = $this->getIsModuleActivated($instanceModule);
            unset($instanceModule, $updateModule, $element);

            // @todo Vérifier le contenu.
            // A faire, DANGEREUX !!!

            // Enregistre le module.
            if ($okValid
                && $okNotListed
            ) {
                // Recherche le nom du module.
                $name = $this->_getObjectClassName($moduleID);

                // Vérifie le nom.
                if ($name !== false
                    && $name != ''
                    && substr($name, 0, 6) == 'Module'
                ) {
                    // Charge le code php si le module est activé..
                    if ($okActivated || true) // @todo à revoir...
                    {
                        $this->_metrologyInstance->addLog('Load module ' . $moduleID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '6d2f16cb');
                        include('o/' . $moduleID);                // @todo A modifier, passer par IO.
                        $this->_listModulesEnabled[$name] = true;
                    }

                    // Enregistre le module.
                    $this->_listModulesOID[$name] = $moduleID;
                    $this->_listModulesRID[$name] = $moduleRID;
                    $this->_listModulesValid[$name] = true;
                    $this->_listModulesSignerRID[$name] = $this->_listModulesSignerRID[$moduleRID];
                    $this->_listModulesSignerRID[$moduleID] = $updateSigner;
                    if ($this->_listModulesSignerRID[$moduleID] == '0') {
                        $this->_listModulesSignerRID[$moduleID] = $this->_listModulesSignerRID[$moduleRID];
                    }
                    $this->_listModulesName[] = $name;
                }
            } else {
                $this->_listModulesValid[$name] = false;
            }
            $this->_metrologyInstance->addLog('End load module ' . $moduleID, Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'ef4207a5');
        }
    }

    /**
     * Recherche le nom de la classe dans un objet.
     *
     * @param string $id
     * @return null|string
     */
    protected function _getObjectClassName(string $id): ?string
    {
        $readValue = $this->_nebuleInstance->getIoInstance()->getObject($id);
        $startValue = strpos($readValue, 'class');
        $trimLine = substr($readValue, $startValue, 128);
        $arrayValue = explode(' ', $trimLine);
        return $arrayValue[1];
    }

    /**
     * Load and init external modules for the application.
     * Some modules are loaded before by default with _loadDefaultModules() depending on the list '_listInternalModules' give by le app.
     *
     * TODO gérer le chargement uniquement des modules listés dans _listExternalModules, si disponibles.
     * TODO prévoir un renforcement de la recherche avec les RID des modules...
     *
     * @return void
     */
    protected function _initModules(): void
    {
        if (!$this->_applicationInstance::USE_MODULES || !$this->_applicationInstance::USE_MODULES_EXTERNAL)
            return;

        $this->_metrologyInstance->addLog('load optionals modules on NameSpace=' . $this->_applicationNamespace, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '2df08836');

        // Liste toutes les classes module* et les charges une à une.
        $list = get_declared_classes();
        $searchModuleHead = $this->_applicationNamespace . '\\' . 'Module';
        $sizeModuleHead = strlen($searchModuleHead);
        foreach ($list as $i => $class) {
            $moduleFullName = '\\' . $class;
            $moduleNamespace = preg_replace('/(.+\W)\w+/', '$1', $class);
            $moduleName = preg_replace('/.+\W(\w+)/', '$1', $class);
            $this->_metrologyInstance->addLog('find on list class=' . $moduleFullName . ' (' . $moduleName . ')', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '9a744ec7');
            // Ne regarde que les classes qui sont des modules d'après le nom.
            if (substr('\\' . $class, 0, $sizeModuleHead) == $searchModuleHead
                && ($moduleNamespace == $this->_applicationNamespace || $moduleNamespace == 'Nebule\\Modules\\')
                && $class != 'Nebule\\Library\\Modules'
                && $class != 'Modules'
                && $class != $searchModuleHead . 's'
                && !isset($this->_listModulesName[$moduleName])
            ) {
                $this->_metrologyInstance->addTime();
                $this->_metrologyInstance->addLog('New ' . $moduleFullName, Metrology::LOG_LEVEL_DEBUG, __METHOD__, '5703836f');
                $instance = new $class($this->_applicationInstance);

                $this->_listModulesEnabled[$moduleFullName] = false; // @todo à revoir...

                // Vérifie si c'est une dépendance de la classe Modules.
                if (is_a($instance, 'Nebule\\Library\\Modules')) {
                    $this->_metrologyInstance->addLog('loaded module ' . $moduleFullName, Metrology::LOG_LEVEL_NORMAL, __METHOD__, '130bc586');
                    $instance->initialisation();
                    $this->_listModulesName[$moduleName] = $moduleFullName;
                    $this->_listModulesInstance[$moduleFullName] = $instance;
                    $this->_listModulesEnabled[$moduleFullName] = true; // @todo à revoir...
                    if ($instance::MODULE_TYPE == 'Traduction') {
                        $this->_metrologyInstance->addLog('add translate module', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '6770ac3f');
                        //$this->_listModulesTranslateInstance[$moduleFullName] = $instance; // FIXME do no load translate module as instance
                    }
                }
            }
        }

        $this->_metrologyInstance->addLog('Optionals modules loaded', Metrology::LOG_LEVEL_NORMAL, __METHOD__, '0237217e');
    }

    public function getIsModuleActivated(Node $module): bool
    {
        $hashActivation = $this->_nebuleInstance->getCryptoInstance()->hash(References::REFERENCE_NEBULE_OBJET_INTERFACE_APP_MOD_ACTIVE);

        // Liste les modules reconnue par une entité locale.
        $linksList = $module->getLinksOnFields('', '', 'f', $module->getID(), $hashActivation, $module->getID());
        foreach ($linksList as $link)
            if ($this->_authoritiesInstance->getIsLocalAuthorityEID($link->getParsed()['bs/rs1/eid']))
                return true;
        return false;
    }

    public function getModulesListNames(): array
    {
        return $this->_listModulesName;
    }

    public function getModulesListInstances(): array
    {
        return $this->_listModulesInstance;
    }

    public function getModulesTranslateListName(): array
    {
        return $this->_listModulesTranslateName;
    }

    public function getModulesListOID(): array
    {
        return $this->_listModulesOID;
    }

    public function getModulesListRID(): array
    {
        return $this->_listModulesRID;
    }

    public function getModulesListSignersRID(): array
    {
        return $this->_listModulesSignerRID;
    }

    public function getModulesListValid(): array
    {
        return $this->_listModulesValid;
    }

    public function getModulesListEnabled(): array
    {
        return $this->_listModulesEnabled;
    }

    /**
     * Vérifie si le module est chargé. Le module est recherché sur le nom de sa classe.
     * Si non trouvé, retourne false.
     *
     * @param string $name
     * @return boolean
     */
    public function getIsModuleLoaded(string $name): bool
    {
        if (!$this->_applicationInstance::USE_MODULES)
            return false;

        if ($name == ''
            || !str_starts_with($name, 'Module')
            || $name == 'Modules'
        )
            return false;

        $classes = get_declared_classes();

        $fullname = substr($this->_applicationNamespace, 1) . '\\' . $name;
        if (in_array($fullname, $classes))
            return true;
        return false;
    }

    protected function _findCurrentModule(): void
    {
        if ($this->_applicationInstance::USE_MODULES) { // FIXME verifier
            foreach ($this->_applicationInstance->getModulesListInstances() as $module) {
                if ($module::MODULE_COMMAND_NAME == $this->_displayInstance->getCurrentDisplayMode() && strtolower($module::MODULE_TYPE) == 'application') {
                    $this->_metrologyInstance->addLog('find current module name : ' . $module::MODULE_COMMAND_NAME, Metrology::LOG_LEVEL_AUDIT, __METHOD__, '67aaf050');
                    $this->_currentModuleInstance = $this->_applicationInstance->getModulesListInstances()['\\' . $module->getClassName()];
                }
            }
        }
    }

    /**
     * Retourne le module en cours d'utilisation.
     * Si les modules ne sont pas utilisés, retourne null.
     *
     * @return Modules|null
     */
    public function getCurrentModuleInstance(): ?Modules
    {
        if (!$this->_applicationInstance::USE_MODULES)
            return null;

        if ($this->_currentModuleInstance != null
            && is_a($this->_currentModuleInstance, 'Nebule\Library\Modules')
        )
            return $this->_currentModuleInstance;

        $result = null;
        foreach ($this->_listModulesInstance as $module) {
            if ($module::MODULE_COMMAND_NAME == $this->_displayInstance->getCurrentDisplayMode()) {
                $result = $module;
                break;
            }
        }
        return $result;
    }

    /**
     * Return the instance of a module with this name.
     * Can use long name (with namespace) or short name.
     *
     * If not found, return null... but sure this will be a problem after...
     *
     * @param string $name
     * @return Modules|null
     */
    public function getModule(string $name): ?Modules
    {
        if (!$this->_applicationInstance::USE_MODULES || $name == '')
            return null;

        // Try with long name.
        if (isset($this->_listModulesInstance[$name]))
        {
            $this->_metrologyInstance->addLog('Module ' . $name . ' found', Metrology::LOG_LEVEL_DEBUG, __METHOD__, '2446015f');
            return $this->_listModulesInstance[$name];
        }
        // Search on list with short name
        if (!isset($this->_listModulesName[$name]))
            return null;
        $moduleName = $this->_listModulesName[$name];
        // Try with long name extract from short name.
        if (isset($this->_listModulesInstance[$moduleName]))
        {
            $this->_metrologyInstance->addLog('Module ' . $name . ' found (' . $moduleName . ')', Metrology::LOG_LEVEL_DEBUG, __METHOD__, 'b44f071b');
            return $this->_listModulesInstance[$moduleName];
        }
        // If not... bad day for the reste!
        $this->_metrologyInstance->addLog('Module ' . $name . ' not found', Metrology::LOG_LEVEL_ERROR, __METHOD__, '82cd76b7');
        return null;
    }
}



// ========================================================================================
//   900_module_interface.php
//   020250219165441
//   ab577f0fbc3b5f781f69b2b2dc8b44ee8b138ed15318f8c92d7dae568c98df3e.sha2.256

interface ModuleInterface {
    public function __construct(nebule $nebuleInstance);
    public function __toString(): string;

    public function getClassName(): string;
    public function getHookList(string $hookName, ?Node $nid = null): array;
    public function displayModule(): void;
}

Interface ModuleTranslateInterface {
    public function __construct(nebule $nebuleInstance);
    public function __destruct();
    public function __toString(): string;
}



// ========================================================================================
//   901_module.php
//   020250227163020
//   2714714f58ad7b02fc8f9541ac30c10fe8f0a32819afcb22ac5066187f80faa0.sha2.256

/**
 * Classe Modules
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
abstract class Modules extends Functions implements ModuleInterface
{
    const MODULE_TYPE = 'Model'; // Model | Application | Traduction
    const MODULE_NAME = 'None';
    const MODULE_MENU_NAME = 'None';
    const MODULE_COMMAND_NAME = 'none';
    const MODULE_DEFAULT_VIEW = 'disp';
    const MODULE_DESCRIPTION = 'Description';
    const MODULE_VERSION = '020250111';
    const MODULE_AUTHOR = 'Projet nebule';
    const MODULE_LICENCE = '(c) GLPv3 nebule 2013-2025';
    const MODULE_LOGO = '47e168b254f2dfd0a4414a0b96f853eed3df0315aecb8c9e8e505fa5d0df0e9c.sha2.256';
    const MODULE_HELP = 'Help';
    const MODULE_INTERFACE = '3.0';
    const MODULE_REGISTERED_VIEWS = array('disp');
    const MODULE_REGISTERED_ICONS = array();
    const MODULE_APP_TITLE_LIST = array();
    const MODULE_APP_ICON_LIST = array();
    const MODULE_APP_DESC_LIST = array();
    const MODULE_APP_VIEW_LIST = array();

    const DEFAULT_COMMAND_ACTION_DISPLAY_MODULE = 'name';

    protected ?Applications $_applicationInstance = null;
    protected ?Displays $_displayInstance = null;
    protected ?Translates $_translateInstance = null;
    protected bool $_unlocked = false;

    public function __toString(): string { return $this::MODULE_NAME; }

    protected function _initialisation(): void {
        $this->_unlocked = $this->_entitiesInstance->getCurrentEntityIsUnlocked();
    }

    public function getClassName(): string { return static::class; }

    /**
     * Add functionalities by hooks on menu (by module) and nodes (by type).
     *  - On menu:
     *    - selfMenu: inside menu on current module, in white;
     *    - selfMenu<View>: inside menu on current module only on 'View', in white;
     *    - <Module>SelfMenu: inside menu on another module with the name 'Module', in white;
     *    - menu: inside menu on every module, on the end of list, in dark;
     *  - On node:
     *    - typeMenu<Type>: inside menu on node with the 'Type', in white;
     *    - ... FIXME
     *
     * @param string    $hookName
     * @param Node|null $nid
     * @return array
     */
    public function getHookList(string $hookName, ?\Nebule\Library\Node $nid = null): array { return array(); }


    /**
     * Part from this module to display on browser.
     * @return void
     */
    public function displayModule(): void {}

    /**
     * Inline part from this module to display on browser, called by primary page on displayModule().
     * @return void
     */
    public function displayModuleInline(): void {}

    private ?string $_commandActionDisplayModuleCache = null;

    public function getExtractCommandDisplayModule(): string
    {
        $return = '';

        if ($this->_commandActionDisplayModuleCache != null)
            return $this->_commandActionDisplayModuleCache;

        if ($this->_displayInstance->getCurrentDisplayView() == $this::MODULE_REGISTERED_VIEWS[1]) {
            $arg = trim(filter_input(INPUT_GET, self::DEFAULT_COMMAND_ACTION_DISPLAY_MODULE, FILTER_SANITIZE_STRING));

            if ($arg != '')
                $return = $arg;

            unset($arg);
        }

        $this->_commandActionDisplayModuleCache = $return;

        return $return;
    }

    public function getCSS(): void
    {
        echo '<style type="text/css">' . "\n";
        $this->headerStyle();
        echo '</style>' . "\n";
    }

    /**
     * Part of CSS from this module to display on browser.
     * @return void
     */
    public function headerStyle(): void {}

    /**
     * Part of JS script from this module to display on browser.
     * @return void
     */
    public function headerScript(): void {}

    /**
     * Part of actions from this module to run before display.
     * @return void
     */
    public function actions(): void {}

    public function getTranslate(string $text, string $lang = ''): string {
        $result = $text;
        if ($this->_translateInstance === null)
            $this->_translateInstance = $this->_applicationInstance->getTranslateInstance();

        if ($lang == '')
            $lang = $this->_translateInstance->getCurrentLanguage();

        if (isset(self::TRANSLATE_TABLE[$lang][$text]))
            $result = self::TRANSLATE_TABLE[$lang][$text];
        return $result;
    }


    /**
     * Créer un lien.
     *
     * @param string  $signer
     * @param string  $date
     * @param string  $action
     * @param string  $source
     * @param string  $target
     * @param string  $meta
     * @param boolean $obfuscate
     * @return void
     */
    protected function _createLink_DEPRECATED(string $signer, string $date, string $action, string $source, string $target, string $meta, bool $obfuscate = false): void
    {
        /*// Génère le lien.
        $link = '0_' . $signer . '_' . $date . '_' . $action . '_' . $source . '_' . $target . '_' . $meta;
        $newLink = new Link($this->_nebuleInstance, $link);

        // Signe le lien.
        $newLink->sign($signer);

        // Si besoin, obfuscation du lien.
        if ($obfuscate) {
            $link->obfuscate();
        }

        // Ecrit le lien.
        $newLink->write();*/
    }

    protected function _displaySimpleTitle(string $title, string $icon): void {
        $instance = new \Nebule\Library\DisplayTitle($this->_applicationInstance);
        $instance->setTitle($title);
        $instance->setIconRID($icon);
        $instance->display();
    }

    protected function _displayNotImplemented(): void {
        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage('::notImplemented');
        $instance->setType(\Nebule\Library\DisplayItemIconMessage::TYPE_WARN);
        $instance->setSize(\Nebule\Library\DisplayItem::SIZE_MEDIUM);
        $instance->setRatio(\Nebule\Library\DisplayItem::RATIO_SHORT);
        $instance->display();
    }

    CONST TRANSLATE_TABLE = [
        'fr-fr' => [
            '::nebule:modules::ModuleName' => 'Module des modules',
            '::nebule:modules::MenuName' => 'Modules',
            '::nebule:modules::ModuleDescription' => 'Module de gestion des modules.',
            '::nebule:modules::ModuleHelp' => 'Cette application permet de voir les modules détectés par sylabe.',
            '::nebule:modules::AppTitle1' => 'Modules',
            '::nebule:modules::AppDesc1' => 'Module de gestion des modules.',
        ],
        'en-en' => [
            '::nebule:modules::ModuleName' => 'Module of modules',
            '::nebule:modules::MenuName' => 'Modules',
            '::nebule:modules::ModuleDescription' => 'Module to manage modules.',
            '::nebule:modules::ModuleHelp' => 'This application permit to see modules detected by sylabe.',
            '::nebule:modules::AppTitle1' => 'Modules',
            '::nebule:modules::AppDesc1' => 'Manage modules.',
        ],
        'es-co' => [
            '::nebule:modules::ModuleName' => 'Module of modules',
            '::nebule:modules::MenuName' => 'Modules',
            '::nebule:modules::ModuleDescription' => 'Module to manage modules.',
            '::nebule:modules::ModuleHelp' => 'This application permit to see modules detected by sylabe.',
            '::nebule:modules::AppDesc1' => 'Manage modules.',
            '::nebule:modules::AppTitle1' => 'Modules',
        ],
    ];


    /**
     * Affiche la partie menu de la documentation.
     * Inclu dans les applications.
     *
     * @return void
     */
    static public function echoDocumentationTitles(): void
    {
        ?>

        <li><a href="#oam">OAM / Module</a>
            <ul>
                <li><a href="#oamn">OAMN / Nommage</a></li>
                <li><a href="#oamp">OAMP / Protection</a></li>
                <li><a href="#oamd">OAMD / Dissimulation</a></li>
                <li><a href="#oaml">OAML / Liens</a></li>
                <li><a href="#oamc">OAMC / Création</a></li>
                <li><a href="#oamu">OAMU / Mise à Jour</a></li>
                <li><a href="#oams">OAMS / Stockage</a></li>
                <li><a href="#oamt">OAMT / Transfert</a></li>
                <li><a href="#oamr">OAMR / Réservation</a></li>
            </ul>
        </li>

        <?php
    }

    /**
     * Affiche la partie texte de la documentation.
     * Inclu dans les applications.
     *
     * @return void
     */
    static public function echoDocumentationCore(): void
    {
        ?>

        <h3 id="oam">OAM / Module</h3>
        <p>Le module est une classe enfant de la classe <i>Modules</i>. Cela permet d'étendre les fonctionnalités d'une
            application. Un module peut être par défaut présent dans une application, c'est-à-dire présent dans l'objet
            de l'application. Dans ce cas son nom doit être présent dans la liste des modules intégrés à l'application.
            </p>
        <p>Il y a plusieurs types de modules dans une application. :</p>
        <ul>
            <li>Le type interne (internal) correspond aux modules intégrés dans l'objet de l'application.</li>
            <li>Le type externe (external) correspond uax modules non intégrés dans l'objet de l'application. Ils sont
                détectés par des liens dédiés et chargés puis instanciés par l'application.</li>
            <li>Le type traduction (translate) correspond aux modules externes à l'application et dédiés à la
                traduction, mais avec des capacités réduites.</li>
        </ul>
        <p>Pour qu'une application puisse utiliser des modules, elle doit permettre l'utilisation des modules. De façon
            globale, des options permettent d'utiliser des modules ou non, elles sont prioritaires sur le choix des
            applications.</p>
        <p>Pour activer les modules, internes et/ou externes, dans la classe <i>Application</i> d'une application, il
            faut positionner la constante <b>USE_MODULES = true</b>. L'option <i>permitApplicationModules</i> doit être
            à true. Les modules internes sont intégrés par défaut dans l'objet d'une application. Pour être utilisé, ils
            doivent tous être déclarés dans la constance <b>LIST_MODULES_INTERNAL</b> sous forme d'une liste.</p>
        <p>Les modules externes peuvent être pris en compte via le lien des modules si la constance
            <b>USE_MODULES_EXTERNAL = true</b> en plus de la <b>USE_MODULES = true</b>. Les options
            <i>permitApplicationModules</i> et <i>permitApplicationModulesExternal</i> doivent être à true.</p>
        <p>Les modules externes de traduction peuvent être pris en compte via le lien des modules si la constance
            <b>USE_MODULES_TRANSLATE = true</b> en plus de la <b>USE_MODULES = true</b>. Ces modules n'ont aucun code
            exécuté et exposent uniquement un tableau avec des traductions. Les options <i>permitApplicationModules</i>
            et <i>permitApplicationModulesTranslate</i> doivent être à true.</p>
        <p>A faire...</p>

        <h4 id="oamn">OAMN / Nommage</h4>
        <p>A faire...</p>

        <h4 id="oamp">OAMP / Protection</h4>
        <p>A faire...</p>

        <h4 id="oamd">OAMD / Dissimulation</h4>
        <p>A faire...</p>

        <h4 id="oaml">OAML / Liens</h4>
        <p>A faire...</p>

        <h4 id="oamc">OAMC / Création</h4>
        <p>Un module est une classe enfant de la classe <i>Modules</i> ou de la classe <i>ModuleTranslates</i>.</p>
        <p>Les modules sont chargés par la classe <i>Applications</i> dont hérite toutes les applications. </p>
        <p>Liste des liens à générer lors de la création d'un module.</p>
        <p>A faire...</p>

        <h4 id="oamu">OAMU / Mise à Jour</h4>
        <p>A faire...</p>

        <h4 id="oams">OAMS / Stockage</h4>
        <p>Voir <a href="#oos">OOS</a>, pas de particularité de stockage.</p>

        <h4 id="oamt">OAMT / Transfert</h4>
        <p>A faire...</p>

        <h4 id="oamr">OAMR / Réservation</h4>
        <p>Les objets réservés spécifiquement pour les modules d'applications :</p>
        <ul>
            <li>nebule/objet/interface/web/php/applications/modules</li>
            <li>nebule/objet/interface/web/php/applications/modules/active</li>
        </ul>

        <?php
    }
}



// ========================================================================================
//   902_modules_translate.php
//   020250215163515
//   2d047328ab7b04f696cbd28b34c2a74eb3ca805ebc92911259ded1f86a49b197.sha2.256

/**
* Classe Modules
*
* @author Projet nebule
* @license GNU GPLv3
* @copyright Projet nebule
* @link www.nebule.org
*/
abstract class ModuleTranslates implements ModuleTranslateInterface
{
    const MODULE_TYPE = 'Traduction';
    const MODULE_LANGUAGE = '/';
    const MODULE_NAME = 'None';
    const MODULE_MENU_NAME = 'None';
    const MODULE_DESCRIPTION = 'Description';
    const MODULE_VERSION = '020250111';
    const MODULE_AUTHOR = 'Projet nebule';
    const MODULE_LICENCE = '(c) GLPv3 nebule 2013-2025';
    const MODULE_LOGO = '47e168b254f2dfd0a4414a0b96f853eed3df0315aecb8c9e8e505fa5d0df0e9c.sha2.256';
    const MODULE_INTERFACE = '3.0';
    
    protected ?Applications $_applicationInstance = null;

    /*public function __construct(Applications $applicationInstance)
    {
        $this->_applicationInstance = $applicationInstance;
    }*/

    public function __construct(nebule $nebuleInstance)
    {
        //$this->_applicationInstance = $nebuleInstance;
    }

    public function __destruct() { return true; }
    public function __toString(): string { return self::MODULE_TYPE; }
}



// ========================================================================================
//   903_model_module_help.php
//   020250222170624
//   e0a7dab24a617ba203264390fb5815aa2ad49e3598042250acd0ae64161afde0.sha2.256

/**
 * This module is a model for modules manage the help pages and default first vue.
 *
 * @author Projet nebule
 * @license GNU GPLv3
 * @copyright Projet nebule
 * @link www.nebule.org
 */
class ModelModuleHelp extends \Nebule\Library\Modules
{
    const MODULE_TYPE = 'Model';
    const MODULE_NAME = '::module:help:ModuleName';
    const MODULE_MENU_NAME = '::module:help:MenuName';
    const MODULE_COMMAND_NAME = 'hlp';
    const MODULE_DEFAULT_VIEW = '1st';
    const MODULE_DESCRIPTION = '::module:help:ModuleDescription';
    const MODULE_VERSION = '020250222';
    const MODULE_AUTHOR = 'Projet nebule';
    const MODULE_LICENCE = '(c) GLPv3 nebule 2013-2025';
    const MODULE_LOGO = '5b3afdf2eb971ce185930ad4accda23942d4495a638c2bdf27ae3e8e4537c1434697.none.272';
    const MODULE_HELP = '::module:help:ModuleHelp';
    const MODULE_INTERFACE = '3.0';

    const MODULE_REGISTERED_VIEWS = array('1st', 'hlp', 'about');
    const MODULE_REGISTERED_ICONS = array(
        '5b3afdf2eb971ce185930ad4accda23942d4495a638c2bdf27ae3e8e4537c1434697.none.272', // 0 : icône d'aide.
        '47e168b254f2dfd0a4414a0b96f853eed3df0315aecb8c9e8e505fa5d0df0e9c.sha2.256',     // 1 : module
    );
    const MODULE_APP_TITLE_LIST = array('::module:help:AppTitle1');
    const MODULE_APP_ICON_LIST = array('5b3afdf2eb971ce185930ad4accda23942d4495a638c2bdf27ae3e8e4537c1434697.none.272');
    const MODULE_APP_DESC_LIST = array('::module:help:AppDesc1');
    const MODULE_APP_VIEW_LIST = array('hlp');



    /**
     * {@inheritDoc}
     * @see Modules::getHookList()
     */
    public function getHookList(string $hookName, ?\Nebule\Library\Node $nid = null): array {
        $hookArray = array();
        switch ($hookName) {
            case 'menu':
                $hookArray[0]['name'] = '::module:help:AppTitle1';
                $hookArray[0]['icon'] = $this::MODULE_REGISTERED_ICONS[0];
                $hookArray[0]['desc'] = '::module:help:AppDesc1';
                $hookArray[0]['link'] = '?' . Displays::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this::MODULE_COMMAND_NAME
                    . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this::MODULE_REGISTERED_VIEWS[1];
                break;
            case 'selfMenu':
                // Affiche l'aide.
                $hookArray[0]['name'] = '::module:help:AppTitle1';
                $hookArray[0]['icon'] = $this::MODULE_REGISTERED_ICONS[0];
                $hookArray[0]['desc'] = '::module:help:AppDesc1';
                $hookArray[0]['link'] = '?' . Displays::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this::MODULE_COMMAND_NAME
                    . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this::MODULE_REGISTERED_VIEWS[1];

                // A propos.
                $hookArray[2]['name'] = '::module:help:About';
                $hookArray[2]['icon'] = $this::MODULE_REGISTERED_ICONS[1];
                $hookArray[2]['desc'] = '';
                $hookArray[2]['link'] = '?' . Displays::DEFAULT_DISPLAY_COMMAND_MODE . '=' . $this::MODULE_COMMAND_NAME
                    . '&' . Displays::DEFAULT_DISPLAY_COMMAND_VIEW . '=' . $this::MODULE_REGISTERED_VIEWS[2];
                break;
        }
        return $hookArray;
    }

    /**
     * {@inheritDoc}
     * @see Modules::displayModule()
     */
    public function displayModule(): void {
        $this->_displayHlpHeader();
        switch ($this->_applicationInstance->getDisplayInstance()->getCurrentDisplayView()) {
            case 'hlp':
                $this->_displayHlpHelp();
                break;
            case 'about':
                $this->_displayHlpAbout();
                break;
            default:
                $this->_displayHlpFirst();
                break;
        }
    }

    /**
     * {@inheritDoc}
     * @see Modules::displayModuleInline()
     */
    public function displayModuleInline(): void {}

    /**
     * {@inheritDoc}
     * @see Modules::headerStyle()
     */
    public function headerStyle(): void {
        echo ".moduleHelpText1stI1 { position:absolute; left:50%; top:33%; margin-left:-32px; }\n";
        echo ".moduleHelpText1stI2 { position:absolute; left:50%; top:50%; margin-left:-32px; }\n";
        echo ".moduleHelpText1stT { position:absolute; right:33%; bottom:0; height:54px; min-width:33%; padding:5px; background:rgba(0,0,0,0.1); background-origin:border-box; }\n";
        echo ".moduleHelpText1stT p { position:relative; top:30%; color:#ffffff; text-align:center; font-size:1.5em; }\n";
    }



    private function _displayHlpHeader(): void {}

    private function _displayHlpFirst(): void { $this->_displayNotImplemented(); }

    private function _displayHlpHelp(): void {
        ?>
        <div class="text">
            <p>
                <?php echo $this->_translateInstance->getTranslate('::module:help:AideGenerale:Text') ?>
            </p>
        </div>
        <?php
    }

    /**
     * Affichage de la page à propos.
     */
    private function _displayHlpAbout(): void {
        $linkApplicationWebsite = $this->_applicationInstance::APPLICATION_WEBSITE;
        if (!str_contains($this->_applicationInstance::APPLICATION_WEBSITE, '://'))
            $linkApplicationWebsite = 'https://' . $this->_applicationInstance::APPLICATION_WEBSITE;

        $linkBootstrapWebsite = \Nebule\Bootstrap\BOOTSTRAP_WEBSITE;
        if (!str_contains(\Nebule\Bootstrap\BOOTSTRAP_WEBSITE, '://'))
            $linkBootstrapWebsite = 'https://' . \Nebule\Bootstrap\BOOTSTRAP_WEBSITE;

        $instanceList = new \Nebule\Library\DisplayList($this->_applicationInstance);
        $instanceList->setSize(\Nebule\Library\DisplayItem::SIZE_MEDIUM);

        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage($this->_applicationInstance::APPLICATION_SURNAME);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->setIconText($this->_applicationInstance::APPLICATION_NAME);
        $instanceList->addItem($instance);

        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage($this->_applicationInstance::APPLICATION_WEBSITE);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->setIconText($this->_applicationInstance::APPLICATION_NAME);
        $instance->setLink($linkApplicationWebsite);
        $instanceList->addItem($instance);

        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage($this->_translateInstance->getTranslate('::Version') . ' : ' . $this->_applicationInstance::APPLICATION_VERSION);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->setIconText($this->_applicationInstance::APPLICATION_NAME);
        $instanceList->addItem($instance);

        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage($this->_applicationInstance::APPLICATION_LICENCE . ' (c) ' . $this->_applicationInstance::APPLICATION_AUTHOR);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->setIconText($this->_applicationInstance::APPLICATION_NAME);
        $instanceList->addItem($instance);

        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage(\Nebule\Bootstrap\BOOTSTRAP_SURNAME);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->setIconText(\Nebule\Bootstrap\BOOTSTRAP_NAME);
        $instanceList->addItem($instance);

        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage(\Nebule\Bootstrap\BOOTSTRAP_WEBSITE);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->setIconText(\Nebule\Bootstrap\BOOTSTRAP_NAME);
        $instance->setLink($linkBootstrapWebsite);
        $instanceList->addItem($instance);

        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage($this->_translateInstance->getTranslate('::Version') . ' : ' . \Nebule\Bootstrap\BOOTSTRAP_VERSION);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->setIconText(\Nebule\Bootstrap\BOOTSTRAP_NAME);
        $instanceList->addItem($instance);

        $instance = new \Nebule\Library\DisplayInformation($this->_applicationInstance);
        $instance->setMessage(\Nebule\Bootstrap\BOOTSTRAP_LICENCE . ' (c) ' . \Nebule\Bootstrap\BOOTSTRAP_AUTHOR);
        $instance->setType(DisplayItemIconMessage::TYPE_INFORMATION);
        $instance->setIconText(\Nebule\Bootstrap\BOOTSTRAP_NAME);
        $instanceList->addItem($instance);

        $instanceList->display();

        ?>
        <div class="text">
            <p>
                <?php echo $this->_translateInstance->getTranslate('::module:help:APropos:Text') ?>
            </p>
        </div>
        <?php
    }



    CONST TRANSLATE_TABLE = [
        'fr-fr' => [
            '::module:help:ModuleName' => "Module d'aide",
            '::module:help:MenuName' => 'Aide',
            '::module:help:ModuleDescription' => "Module d'aide en ligne.",
            '::module:help:ModuleHelp' => "Ce module permet d'afficher de l'aide générale sur l'interface.",
            '::module:help:AppTitle1' => 'Aide',
            '::module:help:AppDesc1' => "Affiche l'aide en ligne.",
            '::module:help:Bienvenue' => 'Bienvenue.',
            '::module:help:About' => 'A propos',
            '::module:help:Bootstrap' => 'Bootstrap',
            '::module:help:Demarrage' => 'Démarrage',
            '::module:help:AideGenerale' => 'Aide générale',
            '::module:help:APropos' => 'A propos',
            '::module:help:APropos:Text' => 'Todo',
        ],
        'en-en' => [
            '::module:help:ModuleName' => 'Help module',
            '::module:help:MenuName' => 'Help',
            '::module:help:ModuleDescription' => 'Online help module.',
            '::module:help:ModuleHelp' => 'This module permit to display general help about the interface.',
            '::module:help:AppTitle1' => 'Help',
            '::module:help:AppDesc1' => 'Display online help.',
            '::module:help:Bienvenue' => 'Welcome.',
            '::module:help:About' => 'About',
            '::module:help:Bootstrap' => 'Bootstrap',
            '::module:help:Demarrage' => 'Start',
            '::module:help:AideGenerale' => 'General help',
            '::module:help:APropos' => 'About',
            '::module:help:APropos:Text' => 'Todo',
        ],
        'es-co' => [
            '::module:help:ModuleName' => 'Módulo de ayuda',
            '::module:help:MenuName' => 'Ayuda',
            '::module:help:ModuleDescription' => 'Módulo de ayuda en línea.',
            '::module:help:ModuleHelp' => 'Esta modulo te permite ver la ayuda general sobre la interfaz.',
            '::module:help:AppTitle1' => 'Ayuda',
            '::module:help:AppDesc1' => 'Muestra la ayuda en línea.',
            '::module:help:Bienvenue' => 'Bienviedo.',
            '::module:help:About' => 'About',
            '::module:help:Bootstrap' => 'Bootstrap',
            '::module:help:Demarrage' => 'Comienzo',
            '::module:help:AideGenerale' => 'Ayuda general',
            '::module:help:APropos' => 'Acerca',
            '::module:help:APropos:Text' => 'Todo',
        ],
    ];
}



// ========================================================================================
//   999_license.php
//   020250215163515
//   918cad7323401060595729ad5ce16dd3dbb9011ee077d8d0de076f622dafd755.sha2.256

/*
 *                     GNU GENERAL PUBLIC LICENSE
 *                        Version 3, 29 June 2007
 *
 *  Copyright (C) 2007 Free Software Foundation, Inc. <https://fsf.org/>
 *  Everyone is permitted to copy and distribute verbatim copies
 *  of this license document, but changing it is not allowed.
 *
 *                             Preamble
 *
 *   The GNU General Public License is a free, copyleft license for
 * software and other kinds of works.
 *
 *   The licenses for most software and other practical works are designed
 * to take away your freedom to share and change the works.  By contrast,
 * the GNU General Public License is intended to guarantee your freedom to
 * share and change all versions of a program--to make sure it remains free
 * software for all its users.  We, the Free Software Foundation, use the
 * GNU General Public License for most of our software; it applies also to
 * any other work released this way by its authors.  You can apply it to
 * your programs, too.
 *
 *   When we speak of free software, we are referring to freedom, not
 * price.  Our General Public Licenses are designed to make sure that you
 * have the freedom to distribute copies of free software (and charge for
 * them if you wish), that you receive source code or can get it if you
 * want it, that you can change the software or use pieces of it in new
 * free programs, and that you know you can do these things.
 *
 *   To protect your rights, we need to prevent others from denying you
 * these rights or asking you to surrender the rights.  Therefore, you have
 * certain responsibilities if you distribute copies of the software, or if
 * you modify it: responsibilities to respect the freedom of others.
 *
 *   For example, if you distribute copies of such a program, whether
 * gratis or for a fee, you must pass on to the recipients the same
 * freedoms that you received.  You must make sure that they, too, receive
 * or can get the source code.  And you must show them these terms so they
 * know their rights.
 *
 *   Developers that use the GNU GPL protect your rights with two steps:
 * (1) assert copyright on the software, and (2) offer you this License
 * giving you legal permission to copy, distribute and/or modify it.
 *
 *   For the developers' and authors' protection, the GPL clearly explains
 * that there is no warranty for this free software.  For both users' and
 * authors' sake, the GPL requires that modified versions be marked as
 * changed, so that their problems will not be attributed erroneously to
 * authors of previous versions.
 *
 *   Some devices are designed to deny users access to install or run
 * modified versions of the software inside them, although the manufacturer
 * can do so.  This is fundamentally incompatible with the aim of
 * protecting users' freedom to change the software.  The systematic
 * pattern of such abuse occurs in the area of products for individuals to
 * use, which is precisely where it is most unacceptable.  Therefore, we
 * have designed this version of the GPL to prohibit the practice for those
 * products.  If such problems arise substantially in other domains, we
 * stand ready to extend this provision to those domains in future versions
 * of the GPL, as needed to protect the freedom of users.
 *
 *   Finally, every program is threatened constantly by software patents.
 * States should not allow patents to restrict development and use of
 * software on general-purpose computers, but in those that do, we wish to
 * avoid the special danger that patents applied to a free program could
 * make it effectively proprietary.  To prevent this, the GPL assures that
 * patents cannot be used to render the program non-free.
 *
 *   The precise terms and conditions for copying, distribution and
 * modification follow.
 *
 *                        TERMS AND CONDITIONS
 *
 *   0. Definitions.
 *
 *   "This License" refers to version 3 of the GNU General Public License.
 *
 *   "Copyright" also means copyright-like laws that apply to other kinds of
 * works, such as semiconductor masks.
 *
 *   "The Program" refers to any copyrightable work licensed under this
 * License.  Each licensee is addressed as "you".  "Licensees" and
 * "recipients" may be individuals or organizations.
 *
 *   To "modify" a work means to copy from or adapt all or part of the work
 * in a fashion requiring copyright permission, other than the making of an
 * exact copy.  The resulting work is called a "modified version" of the
 * earlier work or a work "based on" the earlier work.
 *
 *   A "covered work" means either the unmodified Program or a work based
 * on the Program.
 *
 *   To "propagate" a work means to do anything with it that, without
 * permission, would make you directly or secondarily liable for
 * infringement under applicable copyright law, except executing it on a
 * computer or modifying a private copy.  Propagation includes copying,
 * distribution (with or without modification), making available to the
 * public, and in some countries other activities as well.
 *
 *   To "convey" a work means any kind of propagation that enables other
 * parties to make or receive copies.  Mere interaction with a user through
 * a computer network, with no transfer of a copy, is not conveying.
 *
 *   An interactive user interface displays "Appropriate Legal Notices"
 * to the extent that it includes a convenient and prominently visible
 * feature that (1) displays an appropriate copyright notice, and (2)
 * tells the user that there is no warranty for the work (except to the
 * extent that warranties are provided), that licensees may convey the
 * work under this License, and how to view a copy of this License.  If
 * the interface presents a list of user commands or options, such as a
 * menu, a prominent item in the list meets this criterion.
 *
 *   1. Source Code.
 *
 *   The "source code" for a work means the preferred form of the work
 * for making modifications to it.  "Object code" means any non-source
 * form of a work.
 *
 *   A "Standard Interface" means an interface that either is an official
 * standard defined by a recognized standards body, or, in the case of
 * interfaces specified for a particular programming language, one that
 * is widely used among developers working in that language.
 *
 *   The "System Libraries" of an executable work include anything, other
 * than the work as a whole, that (a) is included in the normal form of
 * packaging a Major Component, but which is not part of that Major
 * Component, and (b) serves only to enable use of the work with that
 * Major Component, or to implement a Standard Interface for which an
 * implementation is available to the public in source code form.  A
 * "Major Component", in this context, means a major essential component
 * (kernel, window system, and so on) of the specific operating system
 * (if any) on which the executable work runs, or a compiler used to
 * produce the work, or an object code interpreter used to run it.
 *
 *   The "Corresponding Source" for a work in object code form means all
 * the source code needed to generate, install, and (for an executable
 * work) run the object code and to modify the work, including scripts to
 * control those activities.  However, it does not include the work's
 * System Libraries, or general-purpose tools or generally available free
 * programs which are used unmodified in performing those activities but
 * which are not part of the work.  For example, Corresponding Source
 * includes interface definition files associated with source files for
 * the work, and the source code for shared libraries and dynamically
 * linked subprograms that the work is specifically designed to require,
 * such as by intimate data communication or control flow between those
 * subprograms and other parts of the work.
 *
 *   The Corresponding Source need not include anything that users
 * can regenerate automatically from other parts of the Corresponding
 * Source.
 *
 *   The Corresponding Source for a work in source code form is that
 * same work.
 *
 *   2. Basic Permissions.
 *
 *   All rights granted under this License are granted for the term of
 * copyright on the Program, and are irrevocable provided the stated
 * conditions are met.  This License explicitly affirms your unlimited
 * permission to run the unmodified Program.  The output from running a
 * covered work is covered by this License only if the output, given its
 * content, constitutes a covered work.  This License acknowledges your
 * rights of fair use or other equivalent, as provided by copyright law.
 *
 *   You may make, run and propagate covered works that you do not
 * convey, without conditions so long as your license otherwise remains
 * in force.  You may convey covered works to others for the sole purpose
 * of having them make modifications exclusively for you, or provide you
 * with facilities for running those works, provided that you comply with
 * the terms of this License in conveying all material for which you do
 * not control copyright.  Those thus making or running the covered works
 * for you must do so exclusively on your behalf, under your direction
 * and control, on terms that prohibit them from making any copies of
 * your copyrighted material outside their relationship with you.
 *
 *   Conveying under any other circumstances is permitted solely under
 * the conditions stated below.  Sublicensing is not allowed; section 10
 * makes it unnecessary.
 *
 *   3. Protecting Users' Legal Rights From Anti-Circumvention Law.
 *
 *   No covered work shall be deemed part of an effective technological
 * measure under any applicable law fulfilling obligations under article
 * 11 of the WIPO copyright treaty adopted on 20 December 1996, or
 * similar laws prohibiting or restricting circumvention of such
 * measures.
 *
 *   When you convey a covered work, you waive any legal power to forbid
 * circumvention of technological measures to the extent such circumvention
 * is effected by exercising rights under this License with respect to
 * the covered work, and you disclaim any intention to limit operation or
 * modification of the work as a means of enforcing, against the work's
 * users, your or third parties' legal rights to forbid circumvention of
 * technological measures.
 *
 *   4. Conveying Verbatim Copies.
 *
 *   You may convey verbatim copies of the Program's source code as you
 * receive it, in any medium, provided that you conspicuously and
 * appropriately publish on each copy an appropriate copyright notice;
 * keep intact all notices stating that this License and any
 * non-permissive terms added in accord with section 7 apply to the code;
 * keep intact all notices of the absence of any warranty; and give all
 * recipients a copy of this License along with the Program.
 *
 *   You may charge any price or no price for each copy that you convey,
 * and you may offer support or warranty protection for a fee.
 *
 *   5. Conveying Modified Source Versions.
 *
 *   You may convey a work based on the Program, or the modifications to
 * produce it from the Program, in the form of source code under the
 * terms of section 4, provided that you also meet all of these conditions:
 *
 *     a) The work must carry prominent notices stating that you modified
 *     it, and giving a relevant date.
 *
 *     b) The work must carry prominent notices stating that it is
 *     released under this License and any conditions added under section
 *     7.  This requirement modifies the requirement in section 4 to
 *     "keep intact all notices".
 *
 *     c) You must license the entire work, as a whole, under this
 *     License to anyone who comes into possession of a copy.  This
 *     License will therefore apply, along with any applicable section 7
 *     additional terms, to the whole of the work, and all its parts,
 *     regardless of how they are packaged.  This License gives no
 *     permission to license the work in any other way, but it does not
 *     invalidate such permission if you have separately received it.
 *
 *     d) If the work has interactive user interfaces, each must display
 *     Appropriate Legal Notices; however, if the Program has interactive
 *     interfaces that do not display Appropriate Legal Notices, your
 *     work need not make them do so.
 *
 *   A compilation of a covered work with other separate and independent
 * works, which are not by their nature extensions of the covered work,
 * and which are not combined with it such as to form a larger program,
 * in or on a volume of a storage or distribution medium, is called an
 * "aggregate" if the compilation and its resulting copyright are not
 * used to limit the access or legal rights of the compilation's users
 * beyond what the individual works permit.  Inclusion of a covered work
 * in an aggregate does not cause this License to apply to the other
 * parts of the aggregate.
 *
 *   6. Conveying Non-Source Forms.
 *
 *   You may convey a covered work in object code form under the terms
 * of sections 4 and 5, provided that you also convey the
 * machine-readable Corresponding Source under the terms of this License,
 * in one of these ways:
 *
 *     a) Convey the object code in, or embodied in, a physical product
 *     (including a physical distribution medium), accompanied by the
 *     Corresponding Source fixed on a durable physical medium
 *     customarily used for software interchange.
 *
 *     b) Convey the object code in, or embodied in, a physical product
 *     (including a physical distribution medium), accompanied by a
 *     written offer, valid for at least three years and valid for as
 *     long as you offer spare parts or customer support for that product
 *     model, to give anyone who possesses the object code either (1) a
 *     copy of the Corresponding Source for all the software in the
 *     product that is covered by this License, on a durable physical
 *     medium customarily used for software interchange, for a price no
 *     more than your reasonable cost of physically performing this
 *     conveying of source, or (2) access to copy the
 *     Corresponding Source from a network server at no charge.
 *
 *     c) Convey individual copies of the object code with a copy of the
 *     written offer to provide the Corresponding Source.  This
 *     alternative is allowed only occasionally and noncommercially, and
 *     only if you received the object code with such an offer, in accord
 *     with subsection 6b.
 *
 *     d) Convey the object code by offering access from a designated
 *     place (gratis or for a charge), and offer equivalent access to the
 *     Corresponding Source in the same way through the same place at no
 *     further charge.  You need not require recipients to copy the
 *     Corresponding Source along with the object code.  If the place to
 *     copy the object code is a network server, the Corresponding Source
 *     may be on a different server (operated by you or a third party)
 *     that supports equivalent copying facilities, provided you maintain
 *     clear directions next to the object code saying where to find the
 *     Corresponding Source.  Regardless of what server hosts the
 *     Corresponding Source, you remain obligated to ensure that it is
 *     available for as long as needed to satisfy these requirements.
 *
 *     e) Convey the object code using peer-to-peer transmission, provided
 *     you inform other peers where the object code and Corresponding
 *     Source of the work are being offered to the general public at no
 *     charge under subsection 6d.
 *
 *   A separable portion of the object code, whose source code is excluded
 * from the Corresponding Source as a System Library, need not be
 * included in conveying the object code work.
 *
 *   A "User Product" is either (1) a "consumer product", which means any
 * tangible personal property which is normally used for personal, family,
 * or household purposes, or (2) anything designed or sold for incorporation
 * into a dwelling.  In determining whether a product is a consumer product,
 * doubtful cases shall be resolved in favor of coverage.  For a particular
 * product received by a particular user, "normally used" refers to a
 * typical or common use of that class of product, regardless of the status
 * of the particular user or of the way in which the particular user
 * actually uses, or expects or is expected to use, the product.  A product
 * is a consumer product regardless of whether the product has substantial
 * commercial, industrial or non-consumer uses, unless such uses represent
 * the only significant mode of use of the product.
 *
 *   "Installation Information" for a User Product means any methods,
 * procedures, authorization keys, or other information required to install
 * and execute modified versions of a covered work in that User Product from
 * a modified version of its Corresponding Source.  The information must
 * suffice to ensure that the continued functioning of the modified object
 * code is in no case prevented or interfered with solely because
 * modification has been made.
 *
 *   If you convey an object code work under this section in, or with, or
 * specifically for use in, a User Product, and the conveying occurs as
 * part of a transaction in which the right of possession and use of the
 * User Product is transferred to the recipient in perpetuity or for a
 * fixed term (regardless of how the transaction is characterized), the
 * Corresponding Source conveyed under this section must be accompanied
 * by the Installation Information.  But this requirement does not apply
 * if neither you nor any third party retains the ability to install
 * modified object code on the User Product (for example, the work has
 * been installed in ROM).
 *
 *   The requirement to provide Installation Information does not include a
 * requirement to continue to provide support service, warranty, or updates
 * for a work that has been modified or installed by the recipient, or for
 * the User Product in which it has been modified or installed.  Access to a
 * network may be denied when the modification itself materially and
 * adversely affects the operation of the network or violates the rules and
 * protocols for communication across the network.
 *
 *   Corresponding Source conveyed, and Installation Information provided,
 * in accord with this section must be in a format that is publicly
 * documented (and with an implementation available to the public in
 * source code form), and must require no special password or key for
 * unpacking, reading or copying.
 *
 *   7. Additional Terms.
 *
 *   "Additional permissions" are terms that supplement the terms of this
 * License by making exceptions from one or more of its conditions.
 * Additional permissions that are applicable to the entire Program shall
 * be treated as though they were included in this License, to the extent
 * that they are valid under applicable law.  If additional permissions
 * apply only to part of the Program, that part may be used separately
 * under those permissions, but the entire Program remains governed by
 * this License without regard to the additional permissions.
 *
 *   When you convey a copy of a covered work, you may at your option
 * remove any additional permissions from that copy, or from any part of
 * it.  (Additional permissions may be written to require their own
 * removal in certain cases when you modify the work.)  You may place
 * additional permissions on material, added by you to a covered work,
 * for which you have or can give appropriate copyright permission.
 *
 *   Notwithstanding any other provision of this License, for material you
 * add to a covered work, you may (if authorized by the copyright holders of
 * that material) supplement the terms of this License with terms:
 *
 *     a) Disclaiming warranty or limiting liability differently from the
 *     terms of sections 15 and 16 of this License; or
 *
 *     b) Requiring preservation of specified reasonable legal notices or
 *     author attributions in that material or in the Appropriate Legal
 *     Notices displayed by works containing it; or
 *
 *     c) Prohibiting misrepresentation of the origin of that material, or
 *     requiring that modified versions of such material be marked in
 *     reasonable ways as different from the original version; or
 *
 *     d) Limiting the use for publicity purposes of names of licensors or
 *     authors of the material; or
 *
 *     e) Declining to grant rights under trademark law for use of some
 *     trade names, trademarks, or service marks; or
 *
 *     f) Requiring indemnification of licensors and authors of that
 *     material by anyone who conveys the material (or modified versions of
 *     it) with contractual assumptions of liability to the recipient, for
 *     any liability that these contractual assumptions directly impose on
 *     those licensors and authors.
 *
 *   All other non-permissive additional terms are considered "further
 * restrictions" within the meaning of section 10.  If the Program as you
 * received it, or any part of it, contains a notice stating that it is
 * governed by this License along with a term that is a further
 * restriction, you may remove that term.  If a license document contains
 * a further restriction but permits relicensing or conveying under this
 * License, you may add to a covered work material governed by the terms
 * of that license document, provided that the further restriction does
 * not survive such relicensing or conveying.
 *
 *   If you add terms to a covered work in accord with this section, you
 * must place, in the relevant source files, a statement of the
 * additional terms that apply to those files, or a notice indicating
 * where to find the applicable terms.
 *
 *   Additional terms, permissive or non-permissive, may be stated in the
 * form of a separately written license, or stated as exceptions;
 * the above requirements apply either way.
 *
 *   8. Termination.
 *
 *   You may not propagate or modify a covered work except as expressly
 * provided under this License.  Any attempt otherwise to propagate or
 * modify it is void, and will automatically terminate your rights under
 * this License (including any patent licenses granted under the third
 * paragraph of section 11).
 *
 *   However, if you cease all violation of this License, then your
 * license from a particular copyright holder is reinstated (a)
 * provisionally, unless and until the copyright holder explicitly and
 * finally terminates your license, and (b) permanently, if the copyright
 * holder fails to notify you of the violation by some reasonable means
 * prior to 60 days after the cessation.
 *
 *   Moreover, your license from a particular copyright holder is
 * reinstated permanently if the copyright holder notifies you of the
 * violation by some reasonable means, this is the first time you have
 * received notice of violation of this License (for any work) from that
 * copyright holder, and you cure the violation prior to 30 days after
 * your receipt of the notice.
 *
 *   Termination of your rights under this section does not terminate the
 * licenses of parties who have received copies or rights from you under
 * this License.  If your rights have been terminated and not permanently
 * reinstated, you do not qualify to receive new licenses for the same
 * material under section 10.
 *
 *   9. Acceptance Not Required for Having Copies.
 *
 *   You are not required to accept this License in order to receive or
 * run a copy of the Program.  Ancillary propagation of a covered work
 * occurring solely as a consequence of using peer-to-peer transmission
 * to receive a copy likewise does not require acceptance.  However,
 * nothing other than this License grants you permission to propagate or
 * modify any covered work.  These actions infringe copyright if you do
 * not accept this License.  Therefore, by modifying or propagating a
 * covered work, you indicate your acceptance of this License to do so.
 *
 *   10. Automatic Licensing of Downstream Recipients.
 *
 *   Each time you convey a covered work, the recipient automatically
 * receives a license from the original licensors, to run, modify and
 * propagate that work, subject to this License.  You are not responsible
 * for enforcing compliance by third parties with this License.
 *
 *   An "entity transaction" is a transaction transferring control of an
 * organization, or substantially all assets of one, or subdividing an
 * organization, or merging organizations.  If propagation of a covered
 * work results from an entity transaction, each party to that
 * transaction who receives a copy of the work also receives whatever
 * licenses to the work the party's predecessor in interest had or could
 * give under the previous paragraph, plus a right to possession of the
 * Corresponding Source of the work from the predecessor in interest, if
 * the predecessor has it or can get it with reasonable efforts.
 *
 *   You may not impose any further restrictions on the exercise of the
 * rights granted or affirmed under this License.  For example, you may
 * not impose a license fee, royalty, or other charge for exercise of
 * rights granted under this License, and you may not initiate litigation
 * (including a cross-claim or counterclaim in a lawsuit) alleging that
 * any patent claim is infringed by making, using, selling, offering for
 * sale, or importing the Program or any portion of it.
 *
 *   11. Patents.
 *
 *   A "contributor" is a copyright holder who authorizes use under this
 * License of the Program or a work on which the Program is based.  The
 * work thus licensed is called the contributor's "contributor version".
 *
 *   A contributor's "essential patent claims" are all patent claims
 * owned or controlled by the contributor, whether already acquired or
 * hereafter acquired, that would be infringed by some manner, permitted
 * by this License, of making, using, or selling its contributor version,
 * but do not include claims that would be infringed only as a
 * consequence of further modification of the contributor version.  For
 * purposes of this definition, "control" includes the right to grant
 * patent sublicenses in a manner consistent with the requirements of
 * this License.
 *
 *   Each contributor grants you a non-exclusive, worldwide, royalty-free
 * patent license under the contributor's essential patent claims, to
 * make, use, sell, offer for sale, import and otherwise run, modify and
 * propagate the contents of its contributor version.
 *
 *   In the following three paragraphs, a "patent license" is any express
 * agreement or commitment, however denominated, not to enforce a patent
 * (such as an express permission to practice a patent or covenant not to
 * sue for patent infringement).  To "grant" such a patent license to a
 * party means to make such an agreement or commitment not to enforce a
 * patent against the party.
 *
 *   If you convey a covered work, knowingly relying on a patent license,
 * and the Corresponding Source of the work is not available for anyone
 * to copy, free of charge and under the terms of this License, through a
 * publicly available network server or other readily accessible means,
 * then you must either (1) cause the Corresponding Source to be so
 * available, or (2) arrange to deprive yourself of the benefit of the
 * patent license for this particular work, or (3) arrange, in a manner
 * consistent with the requirements of this License, to extend the patent
 * license to downstream recipients.  "Knowingly relying" means you have
 * actual knowledge that, but for the patent license, your conveying the
 * covered work in a country, or your recipient's use of the covered work
 * in a country, would infringe one or more identifiable patents in that
 * country that you have reason to believe are valid.
 *
 *   If, pursuant to or in connection with a single transaction or
 * arrangement, you convey, or propagate by procuring conveyance of, a
 * covered work, and grant a patent license to some of the parties
 * receiving the covered work authorizing them to use, propagate, modify
 * or convey a specific copy of the covered work, then the patent license
 * you grant is automatically extended to all recipients of the covered
 * work and works based on it.
 *
 *   A patent license is "discriminatory" if it does not include within
 * the scope of its coverage, prohibits the exercise of, or is
 * conditioned on the non-exercise of one or more of the rights that are
 * specifically granted under this License.  You may not convey a covered
 * work if you are a party to an arrangement with a third party that is
 * in the business of distributing software, under which you make payment
 * to the third party based on the extent of your activity of conveying
 * the work, and under which the third party grants, to any of the
 * parties who would receive the covered work from you, a discriminatory
 * patent license (a) in connection with copies of the covered work
 * conveyed by you (or copies made from those copies), or (b) primarily
 * for and in connection with specific products or compilations that
 * contain the covered work, unless you entered into that arrangement,
 * or that patent license was granted, prior to 28 March 2007.
 *
 *   Nothing in this License shall be construed as excluding or limiting
 * any implied license or other defenses to infringement that may
 * otherwise be available to you under applicable patent law.
 *
 *   12. No Surrender of Others' Freedom.
 *
 *   If conditions are imposed on you (whether by court order, agreement or
 * otherwise) that contradict the conditions of this License, they do not
 * excuse you from the conditions of this License.  If you cannot convey a
 * covered work so as to satisfy simultaneously your obligations under this
 * License and any other pertinent obligations, then as a consequence you may
 * not convey it at all.  For example, if you agree to terms that obligate you
 * to collect a royalty for further conveying from those to whom you convey
 * the Program, the only way you could satisfy both those terms and this
 * License would be to refrain entirely from conveying the Program.
 *
 *   13. Use with the GNU Affero General Public License.
 *
 *   Notwithstanding any other provision of this License, you have
 * permission to link or combine any covered work with a work licensed
 * under version 3 of the GNU Affero General Public License into a single
 * combined work, and to convey the resulting work.  The terms of this
 * License will continue to apply to the part which is the covered work,
 * but the special requirements of the GNU Affero General Public License,
 * section 13, concerning interaction through a network will apply to the
 * combination as such.
 *
 *   14. Revised Versions of this License.
 *
 *   The Free Software Foundation may publish revised and/or new versions of
 * the GNU General Public License from time to time.  Such new versions will
 * be similar in spirit to the present version, but may differ in detail to
 * address new problems or concerns.
 *
 *   Each version is given a distinguishing version number.  If the
 * Program specifies that a certain numbered version of the GNU General
 * Public License "or any later version" applies to it, you have the
 * option of following the terms and conditions either of that numbered
 * version or of any later version published by the Free Software
 * Foundation.  If the Program does not specify a version number of the
 * GNU General Public License, you may choose any version ever published
 * by the Free Software Foundation.
 *
 *   If the Program specifies that a proxy can decide which future
 * versions of the GNU General Public License can be used, that proxy's
 * public statement of acceptance of a version permanently authorizes you
 * to choose that version for the Program.
 *
 *   Later license versions may give you additional or different
 * permissions.  However, no additional obligations are imposed on any
 * author or copyright holder as a result of your choosing to follow a
 * later version.
 *
 *   15. Disclaimer of Warranty.
 *
 *   THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
 * APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
 * HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY
 * OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM
 * IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF
 * ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
 *
 *   16. Limitation of Liability.
 *
 *   IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
 * WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS
 * THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
 * GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
 * USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF
 * DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD
 * PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
 * EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGES.
 *
 *   17. Interpretation of Sections 15 and 16.
 *
 *   If the disclaimer of warranty and limitation of liability provided
 * above cannot be given local legal effect according to their terms,
 * reviewing courts shall apply local law that most closely approximates
 * an absolute waiver of all civil liability in connection with the
 * Program, unless a warranty or assumption of liability accompanies a
 * copy of the Program in return for a fee.
 *
 *                      END OF TERMS AND CONDITIONS
 *
 *             How to Apply These Terms to Your New Programs
 *
 *   If you develop a new program, and you want it to be of the greatest
 * possible use to the public, the best way to achieve this is to make it
 * free software which everyone can redistribute and change under these terms.
 *
 *   To do so, attach the following notices to the program.  It is safest
 * to attach them to the start of each source file to most effectively
 * state the exclusion of warranty; and each file should have at least
 * the "copyright" line and a pointer to where the full notice is found.
 *
 *     <one line to give the program's name and a brief idea of what it does.>
 *     Copyright (C) <year>  <name of author>
 *
 *     This program is free software: you can redistribute it and/or modify
 *     it under the terms of the GNU General Public License as published by
 *     the Free Software Foundation, either version 3 of the License, or
 *     (at your option) any later version.
 *
 *     This program is distributed in the hope that it will be useful,
 *     but WITHOUT ANY WARRANTY; without even the implied warranty of
 *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *     GNU General Public License for more details.
 *
 *     You should have received a copy of the GNU General Public License
 *     along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * Also add information on how to contact you by electronic and paper mail.
 *
 *   If the program does terminal interaction, make it output a short
 * notice like this when it starts in an interactive mode:
 *
 *     <program>  Copyright (C) <year>  <name of author>
 *     This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
 *     This is free software, and you are welcome to redistribute it
 *     under certain conditions; type `show c' for details.
 *
 * The hypothetical commands `show w' and `show c' should show the appropriate
 * parts of the General Public License.  Of course, your program's commands
 * might be different; for a GUI interface, you would use an "about box".
 *
 *   You should also get your employer (if you work as a programmer) or school,
 * if any, to sign a "copyright disclaimer" for the program, if necessary.
 * For more information on this, and how to apply and follow the GNU GPL, see
 * <https://www.gnu.org/licenses/>.
 *
 *   The GNU General Public License does not permit incorporating your program
 * into proprietary programs.  If your program is a subroutine library, you
 * may consider it more useful to permit linking proprietary applications with
 * the library.  If this is what you want to do, use the GNU Lesser General
 * Public License instead of this License.  But first, please read
 * <https://www.gnu.org/licenses/why-not-lgpl.html>.
 */
